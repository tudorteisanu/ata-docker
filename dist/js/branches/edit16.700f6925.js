(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["branches/edit16"],{"89e1":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fill-height d-flex justify-center"},[s("div",{staticClass:"content full-width"},[s("div",{staticClass:"text-h5 mb-sm-4 pa-4 pa-sm-0 primary--text"},[s("span",[t._v(" "+t._s(t.$t("email-templates.form.header.create"))+" ")])]),s("v-card",{staticClass:"elevation-4 pa-4",attrs:{width:"100%"}},[s("v-card-text",{staticClass:"pa-0"},[s("v-form",{ref:"form",staticClass:"d-flex flex-column justify-center",attrs:{"lazy-validation":""}},[s("v-row",{staticClass:"pt-6 mx-2"},[s("v-col",{attrs:{cols:"12"}},[s("div",[s("div",[s("span",{staticClass:"text-h4"},[t._v(" "+t._s(t.$t("email-templates.headers.ru-version"))+" ")])]),s("div",[s("v-text-field",{attrs:{label:t.$t("email-templates.form.fields.subject"),"hide-details":""},model:{value:t.subjects.ru,callback:function(e){t.$set(t.subjects,"ru",e)},expression:"subjects.ru"}})],1),s("div",{staticClass:"editor mt-3"},[s("textarea",{ref:"editor",staticClass:"full-width",attrs:{id:"editor"}})])]),s("div",{staticClass:"mt-3"},[s("div",[s("span",{staticClass:"text-h4"},[t._v(" "+t._s(t.$t("email-templates.headers.ro-version"))+" ")])]),s("div",[s("v-text-field",{attrs:{label:t.$t("email-templates.form.fields.subject"),"hide-details":""},model:{value:t.subjects.ro,callback:function(e){t.$set(t.subjects,"ro",e)},expression:"subjects.ro"}})],1),s("div",{staticClass:"editor mt-3"},[s("textarea",{ref:"editor2",staticClass:"full-width",attrs:{id:"editor2"}})])]),s("div",{staticClass:"mt-3"},[s("div",[s("span",{staticClass:"text-h4"},[t._v(" "+t._s(t.$t("email-templates.headers.en-version"))+" ")])]),s("div",[s("v-text-field",{attrs:{label:t.$t("email-templates.form.fields.subject"),"hide-details":""},model:{value:t.subjects.en,callback:function(e){t.$set(t.subjects,"en",e)},expression:"subjects.en"}})],1),s("div",{staticClass:"editor mt-3"},[s("textarea",{ref:"editor3",staticClass:"full-width",attrs:{id:"editor3"}})])])])],1),s("v-row",{staticClass:"actions"},[s("v-col",{staticClass:"pa-2 d-flex align-center"},[s("div",[s("span",{staticClass:"caption"},[t._v(" "+t._s(t.$t("global-validation.email_template_fields_required"))+" ")]),s("div",t._l(t.editorRequirements,(function(e,a){return s("span",{key:a},[t._v(' "'+t._s(e)+'" ')])})),0)]),s("v-spacer"),s("v-btn",{attrs:{link:"",to:"/email-template",text:""}},[t._v(" "+t._s(t.$t("global-buttons.cancel"))+" ")]),s("v-btn",{staticClass:"ml-2",attrs:{color:"primary",depressed:""},on:{click:t.submit}},[t._v(" "+t._s(t.$t("global-buttons.confirm"))+" ")])],1)],1)],1)],1)],1)],1)])},i=[],r=(s("caad"),s("a9e3"),s("2532"),s("b85c")),n=s("5530"),o=(s("96cf"),s("1da1")),c=s("2b0e"),l=s("366c"),d=s("0613"),u=s("5267"),m=s.n(u),f=s("13a3"),h=s("a1dd"),v=s.n(h),b=s("982c"),p=s.n(b),C=(s("831f"),c["a"].extend({name:"Edit",data:function(){return{kothingConfig:f,editor:"",editor2:"",editor3:"",subjects:{},editorRequirements:[],errorMessages:{}}},beforeRouteEnter:function(t,e,s){return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].emailTemplates().getForEdit(Number(t.params.id));case 3:return a=e.sent,e.next=6,l["a"].emailTemplates().getVariables();case 6:i=e.sent,s((function(t){t.editorRequirements=i,t.item=a})),e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](0),e.next=14,d["a"].dispatch("alert/showError",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},mounted:function(){this.createEditor(),this.setEditorsContent()},methods:{submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.contains(t.editor.getContents(),t.editorRequirements)&&t.contains(t.editor2.getContents(),t.editorRequirements)&&t.contains(t.editor3.getContents(),t.editorRequirements))){e.next=11;break}return t.setNewEditorContent(),e.next=5,l["a"].emailTemplates().edit(Number(t.$route.params.id),t.item);case 5:return e.next=7,t.$router.go(-1);case 7:return e.next=9,t.$store.dispatch("alert/showSuccess",t.$t("global-alert.successful_edit"));case 9:e.next=13;break;case 11:return e.next=13,t.$store.dispatch("alert/showError","Did not pass validation");case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](0),e.t0.hasOwnProperty("errors")&&(t.errorMessages=e.t0.errors,setTimeout((function(){t.errorMessages={}}),2e3)),e.next=20,t.$store.dispatch("alert/showError",e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))()},createEditor:function(){var t=this.$store.getters["localization/getCurrent"];this.editor=m.a.create("editor",Object(n["a"])({plugins:v.a,lang:p.a[t]},this.kothingConfig)),this.editor2=m.a.create("editor2",Object(n["a"])({plugins:v.a,lang:p.a[t]},this.kothingConfig)),this.editor3=m.a.create("editor3",Object(n["a"])({plugins:v.a,lang:p.a[t]},this.kothingConfig))},contains:function(t,e){var s,a=Object(r["a"])(e);try{for(a.s();!(s=a.n()).done;){var i=s.value;if(!t.includes(i))return!1}}catch(n){a.e(n)}finally{a.f()}return!0},setEditorsContent:function(){this.editor.setContents(this.item.content_ru),this.editor2.setContents(this.item.content_ro),this.editor3.setContents(this.item.content_en),this.subjects.en=this.item.subject_en,this.subjects.ru=this.item.subject_ru,this.subjects.ro=this.item.subject_ro},setNewEditorContent:function(){this.item.content_ru=this.editor.getContents(),this.item.content_ro=this.editor2.getContents(),this.item.content_en=this.editor3.getContents()}}})),g=C,x=(s("d1b6"),s("2877")),_=s("6544"),j=s.n(_),w=s("8336"),$=s("b0af"),k=s("99d9"),E=s("62ad"),R=s("4bd4"),y=s("0fd9"),V=s("2fa4"),O=s("8654"),q=Object(x["a"])(g,a,i,!1,null,"4c9def88",null);e["default"]=q.exports;j()(q,{VBtn:w["a"],VCard:$["a"],VCardText:k["c"],VCol:E["a"],VForm:R["a"],VRow:y["a"],VSpacer:V["a"],VTextField:O["a"]})},"9d26":function(t,e,s){"use strict";var a=s("132d");e["a"]=a["a"]},c42c:function(t,e,s){},d1b6:function(t,e,s){"use strict";s("c42c")}}]);
//# sourceMappingURL=edit16.700f6925.js.map