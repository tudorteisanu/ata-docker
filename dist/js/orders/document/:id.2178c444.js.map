{"version":3,"sources":["webpack:///./node_modules/kothing-editor/lib/plugins/dialog/math.js","webpack:///./node_modules/kothing-editor/lib/plugins/modules/fileManager.js","webpack:///./node_modules/kothing-editor/lib/lib/constructor.js","webpack:///./node_modules/kothing-editor/lib/plugins/fileBrowser/imageGallery.js","webpack:///./src/assets/images/logo_1.jpg","webpack:///./node_modules/kothing-editor/lib/plugins/modules/resizing.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/textStyle.js","webpack:///./node_modules/kothing-editor/lib/plugins/modules/component.js","webpack:///./node_modules/kothing-editor/lib/lib/history.js","webpack:///./node_modules/kothing-editor/lib/lib/core.js","webpack:///./src/modules/orders/views/orderTemplate.vue?af48","webpack:///./src/modules/orders/views/orderTemplate.vue","webpack:///./src/modules/orders/views/orderTemplate.vue?024e","webpack:///./src/modules/orders/views/orderTemplate.vue?eae6","webpack:///./node_modules/kothing-editor/lib/editor.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/lineHeight.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/fontSize.js","webpack:///./src/assets/images/logo_2.jpg","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/template.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/table.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/formatBlock.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/font.js","webpack:///./node_modules/kothing-editor/lib/plugins/modules/notice.js","webpack:///./node_modules/kothing-editor/lib/plugins/dialog/audio.js","webpack:///./node_modules/kothing-editor/lib/plugins/dialog/link.js","webpack:///./node_modules/kothing-editor/lib/plugins/dialog/image.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/align.js","webpack:///../../../src/components/VIcon/index.ts","webpack:///./node_modules/kothing-editor/lib/plugins/index.js","webpack:///../../../src/components/VGrid/VContainer.ts","webpack:///./node_modules/kothing-editor/lib/plugins/modules/dialog.js","webpack:///./node_modules/kothing-editor/lib/plugins/dialog/video.js","webpack:///./node_modules/kothing-editor/lib/lib/context.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/fontColor.js","webpack:///./node_modules/kothing-editor/lib/plugins/modules/colorPicker.js","webpack:///./src/modules/orders/views/orderTemplate.vue?f69a","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/paragraphStyle.js","webpack:///../../../src/components/VChip/VChip.ts","webpack:///./src/assets/images/aaij-print-template-header.png","webpack:///./node_modules/kothing-editor/lib/plugins/modules/anchor.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/hiliteColor.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/horizontalRule.js","webpack:///./node_modules/kothing-editor/lib/plugins/modules/fileBrowser.js","webpack:///./node_modules/kothing-editor/lib/plugins/command/blockquote.js","webpack:///../../../src/components/VGrid/grid.ts","webpack:///./node_modules/kothing-editor/lib/lib/util.js","webpack:///./node_modules/kothing-editor/lib/plugins/modules/selectMenu.js","webpack:///./node_modules/kothing-editor/lib/plugins/submenu/list.js","webpack:///./node_modules/kothing-editor/lib/assets/defaultIcons.js","webpack:///./node_modules/kothing-editor/lib/lang/en.js"],"names":["Object","defineProperty","exports","value","default","_dialog","_interopRequireDefault","obj","__esModule","_default","name","display","add","core","addModule","context","math","focusElement","previewElement","fontSizeElement","defaultFontSize","_mathExp","math_dialog","this","setDialog","modal","querySelector","addEventListener","_renderMathExp","bind","e","fontSize","target","style","math_controller","setController_MathButton","mathController","submit","onClick_mathController","dialog","appendChild","element","relative","lang","util","createElement","options","mathFontSize","className","f","html","dialogBox","close","icons","cancel","mathBox","title","inputLabel","fontSizeLabel","i","len","length","text","previewLabel","submitButton","innerHTML","math_btn","edit","controller","delete","remove","open","plugins","call","currentControllerName","managedTags","method","getAttribute","katex","dom","_d","createRange","createContextualFragment","_renderer","HTMLDecoder","exp","src","renderToString","contextMath","showLoading","preventDefault","stopPropagation","submitAction","trim","mathExp","katexEl","setAttribute","HTMLEncoder","updateModal","containerEl","getParentElement","parentNode","replaceChild","setRange","selectedFormats","getSelectedElements","oFormat","nodeName","insertNode","empty","createTextNode","zeroWidthSpace","insertBefore","nextSibling","history","push","closeLoading","active","controllerArray","indexOf","call_controller","controllersOff","on","update","init","mathTag","mathBtn","setControllerPosition","left","top","controllersOn","command","test","removeItem","focus","_typeof","Symbol","iterator","constructor","prototype","global","factory","module","document","w","Error","window","noGlobal","fileManager","_xmlHttp","_checkMediaComponent","tag","parentElement","upload","uploadUrl","uploadHeader","formData","callBack","errorCallBack","filePlugin","xmlHttp","getXMLHttpRequest","onreadystatechange","_callBackUpload","_w","keys","key","setRequestHeader","send","readyState","status","message","res","responseText","JSON","parse","err","errorMessage","functions","noticeOpen","checkInfo","pluginName","tagNames","uploadEventHandler","modifyHandler","resizing","tags","concat","slice","wysiwyg","getElementsByTagName","fileManagerPlugin","infoList","_infoList","setFileInfo","setInfo","_componentsInfoReset","_i","_len","info","infoUpdate","_loop","_info","_i2","_len2","filter","t","index","toString","_ret","_resize_plugin","currentTags","infoIndex","_i3","_len3","_i4","_len4","isMediaComponent","_infoIndex","removeAttribute","dataIndex","_i5","splice","file","plguin","state","split","pop","size","_componentsInfoInit","destroy","select","scrollIntoView","setTimeout","naturalWidth","naturalHeight","container","cover","_module_getSizeX","h","_module_getSizeY","width","onModifyMode","applySize","_uploadFileLength","deleteInfo","resetInfo","KothingEditor_MODULES","enumerable","writable","configurable","_defaultIcons","_en","_util","_default2","doc","_initOptions","top_div","rtl","id","tool_bar","_createToolBar","toolbarItem","visibility","pluginCallButtons","_checkKatexMath","arrow","sticky_dummy","editor_div","initElements","_initElements","bottomBar","wysiwyg_div","wysiwygFrame","placeholder_span","placeholder","textarea","codeView","resizing_bar","resizingBar","navigation","char_wrapper","charWrapper","char_counter","charCounter","loading_box","line_breaker","line_break","line_breaker_t","line_breaker_b","cloneNode","resize_back","toolbarContainer","_checkCodeMirror","constructed","toolBar","menuTray","editorArea","wysiwygArea","codeArea","loading","lineBreaker","lineBreaker_t","lineBreaker_b","resizeBack","stickyDummy","_responsiveButtons","responsiveButtons","codeMirror","cmOptions","mode","htmlMode","lineNumbers","lineWrapping","reduce","option","hasOwn","height","viewportMargin","Infinity","cm","fromTextArea","wrapper","cssText","codeMirrorEditor","katexOptions","throwOnError","_setOptions","mergeOptions","originOptions","originElement","el","isNewToolbarContainer","isNewToolbar","toolbar","removeChild","topArea","code","addClass","removeClass","callButtons","topDiv","toolBarArrow","_editorStyles","toolbarWidth","wysiwygDiv","iframe","allowFullscreen","frameBorder","frame","_editableClass","editor","overflow","resizinIcon","poweredBy","charCounterLabel","charLabel","textContent","maxCharCount","char_max","innerText","defaultTag","textTags","bold","underline","italic","strike","sub","sup","_new","_textTagsMap","strong","toLowerCase","b","u","ins","em","del","s","historyStackDelayTime","whitelist","_defaultTagsWhitelist","_editorTagsWhitelist","_setWhitelist","addTagsWhitelist","tagsBlacklist","pasteTagsWhitelist","pasteTagsBlacklist","attributesWhitelist","_printClass","isNumber","stickyToolbar","undefined","getNumber","fullScreenOffset","fullPage","iframeCSSFileName","previewTemplate","printTemplate","position","popupDisplay","showPathLabel","charCounterType","clientWidth","minWidth","maxWidth","clientHeight","minHeight","maxHeight","defaultStyle","font","formats","colorList","lineHeights","paragraphStyles","textStyles","fontSizeUnit","imageResizing","imageHeightShow","imageWidth","imageHeight","imageSizeOnlyPercentage","_imageSizeUnit","imageRotation","imageFileInput","imageUrlInput","imageUploadHeader","imageUploadUrl","imageUploadSizeLimit","imageMultipleFile","imageAccept","imageGalleryUrl","imageGalleryHeader","videoResizing","videoHeightShow","videoRatioShow","videoWidth","videoHeight","videoSizeOnlyPercentage","_videoSizeUnit","videoRotation","videoRatio","videoRatioList","youtubeQuery","replace","videoFileInput","videoUrlInput","videoUploadHeader","videoUploadUrl","videoUploadSizeLimit","videoMultipleFile","videoTagAttrs","videoIframeAttrs","videoAccept","audioWidth","audioHeight","audioFileInput","audioUrlInput","audioUploadHeader","audioUploadUrl","audioUploadSizeLimit","audioMultipleFile","audioTagAttrs","audioAccept","tableCellControllerPosition","linkProtocol","linkRel","Array","isArray","linkRelDefault","tabDisable","shortcutsDisable","shortcutsHint","callBackSave","templates","mediaAutoSelect","reverse","_setDefaultOptionStyle","blacklist","join","_defaultButtons","cmd","isOSX_IOS","addShift","indentKey","subscript","superscript","removeFormat","erase","indent","outdent","fullScreen","expansion","showBlocks","show_blocks","code_view","undo","redo","preview","print","save","blockquote","tag_blockquote","arrow_down","formatBlock","format_block","font_size","fontColor","font_color","hiliteColor","highlight_color","align","align_right","align_left","list","list_number","horizontalRule","horizontal_rule","table","lineHeight","line_height","template","paragraphStyle","paragraph_style","textStyle","text_style","link","image","video","audio","imageGallery","image_gallery","_createModuleGroup","oDiv","oUl","div","ul","_createButton","buttonClass","dataCommand","dataDisplay","_disabled","_icons","oLi","oButton","li","button","_plugins","separator_vertical","buttonTray","stringify","defaultToolbarItem","p","pluginsValues","map","moduleElement","buttonElement","vertical","moreLayer","buttonGroupLoop","more","moreContainer","moreCommand","buttonGroup","moreButton","j","substr","float","matched","match","custom","firstElementChild","sv","enterDiv","children","_sv","lastElementChild","unshift","tool_cover","_fileBrowser","url","header","listClass","itemTemplateHandler","drawItems","selectorHandler","setImage","columnSize","fileBrowser","item","srcName","alt","callPlugin","_altText","create_image","_origin_w","_origin_h","_resizeClientX","_resizeClientY","_resize_w","_resize_h","_rotateVertical","_resize_direction","_move_path","_isChange","alignIcons","basic","align_justify","right","center","align_center","resize_div_container","setController_resize","resizeContainer","resizeDiv","resizeDot","resizeDisplay","resize_button","setController_button","resizeButton","resize_handles","resizeHandles","querySelectorAll","resizeButtonGroup","rotationButtons","percentageButtons","alignMenu","alignMenuList","alignButton","autoSizeButton","captionButton","onMouseDown_resize_handle","onClick_resizeButton","resize_container","resize100","resize75","resize50","auto_size","autoSize","rotate_left","rotateLeft","rotate_right","rotateRight","mirror_horizontal","mirrorHorizontal","mirror_vertical","mirrorVertical","caption","revert","revertButton","modify","contextPlugin","_element","_cover","_container","paddingBottom","_module_setModifyInputSize","pluginObj","percentageRotation","_onlyPercentage","proportion","checked","_proportionChecked","x","_defaultSizeX","inputX","setInputSize","y","_defaultSizeY","inputY","disabled","setRatio","_module_setInputSize","xy","_ratio","xUnit","sizeUnit","yUnit","dec","_ratioY","_ratioX","_module_setRatio","xValue","yValue","_module_sizeRevert","_module_saveCurrentSize","_videoRatio","call_controller_resize","targetElement","plugin","contextResizing","offset","getOffset","isVertical","Math","abs","offsetHeight","offsetWidth","l","scrollLeft","isComponent","displayX","displayY","changeTxt","_resizing","resizeDotShow","_resizeDotHide","rotations","_rotation","alignList","changeElement","pButtons","_captionShow","getChildElement","_captionChecked","addOffset","offsetLeft","offsetTop","setDisabledButtons","resizingDisabledButtons","originSize","_closeAlignMenu","openAlignMenu","removeDocEvent","addDocEvent","currentContext","contextEl","currentModule","resetTransform","setAutoSize","selectComponent","percentY","percentage","setPercentSize","r","_setTransForm","slope","deg","setTransformSize","alignValue","setAlign","openModify","captionCheckEl","update_image","captionText","_caption","current","nodeType","setOriginSize","transform","transformOrigin","setSize","transOrigin","offsetW","offsetH","cancelPercentAttr","transW","transH","setCaptionPosition","translate","figcaption","marginTop","direction","classList","clientX","clientY","resizeBackground","resizing_element_bind","resizing_element","closureFunc_bind","type","keyCode","change","cancel_controller_resize","resultW","_element_w","resultH","_element_h","wh","round","padding","limit","_styleList","listDiv","setSubmenu","listUl","pickup","initMenuTarget","attrs","_class","defaultList","menu","class","translucent","shadow","styleList","btn","data","textStyleContext","styleToolbarItem","selectionNode","getSelectionNode","node","v","isFormatElement","hasClass","tagName","firstChild","checkStyles","classes","newNode","removeNodes","nodeChange","submenuOff","component","set_container","set_cover","create_caption","delayTime","tool","pushDelay","stackIndex","stack","setContentsFromStack","contents","getNodeFromPath","path","_checkComponents","_setCharCount","_resourcesStateChange","pushStack","getContents","range","_variable","_range","getNodePath","startContainer","startOffset","endContainer","endOffset","delay","time","clearTimeout","go","reset","ignoreChangeEvent","isChanged","_resetCachingButton","_destroy","_constructor","_context","_history","_notice","ownerDocument","defaultView","_parser","DOMParser","_wd","_ww","_shadowRoot","_shadowRootControllerEventTarget","wwComputedStyle","getComputedStyle","notice","initPlugins","_targetPlugins","effectNode","submenu","_submenuName","_bindedSubmenuOff","_bindedContainerOff","submenuActiveButton","containerActiveButton","currentControllerTarget","currentFileComponentInfo","codeViewDisabledButtons","_moreLayerActiveButton","_htmlCheckWhitelistRegExp","_disallowedTextTagsRegExp","editorTagsWhitelistRegExp","pasteTagsWhitelistRegExp","hasFocus","isDisabled","_attributesWhitelistRegExp","_attributesTagsWhitelist","_bindControllersOff","_isInline","_isBalloon","_isBalloonAlways","_inlineToolbarAttr","isShow","_notHideToolbar","_sticky","_antiBlur","lineBreakerButton","activePlugins","managedTagsInfo","_charTypeHTML","_fileInfoPluginsCheck","_fileInfoPluginsReset","_fileManager","regExp","queryString","pluginRegExp","pluginMap","commandMap","_styleCommandMap","_defaultCommand","isCodeView","isFullScreen","innerHeight_fullScreen","resizeClientY","tabSize","codeIndent","minResizingSize","currentNodes","currentNodesMap","_selectionNode","_originCssText","_bodyOverflow","editorAreaOriginCssText","_wysiwygOriginCssText","_codeOriginCssText","_fullScreenAttrs","sticky","balloon","inline","_lineBreakComp","_lineBreakDir","callBackFunction","_target","moduleArray","moduleName","getGlobalScrollOffset","scrollTop","host","submenuOn","submenuName","_setMenuPosition","containerOn","containerName","_containerName","containerOff","toolbarW","toolbarOffset","event","_getEditorOffsets","menuW","elementW","rtlW","rtlL","overLeft","offsetEl","offsetParent","bt","toolbarTop","menuHeight","menuHeight_bottom","innerHeight","menuTop","insTop","menuHeight_top","arg","arguments","getFileComponent","showController","contains","referEl","topMargin","controllerW","referElW","allow","overSize","_overSize","execCommand","showDefaultUI","nativeFocus","_editorRange","getRange","isWysiwygDiv","currentNode","commonAncestorContainer","format","br","_applyTagEffects","_toggleToolbarBalloon","focusEdge","focusEl","fileComponentInfo","childNodes","blur","startCon","startOff","endCon","endOff","setStart","setEnd","error","console","warn","selection","getSelection","removeAllRanges","addRange","removeRange","OUTDENT","INDENT","_createDefaultRange","collapsed","isCollapsed","focusNode","rangeCount","getRangeAt","sc","anchorNode","ec","so","anchorOffset","eo","focusOffset","compareValue","compareElements","rightDir","ancestor","result","getRange_addLine","_selectionVoid","op","nextElementSibling","extentNode","comm","_resetRangeToTextNode","tempCon","tempOffset","tempChild","lastChild","isBreak","onlyBreak","getFormatElement","getRangeFormatElement","isCell","emptyText","_onlyBreak","previousElementSibling","previousSibling","_format","_emptyText","validation","commonCon","lineNodes","getListChildren","isRangeFormatElement","startLine","endLine","startIdx","endIdx","onlyTable","isTable","startRangeEl","endRangeEl","isListCell","line","sameRange","getSelectedElementsAndComponents","removeDuplicate","myComponent","selectedLines","isEdgePoint","dir","nodeValue","_isEdgeFormat","appendFormatTag","formatNode","currentFormatEl","oFormatName","isFreeFormatElement","copyTagAttributes","insertComponent","notHistoryPush","checkCharCount","notSelect","removeNode","oNode","formatEl","depthFormat","splitElement","getElementDepth","onlyZeroWidthSpace","getEdgeChildNodes","isUneditableComponent","_setComponentLineBreaker","componentTop","wScroll","t_style","b_style","isList","afterNode","freeFormat","getFreeFormatElement","isFormats","isMedia","formatRange","originAfter","splitText","c","isSameContainer","removedTag","prevContainer","sameParent","oldParent","_r","rangeCon","fNode","cItem","isEmptyLine","_setIntoFreeFormat","previous","next","previousText","nextText","newRange","zeroWidth","_isIgnoreNodeChange","oNodeChildren","lastONode","beforeNode","getListChildNodes","startIndex","getArrayIndex","endIndex","startNode","endNode","getArrayItem","child","removeItemAllParents","substringData","rc","applyRangeFormatElement","rangeElement","rangeLines","linesLoop","nested","fEl","lEl","standTag","beforeTag","pElement","last","_line","originParent","depth","before","nextLine","nextList","_nested","parentDepth","listParent","lineArr","removeItems","parent","origin","cc","_list","_edge","detachRangeFormatElement","cLen","removeArray","mergeSameTags","mergeNestedTags","splitRange","edge","newRangeElement","firstNode","lastNode","rangeEl","newList","insertedNew","moveComplete","appendNode","insNode","sibling","originNode","insChildren","first","_notTextNode","originNext","detachRange","detachNestedList","fChildren","lineIndex","insNext","inner","innerChildren","copyFormatAttributes","rangeParent","rangeRight","removeEmptyNode","childEdge","detachList","o","lastIndex","rangeArr","listFirst","listLast","passComponent","_edge2","styleArray","removeNodeArray","strictRemove","isRemoveNode","isRemoveFormat","isNonEditable","wRegExp","RegExp","newNodeName","sNode","checkCnt","checkAttrs","ckeckClasses","_i6","classReg","styleCheck","classCheck","start","end","styleRegExp","classRegExp","removeNodeRegExp","_s","_i7","_i8","wBoolean","Boolean","_removeCheck","checkNode","vNode","tagRemove","originStyle","originClasses","oneLine","endLength","isRemoveAnchor","arr","n","_isMaintainedNode","_isSizeNode","isSizeNode","_getMaintainedNode","_util_getMaintainedNode","_util_isMaintainedNode","_nodeChange_oneLine","_setCommonListStyle","_nodeChange_endLine","_newRange","_i9","_nodeChange_middleLine","_nodeChange_startLine","childStyle","elStyle","fontWeight","color","_stripRemoveNode","_isRemove","anchor","newInnerNode","parentCon","z","sameTag","pCurrent","nNodeArray","pNode","isSameNode","startPass","endPass","checkCss","recursionFunc","_i10","_len5","coverNode","prevNode","textNode","a","m","prevAnchorNode","childNode","_anchors","_childNode2","aChildren","_a","aLen","ancestorAnchorNode","_textNode","anchors","afterAnchorNode","_childNode","_i11","textNode_s","textNode_e","rChildren","_i12","endConReset","newStartOffset","startPath","mergeEndCon","newEndOffset","endPath","newOffsets","_endContainer","passNode","cloneChild","isTopNode","_a2","_childNode3","_i13","offsets","tempNode","newCssText","newClass","noneChange","_i14","_len6","_child","_endPath","_i15","_i16","_a3","_childNode4","_i17","actionCall","layer","_showToolbarBalloon","_showToolbarInline","action","commandHandler","_layer","_br","_format2","toggleCodeView","toggleFullScreen","toggleDisplayBlocks","nodesMap","margin","cells","shift","marginDir","setStyle","editInsideList","toggleClass","_setCodeDataToEditor","_hideToolbar","_setEditorDataToCodeView","scrollHeight","refresh","_checkPlaceholder","code_html","_getCodeView","parseDocument","parseFromString","headChildren","head","body","convertContentsForEditor","attributes","_i18","_len7","editableClasses","_i19","codeContents","convertHTMLForCodeView","codeValue","getAttributesToString","outerHTML","_setCodeView","_var","onScroll_window","zIndex","reduction","_iframeAutoHeight","contentsHTML","printDocument","getIframeDocument","wDoc","arrts","write","links","styles","linkHTML","_i20","_len8","isIE_Edge","documentMode","StyleMedia","contentWindow","windowObject","mimeType","_i21","_len9","setContents","convertValue","_resetComponents","setIframeContents","ctx","onlyContents","renderHTML","figcaptions","_makeLine","requireFormat","_disallowedTags","isAnchor","_HTMLConvertor","textArray","tLen","_allowHTMLComments","_tagConvertor","_deleteDisallowedTags","_cleanTags","rowLevelCheck","tAttr","cleanHTML","_consistencyCheckOfHTML","query","initMethod","textCompList","domTree","_i22","_len10","isTextStyleElement","_i23","_len11","htmlRemoveWhiteSpace","createTagsWhitelist","_i24","_len12","returnHTML","brReg","isFormat","indentSize","lineBR","nodeRegTest","tagIndent","elementRegTest","elementIndent","XMLSerializer","serializeToString","listener","useCapture","removeEventListener","_charCount","inputText","countType","nextCharCount","getCharLength","over","count","getCharCount","slicePosition","_callCounterBlink","content","getByteLength","getDoc","setValue","getValue","_init","reload","_initHTML","ShadowRoot","shadowRoot","disallowTextTags","allowTextTags","defaultAttr","regEndStr","_attr","tagsAttr","allAttr","k","_cachingButtons","managedClass","filePluginRegExp","checkFileInfo","resetFileInfo","fileTags","_onChange_historyStack","contentDocument","_iframeAuto","_initWysiwygArea","SUB","SUP","toUpperCase","onChange","_allowedEmptyNodeList","_setDefaultFormat","formatName","fileComponent","_setOptionsInit","_getConstructed","_editorInit","_addEvent","_offStickyToolbar","onResize_window","onload","_IEisComposing","lineBreakerBind","_responsiveCurrentSize","_responsiveButtonSize","_directionKeyCode","_nonTextKeyCode","$historyIgnoreKeyCode","_onButtonsCheck","_frontZeroWidthReg","_keyCodeShortcut","65","66","83","85","73","89","90","219","221","_shortcutCommand","keyStr","classOnCheck","commandMapNodes","_cancelCaptionEdit","_buttonsEventHandler","onClick_toolbar","onMouseDown_wysiwyg","onMouseDown","tableCell","tablePlugin","_fixedCell","_shift","onTableCellMultiSelect","onClick_wysiwyg","onClick","hideToolbar","prevLi","_balloonDelay","_showToolbarBalloonDelay","rangeObj","isDirTop","rects","getClientRects","globalScroll","editorWidth","stickyTop","editorLeft","nodeOffset","bottom","noText","arrowMargin","toolbarHeight","iframeRects","_setToolbarOffset","editorParent","absoluteLeft","overRight","resetTop","space","_getPageBottomSpace","documentElement","floor","arrow_left","showInline","onInput_wysiwyg","onInput","_isUneditableNode","isFront","siblingNode","siblingKey","isElement","_isUneditableNode_getSibling","selectNode","_onShortcutKey","onKeyDown_wysiwyg","shiftKey","ctrl","ctrlKey","metaKey","altKey","onKeyDown","selectRange","fileComponentName","_hardDelete","isClosureFreeFormatElement","isClosureRangeFormatElement","defaultFormat","prev","_prev","prevLast","con","_offset","after","detach","sel","_prev2","ignoreZWS","nextEl","cell","_fileComponentInfo","_sel","_next","_con","_children","_child2","isEdge","lines","fc","lc","_cells","idx","prevIdx","nextIdx","moveCell","_len14","_i26","_child4","_firstChild","_endChild","tabText","textRange","_child3","_len13","_i25","endChild","freeFormatEl","enterHTML","formatInners","temp","newFormat","innerNode","selectionFormat","wSelection","_children2","_offset2","_prev3","_next2","newEl","insertHTML","wOffset","focusNext","brPrev","brNext","_newEl","_br2","_newEl2","newListCell","_newFormat","compContext","_newEl3","_ref","_cell","nbsp","textKey","onKeyUp_wysiwyg","onKeyUp","oFormatTag","zeroWidthRegExp","isComposing","frontZeroWidthCnt","substring","onScroll_wysiwyg","onScroll","onFocus_wysiwyg","onFocus","onBlur_wysiwyg","onBlur","onMouseDown_resizingBar","prevHeight","closureFunc","_resize_editor","onResizeEditor","resizeInterval","responsiveSize","responsiveWidth","setToolbarButtons","area","editorHeight","scrollY","editorTop","inlineOffset","_onStickyToolbar","scroll","_codeViewAutoHeight","sCell","eCell","sIsCell","eIsCell","sComp","eComp","onPaste_wysiwyg","clipboardData","isIE","_dataTransferAction","_setClipboardComponent","setData","onCopy_wysiwyg","onCopy","onCut_wysiwyg","onCut","onDrop_wysiwyg","dataTransfer","_setDropLocationSelection","rangeOffset","caretRangeFromPoint","_r2","plainText","cleanData","getData","tempDiv","tempRange","_setClipboardData","MSData","onlyText","onPaste","onDrop","_value","files","insertImage","onMouseMove_wysiwyg","lineBreakerStyle","ctxEl","pageY","_onMouseDown_lineBreak","_onLineBreak","eventWysiwyg","passive","_setResponsiveToolbar","_removeEvent","sizeArray","buttonsObj","sort","imageUploadHandler","videoUploadHandler","audioUploadHandler","onImageUploadBefore","onVideoUploadBefore","onAudioUploadBefore","onImageUpload","onVideoUpload","onAudioUpload","onImageUploadError","onVideoUploadError","onAudioUploadError","newToolbar","newContext","oldButton","oldCallButtons","setOptions","_options","val","cons","_setIframeDocument","setDefaultStyle","newStyles","noticeClose","getContext","getText","getImagesInfo","getFilesInfo","notCleaningData","rangeSelection","firstCon","checkHTML","appendContents","setOption","enabled","show","topAreaStyle","hide","modalForm","_k","_k2","_k3","_k4","_k5","originEl","topEl","render","_vm","_h","$createElement","_c","_self","staticClass","_e","staticStyle","ref","$t","$event","toggle","_v","model","domProps","isLoading","callback","$$v","expression","getTemplate","selectedTemplate","setEditorsContent","staticRenderFns","extend","props","orderId","Number","required","kothingConfig","headerImage","logo1","logo2","errorMessages","queryNumber","watch","immediate","handler","createEditor","mounted","API","orders","getDocumentContent","getForEdit","order","documentTemplates","getList","number","store","dispatch","methods","$API","saveDocumentContent","$emit","hasOwnProperty","errors","$store","create","response","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VContainer","VDialog","VIcon","VProgressCircular","VRow","VSelect","VSpacer","_core","init_options","idOrElement","_init_options","_propertiesInit","getElementById","_sizeList","currentSize","sizeList","lineHeightContext","targetText","icon","unit","sizeIcon","fontSizeContext","templateDiv","templateList","contextTable","_tdElement","_trElement","_trElements","_tableXY","_maxWidth","_fixedColumn","_rtl","cellControllerTop","resizeText","headerButton","mergeButton","splitButton","splitMenu","maxText","maxSize","minText","minSize","_physical_cellCnt","_logical_cellCnt","_rowCnt","_rowIndex","_physical_cellIndex","_logical_cellIndex","_current_colSpan","_current_rowSpan","tablePicker","tableHighlight","tableUnHighlight","tableDisplay","tableController","setController_table","columnFixedButton","setController_tableEditor","insertRowAboveButton","insertRowBelowButton","onMouseMove_tablePicker","appendTable","onClick_tableController","tableResize","fixed_column_width","fixedColumnWidth","table_header","tableHeader","insert_row_above","insertRowAbove","insert_row_below","insertRowBelow","delete_row","deleteRow","merge_cell","mergeCells","insert_column_left","insertColumnBefore","insert_column_right","insertColumnAfter","delete_column","deleteColumn","split_cell","splitCells","VerticalSplit","HorizontalSplit","oTable","createCells","tableHTML","changed","firstTd","reset_table_picker","cnt","returnElement","cellsHTML","ceil","offsetX","offsetY","highlight","unHighlight","_removeEvents","_selectedTable","selectedCells","_toggleEditor","_selectedCells","_selectedCell","_fixedCellName","call_controller_tableEdit","tdElement","tableElement","tableLayout","setTableStyle","setPositionControllerTop","setPositionControllerDiv","setCellInfo","rows","cellIndex","cellCnt","colSpan","rowIndex","rowSpan","rowSpanArr","spanIndex","cs","rs","logcalIndex","row","editTable","isRow","tableAttr","positionCell","editRow","removeCells","firstRow","rightCell","editCell","_removeCells","positionResetElement","up","originRowIndex","sign","_cell2","spanCells","spanCell","_cell3","_logcalIndex","newRow","insertRow","insertIndex","newCell","applySpan","cellColSpan","passCell","removeCell","removeSpanArr","removeIndex","_arr","lastCell","getOverlapRangeAtIndex","removeFirst","removeEnd","_row","rLen","rowSpanCell","_cLen","_closeSplitMenu","openSplitMenu","currentCell","currentRow","currentColSpan","currentRowSpan","_cells2","_colSpan","newRowSpan","_rowSpanArr","nextRowIndex","_cell4","_cs","_logcalIndex2","_c2","_cLen2","_cell5","_cs2","_logcalIndex3","nextRow","nextCells","_rs","_c3","_cLen3","_colSpan2","_cells4","_c4","_cLen4","physicalIndex","_cells3","_c5","_cLen5","ch","mergeCell","emptyRowFirst","emptyRowLast","ce","re","mergeHTML","rowIndexFirst","rowIndexLast","removeRows","_cell6","_rs2","_c6","_cLen6","setActiveButton","toggleHeader","span","fixedCell","selectedCell","_bindOnSelect","_bindOffSelect","_bindOffShift","_offCellMultiSelect","_initBind","_onCellMultiSelect","_setMultiCells","startCell","endCell","findSelectedCell","newCs","newCe","newRs","newRe","emptyDiv","targetTooltip","_formatList","currentFormat","pickUp","lang_toolbar","defaultFormats","formatList","formatTitle","formatContext","_this","selectedFormsts","firstPath","lastPath","rlist","modifiedFormsts","isComp","freeElement","_first","isSameAttributes","_fontList","currentFont","fontList","tooltip","fontFamily","selectFont","fontElement","fontContext","notice_div","notice_span","notice_button","onClick_cancel","_component","contextAudio","targetSelect","_linkValue","audio_dialog","audioInputFile","audioUrlFile","audio_controller","setController","_removeSelectedFiles","_fileInputChange","onClick_controller","_onLinkPreview","audioBox","link_btn","textDecoration","urlInput","_createAudioTag","oAudio","_setTagAttrs","protocol","updateCover","setupUrl","fileList","fileSize","limitSize","infoSize","audiosInfo","uploadSize","isUpdate","register","filesLen","FormData","append","callBack_upload","create_audio","existElement","prevElement","selectionTag","onControllerOff","notOpen","_anchor","contextLink","_linkAnchor","anchorCtx","link_dialog","link_controller","setController_LinkButton","linkController","onClick_linkController","initEvent","caller","linkBox","forms","unlink","oA","createAnchor","selectionATag","editLink","linkAnchor","linkBtn","href","contextImage","_linkElement","_align","_floatClassRegExp","_v_src","svgDefaultSize","base64RenderIndex","_element_l","_element_t","image_dialog","imgInputFile","imgUrlFile","altText","previewSrc","openTab","imageGalleryButton","_openGallery","sizeRevert","imageBox","onlyPercentage","onlyPercentDisplay","heightDisplay","_setUrlInput","imageEl","imageContainer","tabContent","tabLinks","tabName","contentClassName","getElementsByClassName","imagePlugin","onRender_imgUrl","imagesInfo","inputWidth","inputHeight","callBack_imgUpload","setup_reader","update_src","wFileReader","FileReader","filesStack","reader","updateElement","onRender_imgBase64","readAsDataURL","updateMethod","createMethod","onRender_link","imgTag","textAlign","linkValue","oImg","_image_create_onload","openController","changeSize","isNewContainer","modifiedCaption","imageElement","setCtx","userSize","notResetPercentage","onlyW","onlyH","heightPercentage","targetButton","_alignList","currentAlign","defaultDir","justify","leftDir","leftMenu","alignLeft","rightMenu","alignRight","alignCenter","alignJustify","alignContext","get","_blockquote","_font","_fontSize","_fontColor","_hiliteColor","_horizontalRule","_table","_formatBlock","_lineHeight","_template","_paragraphStyle","_textStyle","_link","_image","_video","_audio","_math","_imageGallery","functional","fluid","_util2","kind","_closeSignal","dialog_div","dialog_back","dialog_area","modalArea","back","_onMouseDown_dialog","_onClick_dialog","_bindClose","contextDialog","contextVideo","_youtubeQuery","_defaultRatio","video_dialog","videoInputFile","videoUrlFile","videoRatioOption","setVideoRatio","videoBox","ratioList","ratio","ratioDisplay","onlyWidthDisplay","createVideoTag","videoTag","_setIframeAttrs","createIframeTag","iframeTag","setVideoRatioSelect","selectedIndex","videoPlugin","setup_url","videosInfo","callBack_videoUpload","create_video","oIframe","splitUrl","endsWith","lastIndexOf","oFrame","isYoutube","isVimeo","_newTag","newTag","inputUpdate","isPercent","_update_videoCover","prevFrame","ratioSelected","ratioOptions","selected","dataSize","$context","_colorPicker","previewEl","colorInput","onChangeInput","colorArea","colorPicker","colorListHTML","contextPicker","contextFontColor","_colorInput","_defaultColor","isHexColor","rgb2hex","_styleProperty","_colorList","setCurrentColor","applyColor","_currentColor","createColorList","_makeColorList","makeColor","colorArr","fillColor","getColorInNode","setInputText","colorName2hex","hexColorStr","borderColor","findColor","styleProperty","str","rgb","rgbMatch","parseInt","colorName","colors","_classList","menuLang","spaced","bordered","neon","paragraphContext","paragraphList","activeClass","chipGroup","closeIcon","closeLabel","draggable","filterIcon","label","outlined","pill","textColor","proxyClass","computed","groupClasses","hasClose","isClickable","created","breakingProps","original","replacement","click","genFilter","genClose","$vuetify","genContent","$slots","tabindex","setBackgroundColor","setTextColor","_selectMenu","setDialogForm","location","pathname","callerContext","relList","defaultRel","bookmark","selectMenu","setForm","download","newWindowCheck","downloadLinkCheck","rel","anchorPlugin","linkDefaultRel","currentRel","_change","callerName","check_new_window","check_bookmark","anchorText","downloadCheck","bookmarkButton","listContext","relButton","relPreview","onClick_relButton","onClick_relList","onChange_newWindowCheck","onChange_downloadCheck","onChangeAnchorText","onChangeUrlInput","onKeyDownUrlInput","onFocusUrlInput","onBlurUrlInput","onClick_bookmarkButton","contextAnchor","setRel","setLinkPreview","setHeaderBookmark","_closeRelMenu","toggleRelList","relAttr","relListEl","rels","checkedRel","createHeaderList","contextList","urlValue","headers","valueRegExp","createList","_setMenuListPosition","moveItem","getItem","random","reservedProtocol","sameProtocol","updateAnchor","notText","_relMerge","_relDelete","contextHiliteColor","backgroundColor","currentHR","horizontalRulePick","hr_solid","hr_dotted","hr_dashed","appendHr","oHr","tagArea","tagElements","items","selectedTags","browser_div","set_browser","titleArea","onClickTag","onClickFile","_onMouseDown_browser","_onClick_browser","fileBrowserContext","pluginContext","listClassName","_drawFileList","fileBrowserPlugin","abort","showBrowserLoading","closeBrowserLoading","browserHeader","_callBackGet","_drawListItem","_tags","splitSize","drawItemHandler","tagsHTML","listHTML","columns","selectTag","sTagIndex","some","listEl","currentBlockquote","navigator","userAgent","appVersion","platform","String","fromCharCode","onlyZeroWidthRegExp","ActiveXObject","XMLHttpRequest","e1","elementName","_hasOwn","getIncludePath","nameArray","extension","pathList","fileName","extRegExp","editorTag","getPageStyle","rules","sheets","styleSheets","cssRules","wDocument","exceptAttrs","attrString","cr","cl","encoder","encodeURIComponent","unescape","TextEncoder","encode","isNotCheckingNode","getClosureFreeFormatElement","copyEl","array","multi","getPositionIndex","_newOffsets","finds","tempText","nodes","style_a","style_b","compStyle","class_a","class_b","reg","compClass","maxDec","toFixed","aNode","bNode","aIndex","bIndex","check","attr","childList","offsetElement","aStart","aEnd","bStart","bEnd","overlap","txt","newElement","styleName","stopParent","baseNode","all","cNodes","rNode","_deleteNestedList","liSibling","liParent","baseParent","bp","depthEl","nodePathArray","inst","nodePathLen","apply","valueOf","depthIndex","cDepth","spliceDepth","childs","childLength","_n","nLen","textOffset","tempL","_path","_n2","_path2","_n3","notRemoveNode","sortByDepth","des","documentFragment","htmlCheckWhitelistRegExp","removeTags","emptyTags","wrongList","withoutFormatCells","wrongTags","nrtag","fel","checkTags","_t","_t2","tp","_p","_t3","optionStyle","styleArr","_setIframeCssTags","linkNames","tagString","styleTag","CSSFileName","form","menus","clickMethod","onMousedown_list","onMouseMove_list","onClick_list","num","selectIndex","positionHandler","currentList","bullets","list_bullets","orderList","unorderList","editList","firstSel","lastSel","bottomEl","originRange","isRemove","topElParent","bottomElParent","fTag","nextParent","parentTag","siblingTag","rangeTag","mergeTop","mergeBottom","firstList","topNumber","_passComponent","isHR","tempList","_detachNested","originList","cellsLen","innerList","nodePath","sl","_insiedList","insertPrev","slPath","more_text","more_paragraph","more_plus","more_horizontal","more_vertical","attachment","magic_stick","empty_file","tag_p","tag_div","tag_h","tag_pre","mention","browser","search","resize25","KothingEditor_LANG"],"mappings":"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","file":"js/orders/document/:id.2178c444.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dialog = _interopRequireDefault(require(\"../modules/dialog\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"math\",\n  display: \"dialog\",\n  add: function add(core) {\n    core.addModule([_dialog.default]);\n    var context = core.context;\n    context.math = {\n      focusElement: null,\n      // @Override dialog // This element has focus when the dialog is opened.\n      previewElement: null,\n      fontSizeElement: null,\n      defaultFontSize: \"\",\n      _mathExp: null\n    };\n    /** math dialog */\n\n    var math_dialog = this.setDialog(core);\n    context.math.modal = math_dialog;\n    context.math.focusElement = math_dialog.querySelector(\".ke-math-exp\");\n    context.math.previewElement = math_dialog.querySelector(\".ke-math-preview\");\n    context.math.fontSizeElement = math_dialog.querySelector(\".ke-math-size\");\n    context.math.focusElement.addEventListener(\"keyup\", this._renderMathExp.bind(core, context.math), false);\n    context.math.focusElement.addEventListener(\"change\", this._renderMathExp.bind(core, context.math), false);\n    context.math.fontSizeElement.addEventListener(\"change\", function (e) {\n      this.fontSize = e.target.value;\n    }.bind(context.math.previewElement.style), false);\n    /** math controller */\n\n    var math_controller = this.setController_MathButton(core);\n    context.math.mathController = math_controller;\n    context.math._mathExp = null;\n    /** add event listeners */\n\n    math_dialog.querySelector(\"form\").addEventListener(\"submit\", this.submit.bind(core), false);\n    math_controller.addEventListener(\"click\", this.onClick_mathController.bind(core));\n    context.math.previewElement.style.fontSize = context.math.defaultFontSize;\n    /** append html */\n\n    context.dialog.modal.appendChild(math_dialog);\n    context.element.relative.appendChild(math_controller);\n    /** empty memory */\n\n    math_dialog = null, math_controller = null;\n  },\n\n  /** dialog */\n  setDialog: function setDialog(core) {\n    var lang = core.lang;\n    var dialog = core.util.createElement(\"DIV\");\n    var fontSize = core.options.mathFontSize;\n    var defaultFontSize = fontSize[0].value;\n    dialog.className = \"ke-dialog-content\";\n    dialog.style.display = \"none\";\n    var html = \"\" + \"<form>\" + '<div class=\"ke-dialog-header\">' + '<button type=\"button\" data-command=\"close\" class=\"ke-btn ke-dialog-close\" aria-label=\"Close\" title=\"' + lang.dialogBox.close + '\">' + core.icons.cancel + \"</button>\" + '<span class=\"ke-modal-title\">' + lang.dialogBox.mathBox.title + \"</span>\" + \"</div>\" + '<div class=\"ke-dialog-body\">' + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.mathBox.inputLabel + ' (<a href=\"https://katex.org/docs/supported.html\" target=\"_blank\">KaTeX</a>)</label>' + '<textarea class=\"ke-input-form ke-math-exp\" type=\"text\"></textarea>' + \"</div>\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.mathBox.fontSizeLabel + \"</label>\" + '<select class=\"ke-input-select ke-math-size\">';\n\n    for (var i = 0, len = fontSize.length, f; i < len; i++) {\n      f = fontSize[i];\n\n      if (f.default) {\n        defaultFontSize = f.value;\n      }\n\n      html += '<option value=\"' + f.value + '\"' + (f.default ? \" selected\" : \"\") + \">\" + f.text + \"</option>\";\n    }\n\n    html += \"</select>\" + \"</div>\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.mathBox.previewLabel + \"</label>\" + '<p class=\"ke-math-preview\"></p>' + \"</div>\" + \"</div>\" + '<div class=\"ke-dialog-footer\">' + '<button type=\"submit\" class=\"ke-btn-primary\" title=\"' + lang.dialogBox.submitButton + '\"><span>' + lang.dialogBox.submitButton + \"</span></button>\" + \"</div>\" + \"</form>\";\n    core.context.math.defaultFontSize = defaultFontSize;\n    dialog.innerHTML = html;\n    return dialog;\n  },\n\n  /** modify controller button */\n  setController_MathButton: function setController_MathButton(core) {\n    var lang = core.lang;\n    var math_btn = core.util.createElement(\"DIV\");\n    math_btn.className = \"ke-controller ke-controller-link\";\n    math_btn.innerHTML = \"\" + '<div class=\"ke-arrow ke-arrow-up\"></div>' + '<div class=\"link-content\">' + '<div class=\"ke-btn-group\">' + '<button type=\"button\" data-command=\"update\" tabindex=\"-1\" class=\"ke-btn ke-tooltip\">' + core.icons.edit + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.edit + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"delete\" tabindex=\"-1\" class=\"ke-btn ke-tooltip\">' + core.icons.delete + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.remove + \"</span></span>\" + \"</button>\" + \"</div>\" + \"</div>\" + \"\";\n    return math_btn;\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  open: function open() {\n    this.plugins.dialog.open.call(this, \"math\", \"math\" === this.currentControllerName);\n  },\n\n  /**\r\n   * @Override core - managedTagsInfo\r\n   */\n  managedTags: function managedTags() {\n    return {\n      className: \"katex\",\n      method: function method(element) {\n        if (!element.getAttribute(\"data-exp\") || !this.options.katex) {\n          return;\n        }\n\n        var dom = this._d.createRange().createContextualFragment(this.plugins.math._renderer.call(this, this.util.HTMLDecoder(element.getAttribute(\"data-exp\"))));\n\n        element.innerHTML = dom.querySelector(\".katex\").innerHTML;\n      }\n    };\n  },\n  _renderer: function _renderer(exp) {\n    var katex = this.options.katex;\n    return katex.src.renderToString(exp, katex.options);\n  },\n  _renderMathExp: function _renderMathExp(contextMath, e) {\n    contextMath.previewElement.innerHTML = this.plugins.math._renderer.call(this, e.target.value);\n  },\n  submit: function submit(e) {\n    this.showLoading();\n    e.preventDefault();\n    e.stopPropagation();\n\n    var submitAction = function () {\n      if (this.context.math.focusElement.value.trim().length === 0) {\n        return false;\n      }\n\n      var contextMath = this.context.math;\n      var mathExp = contextMath.focusElement.value;\n      var katexEl = contextMath.previewElement.querySelector(\".katex\");\n\n      if (!katexEl) {\n        return false;\n      }\n\n      katexEl.className = \"__ke__katex \" + katexEl.className;\n      katexEl.setAttribute(\"contenteditable\", false);\n      katexEl.setAttribute(\"data-exp\", this.util.HTMLEncoder(mathExp));\n      katexEl.setAttribute(\"data-font-size\", contextMath.fontSizeElement.value);\n      katexEl.style.fontSize = contextMath.fontSizeElement.value;\n\n      if (!this.context.dialog.updateModal) {\n        var selectedFormats = this.getSelectedElements();\n\n        if (selectedFormats.length > 1) {\n          var oFormat = this.util.createElement(selectedFormats[0].nodeName);\n          oFormat.appendChild(katexEl);\n\n          if (!this.insertNode(oFormat, null, true)) {\n            return false;\n          }\n        } else {\n          if (!this.insertNode(katexEl, null, true)) {\n            return false;\n          }\n        }\n\n        var empty = this.util.createTextNode(this.util.zeroWidthSpace);\n        katexEl.parentNode.insertBefore(empty, katexEl.nextSibling);\n        this.setRange(katexEl, 0, katexEl, 1);\n      } else {\n        var containerEl = this.util.getParentElement(contextMath._mathExp, \".katex\");\n        containerEl.parentNode.replaceChild(katexEl, containerEl);\n        this.setRange(katexEl, 0, katexEl, 1);\n      }\n\n      contextMath.focusElement.value = \"\";\n      contextMath.fontSizeElement.value = \"1em\";\n      contextMath.previewElement.style.fontSize = \"1em\";\n      contextMath.previewElement.innerHTML = \"\";\n      return true;\n    }.bind(this);\n\n    try {\n      if (submitAction()) {\n        this.plugins.dialog.close.call(this); // history stack\n\n        this.history.push(false);\n      }\n    } catch (e) {\n      this.plugins.dialog.close.call(this);\n    } finally {\n      this.closeLoading();\n    }\n\n    return false;\n  },\n  active: function active(element) {\n    if (!element) {\n      if (this.controllerArray.indexOf(this.context.math.mathController) > -1) {\n        this.controllersOff();\n      }\n    } else if (element.getAttribute(\"data-exp\")) {\n      if (this.controllerArray.indexOf(this.context.math.mathController) < 0) {\n        this.setRange(element, 0, element, 1);\n        this.plugins.math.call_controller.call(this, element);\n      }\n\n      return true;\n    }\n\n    return false;\n  },\n  on: function on(update) {\n    if (!update) {\n      this.plugins.math.init.call(this);\n    } else {\n      var contextMath = this.context.math;\n\n      if (contextMath._mathExp) {\n        var exp = this.util.HTMLDecoder(contextMath._mathExp.getAttribute(\"data-exp\"));\n        var fontSize = contextMath._mathExp.getAttribute(\"data-font-size\") || \"1em\";\n        this.context.dialog.updateModal = true;\n        contextMath.focusElement.value = exp;\n        contextMath.fontSizeElement.value = fontSize;\n        contextMath.previewElement.innerHTML = this.plugins.math._renderer.call(this, exp);\n        contextMath.previewElement.style.fontSize = fontSize;\n      }\n    }\n  },\n  call_controller: function call_controller(mathTag) {\n    this.context.math._mathExp = mathTag;\n    var mathBtn = this.context.math.mathController;\n    this.setControllerPosition(mathBtn, mathTag, \"bottom\", {\n      left: 0,\n      top: 0\n    });\n    this.controllersOn(mathBtn, mathTag, \"math\");\n  },\n  onClick_mathController: function onClick_mathController(e) {\n    e.stopPropagation();\n    var command = e.target.getAttribute(\"data-command\") || e.target.parentNode.getAttribute(\"data-command\");\n\n    if (!command) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (/update/.test(command)) {\n      this.context.math.focusElement.value = this.util.HTMLDecoder(this.context.math._mathExp.getAttribute(\"data-exp\"));\n      this.plugins.dialog.open.call(this, \"math\", true);\n    } else {\n      /** delete */\n      this.util.removeItem(this.context.math._mathExp);\n      this.context.math._mathExp = null;\n      this.focus(); // history stack\n\n      this.history.push(false);\n    }\n\n    this.controllersOff();\n  },\n  init: function init() {\n    var contextMath = this.context.math;\n    contextMath.mathController.style.display = \"none\";\n    contextMath._mathExp = null;\n    contextMath.focusElement.value = \"\";\n    contextMath.previewElement.innerHTML = \"\";\n  }\n};\nexports.default = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n(function (global, factory) {\n  if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error(\"KothingEditor_MODULES a window with a document\");\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== \"undefined\" ? window : void 0, function (window, noGlobal) {\n  var fileManager = {\n    name: \"fileManager\",\n    _xmlHttp: null,\n    _checkMediaComponent: function _checkMediaComponent(tag) {\n      if (/IMG/i.test(tag)) {\n        return !/FIGURE/i.test(tag.parentElement.nodeName) || !/FIGURE/i.test(tag.parentElement.parentElement.nodeName);\n      } else if (/VIDEO/i.test(tag)) {\n        return !/FIGURE/i.test(tag.parentElement.nodeName);\n      }\n\n      return true;\n    },\n\n    /**\r\n     * @description Upload the file to the server.\r\n     * @param {String} uploadUrl Upload server url\r\n     * @param {Object|null} uploadHeader Request header\r\n     * @param {FormData} formData FormData in body\r\n     * @param {Function|null} callBack Success call back function\r\n     * @param {Function|null} errorCallBack Error call back function\r\n     * @example this.plugins.fileManager.upload.call(this, imageUploadUrl, this.options.imageUploadHeader, formData, this.plugins.image.callBack_imgUpload.bind(this, info), this.functions.onImageUploadError);\r\n     */\n    upload: function upload(uploadUrl, uploadHeader, formData, callBack, errorCallBack) {\n      this.showLoading();\n      var filePlugin = this.plugins.fileManager;\n      var xmlHttp = filePlugin._xmlHttp = this.util.getXMLHttpRequest();\n      xmlHttp.onreadystatechange = filePlugin._callBackUpload.bind(this, xmlHttp, callBack, errorCallBack);\n      xmlHttp.open(\"post\", uploadUrl, true);\n\n      if (uploadHeader !== null && _typeof(uploadHeader) === \"object\" && this._w.Object.keys(uploadHeader).length > 0) {\n        for (var key in uploadHeader) {\n          xmlHttp.setRequestHeader(key, uploadHeader[key]);\n        }\n      }\n\n      xmlHttp.send(formData);\n    },\n    _callBackUpload: function _callBackUpload(xmlHttp, callBack, errorCallBack) {\n      if (xmlHttp.readyState === 4) {\n        if (xmlHttp.status === 200) {\n          try {\n            callBack(xmlHttp);\n          } catch (e) {\n            throw Error('[KothingEditor.fileManager.upload.callBack.fail] cause : \"' + e.message + '\"');\n          } finally {\n            this.closeLoading();\n          }\n        } else {\n          // exception\n          this.closeLoading();\n          var res = !xmlHttp.responseText ? xmlHttp : JSON.parse(xmlHttp.responseText);\n\n          if (typeof errorCallBack !== \"function\" || errorCallBack(\"\", res, this)) {\n            var err = \"[KothingEditor.fileManager.upload.serverException] status: \" + xmlHttp.status + \", response: \" + (res.errorMessage || xmlHttp.responseText);\n            this.functions.noticeOpen(err);\n            throw Error(err);\n          }\n        }\n      }\n    },\n\n    /**\r\n     * @description Checke the file's information and modify the tag that does not fit the format.\r\n     * @param {String} pluginName Plugin name\r\n     * @param {Array} tagNames Tag array to check\r\n     * @param {Function|null} uploadEventHandler Event handler to process updated file info after checking (used in \"setInfo\")\r\n     * @param {Function} modifyHandler A function to modify a tag that does not fit the format (Argument value: Tag element)\r\n     * @param {Boolean} resizing True if the plugin is using a resizing module\r\n     * @example\r\n     * const modifyHandler = function (tag) {\r\n     *      imagePlugin.onModifyMode.call(this, tag, null);\r\n     *      imagePlugin.openModify.call(this, true);\r\n     *      imagePlugin.update_image.call(this, true, false, true);\r\n     *  }.bind(this);\r\n     *  this.plugins.fileManager.checkInfo.call(this, 'image', ['img'], this.functions.onImageUpload, modifyHandler, true);\r\n     */\n    checkInfo: function checkInfo(pluginName, tagNames, uploadEventHandler, modifyHandler, resizing) {\n      var tags = [];\n\n      for (var i = 0, len = tagNames.length; i < len; i++) {\n        tags = tags.concat([].slice.call(this.context.element.wysiwyg.getElementsByTagName(tagNames[i])));\n      }\n\n      var fileManagerPlugin = this.plugins.fileManager;\n      var context = this.context[pluginName];\n      var infoList = context._infoList;\n      var setFileInfo = fileManagerPlugin.setInfo.bind(this);\n\n      if (tags.length === infoList.length) {\n        // reset\n        if (this._componentsInfoReset) {\n          for (var _i = 0, _len = tags.length; _i < _len; _i++) {\n            setFileInfo(pluginName, tags[_i], uploadEventHandler, null, resizing);\n          }\n\n          return;\n        } else {\n          var infoUpdate = false;\n\n          var _loop = function _loop(_info, _i2, _len2) {\n            _info = infoList[_i2];\n\n            if (tags.filter(function (t) {\n              info = _info;\n              return _info.src === t.src && _info.index.toString() === t.getAttribute(\"data-index\");\n            }).length === 0) {\n              infoUpdate = true;\n              info = _info;\n              return \"break\";\n            }\n\n            info = _info;\n          };\n\n          for (var _i2 = 0, _len2 = infoList.length, info; _i2 < _len2; _i2++) {\n            var _ret = _loop(info, _i2, _len2);\n\n            if (_ret === \"break\") break;\n          } // pass\n\n\n          if (!infoUpdate) {\n            return;\n          }\n        }\n      } // check\n\n\n      var _resize_plugin = resizing ? this.context.resizing._resize_plugin : \"\";\n\n      if (resizing) {\n        this.context.resizing._resize_plugin = pluginName;\n      }\n\n      var currentTags = [];\n      var infoIndex = [];\n\n      for (var _i3 = 0, _len3 = infoList.length; _i3 < _len3; _i3++) {\n        infoIndex[_i3] = infoList[_i3].index;\n      }\n\n      for (var _i4 = 0, _len4 = tags.length, tag; _i4 < _len4; _i4++) {\n        tag = tags[_i4];\n\n        if (!this.util.getParentElement(tag, this.util.isMediaComponent) || !fileManagerPlugin._checkMediaComponent(tag)) {\n          currentTags.push(context._infoIndex);\n          modifyHandler(tag);\n        } else if (!tag.getAttribute(\"data-index\") || infoIndex.indexOf(tag.getAttribute(\"data-index\") * 1) < 0) {\n          currentTags.push(context._infoIndex);\n          tag.removeAttribute(\"data-index\");\n          setFileInfo(pluginName, tag, uploadEventHandler, null, resizing);\n        } else {\n          currentTags.push(tag.getAttribute(\"data-index\") * 1);\n        }\n      }\n\n      for (var _i5 = 0, dataIndex; _i5 < infoList.length; _i5++) {\n        dataIndex = infoList[_i5].index;\n\n        if (currentTags.indexOf(dataIndex) > -1) {\n          continue;\n        }\n\n        infoList.splice(_i5, 1);\n\n        if (typeof uploadEventHandler === \"function\") {\n          uploadEventHandler(null, dataIndex, \"delete\", null, 0, this);\n        }\n\n        _i5--;\n      }\n\n      if (resizing) {\n        this.context.resizing._resize_plugin = _resize_plugin;\n      }\n    },\n\n    /**\r\n     * @description Create info object of file and add it to \"_infoList\" (this.context[pluginName]._infoList[])\r\n     * @param {String} pluginName Plugin name\r\n     * @param {Element} element\r\n     * @param {Function|null} uploadEventHandler Event handler to process updated file info (created in setInfo)\r\n     * @param {Object|null} file\r\n     * @param {Boolean} resizing True if the plugin is using a resizing module\r\n     * @example\r\n     * uploadCallBack {.. file = { name: fileList[i].name, size: fileList[i].size };\r\n     * this.plugins.fileManager.setInfo.call(this, 'image', oImg, this.functions.onImageUpload, file, true);\r\n     */\n    setInfo: function setInfo(pluginName, element, uploadEventHandler, file, resizing) {\n      var _resize_plugin = resizing ? this.context.resizing._resize_plugin : \"\";\n\n      if (resizing) {\n        this.context.resizing._resize_plugin = pluginName;\n      }\n\n      var plguin = this.plugins[pluginName];\n      var context = this.context[pluginName];\n      var infoList = context._infoList;\n      var dataIndex = element.getAttribute(\"data-index\");\n      var info = null;\n      var state = \"\";\n\n      if (!file) {\n        file = {\n          name: element.getAttribute(\"data-file-name\") || (typeof element.src === \"string\" ? element.src.split(\"/\").pop() : \"\"),\n          size: element.getAttribute(\"data-file-size\") || 0\n        };\n      } // create\n\n\n      if (!dataIndex || this._componentsInfoInit) {\n        state = \"create\";\n        dataIndex = context._infoIndex++;\n        element.setAttribute(\"data-index\", dataIndex);\n        element.setAttribute(\"data-file-name\", file.name);\n        element.setAttribute(\"data-file-size\", file.size);\n        info = {\n          src: element.src,\n          index: dataIndex * 1,\n          name: file.name,\n          size: file.size\n        };\n        infoList.push(info);\n      } else {\n        // update\n        state = \"update\";\n        dataIndex *= 1;\n\n        for (var i = 0, len = infoList.length; i < len; i++) {\n          if (dataIndex === infoList[i].index) {\n            info = infoList[i];\n            break;\n          }\n        }\n\n        if (!info) {\n          dataIndex = context._infoIndex++;\n          info = {\n            index: dataIndex\n          };\n          infoList.push(info);\n        }\n\n        info.src = element.src;\n        info.name = element.getAttribute(\"data-file-name\");\n        info.size = element.getAttribute(\"data-file-size\") * 1;\n      } // method bind\n\n\n      info.element = element;\n      info.delete = plguin.destroy.bind(this, element);\n\n      info.select = function (element) {\n        element.scrollIntoView(true);\n\n        this._w.setTimeout(plguin.select.bind(this, element));\n      }.bind(this, element);\n\n      if (resizing) {\n        if (!element.getAttribute(\"origin-size\") && element.naturalWidth) {\n          element.setAttribute(\"origin-size\", element.naturalWidth + \",\" + element.naturalHeight);\n        }\n\n        if (!element.getAttribute(\"data-origin\")) {\n          var container = this.util.getParentElement(element, this.util.isMediaComponent);\n          var cover = this.util.getParentElement(element, \"FIGURE\");\n\n          var w = this.plugins.resizing._module_getSizeX.call(this, context, element, cover, container);\n\n          var h = this.plugins.resizing._module_getSizeY.call(this, context, element, cover, container);\n\n          element.setAttribute(\"data-origin\", w + \",\" + h);\n          element.setAttribute(\"data-size\", w + \",\" + h);\n        }\n\n        if (!element.style.width) {\n          var size = (element.getAttribute(\"data-size\") || element.getAttribute(\"data-origin\") || \"\").split(\",\");\n          plguin.onModifyMode.call(this, element, null);\n          plguin.applySize.call(this, size[0], size[1]);\n        }\n\n        this.context.resizing._resize_plugin = _resize_plugin;\n      }\n\n      if (typeof uploadEventHandler === \"function\") {\n        uploadEventHandler(element, dataIndex, state, info, --context._uploadFileLength < 0 ? 0 : context._uploadFileLength, this);\n      }\n    },\n\n    /**\r\n     * @description Delete info object at \"_infoList\"\r\n     * @param {String} pluginName Plugin name\r\n     * @param {Number} index index of info object (this.context[pluginName]._infoList[].index)\r\n     * @param {Function|null} uploadEventHandler Event handler to process updated file info (created in setInfo)\r\n     */\n    deleteInfo: function deleteInfo(pluginName, index, uploadEventHandler) {\n      if (index >= 0) {\n        var infoList = this.context[pluginName]._infoList;\n\n        for (var i = 0, len = infoList.length; i < len; i++) {\n          if (index === infoList[i].index) {\n            infoList.splice(i, 1);\n\n            if (typeof uploadEventHandler === \"function\") {\n              uploadEventHandler(null, index, \"delete\", null, 0, this);\n            }\n\n            return;\n          }\n        }\n      }\n    },\n\n    /**\r\n     * @description Reset info object and \"_infoList = []\", \"_infoIndex = 0\"\r\n     * @param {String} pluginName Plugin name\r\n     * @param {Function|null} uploadEventHandler Event handler to process updated file info (created in setInfo)\r\n     */\n    resetInfo: function resetInfo(pluginName, uploadEventHandler) {\n      var context = this.context[pluginName];\n\n      if (typeof uploadEventHandler === \"function\") {\n        var infoList = context._infoList;\n\n        for (var i = 0, len = infoList.length; i < len; i++) {\n          uploadEventHandler(null, infoList[i].index, \"delete\", null, 0, this);\n        }\n      }\n\n      context._infoList = [];\n      context._infoIndex = 0;\n    }\n  };\n\n  if (_typeof(noGlobal) === (typeof undefined === \"undefined\" ? \"undefined\" : _typeof(undefined))) {\n    if (!window.KothingEditor_MODULES) {\n      Object.defineProperty(window, \"KothingEditor_MODULES\", {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.KothingEditor_MODULES, \"fileManager\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: fileManager\n    });\n  }\n\n  return fileManager;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defaultIcons = _interopRequireDefault(require(\"../assets/defaultIcons\"));\n\nvar _en = _interopRequireDefault(require(\"../lang/en\"));\n\nvar _util = _interopRequireDefault(require(\"./util\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _default2 = {\n  /**\r\n   * @description document create\r\n   * @param {Element} element Textarea\r\n   * @param {Object} options Options\r\n   * @returns {Object}\r\n   */\n  init: function init(element, options) {\n    if (_typeof(options) !== \"object\") options = {};\n    var doc = document;\n    /** --- init options --- */\n\n    this._initOptions(element, options); // KothingEditor div\n\n\n    var top_div = doc.createElement(\"DIV\");\n    top_div.className = \"kothing-editor\" + (options.rtl ? \" ke-rtl\" : \"\");\n    if (element.id) top_div.id = \"kothing-editor_\" + element.id; // relative div\n\n    var relative = doc.createElement(\"DIV\");\n    relative.className = \"ke-container\"; // toolbar\n\n    var tool_bar = this._createToolBar(doc, options.toolbarItem, options.plugins, options);\n\n    tool_bar.element.style.visibility = \"hidden\";\n    if (tool_bar.pluginCallButtons.math) this._checkKatexMath(options.katex);\n    var arrow = doc.createElement(\"DIV\");\n    arrow.className = \"ke-arrow\"; // sticky toolbar dummy\n\n    var sticky_dummy = doc.createElement(\"DIV\");\n    sticky_dummy.className = \"ke-toolbar-sticky-dummy\"; // inner editor div\n\n    var editor_div = doc.createElement(\"DIV\");\n    editor_div.className = \"ke-wrapper\";\n    /** --- init elements and create bottom bar --- */\n\n    var initElements = this._initElements(options, top_div, tool_bar.element, arrow);\n\n    var bottomBar = initElements.bottomBar;\n    var wysiwyg_div = initElements.wysiwygFrame;\n    var placeholder_span = initElements.placeholder;\n    var textarea = initElements.codeView; // resizing bar\n\n    var resizing_bar = bottomBar.resizingBar;\n    var navigation = bottomBar.navigation;\n    var char_wrapper = bottomBar.charWrapper;\n    var char_counter = bottomBar.charCounter; // loading box\n\n    var loading_box = doc.createElement(\"DIV\");\n    loading_box.className = \"ke-loading-box kothing-editor-common\";\n    loading_box.innerHTML = '<div class=\"ke-loading-effect\"></div>'; // enter line\n\n    var line_breaker = doc.createElement(\"DIV\");\n    line_breaker.className = \"ke-line-breaker\";\n    line_breaker.innerHTML = '<button class=\"ke-btn\">' + options.icons.line_break + \"</button>\";\n    var line_breaker_t = doc.createElement(\"DIV\");\n    line_breaker_t.className += \"ke-line-breaker-component\";\n    var line_breaker_b = line_breaker_t.cloneNode(true);\n    line_breaker_t.innerHTML = line_breaker_b.innerHTML = options.icons.line_break; // resize operation background\n\n    var resize_back = doc.createElement(\"DIV\");\n    resize_back.className = \"ke-resizing-back\"; // toolbar container\n\n    var toolbarContainer = options.toolbarContainer;\n\n    if (toolbarContainer) {\n      toolbarContainer.appendChild(tool_bar.element);\n    }\n    /** append html */\n\n\n    editor_div.appendChild(textarea);\n    if (placeholder_span) editor_div.appendChild(placeholder_span);\n    if (!toolbarContainer) relative.appendChild(tool_bar.element);\n    relative.appendChild(sticky_dummy);\n    relative.appendChild(editor_div);\n    relative.appendChild(resize_back);\n    relative.appendChild(loading_box);\n    relative.appendChild(line_breaker);\n    relative.appendChild(line_breaker_t);\n    relative.appendChild(line_breaker_b);\n    if (resizing_bar) relative.appendChild(resizing_bar);\n    top_div.appendChild(relative);\n    textarea = this._checkCodeMirror(options, textarea);\n    return {\n      constructed: {\n        top: top_div,\n        relative: relative,\n        toolBar: tool_bar.element,\n        menuTray: tool_bar.menuTray,\n        editorArea: editor_div,\n        wysiwygArea: wysiwyg_div,\n        codeArea: textarea,\n        placeholder: placeholder_span,\n        resizingBar: resizing_bar,\n        navigation: navigation,\n        charWrapper: char_wrapper,\n        charCounter: char_counter,\n        loading: loading_box,\n        lineBreaker: line_breaker,\n        lineBreaker_t: line_breaker_t,\n        lineBreaker_b: line_breaker_b,\n        resizeBack: resize_back,\n        stickyDummy: sticky_dummy,\n        arrow: arrow\n      },\n      options: options,\n      plugins: tool_bar.plugins,\n      pluginCallButtons: tool_bar.pluginCallButtons,\n      _responsiveButtons: tool_bar.responsiveButtons\n    };\n  },\n\n  /**\r\n   * @description Check the CodeMirror option to apply the CodeMirror and return the CodeMirror element.\r\n   * @param {Object} options options\r\n   * @param {Element} textarea textarea element\r\n   * @private\r\n   */\n  _checkCodeMirror: function _checkCodeMirror(options, textarea) {\n    if (options.codeMirror) {\n      var cmOptions = [{\n        mode: \"htmlmixed\",\n        htmlMode: true,\n        lineNumbers: true,\n        lineWrapping: true\n      }, options.codeMirror.options || {}].reduce(function (init, option) {\n        for (var key in option) {\n          if (_util.default.hasOwn(option, key)) init[key] = option[key];\n        }\n\n        return init;\n      }, {});\n\n      if (options.height === \"auto\") {\n        cmOptions.viewportMargin = Infinity;\n        cmOptions.height = \"auto\";\n      }\n\n      var cm = options.codeMirror.src.fromTextArea(textarea, cmOptions);\n      cm.display.wrapper.style.cssText = textarea.style.cssText;\n      options.codeMirrorEditor = cm;\n      textarea = cm.display.wrapper;\n      textarea.className += \" ke-wrapper-code-mirror\";\n    }\n\n    return textarea;\n  },\n\n  /**\r\n   * @description Check for a katex object.\r\n   * @param {Object} katex katex object\r\n   * @private\r\n   */\n  _checkKatexMath: function _checkKatexMath(katex) {\n    if (!katex) throw Error('[KothingEditor.create.fail] To use the math button you need to add a \"katex\" object to the options.');\n    var katexOptions = [{\n      throwOnError: false\n    }, katex.options || {}].reduce(function (init, option) {\n      for (var key in option) {\n        if (_util.default.hasOwn(option, key)) init[key] = option[key];\n      }\n\n      return init;\n    }, {});\n    katex.options = katexOptions;\n  },\n\n  /**\r\n   * @description Add or reset options\r\n   * @param {Object} mergeOptions New options property\r\n   * @param {Object} context Context object of core\r\n   * @param {Object} originOptions Origin options\r\n   * @returns {Object} pluginCallButtons\r\n   * @private\r\n   */\n  _setOptions: function _setOptions(mergeOptions, context, originOptions) {\n    this._initOptions(context.element.originElement, mergeOptions);\n\n    var el = context.element;\n    var relative = el.relative;\n    var editorArea = el.editorArea;\n    var isNewToolbarContainer = mergeOptions.toolbarContainer && mergeOptions.toolbarContainer !== originOptions.toolbarContainer;\n    var isNewToolbar = mergeOptions.lang !== originOptions.lang || mergeOptions.toolbarItem !== originOptions.toolbarItem || mergeOptions.mode !== originOptions.mode || isNewToolbarContainer;\n\n    var tool_bar = this._createToolBar(document, isNewToolbar ? mergeOptions.toolbarItem : originOptions.toolbarItem, mergeOptions.plugins, mergeOptions);\n\n    if (tool_bar.pluginCallButtons.math) this._checkKatexMath(mergeOptions.katex);\n    var arrow = document.createElement(\"DIV\");\n    arrow.className = \"ke-arrow\";\n\n    if (isNewToolbar) {\n      tool_bar.element.style.visibility = \"hidden\"; // toolbar container\n\n      if (isNewToolbarContainer) {\n        mergeOptions.toolbarContainer.appendChild(tool_bar.element);\n        el.toolbar.parentElement.removeChild(el.toolbar);\n      } else {\n        el.toolbar.parentElement.replaceChild(tool_bar.element, el.toolbar);\n      }\n\n      el.toolbar = tool_bar.element;\n      el.menuTray = tool_bar.menuTray;\n      el.arrow = arrow;\n    }\n\n    var initElements = this._initElements(mergeOptions, el.topArea, isNewToolbar ? tool_bar.element : el.toolbar, arrow);\n\n    var bottomBar = initElements.bottomBar;\n    var wysiwygFrame = initElements.wysiwygFrame;\n    var placeholder_span = initElements.placeholder;\n    var code = initElements.codeView;\n    if (el.resizingBar) relative.removeChild(el.resizingBar);\n    if (bottomBar.resizingBar) relative.appendChild(bottomBar.resizingBar);\n    editorArea.innerHTML = \"\";\n    editorArea.appendChild(code);\n    if (placeholder_span) editorArea.appendChild(placeholder_span);\n    code = this._checkCodeMirror(mergeOptions, code);\n    el.resizingBar = bottomBar.resizingBar;\n    el.navigation = bottomBar.navigation;\n    el.charWrapper = bottomBar.charWrapper;\n    el.charCounter = bottomBar.charCounter;\n    el.wysiwygFrame = wysiwygFrame;\n    el.code = code;\n    el.placeholder = placeholder_span;\n    if (mergeOptions.rtl) _util.default.addClass(el.topArea, \"ke-rtl\");else _util.default.removeClass(el.topArea, \"ke-rtl\");\n    return {\n      callButtons: tool_bar.pluginCallButtons,\n      plugins: tool_bar.plugins,\n      toolbar: tool_bar\n    };\n  },\n\n  /**\r\n   * @description Initialize property of KothingEditor elements\r\n   * @param {Object} options Options\r\n   * @param {Element} topDiv KothingEditor top div\r\n   * @param {Element} toolBar Tool bar\r\n   * @param {Element} toolBarArrow Tool bar arrow (balloon editor)\r\n   * @returns {Object} Bottom bar elements (resizingBar, navigation, charWrapper, charCounter)\r\n   * @private\r\n   */\n  _initElements: function _initElements(options, topDiv, toolBar, toolBarArrow) {\n    /** top div */\n    topDiv.style.cssText = options._editorStyles.top;\n    /** toolbar */\n\n    if (/inline/i.test(options.mode)) {\n      toolBar.className += \" ke-toolbar-inline\";\n      toolBar.style.width = options.toolbarWidth;\n    } else if (/balloon/i.test(options.mode)) {\n      toolBar.className += \" ke-toolbar-balloon\";\n      toolBar.style.width = options.toolbarWidth;\n      toolBar.appendChild(toolBarArrow);\n    }\n    /** editor */\n    // wysiwyg div or iframe\n\n\n    var wysiwygDiv = document.createElement(!options.iframe ? \"DIV\" : \"IFRAME\");\n    wysiwygDiv.className = \"ke-wrapper-inner ke-wrapper-wysiwyg\";\n\n    if (!options.iframe) {\n      wysiwygDiv.setAttribute(\"contenteditable\", true);\n      wysiwygDiv.setAttribute(\"scrolling\", \"auto\");\n      wysiwygDiv.className += \" \" + options._editableClass;\n      wysiwygDiv.style.cssText = options._editorStyles.frame + options._editorStyles.editor;\n    } else {\n      wysiwygDiv.allowFullscreen = true;\n      wysiwygDiv.frameBorder = 0;\n      wysiwygDiv.style.cssText = options._editorStyles.frame;\n    } // textarea for code view\n\n\n    var textarea = document.createElement(\"TEXTAREA\");\n    textarea.className = \"ke-wrapper-inner ke-wrapper-code\";\n    textarea.style.cssText = options._editorStyles.frame;\n    textarea.style.display = \"none\";\n    if (options.height === \"auto\") textarea.style.overflow = \"hidden\";\n    /** resize bar */\n\n    var resizingBar = null;\n    var resizinIcon = null;\n    var navigation = null;\n    var charWrapper = null;\n    var charCounter = null;\n    var poweredBy = null;\n\n    if (options.resizingBar) {\n      resizingBar = document.createElement(\"DIV\");\n      resizingBar.className = \"ke-resizing-bar\";\n      /** resizinIcon */\n\n      if (/\\d+/.test(options.height)) {\n        resizinIcon = document.createElement(\"DIV\");\n        resizinIcon.className = \"ke-resizing-icon\";\n        resizingBar.appendChild(resizinIcon);\n      }\n      /** navigation */\n\n\n      navigation = document.createElement(\"DIV\");\n      navigation.className = \"ke-navigation\";\n      resizingBar.appendChild(navigation);\n      /** char counter */\n\n      if (options.charCounter) {\n        charWrapper = document.createElement(\"DIV\");\n        charWrapper.className = \"ke-char-counter-wrapper\";\n\n        if (options.charCounterLabel) {\n          var charLabel = document.createElement(\"SPAN\");\n          charLabel.className = \"ke-char-label\";\n          charLabel.textContent = options.charCounterLabel;\n          charWrapper.appendChild(charLabel);\n        }\n\n        charCounter = document.createElement(\"SPAN\");\n        charCounter.className = \"ke-char-counter\";\n        charCounter.textContent = \"0\";\n        charWrapper.appendChild(charCounter);\n\n        if (options.maxCharCount > 0) {\n          var char_max = document.createElement(\"SPAN\");\n          char_max.textContent = \" / \" + options.maxCharCount;\n          charWrapper.appendChild(char_max);\n        }\n\n        resizingBar.appendChild(charWrapper);\n      }\n      /** poweredBy */\n\n\n      poweredBy = document.createElement(\"DIV\");\n      poweredBy.className = \"ke-powered-by\";\n      poweredBy.innerHTML = \"<a href=\\\"https://github.com/kothing/kothing-editor\\\" target=\\\"_blank\\\" title=\\\"Kothing-Editor\\\">Powered By Kothing</a>\";\n      resizingBar.appendChild(poweredBy);\n    }\n\n    var placeholder = null;\n\n    if (options.placeholder) {\n      placeholder = document.createElement(\"SPAN\");\n      placeholder.className = \"ke-placeholder\";\n      placeholder.innerText = options.placeholder;\n    }\n\n    return {\n      bottomBar: {\n        resizingBar: resizingBar,\n        navigation: navigation,\n        charWrapper: charWrapper,\n        charCounter: charCounter\n      },\n      wysiwygFrame: wysiwygDiv,\n      codeView: textarea,\n      placeholder: placeholder\n    };\n  },\n\n  /**\r\n   * @description Initialize options\r\n   * @param {Element} element Options object\r\n   * @param {Object} options Options object\r\n   * @private\r\n   */\n  _initOptions: function _initOptions(element, options) {\n    /** Values */\n    options.lang = options.lang || _en.default;\n    options.defaultTag = typeof options.defaultTag === \"string\" ? options.defaultTag : \"p\";\n    var textTags = options.textTags = [{\n      bold: \"STRONG\",\n      underline: \"U\",\n      italic: \"EM\",\n      strike: \"DEL\",\n      sub: \"SUB\",\n      sup: \"SUP\"\n    }, options.textTags || {}].reduce(function (_default, _new) {\n      for (var key in _new) {\n        _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {});\n    options._textTagsMap = {\n      strong: textTags.bold.toLowerCase(),\n      b: textTags.bold.toLowerCase(),\n      u: textTags.underline.toLowerCase(),\n      ins: textTags.underline.toLowerCase(),\n      em: textTags.italic.toLowerCase(),\n      i: textTags.italic.toLowerCase(),\n      del: textTags.strike.toLowerCase(),\n      strike: textTags.strike.toLowerCase(),\n      s: textTags.strike.toLowerCase(),\n      sub: textTags.sub.toLowerCase(),\n      sup: textTags.sup.toLowerCase()\n    };\n    options.value = typeof options.value === \"string\" ? options.value : null;\n    options.historyStackDelayTime = typeof options.historyStackDelayTime === \"number\" ? options.historyStackDelayTime : 400;\n    /** Whitelist */\n\n    var whitelist = \"br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path\";\n    options._defaultTagsWhitelist = typeof options._defaultTagsWhitelist === \"string\" ? options._defaultTagsWhitelist : whitelist;\n    options._editorTagsWhitelist = this._setWhitelist(options._defaultTagsWhitelist + (typeof options.addTagsWhitelist === \"string\" && options.addTagsWhitelist.length > 0 ? \"|\" + options.addTagsWhitelist : \"\"), options.tagsBlacklist);\n    options.pasteTagsWhitelist = this._setWhitelist(typeof options.pasteTagsWhitelist === \"string\" ? options.pasteTagsWhitelist : options._editorTagsWhitelist, options.pasteTagsBlacklist);\n    options.attributesWhitelist = !options.attributesWhitelist || _typeof(options.attributesWhitelist) !== \"object\" ? null : options.attributesWhitelist;\n    /** Layout */\n\n    options.mode = options.mode || \"classic\"; // classic, inline, balloon, balloon-always\n\n    options.rtl = !!options.rtl;\n    options._editableClass = \"kothing-editor-editable\" + (options.rtl ? \" ke-rtl\" : \"\");\n    options._printClass = typeof options._printClass === \"string\" ? options._printClass : null;\n    options.toolbarWidth = options.toolbarWidth ? _util.default.isNumber(options.toolbarWidth) ? options.toolbarWidth + \"px\" : options.toolbarWidth : \"auto\";\n    options.toolbarContainer = typeof options.toolbarContainer === \"string\" ? document.querySelector(options.toolbarContainer) : options.toolbarContainer;\n    options.stickyToolbar = /balloon/i.test(options.mode) || !!options.toolbarContainer ? -1 : options.stickyToolbar === undefined ? 0 : /^\\d+/.test(options.stickyToolbar) ? _util.default.getNumber(options.stickyToolbar, 0) : -1;\n    options.fullScreenOffset = options.fullScreenOffset === undefined ? 0 : /^\\d+/.test(options.fullScreenOffset) ? _util.default.getNumber(options.fullScreenOffset, 0) : 0;\n    options.iframe = options.fullPage || options.iframe;\n    options.fullPage = !!options.fullPage;\n    options.iframeCSSFileName = options.iframe ? typeof options.iframeCSSFileName === \"string\" ? [options.iframeCSSFileName] : options.iframeCSSFileName || [\"kothing-editor\"] : null;\n    options.previewTemplate = typeof options.previewTemplate === \"string\" ? options.previewTemplate : null;\n    options.printTemplate = typeof options.printTemplate === \"string\" ? options.printTemplate : null;\n    /** CodeMirror object */\n\n    options.codeMirror = options.codeMirror ? options.codeMirror.src ? options.codeMirror : {\n      src: options.codeMirror\n    } : null;\n    /** katex object (Math plugin) */\n\n    options.katex = options.katex ? options.katex.src ? options.katex : {\n      src: options.katex\n    } : null;\n    options.mathFontSize = !!options.mathFontSize ? options.mathFontSize : [{\n      text: \"1\",\n      value: \"1em\"\n    }, {\n      text: \"1.5\",\n      value: \"1.5em\"\n    }, {\n      text: \"2\",\n      value: \"2em\"\n    }, {\n      text: \"2.5\",\n      value: \"2.5em\"\n    }];\n    /** Display */\n\n    options.position = typeof options.position === \"string\" ? options.position : null;\n    options.display = options.display || (element.style.display === \"none\" || !element.style.display ? \"block\" : element.style.display);\n    options.popupDisplay = options.popupDisplay || \"full\";\n    /** Bottom resizing bar */\n\n    options.resizingBar = options.resizingBar === undefined ? /inline|balloon/i.test(options.mode) ? false : true : options.resizingBar;\n    options.showPathLabel = !options.resizingBar ? false : typeof options.showPathLabel === \"boolean\" ? options.showPathLabel : true;\n    /** Character count */\n\n    options.charCounter = options.maxCharCount > 0 ? true : typeof options.charCounter === \"boolean\" ? options.charCounter : false;\n    options.charCounterType = typeof options.charCounterType === \"string\" ? options.charCounterType : \"char\";\n    options.charCounterLabel = typeof options.charCounterLabel === \"string\" ? options.charCounterLabel.trim() : null;\n    options.maxCharCount = _util.default.isNumber(options.maxCharCount) && options.maxCharCount > -1 ? options.maxCharCount * 1 : null;\n    /** Width size */\n\n    options.width = options.width ? _util.default.isNumber(options.width) ? options.width + \"px\" : options.width : element.clientWidth ? element.clientWidth + \"px\" : \"100%\";\n    options.minWidth = (_util.default.isNumber(options.minWidth) ? options.minWidth + \"px\" : options.minWidth) || \"\";\n    options.maxWidth = (_util.default.isNumber(options.maxWidth) ? options.maxWidth + \"px\" : options.maxWidth) || \"\";\n    /** Height size */\n\n    options.height = options.height ? _util.default.isNumber(options.height) ? options.height + \"px\" : options.height : element.clientHeight ? element.clientHeight + \"px\" : \"auto\";\n    options.minHeight = (_util.default.isNumber(options.minHeight) ? options.minHeight + \"px\" : options.minHeight) || \"\";\n    options.maxHeight = (_util.default.isNumber(options.maxHeight) ? options.maxHeight + \"px\" : options.maxHeight) || \"\";\n    /** Editing area default style */\n\n    options.defaultStyle = typeof options.defaultStyle === \"string\" ? options.defaultStyle : \"\";\n    /** Defining menu items */\n\n    options.font = !options.font ? null : options.font;\n    options.fontSize = !options.fontSize ? null : options.fontSize;\n    options.formats = !options.formats ? null : options.formats;\n    options.colorList = !options.colorList ? null : options.colorList;\n    options.lineHeights = !options.lineHeights ? null : options.lineHeights;\n    options.paragraphStyles = !options.paragraphStyles ? null : options.paragraphStyles;\n    options.textStyles = !options.textStyles ? null : options.textStyles;\n    options.fontSizeUnit = typeof options.fontSizeUnit === \"string\" ? options.fontSizeUnit.trim() || \"px\" : \"px\";\n    /** Image */\n\n    options.imageResizing = options.imageResizing === undefined ? true : options.imageResizing;\n    options.imageHeightShow = options.imageHeightShow === undefined ? true : !!options.imageHeightShow;\n    options.imageWidth = !options.imageWidth ? \"auto\" : _util.default.isNumber(options.imageWidth) ? options.imageWidth + \"px\" : options.imageWidth;\n    options.imageHeight = !options.imageHeight ? \"auto\" : _util.default.isNumber(options.imageHeight) ? options.imageHeight + \"px\" : options.imageHeight;\n    options.imageSizeOnlyPercentage = !!options.imageSizeOnlyPercentage;\n    options._imageSizeUnit = options.imageSizeOnlyPercentage ? \"%\" : \"px\";\n    options.imageRotation = options.imageRotation !== undefined ? options.imageRotation : !(options.imageSizeOnlyPercentage || !options.imageHeightShow);\n    options.imageFileInput = options.imageFileInput === undefined ? true : options.imageFileInput;\n    options.imageUrlInput = options.imageUrlInput === undefined || !options.imageFileInput ? true : options.imageUrlInput;\n    options.imageUploadHeader = options.imageUploadHeader || null;\n    options.imageUploadUrl = typeof options.imageUploadUrl === \"string\" ? options.imageUploadUrl : null;\n    options.imageUploadSizeLimit = /\\d+/.test(options.imageUploadSizeLimit) ? _util.default.getNumber(options.imageUploadSizeLimit, 0) : null;\n    options.imageMultipleFile = !!options.imageMultipleFile;\n    options.imageAccept = typeof options.imageAccept !== \"string\" || options.imageAccept.trim() === \"*\" ? \"image/*\" : options.imageAccept.trim() || \"image/*\";\n    /** Image - image gallery */\n\n    options.imageGalleryUrl = typeof options.imageGalleryUrl === \"string\" ? options.imageGalleryUrl : null;\n    options.imageGalleryHeader = options.imageGalleryHeader || null;\n    /** Video */\n\n    options.videoResizing = options.videoResizing === undefined ? true : options.videoResizing;\n    options.videoHeightShow = options.videoHeightShow === undefined ? true : !!options.videoHeightShow;\n    options.videoRatioShow = options.videoRatioShow === undefined ? true : !!options.videoRatioShow;\n    options.videoWidth = !options.videoWidth || !_util.default.getNumber(options.videoWidth, 0) ? \"\" : _util.default.isNumber(options.videoWidth) ? options.videoWidth + \"px\" : options.videoWidth;\n    options.videoHeight = !options.videoHeight || !_util.default.getNumber(options.videoHeight, 0) ? \"\" : _util.default.isNumber(options.videoHeight) ? options.videoHeight + \"px\" : options.videoHeight;\n    options.videoSizeOnlyPercentage = !!options.videoSizeOnlyPercentage;\n    options._videoSizeUnit = options.videoSizeOnlyPercentage ? \"%\" : \"px\";\n    options.videoRotation = options.videoRotation !== undefined ? options.videoRotation : !(options.videoSizeOnlyPercentage || !options.videoHeightShow);\n    options.videoRatio = _util.default.getNumber(options.videoRatio, 4) || 0.5625;\n    options.videoRatioList = !options.videoRatioList ? null : options.videoRatioList;\n    options.youtubeQuery = (options.youtubeQuery || \"\").replace(\"?\", \"\");\n    options.videoFileInput = !!options.videoFileInput;\n    options.videoUrlInput = options.videoUrlInput === undefined || !options.videoFileInput ? true : options.videoUrlInput;\n    options.videoUploadHeader = options.videoUploadHeader || null;\n    options.videoUploadUrl = typeof options.videoUploadUrl === \"string\" ? options.videoUploadUrl : null;\n    options.videoUploadSizeLimit = /\\d+/.test(options.videoUploadSizeLimit) ? _util.default.getNumber(options.videoUploadSizeLimit, 0) : null;\n    options.videoMultipleFile = !!options.videoMultipleFile;\n    options.videoTagAttrs = options.videoTagAttrs || null;\n    options.videoIframeAttrs = options.videoIframeAttrs || null;\n    options.videoAccept = typeof options.videoAccept !== \"string\" || options.videoAccept.trim() === \"*\" ? \"video/*\" : options.videoAccept.trim() || \"video/*\";\n    /** Audio */\n\n    options.audioWidth = !options.audioWidth ? \"\" : _util.default.isNumber(options.audioWidth) ? options.audioWidth + \"px\" : options.audioWidth;\n    options.audioHeight = !options.audioHeight ? \"\" : _util.default.isNumber(options.audioHeight) ? options.audioHeight + \"px\" : options.audioHeight;\n    options.audioFileInput = !!options.audioFileInput;\n    options.audioUrlInput = options.audioUrlInput === undefined || !options.audioFileInput ? true : options.audioUrlInput;\n    options.audioUploadHeader = options.audioUploadHeader || null;\n    options.audioUploadUrl = typeof options.audioUploadUrl === \"string\" ? options.audioUploadUrl : null;\n    options.audioUploadSizeLimit = /\\d+/.test(options.audioUploadSizeLimit) ? _util.default.getNumber(options.audioUploadSizeLimit, 0) : null;\n    options.audioMultipleFile = !!options.audioMultipleFile;\n    options.audioTagAttrs = options.audioTagAttrs || null;\n    options.audioAccept = typeof options.audioAccept !== \"string\" || options.audioAccept.trim() === \"*\" ? \"audio/*\" : options.audioAccept.trim() || \"audio/*\";\n    /** Table */\n\n    options.tableCellControllerPosition = typeof options.tableCellControllerPosition === \"string\" ? options.tableCellControllerPosition.toLowerCase() : \"cell\";\n    /** Link */\n\n    options.linkProtocol = typeof options.linkProtocol === \"string\" ? options.linkProtocol : null;\n    options.linkRel = Array.isArray(options.linkRel) ? options.linkRel : [];\n    options.linkRelDefault = options.linkRelDefault || {};\n    /** Key actions */\n\n    options.tabDisable = !!options.tabDisable;\n    options.shortcutsDisable = Array.isArray(options.shortcutsDisable) ? options.shortcutsDisable : [];\n    options.shortcutsHint = options.shortcutsHint === undefined ? true : !!options.shortcutsHint;\n    /** Defining save button */\n\n    options.callBackSave = !options.callBackSave ? null : options.callBackSave;\n    /** Templates Array */\n\n    options.templates = !options.templates ? null : options.templates;\n    /** ETC */\n\n    options.placeholder = typeof options.placeholder === \"string\" ? options.placeholder : null;\n    options.mediaAutoSelect = options.mediaAutoSelect === undefined ? true : !!options.mediaAutoSelect;\n    /** Buttons */\n\n    options.toolbarItem = !!options.toolbarItem ? options.toolbarItem : [[\"undo\", \"redo\"], [\"bold\", \"underline\", \"italic\", \"strike\", \"subscript\", \"superscript\"], [\"removeFormat\"], [\"outdent\", \"indent\"], [\"fullScreen\", \"showBlocks\", \"codeView\"], [\"preview\", \"print\"]];\n    /** RTL - buttons */\n\n    if (options.rtl) {\n      options.toolbarItem = options.toolbarItem.reverse();\n    }\n    /** --- Define icons --- */\n    // custom icons\n\n\n    options.icons = !options.icons || _typeof(options.icons) !== \"object\" ? _defaultIcons.default : [_defaultIcons.default, options.icons].reduce(function (_default, _new) {\n      for (var key in _new) {\n        if (_util.default.hasOwn(_new, key)) _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {}); // rtl icons\n\n    options.icons = !options.rtl ? options.icons : [options.icons, options.icons.rtl].reduce(function (_default, _new) {\n      for (var key in _new) {\n        if (_util.default.hasOwn(_new, key)) _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {});\n    /** _init options */\n\n    options._editorStyles = _util.default._setDefaultOptionStyle(options, options.defaultStyle);\n  },\n  _setWhitelist: function _setWhitelist(whitelist, blacklist) {\n    if (typeof blacklist !== \"string\") return whitelist;\n    blacklist = blacklist.split(\"|\");\n    whitelist = whitelist.split(\"|\");\n\n    for (var i = 0, len = blacklist.length, index; i < len; i++) {\n      index = whitelist.indexOf(blacklist[i]);\n      if (index > -1) whitelist.splice(index, 1);\n    }\n\n    return whitelist.join(\"|\");\n  },\n\n  /**\r\n   * @description KothingEditor's Default button list\r\n   * @param {Object} options options\r\n   * @private\r\n   */\n  _defaultButtons: function _defaultButtons(options) {\n    var icons = options.icons;\n    var lang = options.lang;\n    var cmd = _util.default.isOSX_IOS ? \"\" : \"CTRL\";\n    var addShift = _util.default.isOSX_IOS ? \"\" : \"+SHIFT\";\n    var shortcutsDisable = !options.shortcutsHint ? [\"bold\", \"strike\", \"underline\", \"italic\", \"undo\", \"indent\", \"save\"] : options.shortcutsDisable;\n    var indentKey = options.rtl ? [\"[\", \"]\"] : [\"]\", \"[\"];\n    return {\n      /** default command */\n      bold: [\"_ke_command_bold\", lang.toolbar.bold + \" \" + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"bold\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">B</span>') + \"</span>\", \"bold\", \"\", icons.bold],\n      underline: [\"_ke_command_underline\", lang.toolbar.underline + \" \" + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"underline\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">U</span>') + \"</span>\", \"underline\", \"\", icons.underline],\n      italic: [\"_ke_command_italic\", lang.toolbar.italic + \" \" + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"italic\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">I</span>') + \"</span>\", \"italic\", \"\", icons.italic],\n      strike: [\"_ke_command_strike\", lang.toolbar.strike + \" \" + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"strike\") > -1 ? \"\" : cmd + addShift + '+<span class=\"ke-shortcut-key\">S</span>') + \"</span>\", \"strike\", \"\", icons.strike],\n      subscript: [\"_ke_command_subscript\", lang.toolbar.subscript, \"SUB\", \"\", icons.subscript],\n      superscript: [\"_ke_command_superscript\", lang.toolbar.superscript, \"SUP\", \"\", icons.superscript],\n      removeFormat: [\"\", lang.toolbar.removeFormat, \"removeFormat\", \"\", icons.erase],\n      indent: [\"_ke_command_indent\", lang.toolbar.indent + \" \" + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"indent\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">' + indentKey[0] + \"</span>\") + \"</span>\", \"indent\", \"\", icons.outdent],\n      outdent: [\"_ke_command_outdent\", lang.toolbar.outdent + \" \" + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"indent\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">' + indentKey[1] + \"</span>\") + \"</span>\", \"outdent\", \"\", icons.indent],\n      fullScreen: [\"ke-code-view-enabled ke-resizing-enabled _ke_command_fullScreen\", lang.toolbar.fullScreen, \"fullScreen\", \"\", icons.expansion],\n      showBlocks: [\"_ke_command_showBlocks\", lang.toolbar.showBlocks, \"showBlocks\", \"\", icons.show_blocks],\n      codeView: [\"ke-code-view-enabled ke-resizing-enabled _ke_command_codeView\", lang.toolbar.codeView, \"codeView\", \"\", icons.code_view],\n      undo: [\"_ke_command_undo ke-resizing-enabled\", lang.toolbar.undo + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"undo\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">Z</span>') + \"</span>\", \"undo\", \"\", icons.undo],\n      redo: [\"_ke_command_redo ke-resizing-enabled\", lang.toolbar.redo + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"undo\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">Y</span> / ' + cmd + addShift + '+<span class=\"ke-shortcut-key\">Z</span>') + \"</span>\", \"redo\", \"\", icons.redo],\n      preview: [\"ke-resizing-enabled\", lang.toolbar.preview, \"preview\", \"\", icons.preview],\n      print: [\"ke-resizing-enabled\", lang.toolbar.print, \"print\", \"\", icons.print],\n      save: [\"_ke_command_save ke-resizing-enabled\", lang.toolbar.save + '<span class=\"ke-shortcut\">' + (shortcutsDisable.indexOf(\"save\") > -1 ? \"\" : cmd + '+<span class=\"ke-shortcut-key\">S</span>') + \"</span>\", \"save\", \"\", icons.save],\n\n      /** plugins - command */\n      blockquote: [\"\", lang.toolbar.tag_blockquote, \"blockquote\", \"command\", icons.blockquote],\n\n      /** plugins - submenu */\n      font: [\"ke-btn-select ke-btn-tool-font\", lang.toolbar.font, \"font\", \"submenu\", \"<span class=\\\"txt\\\">\".concat(icons.font, \"</span> <span class=\\\"arrow-icon\\\">\").concat(icons.arrow_down, \"</span>\")],\n      formatBlock: [\"ke-btn-select ke-btn-tool-format\", lang.toolbar.formats, \"formatBlock\", \"submenu\", \"<span class=\\\"txt\\\">\".concat(icons.format_block, \"</span> <span class=\\\"arrow-icon\\\">\").concat(icons.arrow_down, \"</span>\")],\n      fontSize: [\"ke-btn-select ke-btn-tool-size\", lang.toolbar.fontSize, \"fontSize\", \"submenu\", \"<span class=\\\"txt\\\">\".concat(icons.font_size, \"</span> <span class=\\\"arrow-icon\\\">\").concat(icons.arrow_down, \"</span>\")],\n      fontColor: [\"\", lang.toolbar.fontColor, \"fontColor\", \"submenu\", icons.font_color],\n      hiliteColor: [\"\", lang.toolbar.hiliteColor, \"hiliteColor\", \"submenu\", icons.highlight_color],\n      align: [\"ke-btn-align\", lang.toolbar.align, \"align\", \"submenu\", options.rtl ? icons.align_right : icons.align_left],\n      list: [\"\", lang.toolbar.list, \"list\", \"submenu\", icons.list_number],\n      horizontalRule: [\"btn_line\", lang.toolbar.horizontalRule, \"horizontalRule\", \"submenu\", icons.horizontal_rule],\n      table: [\"\", lang.toolbar.table, \"table\", \"submenu\", icons.table],\n      lineHeight: [\"\", lang.toolbar.lineHeight, \"lineHeight\", \"submenu\", icons.line_height],\n      template: [\"\", lang.toolbar.template, \"template\", \"submenu\", icons.template],\n      paragraphStyle: [\"\", lang.toolbar.paragraphStyle, \"paragraphStyle\", \"submenu\", icons.paragraph_style],\n      textStyle: [\"\", lang.toolbar.textStyle, \"textStyle\", \"submenu\", icons.text_style],\n\n      /** plugins - dialog */\n      link: [\"\", lang.toolbar.link, \"link\", \"dialog\", icons.link],\n      image: [\"\", lang.toolbar.image, \"image\", \"dialog\", icons.image],\n      video: [\"\", lang.toolbar.video, \"video\", \"dialog\", icons.video],\n      audio: [\"\", lang.toolbar.audio, \"audio\", \"dialog\", icons.audio],\n      math: [\"\", lang.toolbar.math, \"math\", \"dialog\", icons.math],\n\n      /** plugins - fileBrowser */\n      imageGallery: [\"\", lang.toolbar.imageGallery, \"imageGallery\", \"fileBrowser\", icons.image_gallery]\n    };\n  },\n\n  /**\r\n   * @description Create a group div containing each module\r\n   * @returns {Object}\r\n   * @private\r\n   */\n  _createModuleGroup: function _createModuleGroup() {\n    var oDiv = _util.default.createElement(\"DIV\");\n\n    oDiv.className = \"ke-btn-module ke-btn-module-border\";\n\n    var oUl = _util.default.createElement(\"UL\");\n\n    oUl.className = \"ke-menu-list\";\n    oDiv.appendChild(oUl);\n    return {\n      div: oDiv,\n      ul: oUl\n    };\n  },\n\n  /**\r\n   * @description Create a button element\r\n   * @param {string} buttonClass className in button\r\n   * @param {string} title Title in button\r\n   * @param {string} dataCommand The data-command property of the button\r\n   * @param {string} dataDisplay The data-display property of the button ('dialog', 'submenu', 'command')\r\n   * @param {string} innerHTML Html in button\r\n   * @param {string} _disabled Button disabled\r\n   * @param {Object} _icons Icons\r\n   * @returns {Object}\r\n   * @private\r\n   */\n  _createButton: function _createButton(buttonClass, title, dataCommand, dataDisplay, innerHTML, _disabled, _icons) {\n    var oLi = _util.default.createElement(\"LI\");\n\n    var oButton = _util.default.createElement(\"BUTTON\");\n\n    oButton.setAttribute(\"type\", \"button\");\n    oButton.setAttribute(\"class\", \"ke-btn\" + (buttonClass ? \" \" + buttonClass : \"\") + \" ke-tooltip\");\n    oButton.setAttribute(\"data-command\", dataCommand);\n    oButton.setAttribute(\"data-display\", dataDisplay);\n    oButton.setAttribute(\"tabindex\", \"-1\");\n    if (!innerHTML) innerHTML = '<span class=\"ke-icon-text\">!</span>';\n\n    if (/^default\\./i.test(innerHTML)) {\n      innerHTML = _icons[innerHTML.replace(/^default\\./i, \"\")];\n    }\n\n    if (/^text\\./i.test(innerHTML)) {\n      innerHTML = innerHTML.replace(/^text\\./i, \"\");\n      oButton.className += \" ke-btn-more-text\";\n    }\n\n    innerHTML += '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + (title || dataCommand) + \"</span></span>\";\n\n    if (_disabled) {\n      oButton.setAttribute(\"disabled\", true);\n    }\n\n    oButton.innerHTML = innerHTML;\n    oLi.appendChild(oButton);\n    return {\n      li: oLi,\n      button: oButton\n    };\n  },\n\n  /**\r\n   * @description Create editor HTML\r\n   * @param {Array} doc document object\r\n   * @param {Array} toolbarItem option.toolbarItem\r\n   * @param {Array|Object|null} _plugins Plugins\r\n   * @param {Array} options options\r\n   * @returns {Object} { element: (Element) Toolbar element, plugins: (Array|null) Plugins Array, pluginCallButtons: (Object), responsiveButtons: (Array) }\r\n   * @private\r\n   */\n  _createToolBar: function _createToolBar(doc, toolbarItem, _plugins, options) {\n    var separator_vertical = doc.createElement(\"DIV\");\n    separator_vertical.className = \"ke-toolbar-separator-vertical\";\n    var tool_bar = doc.createElement(\"DIV\");\n    tool_bar.className = \"ke-toolbar kothing-editor-common\";\n    var buttonTray = doc.createElement(\"DIV\");\n    buttonTray.className = \"ke-btn-tray\";\n    tool_bar.appendChild(buttonTray);\n    /** create button list */\n\n    toolbarItem = JSON.parse(JSON.stringify(toolbarItem));\n    var icons = options.icons;\n\n    var defaultToolbarItem = this._defaultButtons(options);\n\n    var pluginCallButtons = {};\n    var responsiveButtons = [];\n    var plugins = {};\n\n    if (_plugins) {\n      var pluginsValues = _plugins.length ? _plugins : Object.keys(_plugins).map(function (name) {\n        return _plugins[name];\n      });\n\n      for (var i = 0, len = pluginsValues.length, p; i < len; i++) {\n        p = pluginsValues[i].default || pluginsValues[i];\n        plugins[p.name] = p;\n      }\n    }\n\n    var module = null;\n    var button = null;\n    var moduleElement = null;\n    var buttonElement = null;\n    var pluginName = \"\";\n    var vertical = false;\n\n    var moreLayer = _util.default.createElement(\"DIV\");\n\n    moreLayer.className = \"ke-toolbar-more-layer\";\n\n    buttonGroupLoop: for (var _i = 0, more, moreContainer, moreCommand, buttonGroup, align; _i < toolbarItem.length; _i++) {\n      more = false;\n      align = \"\";\n      buttonGroup = toolbarItem[_i];\n      moduleElement = this._createModuleGroup(); // button object\n\n      if (_typeof(buttonGroup) === \"object\") {\n        // buttons loop\n        for (var j = 0, moreButton; j < buttonGroup.length; j++) {\n          button = buttonGroup[j];\n          moreButton = false;\n\n          if (/^\\%\\d+/.test(button) && j === 0) {\n            buttonGroup[0] = button.replace(/[^\\d]/g, \"\");\n            responsiveButtons.push(buttonGroup);\n            toolbarItem.splice(_i--, 1);\n            continue buttonGroupLoop;\n          }\n\n          if (_typeof(button) === \"object\") {\n            if (typeof button.add === \"function\") {\n              pluginName = button.name;\n              module = defaultToolbarItem[pluginName];\n              plugins[pluginName] = button;\n            } else {\n              pluginName = button.name;\n              module = [button.buttonClass, button.title, button.name, button.dataDisplay, button.innerHTML, button._disabled];\n            }\n          } else {\n            // align\n            if (/^\\-/.test(button)) {\n              align = button.substr(1);\n              moduleElement.div.style.float = align;\n              continue;\n            } // more button\n\n\n            if (/^\\:/.test(button)) {\n              moreButton = true;\n              var matched = button.match(/^\\:([^\\-]+)\\-([^\\-]+)\\-([^\\-]+)/);\n              moreCommand = \"__ke__\" + matched[1].trim();\n              var title = matched[2].trim();\n              var innerHTML = matched[3].trim();\n              module = [\"ke-btn-more\", title, moreCommand, \"MORE\", innerHTML];\n            } // buttons\n            else {\n                module = defaultToolbarItem[button];\n              }\n\n            pluginName = button;\n\n            if (!module) {\n              var custom = plugins[pluginName];\n              if (!custom) throw Error(\"[KothingEditor.create.toolbar.fail] The button name of a plugin that does not exist. [\" + pluginName + \"]\");\n              module = [custom.buttonClass, custom.title, custom.name, custom.display, custom.innerHTML, custom._disabled];\n            }\n          }\n\n          buttonElement = this._createButton(module[0], module[1], module[2], module[3], module[4], module[5], icons);\n          (more ? moreContainer : moduleElement.ul).appendChild(buttonElement.li);\n\n          if (plugins[pluginName]) {\n            pluginCallButtons[pluginName] = buttonElement.button;\n          } // more button\n\n\n          if (moreButton) {\n            more = true;\n            moreContainer = _util.default.createElement(\"DIV\");\n            moreContainer.className = \"ke-more-layer \" + moreCommand;\n            moreContainer.innerHTML = '<div class=\"ke-more-form\"><ul class=\"ke-menu-list\"' + (align ? ' style=\"float: ' + align + ';\"' : \"\") + \"></ul></div>\";\n            moreLayer.appendChild(moreContainer);\n            moreContainer = moreContainer.firstElementChild.firstElementChild;\n          }\n        }\n\n        if (vertical) {\n          var sv = separator_vertical.cloneNode(false);\n          buttonTray.appendChild(sv);\n        }\n\n        buttonTray.appendChild(moduleElement.div);\n        vertical = true;\n      } else if (/^\\/$/.test(buttonGroup)) {\n        /** line break  */\n        var enterDiv = doc.createElement(\"DIV\");\n        enterDiv.className = \"ke-btn-module-enter\";\n        buttonTray.appendChild(enterDiv);\n        vertical = false;\n      }\n    }\n\n    switch (buttonTray.children.length) {\n      case 0:\n        buttonTray.style.display = \"none\";\n        break;\n\n      case 1:\n        _util.default.removeClass(buttonTray.firstElementChild, \"ke-btn-module-border\");\n\n        break;\n\n      default:\n        if (options.rtl) {\n          var _sv = separator_vertical.cloneNode(false);\n\n          _sv.style.float = buttonTray.lastElementChild.style.float;\n          buttonTray.appendChild(_sv);\n        }\n\n    }\n\n    if (responsiveButtons.length > 0) responsiveButtons.unshift(toolbarItem);\n    if (moreLayer.children.length > 0) buttonTray.appendChild(moreLayer); // menu tray\n\n    var menuTray = doc.createElement(\"DIV\");\n    menuTray.className = \"ke-menu-tray\";\n    tool_bar.appendChild(menuTray); // cover\n\n    var tool_cover = doc.createElement(\"DIV\");\n    tool_cover.className = \"ke-toolbar-cover\";\n    tool_bar.appendChild(tool_cover);\n    return {\n      element: tool_bar,\n      plugins: plugins,\n      pluginCallButtons: pluginCallButtons,\n      responsiveButtons: responsiveButtons,\n      menuTray: menuTray,\n      buttonTray: buttonTray\n    };\n  }\n};\nexports.default = _default2;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _fileBrowser = _interopRequireDefault(require(\"../modules/fileBrowser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"imageGallery\",\n\n  /**\r\n   * @description Constructor\r\n   * @param {Object} core Core object\r\n   */\n  add: function add(core) {\n    core.addModule([_fileBrowser.default]);\n    var context = core.context;\n    context.imageGallery = {\n      title: core.lang.toolbar.imageGallery,\n      // @Required @Override fileBrowser - File browser window title.\n      url: core.options.imageGalleryUrl,\n      // @Required @Override fileBrowser - File server url.\n      header: core.options.imageGalleryHeader,\n      // @Required @Override fileBrowser - File server http header.\n      listClass: \"ke-image-list\",\n      // @Required @Override fileBrowser - Class name of list div.\n      itemTemplateHandler: this.drawItems,\n      // @Required @Override fileBrowser - Function that defines the HTML of an file item.\n      selectorHandler: this.setImage.bind(core),\n      // @Required @Override fileBrowser - Function that action when item click.\n      columnSize: 4 // @Option @Override fileBrowser - Number of \"div.ke-file-item-column\" to be created (default: 4)\n\n    };\n  },\n\n  /**\r\n   * @Required @Override fileBrowser\r\n   * @description Open a file browser.\r\n   * @param {Function|null} selectorHandler When the function comes as an argument value, it substitutes \"context.selectorHandler\".\r\n   */\n  open: function open(selectorHandler) {\n    this.plugins.fileBrowser.open.call(this, \"imageGallery\", selectorHandler);\n  },\n\n  /**\r\n   * @Required @Override fileBrowser\r\n   * @description Define the HTML of the item to be put in \"div.ke-file-item-column\".\r\n   * Format: [\r\n   *      { src: \"image src\", name: \"name(@option)\", alt: \"image alt(@option)\", tag: \"tag name(@option)\" }\r\n   * ]\r\n   * @param {Object} item Item of the response data's array\r\n   */\n  drawItems: function drawItems(item) {\n    var srcName = item.src.split(\"/\").pop();\n    return '<div class=\"ke-file-item-img\"><img src=\"' + item.src + '\" alt=\"' + (item.alt || srcName) + '\" data-command=\"pick\">' + '<div class=\"ke-file-img-name ke-file-name-back\"></div>' + '<div class=\"ke-file-img-name __ke__img_name\">' + (item.name || srcName) + \"</div>\" + \"</div>\";\n  },\n  setImage: function setImage(target) {\n    this.callPlugin(\"image\", function () {\n      var file = {\n        name: target.parentNode.querySelector(\".__ke__img_name\").textContent,\n        size: 0\n      };\n      this.context.image._altText = target.alt;\n      this.plugins.image.create_image.call(this, target.src, null, this.context.image._origin_w, this.context.image._origin_h, \"none\", file);\n    }.bind(this), null);\n  }\n};\nexports.default = _default;","module.exports = __webpack_public_path__ + \"img/logo_1.5ce8c4b7.jpg\";","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n(function (global, factory) {\n  if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error(\"KothingEditor_MODULES a window with a document\");\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== \"undefined\" ? window : void 0, function (window, noGlobal) {\n  var resizing = {\n    name: \"resizing\",\n\n    /**\r\n         * @description Constructor\r\n         * Require context properties when resizing module\r\n            inputX: Element,\r\n            inputY: Element,\r\n            _container: null,\r\n            _cover: null,\r\n            _element: null,\r\n            _element_w: 1,\r\n            _element_h: 1,\r\n            _element_l: 0,\r\n            _element_t: 0,\r\n            _defaultSizeX: 'auto',\r\n            _defaultSizeY: 'auto',\r\n            _origin_w: core.options.imageWidth === 'auto' ? '' : core.options.imageWidth,\r\n            _origin_h: core.options.imageHeight === 'auto' ? '' : core.options.imageHeight,\r\n            _proportionChecked: true,\r\n            // -- select function --\r\n            _resizing: core.options.imageResizing,\r\n            _resizeDotHide: !core.options.imageHeightShow,\r\n            _rotation: core.options.imageRotation,\r\n            _onlyPercentage: core.options.imageSizeOnlyPercentage,\r\n            _ratio: false,\r\n            _ratioX: 1,\r\n            _ratioY: 1\r\n            _captionShow: true,\r\n            // -- when used caption (_captionShow: true) --\r\n            _caption: null,\r\n            _captionChecked: false,\r\n            captionCheckEl: null,\r\n         * @param {Object} core Core object \r\n         */\n    add: function add(core) {\n      var icons = core.icons;\n      var context = core.context;\n      context.resizing = {\n        _resizeClientX: 0,\n        _resizeClientY: 0,\n        _resize_plugin: \"\",\n        _resize_w: 0,\n        _resize_h: 0,\n        _origin_w: 0,\n        _origin_h: 0,\n        _rotateVertical: false,\n        _resize_direction: \"\",\n        _move_path: null,\n        _isChange: false,\n        alignIcons: {\n          basic: icons.align_justify,\n          left: icons.align_left,\n          right: icons.align_right,\n          center: icons.align_center\n        }\n      };\n      /** resize controller, button */\n\n      var resize_div_container = this.setController_resize(core);\n      context.resizing.resizeContainer = resize_div_container;\n      context.resizing.resizeDiv = resize_div_container.querySelector(\".ke-modal-resize\");\n      context.resizing.resizeDot = resize_div_container.querySelector(\".ke-resize-dot\");\n      context.resizing.resizeDisplay = resize_div_container.querySelector(\".ke-resize-display\");\n      var resize_button = this.setController_button(core);\n      context.resizing.resizeButton = resize_button;\n      var resize_handles = context.resizing.resizeHandles = context.resizing.resizeDot.querySelectorAll(\"span\");\n      context.resizing.resizeButtonGroup = resize_button.querySelector(\"._ke_resizing_btn_group\");\n      context.resizing.rotationButtons = resize_button.querySelectorAll(\"._ke_resizing_btn_group ._ke_rotation\");\n      context.resizing.percentageButtons = resize_button.querySelectorAll(\"._ke_resizing_btn_group ._ke_percentage\");\n      context.resizing.alignMenu = resize_button.querySelector(\".ke-resizing-align-list\");\n      context.resizing.alignMenuList = context.resizing.alignMenu.querySelectorAll(\"button\");\n      context.resizing.alignButton = resize_button.querySelector(\"._ke_resizing_align_button\");\n      context.resizing.autoSizeButton = resize_button.querySelector(\"._ke_resizing_btn_group ._ke_auto_size\");\n      context.resizing.captionButton = resize_button.querySelector(\"._ke_resizing_caption_button\");\n      /** add event listeners */\n\n      resize_div_container.addEventListener(\"mousedown\", function (e) {\n        e.preventDefault();\n      });\n      resize_handles[0].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[1].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[2].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[3].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[4].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[5].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[6].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_handles[7].addEventListener(\"mousedown\", this.onMouseDown_resize_handle.bind(core));\n      resize_button.addEventListener(\"click\", this.onClick_resizeButton.bind(core));\n      /** append html */\n\n      context.element.relative.appendChild(resize_div_container);\n      context.element.relative.appendChild(resize_button);\n      /** empty memory */\n\n      resize_div_container = null, resize_button = null, resize_handles = null;\n    },\n\n    /** resize controller, button (image, iframe, video) */\n    setController_resize: function setController_resize(core) {\n      var resize_container = core.util.createElement(\"DIV\");\n      resize_container.className = \"ke-controller ke-resizing-container\";\n      resize_container.style.display = \"none\";\n      resize_container.innerHTML = \"\" + '<div class=\"ke-modal-resize\"></div>' + '<div class=\"ke-resize-dot\">' + '<span class=\"tl\"></span>' + '<span class=\"tr\"></span>' + '<span class=\"bl\"></span>' + '<span class=\"br\"></span>' + '<span class=\"lw\"></span>' + '<span class=\"th\"></span>' + '<span class=\"rw\"></span>' + '<span class=\"bh\"></span>' + '<div class=\"ke-resize-display\"></div>' + \"</div>\";\n      return resize_container;\n    },\n    setController_button: function setController_button(core) {\n      var lang = core.lang;\n      var icons = core.icons;\n      var resize_button = core.util.createElement(\"DIV\");\n      resize_button.className = \"ke-controller ke-controller-resizing\";\n      resize_button.innerHTML = \"\" + '<div class=\"ke-arrow ke-arrow-up\"></div>' + '<div class=\"ke-btn-group _ke_resizing_btn_group\">' + '<button type=\"button\" data-command=\"percent\" data-value=\"1\" class=\"ke-tooltip _ke_percentage\">' + \"<span>100%</span>\" + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.resize100 + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"percent\" data-value=\"0.75\" class=\"ke-tooltip _ke_percentage\">' + \"<span>75%</span>\" + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.resize75 + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"percent\" data-value=\"0.5\" class=\"ke-tooltip _ke_percentage\">' + \"<span>50%</span>\" + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.resize50 + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"auto\" class=\"ke-btn ke-tooltip _ke_auto_size\">' + icons.auto_size + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.autoSize + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"rotate\" data-value=\"-90\" class=\"ke-btn ke-tooltip _ke_rotation\">' + icons.rotate_left + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.rotateLeft + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"rotate\" data-value=\"90\" class=\"ke-btn ke-tooltip _ke_rotation\">' + icons.rotate_right + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.rotateRight + \"</span></span>\" + \"</button>\" + \"</div>\" + '<div class=\"ke-btn-group\" style=\"padding-top: 0;\">' + '<button type=\"button\" data-command=\"mirror\" data-value=\"h\" class=\"ke-btn ke-tooltip\">' + icons.mirror_horizontal + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.mirrorHorizontal + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"mirror\" data-value=\"v\" class=\"ke-btn ke-tooltip\">' + icons.mirror_vertical + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.mirrorVertical + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"onalign\" class=\"ke-btn ke-tooltip _ke_resizing_align_button\">' + icons.align_justify + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.toolbar.align + \"</span></span>\" + \"</button>\" + '<div class=\"ke-btn-group-sub kothing-editor-common ke-list-layer ke-resizing-align-list\">' + '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + '<li><button type=\"button\" class=\"ke-btn-list ke-tooltip\" data-command=\"align\" data-value=\"basic\">' + icons.align_justify + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.dialogBox.basic + \"</span></span>\" + \"</button></li>\" + '<li><button type=\"button\" class=\"ke-btn-list ke-tooltip\" data-command=\"align\" data-value=\"left\">' + icons.align_left + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.dialogBox.left + \"</span></span>\" + \"</button></li>\" + '<li><button type=\"button\" class=\"ke-btn-list ke-tooltip\" data-command=\"align\" data-value=\"center\">' + icons.align_center + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.dialogBox.center + \"</span></span>\" + \"</button></li>\" + '<li><button type=\"button\" class=\"ke-btn-list ke-tooltip\" data-command=\"align\" data-value=\"right\">' + icons.align_right + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.dialogBox.right + \"</span></span>\" + \"</button></li>\" + \"</ul>\" + \"</div>\" + \"</div>\" + '<button type=\"button\" data-command=\"caption\" class=\"ke-btn ke-tooltip _ke_resizing_caption_button\">' + icons.caption + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.dialogBox.caption + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"revert\" class=\"ke-btn ke-tooltip\">' + icons.revert + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.dialogBox.revertButton + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"update\" class=\"ke-btn ke-tooltip\">' + icons.modify + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.edit + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"delete\" class=\"ke-btn ke-tooltip\">' + icons.delete + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.remove + \"</span></span>\" + \"</button>\" + \"</div>\";\n      return resize_button;\n    },\n\n    /**\r\n     * @description Gets the width size\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     * @param {Element} element Target element\r\n     * @param {Element} cover Cover element (FIGURE)\r\n     * @param {Element} container Container element (DIV.ke-component)\r\n     * @returns {String}\r\n     */\n    _module_getSizeX: function _module_getSizeX(contextPlugin, element, cover, container) {\n      if (!element) {\n        element = contextPlugin._element;\n      }\n\n      if (!cover) {\n        cover = contextPlugin._cover;\n      }\n\n      if (!container) {\n        container = contextPlugin._container;\n      }\n\n      if (!element) {\n        return \"\";\n      }\n\n      return !/%$/.test(element.style.width) ? element.style.width : (container && this.util.getNumber(container.style.width, 2) || 100) + \"%\";\n    },\n\n    /**\r\n     * @description Gets the height size\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     * @param {Element} element Target element\r\n     * @param {Element} cover Cover element (FIGURE)\r\n     * @param {Element} container Container element (DIV.ke-component)\r\n     * @returns {String}\r\n     */\n    _module_getSizeY: function _module_getSizeY(contextPlugin, element, cover, container) {\n      if (!element) {\n        element = contextPlugin._element;\n      }\n\n      if (!cover) {\n        cover = contextPlugin._cover;\n      }\n\n      if (!container) {\n        container = contextPlugin._container;\n      }\n\n      if (!container || !cover) {\n        return element && element.style.height || \"\";\n      }\n\n      return this.util.getNumber(cover.style.paddingBottom, 0) > 0 && !this.context.resizing._rotateVertical ? cover.style.height : !/%$/.test(element.style.height) || !/%$/.test(element.style.width) ? element.style.height : (container && this.util.getNumber(container.style.height, 2) || 100) + \"%\";\n    },\n\n    /**\r\n     * @description Called at the \"openModify\" to put the size of the current target into the size input element.\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     * @param {Object} pluginObj Plugin object\r\n     */\n    _module_setModifyInputSize: function _module_setModifyInputSize(contextPlugin, pluginObj) {\n      var percentageRotation = contextPlugin._onlyPercentage && this.context.resizing._rotateVertical;\n      contextPlugin.proportion.checked = contextPlugin._proportionChecked = contextPlugin._element.getAttribute(\"data-proportion\") !== \"false\";\n      var x = percentageRotation ? \"\" : this.plugins.resizing._module_getSizeX.call(this, contextPlugin);\n\n      if (x === contextPlugin._defaultSizeX) {\n        x = \"\";\n      }\n\n      if (contextPlugin._onlyPercentage) {\n        x = this.util.getNumber(x, 2);\n      }\n\n      contextPlugin.inputX.value = x;\n      pluginObj.setInputSize.call(this, \"x\");\n\n      if (!contextPlugin._onlyPercentage) {\n        var y = percentageRotation ? \"\" : this.plugins.resizing._module_getSizeY.call(this, contextPlugin);\n\n        if (y === contextPlugin._defaultSizeY) {\n          y = \"\";\n        }\n\n        if (contextPlugin._onlyPercentage) {\n          y = this.util.getNumber(y, 2);\n        }\n\n        contextPlugin.inputY.value = y;\n      }\n\n      contextPlugin.inputX.disabled = percentageRotation ? true : false;\n      contextPlugin.inputY.disabled = percentageRotation ? true : false;\n      contextPlugin.proportion.disabled = percentageRotation ? true : false;\n      pluginObj.setRatio.call(this);\n    },\n\n    /**\r\n     * @description It is called in \"setInputSize\" (input tag keyupEvent),\r\n     * checks the value entered in the input tag,\r\n     * calculates the ratio, and sets the calculated value in the input tag of the opposite size.\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     * @param {String} xy 'x': width, 'y': height\r\n     */\n    _module_setInputSize: function _module_setInputSize(contextPlugin, xy) {\n      if (contextPlugin._onlyPercentage) {\n        if (xy === \"x\" && contextPlugin.inputX.value > 100) {\n          contextPlugin.inputX.value = 100;\n        }\n\n        return;\n      }\n\n      if (contextPlugin.proportion.checked && contextPlugin._ratio && /\\d/.test(contextPlugin.inputX.value) && /\\d/.test(contextPlugin.inputY.value)) {\n        var xUnit = contextPlugin.inputX.value.replace(/\\d+|\\./g, \"\") || contextPlugin.sizeUnit;\n        var yUnit = contextPlugin.inputY.value.replace(/\\d+|\\./g, \"\") || contextPlugin.sizeUnit;\n\n        if (xUnit !== yUnit) {\n          return;\n        }\n\n        var dec = xUnit === \"%\" ? 2 : 0;\n\n        if (xy === \"x\") {\n          contextPlugin.inputY.value = this.util.getNumber(contextPlugin._ratioY * this.util.getNumber(contextPlugin.inputX.value, dec), dec) + yUnit;\n        } else {\n          contextPlugin.inputX.value = this.util.getNumber(contextPlugin._ratioX * this.util.getNumber(contextPlugin.inputY.value, dec), dec) + xUnit;\n        }\n      }\n    },\n\n    /**\r\n     * @description It is called in \"setRatio\" (input and proportionCheck tags changeEvent),\r\n     * checks the value of the input tag, calculates the ratio, and resets it in the input tag.\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     */\n    _module_setRatio: function _module_setRatio(contextPlugin) {\n      var xValue = contextPlugin.inputX.value;\n      var yValue = contextPlugin.inputY.value;\n\n      if (contextPlugin.proportion.checked && /\\d+/.test(xValue) && /\\d+/.test(yValue)) {\n        var xUnit = xValue.replace(/\\d+|\\./g, \"\") || contextPlugin.sizeUnit;\n        var yUnit = yValue.replace(/\\d+|\\./g, \"\") || contextPlugin.sizeUnit;\n\n        if (xUnit !== yUnit) {\n          contextPlugin._ratio = false;\n        } else if (!contextPlugin._ratio) {\n          var x = this.util.getNumber(xValue, 0);\n          var y = this.util.getNumber(yValue, 0);\n          contextPlugin._ratio = true;\n          contextPlugin._ratioX = x / y;\n          contextPlugin._ratioY = y / x;\n        }\n      } else {\n        contextPlugin._ratio = false;\n      }\n    },\n\n    /**\r\n     * @description Revert size of element to origin size (plugin._origin_w, plugin._origin_h)\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     */\n    _module_sizeRevert: function _module_sizeRevert(contextPlugin) {\n      if (contextPlugin._onlyPercentage) {\n        contextPlugin.inputX.value = contextPlugin._origin_w > 100 ? 100 : contextPlugin._origin_w;\n      } else {\n        contextPlugin.inputX.value = contextPlugin._origin_w;\n        contextPlugin.inputY.value = contextPlugin._origin_h;\n      }\n    },\n\n    /**\r\n     * @description Save the size data (element.setAttribute(\"data-size\"))\r\n     * Used at the \"setSize\" method\r\n     * @param {Object} contextPlugin context object of plugin (core.context[plugin])\r\n     */\n    _module_saveCurrentSize: function _module_saveCurrentSize(contextPlugin) {\n      var x = this.plugins.resizing._module_getSizeX.call(this, contextPlugin);\n\n      var y = this.plugins.resizing._module_getSizeY.call(this, contextPlugin);\n\n      contextPlugin._element.setAttribute(\"data-size\", x + \",\" + y);\n\n      if (contextPlugin._videoRatio) {\n        contextPlugin._videoRatio = y;\n      }\n    },\n\n    /**\r\n     * @description Call the resizing module\r\n     * @param {Element} targetElement Resizing target element\r\n     * @param {string} plugin Plugin name\r\n     * @returns {Object} Size of resizing div {w, h, t, l}\r\n     */\n    call_controller_resize: function call_controller_resize(targetElement, plugin) {\n      var contextResizing = this.context.resizing;\n      var contextPlugin = this.context[plugin];\n      contextResizing._resize_plugin = plugin;\n      var resizeContainer = contextResizing.resizeContainer;\n      var resizeDiv = contextResizing.resizeDiv;\n      var offset = this.util.getOffset(targetElement, this.context.element.wysiwygFrame);\n      var isVertical = contextResizing._rotateVertical = /^(90|270)$/.test(Math.abs(targetElement.getAttribute(\"data-rotate\")).toString());\n      var w = isVertical ? targetElement.offsetHeight : targetElement.offsetWidth;\n      var h = isVertical ? targetElement.offsetWidth : targetElement.offsetHeight;\n      var t = offset.top;\n      var l = offset.left - this.context.element.wysiwygFrame.scrollLeft;\n      resizeContainer.style.top = t + \"px\";\n      resizeContainer.style.left = l + \"px\";\n      resizeContainer.style.width = w + \"px\";\n      resizeContainer.style.height = h + \"px\";\n      resizeDiv.style.top = \"0px\";\n      resizeDiv.style.left = \"0px\";\n      resizeDiv.style.width = w + \"px\";\n      resizeDiv.style.height = h + \"px\";\n      var align = targetElement.getAttribute(\"data-align\") || \"basic\";\n      align = align === \"none\" ? \"basic\" : align; // text\n\n      var container = this.util.getParentElement(targetElement, this.util.isComponent);\n      var cover = this.util.getParentElement(targetElement, \"FIGURE\");\n      var displayX = this.plugins.resizing._module_getSizeX.call(this, contextPlugin, targetElement, cover, container) || \"auto\";\n      var displayY = contextPlugin._onlyPercentage && plugin === \"image\" ? \"\" : \", \" + (this.plugins.resizing._module_getSizeY.call(this, contextPlugin, targetElement, cover, container) || \"auto\");\n      this.util.changeTxt(contextResizing.resizeDisplay, this.lang.dialogBox[align] + \" (\" + displayX + displayY + \")\"); // resizing display\n\n      contextResizing.resizeButtonGroup.style.display = contextPlugin._resizing ? \"\" : \"none\";\n      var resizeDotShow = contextPlugin._resizing && !contextPlugin._resizeDotHide && !contextPlugin._onlyPercentage ? \"flex\" : \"none\";\n      var resizeHandles = contextResizing.resizeHandles;\n\n      for (var i = 0, len = resizeHandles.length; i < len; i++) {\n        resizeHandles[i].style.display = resizeDotShow;\n      }\n\n      if (contextPlugin._resizing) {\n        var rotations = contextResizing.rotationButtons;\n        rotations[0].style.display = rotations[1].style.display = contextPlugin._rotation ? \"\" : \"none\";\n      } // align icon\n\n\n      var alignList = contextResizing.alignMenuList;\n      this.util.changeElement(contextResizing.alignButton.firstElementChild, contextResizing.alignIcons[align]);\n\n      for (var _i = 0, _len = alignList.length; _i < _len; _i++) {\n        if (alignList[_i].getAttribute(\"data-value\") === align) {\n          this.util.addClass(alignList[_i], \"on\");\n        } else {\n          this.util.removeClass(alignList[_i], \"on\");\n        }\n      } // percentage active\n\n\n      var pButtons = contextResizing.percentageButtons;\n      var value = /%$/.test(targetElement.style.width) && /%$/.test(container.style.width) ? this.util.getNumber(container.style.width, 0) / 100 + \"\" : \"\";\n\n      for (var _i2 = 0, _len2 = pButtons.length; _i2 < _len2; _i2++) {\n        if (pButtons[_i2].getAttribute(\"data-value\") === value) {\n          this.util.addClass(pButtons[_i2], \"active\");\n        } else {\n          this.util.removeClass(pButtons[_i2], \"active\");\n        }\n      } // caption display, active\n\n\n      if (!contextPlugin._captionShow) {\n        contextResizing.captionButton.style.display = \"none\";\n      } else {\n        contextResizing.captionButton.style.display = \"\";\n\n        if (this.util.getChildElement(targetElement.parentNode, \"figcaption\")) {\n          this.util.addClass(contextResizing.captionButton, \"active\");\n          contextPlugin._captionChecked = true;\n        } else {\n          this.util.removeClass(contextResizing.captionButton, \"active\");\n          contextPlugin._captionChecked = false;\n        }\n      }\n\n      resizeContainer.style.display = \"block\";\n      var addOffset = {\n        left: 0,\n        top: 50\n      };\n\n      if (this.options.iframe) {\n        addOffset.left -= this.context.element.wysiwygFrame.parentElement.offsetLeft;\n        addOffset.top -= this.context.element.wysiwygFrame.parentElement.offsetTop;\n      }\n\n      this.setControllerPosition(contextResizing.resizeButton, resizeContainer, \"bottom\", addOffset);\n      this.controllersOn(resizeContainer, contextResizing.resizeButton, this.util.setDisabledButtons.bind(this, false, this.resizingDisabledButtons), targetElement, plugin);\n      this.util.setDisabledButtons(true, this.resizingDisabledButtons);\n      contextResizing._resize_w = w;\n      contextResizing._resize_h = h;\n      var originSize = (targetElement.getAttribute(\"origin-size\") || \"\").split(\",\");\n      contextResizing._origin_w = originSize[0] || targetElement.naturalWidth;\n      contextResizing._origin_h = originSize[1] || targetElement.naturalHeight;\n      return {\n        w: w,\n        h: h,\n        t: t,\n        l: l\n      };\n    },\n    _closeAlignMenu: null,\n\n    /**\r\n     * @description Open align submenu of module\r\n     */\n    openAlignMenu: function openAlignMenu() {\n      var alignButton = this.context.resizing.alignButton;\n      this.util.addClass(alignButton, \"on\");\n      this.context.resizing.alignMenu.style.top = alignButton.offsetTop + alignButton.offsetHeight + \"px\";\n      this.context.resizing.alignMenu.style.left = alignButton.offsetLeft - alignButton.offsetWidth / 2 + \"px\";\n      this.context.resizing.alignMenu.style.display = \"block\";\n\n      this.plugins.resizing._closeAlignMenu = function () {\n        this.util.removeClass(this.context.resizing.alignButton, \"on\");\n        this.context.resizing.alignMenu.style.display = \"none\";\n        this.removeDocEvent(\"click\", this.plugins.resizing._closeAlignMenu);\n        this.plugins.resizing._closeAlignMenu = null;\n      }.bind(this);\n\n      this.addDocEvent(\"click\", this.plugins.resizing._closeAlignMenu);\n    },\n\n    /**\r\n     * @description Click event of resizing toolbar\r\n     * Performs the action of the clicked toolbar button.\r\n     * @param {MouseEvent} e Event object\r\n     */\n    onClick_resizeButton: function onClick_resizeButton(e) {\n      e.stopPropagation();\n      var target = e.target;\n      var command = target.getAttribute(\"data-command\") || target.parentNode.getAttribute(\"data-command\");\n\n      if (!command) {\n        return;\n      }\n\n      var value = target.getAttribute(\"data-value\") || target.parentNode.getAttribute(\"data-value\");\n      var pluginName = this.context.resizing._resize_plugin;\n      var currentContext = this.context[pluginName];\n      var contextEl = currentContext._element;\n      var currentModule = this.plugins[pluginName];\n      e.preventDefault();\n\n      if (typeof this.plugins.resizing._closeAlignMenu === \"function\") {\n        this.plugins.resizing._closeAlignMenu();\n\n        if (command === \"onalign\") {\n          return;\n        }\n      }\n\n      switch (command) {\n        case \"auto\":\n          this.plugins.resizing.resetTransform.call(this, contextEl);\n          currentModule.setAutoSize.call(this);\n          this.selectComponent(contextEl, pluginName);\n          break;\n\n        case \"percent\":\n          var percentY = this.plugins.resizing._module_getSizeY.call(this, currentContext);\n\n          if (this.context.resizing._rotateVertical) {\n            var percentage = contextEl.getAttribute(\"data-percentage\");\n\n            if (percentage) {\n              percentY = percentage.split(\",\")[1];\n            }\n          }\n\n          this.plugins.resizing.resetTransform.call(this, contextEl);\n          currentModule.setPercentSize.call(this, value * 100, this.util.getNumber(percentY, 0) === null || !/%$/.test(percentY) ? \"\" : percentY);\n          this.selectComponent(contextEl, pluginName);\n          break;\n\n        case \"mirror\":\n          var r = contextEl.getAttribute(\"data-rotate\") || \"0\";\n          var x = contextEl.getAttribute(\"data-rotateX\") || \"\";\n          var y = contextEl.getAttribute(\"data-rotateY\") || \"\";\n\n          if (value === \"h\" && !this.context.resizing._rotateVertical || value === \"v\" && this.context.resizing._rotateVertical) {\n            y = y ? \"\" : \"180\";\n          } else {\n            x = x ? \"\" : \"180\";\n          }\n\n          contextEl.setAttribute(\"data-rotateX\", x);\n          contextEl.setAttribute(\"data-rotateY\", y);\n\n          this.plugins.resizing._setTransForm(contextEl, r, x, y);\n\n          break;\n\n        case \"rotate\":\n          var contextResizing = this.context.resizing;\n          var slope = contextEl.getAttribute(\"data-rotate\") * 1 + value * 1;\n          var deg = this._w.Math.abs(slope) >= 360 ? 0 : slope;\n          contextEl.setAttribute(\"data-rotate\", deg);\n          contextResizing._rotateVertical = /^(90|270)$/.test(this._w.Math.abs(deg).toString());\n          this.plugins.resizing.setTransformSize.call(this, contextEl, null, null);\n          this.selectComponent(contextEl, pluginName);\n          break;\n\n        case \"onalign\":\n          this.plugins.resizing.openAlignMenu.call(this);\n          return;\n\n        case \"align\":\n          var alignValue = value === \"basic\" ? \"none\" : value;\n          currentModule.setAlign.call(this, alignValue, null, null, null);\n          this.selectComponent(contextEl, pluginName);\n          break;\n\n        case \"caption\":\n          var caption = !currentContext._captionChecked;\n          currentModule.openModify.call(this, true);\n          currentContext._captionChecked = currentContext.captionCheckEl.checked = caption;\n          currentModule.update_image.call(this, false, false, false);\n\n          if (caption) {\n            var captionText = this.util.getChildElement(currentContext._caption, function (current) {\n              return current.nodeType === 3;\n            });\n\n            if (!captionText) {\n              currentContext._caption.focus();\n            } else {\n              this.setRange(captionText, 0, captionText, captionText.textContent.length);\n            }\n\n            this.controllersOff();\n          } else {\n            this.selectComponent(contextEl, pluginName);\n            currentModule.openModify.call(this, true);\n          }\n\n          break;\n\n        case \"revert\":\n          currentModule.setOriginSize.call(this);\n          this.selectComponent(contextEl, pluginName);\n          break;\n\n        case \"update\":\n          currentModule.openModify.call(this);\n          this.controllersOff();\n          break;\n\n        case \"delete\":\n          currentModule.destroy.call(this);\n          break;\n      } // history stack\n\n\n      this.history.push(false);\n    },\n\n    /**\r\n     * @description Initialize the transform style (rotation) of the element.\r\n     * @param {Element} element Target element\r\n     */\n    resetTransform: function resetTransform(element) {\n      var size = (element.getAttribute(\"data-size\") || element.getAttribute(\"data-origin\") || \"\").split(\",\");\n      this.context.resizing._rotateVertical = false;\n      element.style.maxWidth = \"\";\n      element.style.transform = \"\";\n      element.style.transformOrigin = \"\";\n      element.setAttribute(\"data-rotate\", \"\");\n      element.setAttribute(\"data-rotateX\", \"\");\n      element.setAttribute(\"data-rotateY\", \"\");\n\n      this.plugins[this.context.resizing._resize_plugin].setSize.call(this, size[0] ? size[0] : \"auto\", size[1] ? size[1] : \"\", true);\n    },\n\n    /**\r\n     * @description Set the transform style (rotation) of the element.\r\n     * @param {Element} element Target element\r\n     * @param {Number|null} width Element's width size\r\n     * @param {Number|null} height Element's height size\r\n     */\n    setTransformSize: function setTransformSize(element, width, height) {\n      var percentage = element.getAttribute(\"data-percentage\");\n      var isVertical = this.context.resizing._rotateVertical;\n      var deg = element.getAttribute(\"data-rotate\") * 1;\n      var transOrigin = \"\";\n\n      if (percentage && !isVertical) {\n        percentage = percentage.split(\",\");\n\n        if (percentage[0] === \"auto\" && percentage[1] === \"auto\") {\n          this.plugins[this.context.resizing._resize_plugin].setAutoSize.call(this);\n        } else {\n          this.plugins[this.context.resizing._resize_plugin].setPercentSize.call(this, percentage[0], percentage[1]);\n        }\n      } else {\n        var cover = this.util.getParentElement(element, \"FIGURE\");\n        var offsetW = width || element.offsetWidth;\n        var offsetH = height || element.offsetHeight;\n        var w = (isVertical ? offsetH : offsetW) + \"px\";\n        var h = (isVertical ? offsetW : offsetH) + \"px\";\n\n        this.plugins[this.context.resizing._resize_plugin].cancelPercentAttr.call(this);\n\n        this.plugins[this.context.resizing._resize_plugin].setSize.call(this, offsetW + \"px\", offsetH + \"px\", true);\n\n        cover.style.width = w;\n        cover.style.height = this.context[this.context.resizing._resize_plugin]._caption ? \"\" : h;\n\n        if (isVertical) {\n          var transW = offsetW / 2 + \"px \" + offsetW / 2 + \"px 0\";\n          var transH = offsetH / 2 + \"px \" + offsetH / 2 + \"px 0\";\n          transOrigin = deg === 90 || deg === -270 ? transH : transW;\n        }\n      }\n\n      element.style.transformOrigin = transOrigin;\n\n      this.plugins.resizing._setTransForm(element, deg.toString(), element.getAttribute(\"data-rotateX\") || \"\", element.getAttribute(\"data-rotateY\") || \"\");\n\n      if (isVertical) {\n        element.style.maxWidth = \"none\";\n      } else {\n        element.style.maxWidth = \"\";\n      }\n\n      this.plugins.resizing.setCaptionPosition.call(this, element);\n    },\n    _setTransForm: function _setTransForm(element, r, x, y) {\n      var width = (element.offsetWidth - element.offsetHeight) * (/-/.test(r) ? 1 : -1);\n      var translate = \"\";\n\n      if (/[1-9]/.test(r) && (x || y)) {\n        translate = x ? \"Y\" : \"X\";\n\n        switch (r) {\n          case \"90\":\n            translate = x && y ? \"X\" : y ? translate : \"\";\n            break;\n\n          case \"270\":\n            width *= -1;\n            translate = x && y ? \"Y\" : x ? translate : \"\";\n            break;\n\n          case \"-90\":\n            translate = x && y ? \"Y\" : x ? translate : \"\";\n            break;\n\n          case \"-270\":\n            width *= -1;\n            translate = x && y ? \"X\" : y ? translate : \"\";\n            break;\n\n          default:\n            translate = \"\";\n        }\n      }\n\n      if (r % 180 === 0) {\n        element.style.maxWidth = \"\";\n      }\n\n      element.style.transform = \"rotate(\" + r + \"deg)\" + (x ? \" rotateX(\" + x + \"deg)\" : \"\") + (y ? \" rotateY(\" + y + \"deg)\" : \"\") + (translate ? \" translate\" + translate + \"(\" + width + \"px)\" : \"\");\n    },\n\n    /**\r\n     * @description The position of the caption is set automatically.\r\n     * @param {Element} element Target element (not caption element)\r\n     */\n    setCaptionPosition: function setCaptionPosition(element) {\n      var figcaption = this.util.getChildElement(this.util.getParentElement(element, \"FIGURE\"), \"FIGCAPTION\");\n\n      if (figcaption) {\n        figcaption.style.marginTop = (this.context.resizing._rotateVertical ? element.offsetWidth - element.offsetHeight : 0) + \"px\";\n      }\n    },\n\n    /**\r\n     * @description Mouse down event of resize handles\r\n     * @param {MouseEvent} e Event object\r\n     */\n    onMouseDown_resize_handle: function onMouseDown_resize_handle(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      var contextResizing = this.context.resizing;\n      var direction = contextResizing._resize_direction = e.target.classList[0];\n      contextResizing._resizeClientX = e.clientX;\n      contextResizing._resizeClientY = e.clientY;\n      this.context.element.resizeBackground.style.display = \"block\";\n      contextResizing.resizeButton.style.display = \"none\";\n      contextResizing.resizeDiv.style.float = /l/.test(direction) ? \"right\" : /r/.test(direction) ? \"left\" : \"none\";\n      var resizing_element_bind = this.plugins.resizing.resizing_element.bind(this, contextResizing, direction, this.context[contextResizing._resize_plugin]);\n\n      var closureFunc_bind = function closureFunc(e) {\n        if (e.type === \"keydown\" && e.keyCode !== 27) {\n          return;\n        }\n\n        var change = contextResizing._isChange;\n        contextResizing._isChange = false;\n        this.removeDocEvent(\"mousemove\", resizing_element_bind);\n        this.removeDocEvent(\"mouseup\", closureFunc_bind);\n        this.removeDocEvent(\"keydown\", closureFunc_bind);\n\n        if (e.type === \"keydown\") {\n          this.controllersOff();\n          this.context.element.resizeBackground.style.display = \"none\";\n\n          this.plugins[this.context.resizing._resize_plugin].init.call(this);\n        } else {\n          // element resize\n          this.plugins.resizing.cancel_controller_resize.call(this, direction); // history stack\n\n          if (change) {\n            this.history.push(false);\n          }\n        }\n      }.bind(this);\n\n      this.addDocEvent(\"mousemove\", resizing_element_bind);\n      this.addDocEvent(\"mouseup\", closureFunc_bind);\n      this.addDocEvent(\"keydown\", closureFunc_bind);\n    },\n\n    /**\r\n     * @description Mouse move event after call \"onMouseDown_resize_handle\" of resize handles\r\n     * The size of the module's \"div\" is adjusted according to the mouse move event.\r\n     * @param {Object} contextResizing \"core.context.resizing\" object (binding argument)\r\n     * @param {String} direction Direction (\"tl\", \"tr\", \"bl\", \"br\", \"lw\", \"th\", \"rw\", \"bh\") (binding argument)\r\n     * @param {Object} plugin \"core.context[currentPlugin]\" object (binding argument)\r\n     * @param {MouseEvent} e Event object\r\n     */\n    resizing_element: function resizing_element(contextResizing, direction, plugin, e) {\n      var clientX = e.clientX;\n      var clientY = e.clientY;\n      var resultW = plugin._element_w;\n      var resultH = plugin._element_h;\n      var w = plugin._element_w + (/r/.test(direction) ? clientX - contextResizing._resizeClientX : contextResizing._resizeClientX - clientX);\n      var h = plugin._element_h + (/b/.test(direction) ? clientY - contextResizing._resizeClientY : contextResizing._resizeClientY - clientY);\n      var wh = plugin._element_h / plugin._element_w * w;\n\n      if (/t/.test(direction)) {\n        contextResizing.resizeDiv.style.top = plugin._element_h - (/h/.test(direction) ? h : wh) + \"px\";\n      }\n\n      if (/l/.test(direction)) {\n        contextResizing.resizeDiv.style.left = plugin._element_w - w + \"px\";\n      }\n\n      if (/r|l/.test(direction)) {\n        contextResizing.resizeDiv.style.width = w + \"px\";\n        resultW = w;\n      }\n\n      if (/^(t|b)[^h]$/.test(direction)) {\n        contextResizing.resizeDiv.style.height = wh + \"px\";\n        resultH = wh;\n      } else if (/^(t|b)h$/.test(direction)) {\n        contextResizing.resizeDiv.style.height = h + \"px\";\n        resultH = h;\n      }\n\n      contextResizing._resize_w = resultW;\n      contextResizing._resize_h = resultH;\n      this.util.changeTxt(contextResizing.resizeDisplay, this._w.Math.round(resultW) + \" x \" + this._w.Math.round(resultH));\n      contextResizing._isChange = true;\n    },\n\n    /**\r\n     * @description Resize the element to the size of the \"div\" adjusted in the \"resizing_element\" method.\r\n     * Called at the mouse-up event registered in \"onMouseDown_resize_handle\".\r\n     * @param {String} direction Direction (\"tl\", \"tr\", \"bl\", \"br\", \"lw\", \"th\", \"rw\", \"bh\")\r\n     */\n    cancel_controller_resize: function cancel_controller_resize(direction) {\n      var isVertical = this.context.resizing._rotateVertical;\n      this.controllersOff();\n      this.context.element.resizeBackground.style.display = \"none\";\n\n      var w = this._w.Math.round(isVertical ? this.context.resizing._resize_h : this.context.resizing._resize_w);\n\n      var h = this._w.Math.round(isVertical ? this.context.resizing._resize_w : this.context.resizing._resize_h);\n\n      if (!isVertical && !/%$/.test(w)) {\n        var padding = 16;\n        var limit = this.context.element.wysiwygFrame.clientWidth - padding * 2 - 2;\n\n        if (this.util.getNumber(w, 0) > limit) {\n          h = this._w.Math.round(h / w * limit);\n          w = limit;\n        }\n      }\n\n      var pluginName = this.context.resizing._resize_plugin;\n      this.plugins[pluginName].setSize.call(this, w, h, false, direction);\n\n      if (isVertical) {\n        this.plugins.resizing.setTransformSize.call(this, this.context[this.context.resizing._resize_plugin]._element, w, h);\n      }\n\n      this.selectComponent(this.context[pluginName]._element, pluginName);\n    }\n  };\n\n  if (_typeof(noGlobal) === (typeof undefined === \"undefined\" ? \"undefined\" : _typeof(undefined))) {\n    if (!window.KothingEditor_MODULES) {\n      Object.defineProperty(window, \"KothingEditor_MODULES\", {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.KothingEditor_MODULES, \"resizing\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: resizing\n    });\n  }\n\n  return resizing;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"textStyle\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.textStyle = {\n      _styleList: null\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector(\"ul\");\n    /** add event listeners */\n\n    listUl.addEventListener(\"click\", this.pickup.bind(core));\n    context.textStyle._styleList = listDiv.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-format\";\n    var defaultList = {\n      code: {\n        name: core.lang.menu.code,\n        class: \"__ke__t-code\",\n        tag: \"code\"\n      },\n      translucent: {\n        name: core.lang.menu.translucent,\n        style: \"opacity: 0.5;\",\n        tag: \"span\"\n      },\n      shadow: {\n        name: core.lang.menu.shadow,\n        class: \"__ke__t-shadow\",\n        tag: \"span\"\n      }\n    };\n    var styleList = !option.textStyles ? core._w.Object.keys(defaultList) : option.textStyles;\n    var list = '<div class=\"ke-list-inner\"><ul class=\"ke-list-basic\">';\n\n    for (var i = 0, len = styleList.length, t, tag, name, attrs, command, value, _class; i < len; i++) {\n      t = styleList[i];\n      attrs = \"\", value = \"\", command = [];\n\n      if (typeof t === \"string\") {\n        var defaultStyle = defaultList[t.toLowerCase()];\n\n        if (!defaultStyle) {\n          continue;\n        }\n\n        t = defaultStyle;\n      }\n\n      name = t.name;\n      tag = t.tag || \"span\";\n      _class = t._class;\n\n      if (t.style) {\n        attrs += ' style=\"' + t.style + '\"';\n        value += t.style.replace(/:[^;]+(;|$)\\s*/g, \",\");\n        command.push(\"style\");\n      }\n\n      if (t.class) {\n        attrs += ' class=\"' + t.class + '\"';\n        value += \".\" + t.class.trim().replace(/\\s+/g, \",.\");\n        command.push(\"class\");\n      }\n\n      value = value.replace(/,$/, \"\");\n      list += \"<li>\" + '<button type=\"button\" class=\"ke-btn-list' + (_class ? \" \" + _class : \"\") + '\" data-command=\"' + tag + '\" data-value=\"' + value + '\" title=\"' + name + '\">' + \"<\" + tag + attrs + \">\" + name + \"</\" + tag + \">\" + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var util = this.util;\n    var textStyleContext = this.context.textStyle;\n    var styleToolbarItem = textStyleContext._styleList;\n    var selectionNode = this.getSelectionNode();\n\n    for (var i = 0, len = styleToolbarItem.length, btn, data, active; i < len; i++) {\n      btn = styleToolbarItem[i];\n      data = btn.getAttribute(\"data-value\").split(\",\");\n\n      for (var v = 0, node, value; v < data.length; v++) {\n        node = selectionNode;\n        active = false;\n\n        while (node && !util.isFormatElement(node) && !util.isComponent(node)) {\n          if (node.nodeName.toLowerCase() === btn.getAttribute(\"data-command\").toLowerCase()) {\n            value = data[v];\n\n            if (/^\\./.test(value) ? util.hasClass(node, value.replace(/^\\./, \"\")) : !!node.style[value]) {\n              active = true;\n              break;\n            }\n          }\n\n          node = node.parentNode;\n        }\n\n        if (!active) {\n          break;\n        }\n      }\n\n      active ? util.addClass(btn, \"active\") : util.removeClass(btn, \"active\");\n    }\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var command = null,\n        tag = null;\n\n    while (!command && !/UL/i.test(target.tagName)) {\n      command = target.getAttribute(\"data-command\");\n\n      if (command) {\n        tag = target.firstChild;\n        break;\n      }\n\n      target = target.parentNode;\n    }\n\n    if (!command) {\n      return;\n    }\n\n    var checkStyles = tag.style.cssText.replace(/:.+(;|$)/g, \",\").split(\",\");\n    checkStyles.pop();\n    var classes = tag.classList;\n\n    for (var i = 0, len = classes.length; i < len; i++) {\n      checkStyles.push(\".\" + classes[i]);\n    }\n\n    var newNode = this.util.hasClass(target, \"active\") ? null : tag.cloneNode(false);\n    var removeNodes = newNode ? null : [tag.nodeName];\n    this.nodeChange(newNode, checkStyles, removeNodes, true);\n    this.submenuOff();\n  }\n};\nexports.default = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n(function (global, factory) {\n  if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error(\"KothingEditor_MODULES a window with a document\");\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== \"undefined\" ? window : void 0, function (window, noGlobal) {\n  var component = {\n    name: \"component\",\n\n    /**\r\n     * @description Create a container for the resizing component and insert the element.\r\n     * @param {Element} cover Cover element (FIGURE)\r\n     * @param {String} className Class name of container (fixed: ke-component)\r\n     * @returns {Element} Created container element\r\n     */\n    set_container: function set_container(cover, className) {\n      var container = this.util.createElement(\"DIV\");\n      container.className = \"ke-component \" + className;\n      container.setAttribute(\"contenteditable\", false);\n      container.appendChild(cover);\n      return container;\n    },\n\n    /**\r\n     * @description Cover the target element with a FIGURE element.\r\n     * @param {Element} element Target element\r\n     */\n    set_cover: function set_cover(element) {\n      var cover = this.util.createElement(\"FIGURE\");\n      cover.appendChild(element);\n      return cover;\n    },\n\n    /**\r\n     * @description Return HTML string of caption(FIGCAPTION) element\r\n     * @returns {String}\r\n     */\n    create_caption: function create_caption() {\n      var caption = this.util.createElement(\"FIGCAPTION\");\n      caption.setAttribute(\"contenteditable\", true);\n      caption.innerHTML = \"<div>\" + this.lang.dialogBox.caption + \"</div>\";\n      return caption;\n    }\n  };\n\n  if (_typeof(noGlobal) === (typeof undefined === \"undefined\" ? \"undefined\" : _typeof(undefined))) {\n    if (!window.KothingEditor_MODULES) {\n      Object.defineProperty(window, \"KothingEditor_MODULES\", {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.KothingEditor_MODULES, \"component\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: component\n    });\n  }\n\n  return component;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nfunction _default(core, change) {\n  var _w = core._w;\n  var util = core.util;\n  var delayTime = core.options.historyStackDelayTime;\n  var editor = core.context.element;\n  var undo = core.context.tool.undo;\n  var redo = core.context.tool.redo;\n  var pushDelay = null;\n  var stackIndex = 0;\n  var stack = [];\n\n  function setContentsFromStack() {\n    var item = stack[stackIndex];\n    editor.wysiwyg.innerHTML = item.contents;\n    core.setRange(util.getNodeFromPath(item.s.path, editor.wysiwyg), item.s.offset, util.getNodeFromPath(item.e.path, editor.wysiwyg), item.e.offset);\n    core.focus();\n\n    if (stackIndex === 0) {\n      if (undo) undo.setAttribute(\"disabled\", true);\n      if (redo) redo.removeAttribute(\"disabled\");\n    } else if (stackIndex === stack.length - 1) {\n      if (undo) undo.removeAttribute(\"disabled\");\n      if (redo) redo.setAttribute(\"disabled\", true);\n    } else {\n      if (undo) undo.removeAttribute(\"disabled\");\n      if (redo) redo.removeAttribute(\"disabled\");\n    }\n\n    core.controllersOff();\n\n    core._checkComponents();\n\n    core._setCharCount();\n\n    core._resourcesStateChange(); // onChange\n\n\n    change();\n  }\n\n  function pushStack() {\n    core._checkComponents();\n\n    var current = core.getContents(true);\n    if (!current || !!stack[stackIndex] && current === stack[stackIndex].contents) return;\n    stackIndex++;\n    var range = core._variable._range;\n\n    if (stack.length > stackIndex) {\n      stack = stack.slice(0, stackIndex);\n      if (redo) redo.setAttribute(\"disabled\", true);\n    }\n\n    if (!range) {\n      stack[stackIndex] = {\n        contents: current,\n        s: {\n          path: [0, 0],\n          offset: [0, 0]\n        },\n        e: {\n          path: 0,\n          offset: 0\n        }\n      };\n    } else {\n      stack[stackIndex] = {\n        contents: current,\n        s: {\n          path: util.getNodePath(range.startContainer, null, null),\n          offset: range.startOffset\n        },\n        e: {\n          path: util.getNodePath(range.endContainer, null, null),\n          offset: range.endOffset\n        }\n      };\n    }\n\n    if (stackIndex === 1 && undo) undo.removeAttribute(\"disabled\");\n\n    core._setCharCount(); // onChange\n\n\n    change();\n  }\n\n  return {\n    /**\r\n     * @description History stack\r\n     */\n    stack: stack,\n\n    /**\r\n     * @description Saving the current status to the history object stack\r\n     * If \"delay\" is true, it will be saved after (options.historyStackDelayTime || 400) miliseconds\r\n     * If the function is called again with the \"delay\" argument true before it is saved, the delay time is renewal\r\n     * You can specify the delay time by sending a number.\r\n     * @param {Boolean|Number} delay If true, Add stack without delay time.\r\n     */\n    push: function push(delay) {\n      _w.setTimeout(core._resourcesStateChange.bind(core));\n\n      var time = typeof delay === \"number\" ? delay > 0 ? delay : 0 : !delay ? 0 : delayTime;\n\n      if (!time || pushDelay) {\n        _w.clearTimeout(pushDelay);\n\n        if (!time) {\n          pushStack();\n          return;\n        }\n      }\n\n      pushDelay = _w.setTimeout(function () {\n        _w.clearTimeout(pushDelay);\n\n        pushDelay = null;\n        pushStack();\n      }, time);\n    },\n\n    /**\r\n     * @description Undo function\r\n     */\n    undo: function undo() {\n      if (stackIndex > 0) {\n        stackIndex--;\n        setContentsFromStack();\n      }\n    },\n\n    /**\r\n     * @description Redo function\r\n     */\n    redo: function redo() {\n      if (stack.length - 1 > stackIndex) {\n        stackIndex++;\n        setContentsFromStack();\n      }\n    },\n\n    /**\r\n     * @description Go to the history stack for that index.\r\n     * If \"index\" is -1, go to the last stack\r\n     * @param {Number} index Stack index\r\n     */\n    go: function go(index) {\n      stackIndex = index < 0 ? stack.length - 1 : index;\n      setContentsFromStack();\n    },\n\n    /**\r\n     * @description Reset the history object\r\n     */\n    reset: function reset(ignoreChangeEvent) {\n      if (undo) undo.setAttribute(\"disabled\", true);\n      if (redo) redo.setAttribute(\"disabled\", true);\n      core._variable.isChanged = false;\n      if (core.context.tool.save) core.context.tool.save.setAttribute(\"disabled\", true);\n      stack.splice(0);\n      stackIndex = 0; // pushStack\n\n      stack[stackIndex] = {\n        contents: core.getContents(true),\n        s: {\n          path: [0, 0],\n          offset: 0\n        },\n        e: {\n          path: [0, 0],\n          offset: 0\n        }\n      };\n      if (!ignoreChangeEvent) change();\n    },\n\n    /**\r\n     * @description Reset the disabled state of the buttons to fit the current stack.\r\n     * @private\r\n     */\n    _resetCachingButton: function _resetCachingButton() {\n      editor = core.context.element;\n      undo = core.context.tool.undo;\n      redo = core.context.tool.redo;\n\n      if (stackIndex === 0) {\n        if (undo) undo.setAttribute(\"disabled\", true);\n        if (redo && stackIndex === stack.length - 1) redo.setAttribute(\"disabled\", true);\n        core._variable.isChanged = false;\n        if (core.context.tool.save) core.context.tool.save.setAttribute(\"disabled\", true);\n      } else if (stackIndex === stack.length - 1) {\n        if (redo) redo.setAttribute(\"disabled\", true);\n      }\n    },\n\n    /**\r\n     * @description Remove all stacks and remove the timeout function.\r\n     * @private\r\n     */\n    _destroy: function _destroy() {\n      if (pushDelay) _w.clearTimeout(pushDelay);\n      stack = null;\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _constructor = _interopRequireDefault(require(\"./constructor\"));\n\nvar _context = _interopRequireDefault(require(\"./context\"));\n\nvar _history = _interopRequireDefault(require(\"./history\"));\n\nvar _util = _interopRequireDefault(require(\"./util\"));\n\nvar _notice = _interopRequireDefault(require(\"../plugins/modules/notice\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\r\n * @description KothingEditor constuctor function.\r\n * create core object and event registration.\r\n * core, event, functions\r\n * @param {Object} context\r\n * @param {Object} pluginCallButtons\r\n * @param {Object} plugins\r\n * @param {Object} lang\r\n * @param {Object} options\r\n * @param {Object} _responsiveButtons\r\n * @returns {Object} functions Object\r\n */\nfunction _default(context, pluginCallButtons, plugins, lang, options, _responsiveButtons) {\n  var _d = context.element.originElement.ownerDocument || document;\n\n  var _w = _d.defaultView || window;\n\n  var util = _util.default;\n  var icons = options.icons;\n  /**\r\n   * @description editor core object\r\n   * should always bind this object when registering an event in the plug-in.\r\n   */\n\n  var core = {\n    _d: _d,\n    _w: _w,\n    _parser: new _w.DOMParser(),\n\n    /**\r\n     * @description Document object of the iframe if created as an iframe || _d\r\n     * @private\r\n     */\n    _wd: null,\n\n    /**\r\n     * @description Window object of the iframe if created as an iframe || _w\r\n     * @private\r\n     */\n    _ww: null,\n\n    /**\r\n     * @description Closest ShadowRoot to editor if found\r\n     * @private\r\n     */\n    _shadowRoot: null,\n\n    /**\r\n     * @description Block controller mousedown events in \"shadowRoot\" environment\r\n     * @private\r\n     */\n    _shadowRootControllerEventTarget: null,\n\n    /**\r\n     * @description Util object\r\n     */\n    util: util,\n\n    /**\r\n     * @description Functions object\r\n     */\n    functions: null,\n\n    /**\r\n     * @description Editor options\r\n     */\n    options: null,\n\n    /**\r\n     * @description Computed style of the wysiwyg area (window.getComputedStyle(context.element.wysiwyg))\r\n     */\n    wwComputedStyle: _w.getComputedStyle(context.element.wysiwyg),\n\n    /**\r\n     * @description Notice object\r\n     */\n    notice: _notice.default,\n\n    /**\r\n     * @description Default icons object\r\n     */\n    icons: icons,\n\n    /**\r\n     * @description History object for undo, redo\r\n     */\n    history: null,\n\n    /**\r\n     * @description Elements and user options parameters of the KothingEditor\r\n     */\n    context: context,\n\n    /**\r\n     * @description Plugin buttons\r\n     */\n    pluginCallButtons: pluginCallButtons,\n\n    /**\r\n     * @description Loaded plugins\r\n     */\n    plugins: plugins || {},\n\n    /**\r\n     * @description Whether the plugin is initialized\r\n     */\n    initPlugins: {},\n\n    /**\r\n     * @description Object for managing submenu elements\r\n     * @private\r\n     */\n    _targetPlugins: {},\n\n    /**\r\n     * @description Save rendered submenus and containers\r\n     * @private\r\n     */\n    menuTray: {},\n\n    /**\r\n     * @description loaded language\r\n     */\n    lang: lang,\n\n    /**\r\n     * @description The selection node (core.getSelectionNode()) to which the effect was last applied\r\n     */\n    effectNode: null,\n\n    /**\r\n     * @description submenu element\r\n     */\n    submenu: null,\n\n    /**\r\n     * @description container element\r\n     */\n    container: null,\n\n    /**\r\n     * @description current subment name\r\n     * @private\r\n     */\n    _submenuName: \"\",\n\n    /**\r\n     * @description binded submenuOff method\r\n     * @private\r\n     */\n    _bindedSubmenuOff: null,\n\n    /**\r\n     * @description binded containerOff method\r\n     * @private\r\n     */\n    _bindedContainerOff: null,\n\n    /**\r\n     * @description active button element in submenu\r\n     */\n    submenuActiveButton: null,\n\n    /**\r\n     * @description active button element in container\r\n     */\n    containerActiveButton: null,\n\n    /**\r\n     * @description The elements array to be processed unvisible when the controllersOff function is executed (resizing, link modified button, table controller)\r\n     */\n    controllerArray: [],\n\n    /**\r\n     * @description The name of the plugin that called the currently active controller\r\n     */\n    currentControllerName: \"\",\n\n    /**\r\n     * @description The target element of current controller\r\n     */\n    currentControllerTarget: null,\n\n    /**\r\n     * @description The file component object of current selected file tag (getFileComponent)\r\n     */\n    currentFileComponentInfo: null,\n\n    /**\r\n     * @description An array of buttons whose class name is not \"ke-code-view-enabled\"\r\n     */\n    codeViewDisabledButtons: null,\n\n    /**\r\n     * @description An array of buttons whose class name is not \"ke-resizing-enabled\"\r\n     */\n    resizingDisabledButtons: null,\n\n    /**\r\n     * @description active more layer element in submenu\r\n     * @private\r\n     */\n    _moreLayerActiveButton: null,\n\n    /**\r\n     * @description Tag whitelist RegExp object used in \"_consistencyCheckOfHTML\" method\r\n     * ^(options._editorTagsWhitelist)$\r\n     * @private\r\n     */\n    _htmlCheckWhitelistRegExp: null,\n\n    /**\r\n     * @description RegExp when using check disallowd tags. (b, i, ins, strike, s)\r\n     * @private\r\n     */\n    _disallowedTextTagsRegExp: null,\n\n    /**\r\n     * @description Editor tags whitelist (RegExp object)\r\n     * util.createTagsWhitelist(options._editorTagsWhitelist)\r\n     */\n    editorTagsWhitelistRegExp: null,\n\n    /**\r\n     * @description Tag whitelist when pasting (RegExp object)\r\n     * util.createTagsWhitelist(options.pasteTagsWhitelist)\r\n     */\n    pasteTagsWhitelistRegExp: null,\n\n    /**\r\n     * @description Boolean value of whether the editor has focus\r\n     */\n    hasFocus: false,\n\n    /**\r\n     * @description Boolean value of whether the editor is disabled\r\n     */\n    isDisabled: false,\n\n    /**\r\n     * @description Attributes whitelist used by the cleanHTML method\r\n     * @private\r\n     */\n    _attributesWhitelistRegExp: null,\n\n    /**\r\n     * @description Attributes of tags whitelist used by the cleanHTML method\r\n     * @private\r\n     */\n    _attributesTagsWhitelist: null,\n\n    /**\r\n     * @description binded controllersOff method\r\n     * @private\r\n     */\n    _bindControllersOff: null,\n\n    /**\r\n     * @description Is inline mode?\r\n     * @private\r\n     */\n    _isInline: null,\n\n    /**\r\n     * @description Is balloon|balloon-always mode?\r\n     * @private\r\n     */\n    _isBalloon: null,\n\n    /**\r\n     * @description Is balloon-always mode?\r\n     * @private\r\n     */\n    _isBalloonAlways: null,\n\n    /**\r\n     * @description Required value when using inline mode to sticky toolbar\r\n     * @private\r\n     */\n    _inlineToolbarAttr: {\n      top: \"\",\n      width: \"\",\n      isShow: false\n    },\n\n    /**\r\n     * @description Variable that controls the \"blur\" event in the editor of inline or balloon mode when the focus is moved to submenu\r\n     * @private\r\n     */\n    _notHideToolbar: false,\n\n    /**\r\n     * @description Variable value that sticky toolbar mode\r\n     * @private\r\n     */\n    _sticky: false,\n\n    /**\r\n     * @description Variables for controlling focus and blur events\r\n     * @private\r\n     */\n    _antiBlur: false,\n\n    /**\r\n     * @description Component line breaker element\r\n     * @private\r\n     */\n    lineBreaker: null,\n    lineBreakerButton: null,\n\n    /**\r\n     * @description If true, (initialize, reset) all indexes of image, video information\r\n     * @private\r\n     */\n    _componentsInfoInit: true,\n    _componentsInfoReset: false,\n\n    /**\r\n     * @description Plugins array with \"active\" method.\r\n     * \"activePlugins\" runs the \"add\" method when creating the editor.\r\n     */\n    activePlugins: null,\n\n    /**\r\n     * @description Information of tags that should maintain HTML structure, style, class name, etc. (In use by \"math\" plugin)\r\n     * When inserting \"html\" such as paste, it is executed on the \"html\" to be inserted. (core.cleanHTML)\r\n     * Basic Editor Actions:\r\n     * 1. All classes not starting with \"__ke__\" or \"ke-\" in the editor are removed.\r\n     * 2. The style of all tags except the \"span\" tag is removed from the editor.\r\n     * \"managedTagsInfo\" structure ex:\r\n     * managedTagsInfo: {\r\n     *   query: '.__ke__xxx, ke-xxx'\r\n     *   map: {\r\n     *     '__ke__xxx': method.bind(core),\r\n     *     'ke-xxx': method.bind(core),\r\n     *   }\r\n     * }\r\n     * @example\r\n     * Define in the following return format in the \"managedTagInfo\" function of the plugin.\r\n     * managedTagInfo() => {\r\n     *  return {\r\n     *    className: 'string', // Class name to identify the tag. (\"__ke__xxx\", \"ke-xxx\")\r\n     *    // Change the html of the \"element\". (\"element\" is the element found with \"className\".)\r\n     *    // \"method\" is executed by binding \"core\".\r\n     *    method: function (element) {\r\n     *      // this === core\r\n     *      element.innerHTML = // (rendered html);\r\n     *    }\r\n     *  }\r\n     * }\r\n     */\n    managedTagsInfo: null,\n\n    /**\r\n     * @description cashing: options.charCounterType === 'byte-html'\r\n     * @private\r\n     */\n    _charTypeHTML: false,\n\n    /**\r\n     * @description Array of \"checkFileInfo\" functions with the core bound\r\n     * (Plugins with \"checkFileInfo\" and \"resetFileInfo\" methods)\r\n     * \"fileInfoPlugins\" runs the \"add\" method when creating the editor.\r\n     * \"checkFileInfo\" method is always call just before the \"change\" event.\r\n     * @private\r\n     */\n    _fileInfoPluginsCheck: null,\n\n    /**\r\n     * @description Array of \"resetFileInfo\" functions with the core bound\r\n     * (Plugins with \"checkFileInfo\" and \"resetFileInfo\" methods)\r\n     * \"checkFileInfo\" method is always call just before the \"functions.setOptions\" method.\r\n     * @private\r\n     */\n    _fileInfoPluginsReset: null,\n\n    /**\r\n     * @description Variables for file component management\r\n     * @private\r\n     */\n    _fileManager: {\n      tags: null,\n      regExp: null,\n      queryString: null,\n      pluginRegExp: null,\n      pluginMap: null\n    },\n\n    /**\r\n     * @description Elements that need to change text or className for each selection change\r\n     * After creating the editor, \"activePlugins\" are added.\r\n     * @property {Element} STRONG bold button\r\n     * @property {Element} U underline button\r\n     * @property {Element} EM italic button\r\n     * @property {Element} DEL strike button\r\n     * @property {Element} SUB subscript button\r\n     * @property {Element} SUP superscript button\r\n     * @property {Element} OUTDENT outdent button\r\n     * @property {Element} INDENT indent button\r\n     */\n    commandMap: null,\n\n    /**\r\n     * @description Style button related to edit area\r\n     * @property {Element} fullScreen fullScreen button element\r\n     * @property {Element} showBlocks showBlocks button element\r\n     * @property {Element} codeView codeView button element\r\n     * @private\r\n     */\n    _styleCommandMap: null,\n\n    /**\r\n     * @description Map of default command\r\n     * @private\r\n     */\n    _defaultCommand: {\n      bold: options.textTags.bold,\n      underline: options.textTags.underline,\n      italic: options.textTags.italic,\n      strike: options.textTags.strike,\n      subscript: options.textTags.sub,\n      superscript: options.textTags.sup\n    },\n\n    /**\r\n     * @description Variables used internally in editor operation\r\n     * @property {Boolean} isCodeView State of code view\r\n     * @property {Boolean} isFullScreen State of full screen\r\n     * @property {Number} innerHeight_fullScreen InnerHeight in editor when in full screen\r\n     * @property {Number} resizeClientY Remember the vertical size of the editor before resizing the editor (Used when calculating during resize operation)\r\n     * @property {Number} tabSize Indent size of tab (4)\r\n     * @property {Number} codeIndent Indent size of Code view mode (2)\r\n     * @property {Number} minResizingSize Minimum size of editing area when resized {Number} (.ke-wrapper-inner {min-height: 65px;} || 65)\r\n     * @property {Array} currentNodes  An array of the current cursor's node structure\r\n     * @private\r\n     */\n    _variable: {\n      isChanged: false,\n      isCodeView: false,\n      isFullScreen: false,\n      innerHeight_fullScreen: 0,\n      resizeClientY: 0,\n      tabSize: 4,\n      codeIndent: 2,\n      minResizingSize: util.getNumber(context.element.wysiwygFrame.style.minHeight || \"65\", 0),\n      currentNodes: [],\n      currentNodesMap: [],\n      _range: null,\n      _selectionNode: null,\n      _originCssText: context.element.topArea.style.cssText,\n      _bodyOverflow: \"\",\n      editorAreaOriginCssText: \"\",\n      _wysiwygOriginCssText: \"\",\n      _codeOriginCssText: \"\",\n      _fullScreenAttrs: {\n        sticky: false,\n        balloon: false,\n        inline: false\n      },\n      _lineBreakComp: null,\n      _lineBreakDir: \"\"\n    },\n\n    /**\r\n     * @description If the plugin is not added, add the plugin and call the 'add' function.\r\n     * If the plugin is added call callBack function.\r\n     * @param {String} pluginName The name of the plugin to call\r\n     * @param {function} callBackFunction Function to be executed immediately after module call\r\n     * @param {Element|null} _target Plugin target button (This is not necessary if you have a button list when creating the editor)\r\n     */\n    callPlugin: function callPlugin(pluginName, callBackFunction, _target) {\n      _target = _target || pluginCallButtons[pluginName];\n\n      if (!this.plugins[pluginName]) {\n        throw Error('[KothingEditor.core.callPlugin.fail] The called plugin does not exist or is in an invalid format. (pluginName:\"' + pluginName + '\")');\n      } else if (!this.initPlugins[pluginName]) {\n        this.plugins[pluginName].add(this, _target);\n        this.initPlugins[pluginName] = true;\n      } else if (_typeof(this._targetPlugins[pluginName]) === \"object\" && !!_target) {\n        this.initMenuTarget(pluginName, _target, this._targetPlugins[pluginName]);\n      }\n\n      if (this.plugins[pluginName].active && !this.commandMap[pluginName] && !!_target) {\n        this.commandMap[pluginName] = _target;\n        this.activePlugins.push(pluginName);\n      }\n\n      if (typeof callBackFunction === \"function\") callBackFunction();\n    },\n\n    /**\r\n     * @description If the module is not added, add the module and call the 'add' function\r\n     * @param {Array} moduleArray module object's Array [dialog, resizing]\r\n     */\n    addModule: function addModule(moduleArray) {\n      for (var i = 0, len = moduleArray.length, moduleName; i < len; i++) {\n        moduleName = moduleArray[i].name;\n\n        if (!this.plugins[moduleName]) {\n          this.plugins[moduleName] = moduleArray[i];\n        }\n\n        if (!this.initPlugins[moduleName]) {\n          this.initPlugins[moduleName] = true;\n          if (typeof this.plugins[moduleName].add === \"function\") this.plugins[moduleName].add(this);\n        }\n      }\n    },\n\n    /**\r\n     * @description Gets the current editor-relative scroll offset.\r\n     * @returns {Object} {top, left}\r\n     */\n    getGlobalScrollOffset: function getGlobalScrollOffset() {\n      var t = 0,\n          l = 0;\n      var el = context.element.topArea;\n\n      while (el) {\n        t += el.scrollTop;\n        l += el.scrollLeft;\n        el = el.parentElement;\n      }\n\n      el = this._shadowRoot ? this._shadowRoot.host : null;\n\n      while (el) {\n        t += el.scrollTop;\n        l += el.scrollLeft;\n        el = el.parentElement;\n      }\n\n      return {\n        top: t,\n        left: l\n      };\n    },\n\n    /**\r\n     * @description Method for managing submenu element.\r\n     * You must add the \"submenu\" element using the this method at custom plugin.\r\n     * @param {String} pluginName Plugin name\r\n     * @param {Element|null} target Target button\r\n     * @param {Element} menu Submenu element\r\n     */\n    initMenuTarget: function initMenuTarget(pluginName, target, menu) {\n      if (!target) {\n        this._targetPlugins[pluginName] = menu;\n      } else {\n        context.element.menuTray.appendChild(menu);\n        this._targetPlugins[pluginName] = true;\n        this.menuTray[target.getAttribute(\"data-command\")] = menu;\n      }\n    },\n\n    /**\r\n     * @description Enabled submenu\r\n     * @param {Element} element Submenu's button element to call\r\n     */\n    submenuOn: function submenuOn(element) {\n      if (this._bindedSubmenuOff) this._bindedSubmenuOff();\n      if (this._bindControllersOff) this.controllersOff();\n      var submenuName = this._submenuName = element.getAttribute(\"data-command\");\n      var menu = this.submenu = this.menuTray[submenuName];\n      this.submenuActiveButton = element;\n\n      this._setMenuPosition(element, menu);\n\n      this._bindedSubmenuOff = this.submenuOff.bind(this);\n      this.addDocEvent(\"mousedown\", this._bindedSubmenuOff, false);\n      if (this.plugins[submenuName].on) this.plugins[submenuName].on.call(this);\n      this._antiBlur = true;\n    },\n\n    /**\r\n     * @description Disable submenu\r\n     */\n    submenuOff: function submenuOff() {\n      this.removeDocEvent(\"mousedown\", this._bindedSubmenuOff);\n      this._bindedSubmenuOff = null;\n\n      if (this.submenu) {\n        this._submenuName = \"\";\n        this.submenu.style.display = \"none\";\n        this.submenu = null;\n        util.removeClass(this.submenuActiveButton, \"on\");\n        this.submenuActiveButton = null;\n        this._notHideToolbar = false;\n      }\n\n      this._antiBlur = false;\n    },\n\n    /**\r\n     * @description Enabled container\r\n     * @param {Element} element Container's button element to call\r\n     */\n    containerOn: function containerOn(element) {\n      if (this._bindedContainerOff) this._bindedContainerOff();\n      var containerName = this._containerName = element.getAttribute(\"data-command\");\n      var menu = this.container = this.menuTray[containerName];\n      this.containerActiveButton = element;\n\n      this._setMenuPosition(element, menu);\n\n      this._bindedContainerOff = this.containerOff.bind(this);\n      this.addDocEvent(\"mousedown\", this._bindedContainerOff, false);\n      if (this.plugins[containerName].on) this.plugins[containerName].on.call(this);\n      this._antiBlur = true;\n    },\n\n    /**\r\n     * @description Disable container\r\n     */\n    containerOff: function containerOff() {\n      this.removeDocEvent(\"mousedown\", this._bindedContainerOff);\n      this._bindedContainerOff = null;\n\n      if (this.container) {\n        this._containerName = \"\";\n        this.container.style.display = \"none\";\n        this.container = null;\n        util.removeClass(this.containerActiveButton, \"on\");\n        this.containerActiveButton = null;\n        this._notHideToolbar = false;\n      }\n\n      this._antiBlur = false;\n    },\n\n    /**\r\n     * @description Set the menu position. (submenu, container)\r\n     * @param {*} element Button element\r\n     * @param {*} menu Menu element\r\n     * @private\r\n     */\n    _setMenuPosition: function _setMenuPosition(element, menu) {\n      menu.style.visibility = \"hidden\";\n      menu.style.display = \"block\";\n      menu.style.height = \"\";\n      util.addClass(element, \"on\");\n      var toolbar = this.context.element.toolbar;\n      var toolbarW = toolbar.offsetWidth;\n\n      var toolbarOffset = event._getEditorOffsets(context.element.toolbar);\n\n      var menuW = menu.offsetWidth;\n      var l = element.parentElement.offsetLeft + 3; // rtl\n\n      if (options.rtl) {\n        var elementW = element.offsetWidth;\n        var rtlW = menuW > elementW ? menuW - elementW : 0;\n        var rtlL = rtlW > 0 ? 0 : elementW - menuW;\n        menu.style.left = l - rtlW + rtlL + \"px\";\n\n        if (toolbarOffset.left > event._getEditorOffsets(menu).left) {\n          menu.style.left = \"0px\";\n        }\n      } else {\n        var overLeft = toolbarW <= menuW ? 0 : toolbarW - (l + menuW);\n        if (overLeft < 0) menu.style.left = l + overLeft + \"px\";else menu.style.left = l + \"px\";\n      } // get element top\n\n\n      var t = 0;\n      var offsetEl = element;\n\n      while (offsetEl && offsetEl !== toolbar) {\n        t += offsetEl.offsetTop;\n        offsetEl = offsetEl.offsetParent;\n      }\n\n      var bt = t;\n\n      if (this._isBalloon) {\n        t += toolbar.offsetTop + element.offsetHeight;\n      } else {\n        t -= element.offsetHeight;\n      } // set menu position\n\n\n      var toolbarTop = toolbarOffset.top;\n      var menuHeight = menu.offsetHeight;\n      var scrollTop = this.getGlobalScrollOffset().top;\n      var menuHeight_bottom = _w.innerHeight - (toolbarTop - scrollTop + bt + element.parentElement.offsetHeight);\n\n      if (menuHeight_bottom < menuHeight) {\n        var menuTop = -1 * (menuHeight - bt + 3);\n        var insTop = toolbarTop - scrollTop + menuTop;\n        var menuHeight_top = menuHeight + (insTop < 0 ? insTop : 0);\n\n        if (menuHeight_top > menuHeight_bottom) {\n          menu.style.height = menuHeight_top + \"px\";\n          menuTop = -1 * (menuHeight_top - bt + 3);\n        } else {\n          menu.style.height = menuHeight_bottom + \"px\";\n          menuTop = bt + element.parentElement.offsetHeight;\n        }\n\n        menu.style.top = menuTop + \"px\";\n      } else {\n        menu.style.top = bt + element.parentElement.offsetHeight + \"px\";\n      }\n\n      menu.style.visibility = \"\";\n    },\n\n    /**\r\n     * @description Show controller at editor area (controller elements, function, \"controller target element(@Required)\", \"controller name(@Required)\", etc..)\r\n     * @param {*} arguments controller elements, functions..\r\n     */\n    controllersOn: function controllersOn() {\n      if (this._bindControllersOff) this._bindControllersOff();\n      this.controllerArray = [];\n\n      for (var i = 0, arg; i < arguments.length; i++) {\n        arg = arguments[i];\n        if (!arg) continue;\n\n        if (typeof arg === \"string\") {\n          this.currentControllerName = arg;\n          continue;\n        }\n\n        if (typeof arg === \"function\") {\n          this.controllerArray.push(arg);\n          continue;\n        }\n\n        if (!util.hasClass(arg, \"ke-controller\")) {\n          this.currentControllerTarget = arg;\n          this.currentFileComponentInfo = this.getFileComponent(arg);\n          continue;\n        }\n\n        if (arg.style) {\n          arg.style.display = \"block\";\n\n          if (this._shadowRoot && this._shadowRootControllerEventTarget.indexOf(arg) === -1) {\n            arg.addEventListener(\"mousedown\", function (e) {\n              e.preventDefault();\n              e.stopPropagation();\n            });\n\n            this._shadowRootControllerEventTarget.push(arg);\n          }\n        }\n\n        this.controllerArray.push(arg);\n      }\n\n      this._bindControllersOff = this.controllersOff.bind(this);\n      this.addDocEvent(\"mousedown\", this._bindControllersOff, false);\n      this.addDocEvent(\"keydown\", this._bindControllersOff, false);\n      this._antiBlur = true;\n      if (typeof functions.showController === \"function\") functions.showController(this.currentControllerName, this.controllerArray, this);\n    },\n\n    /**\r\n     * @description Hide controller at editor area (link button, image resize button..)\r\n     * @param {KeyboardEvent|MouseEvent|null} e Event object when called from mousedown and keydown events registered in \"core.controllersOn\"\r\n     */\n    controllersOff: function controllersOff(e) {\n      this.lineBreaker.style.display = \"none\";\n      var len = this.controllerArray.length;\n\n      if (e && e.target && len > 0) {\n        for (var i = 0; i < len; i++) {\n          if (typeof this.controllerArray[i].contains === \"function\" && this.controllerArray[i].contains(e.target)) return;\n        }\n      }\n\n      if (this._fileManager.pluginRegExp.test(this.currentControllerName) && e && e.type === \"keydown\" && e.keyCode !== 27) return;\n      context.element.lineBreaker_t.style.display = context.element.lineBreaker_b.style.display = \"none\";\n      this._variable._lineBreakComp = null;\n      this.currentControllerName = \"\";\n      this.currentControllerTarget = null;\n      this.currentFileComponentInfo = null;\n      this.effectNode = null;\n      if (!this._bindControllersOff) return;\n      this.removeDocEvent(\"mousedown\", this._bindControllersOff);\n      this.removeDocEvent(\"keydown\", this._bindControllersOff);\n      this._bindControllersOff = null;\n\n      if (len > 0) {\n        for (var _i = 0; _i < len; _i++) {\n          if (typeof this.controllerArray[_i] === \"function\") this.controllerArray[_i]();else this.controllerArray[_i].style.display = \"none\";\n        }\n\n        this.controllerArray = [];\n      }\n\n      this._antiBlur = false;\n    },\n\n    /**\r\n     * @description Specify the position of the controller.\r\n     * @param {Element} controller Controller element.\r\n     * @param {Element} referEl Element that is the basis of the controller's position.\r\n     * @param {String} position Type of position (\"top\" | \"bottom\")\r\n     * When using the \"top\" position, there should not be an arrow on the controller.\r\n     * When using the \"bottom\" position there should be an arrow on the controller.\r\n     * @param {Object} addOffset These are the left and top values that need to be added specially.\r\n     * This argument is required. - {left: 0, top: 0}\r\n     * Please enter the value based on ltr mode.\r\n     * Calculated automatically in rtl mode.\r\n     */\n    setControllerPosition: function setControllerPosition(controller, referEl, position, addOffset) {\n      if (options.rtl) addOffset.left *= -1;\n      var offset = util.getOffset(referEl, context.element.wysiwygFrame);\n      controller.style.visibility = \"hidden\";\n      controller.style.display = \"block\"; // Height value of the arrow element is 11px\n\n      var topMargin = position === \"top\" ? -(controller.offsetHeight + 2) : referEl.offsetHeight + 12;\n      controller.style.top = offset.top + topMargin + addOffset.top + \"px\";\n      var l = offset.left - context.element.wysiwygFrame.scrollLeft + addOffset.left;\n      var controllerW = controller.offsetWidth;\n      var referElW = referEl.offsetWidth;\n      var allow = util.hasClass(controller.firstElementChild, \"ke-arrow\") ? controller.firstElementChild : null; // rtl (Width value of the arrow element is 22px)\n\n      if (options.rtl) {\n        var rtlW = controllerW > referElW ? controllerW - referElW : 0;\n        var rtlL = rtlW > 0 ? 0 : referElW - controllerW;\n        controller.style.left = l - rtlW + rtlL + \"px\";\n\n        if (rtlW > 0) {\n          if (allow) allow.style.left = (controllerW - 14 < 10 + rtlW ? controllerW - 14 : 10 + rtlW) + \"px\";\n        }\n\n        var overSize = context.element.wysiwygFrame.offsetLeft - controller.offsetLeft;\n\n        if (overSize > 0) {\n          controller.style.left = \"0px\";\n          if (allow) allow.style.left = overSize + \"px\";\n        }\n      } else {\n        controller.style.left = l + \"px\";\n\n        var _overSize = context.element.wysiwygFrame.offsetWidth - (controller.offsetLeft + controllerW);\n\n        if (_overSize < 0) {\n          controller.style.left = controller.offsetLeft + _overSize + \"px\";\n          if (allow) allow.style.left = 20 - _overSize + \"px\";\n        } else {\n          if (allow) allow.style.left = \"20px\";\n        }\n      }\n\n      controller.style.visibility = \"\";\n    },\n\n    /**\r\n     * @description javascript execCommand\r\n     * @param {String} command javascript execCommand function property\r\n     * @param {Boolean|undefined} showDefaultUI javascript execCommand function property\r\n     * @param {String|undefined} value javascript execCommand function property\r\n     */\n    execCommand: function execCommand(command, showDefaultUI, value) {\n      this._wd.execCommand(command, showDefaultUI, command === \"formatBlock\" ? \"<\" + value + \">\" : value); // history stack\n\n\n      this.history.push(true);\n    },\n\n    /**\r\n     * @description Focus to wysiwyg area using \"native focus function\"\r\n     */\n    nativeFocus: function nativeFocus() {\n      var caption = util.getParentElement(this.getSelectionNode(), \"figcaption\");\n\n      if (caption) {\n        caption.focus();\n      } else {\n        context.element.wysiwyg.focus();\n      }\n\n      this._editorRange();\n    },\n\n    /**\r\n     * @description Focus to wysiwyg area\r\n     */\n    focus: function focus() {\n      if (context.element.wysiwygFrame.style.display === \"none\") return;\n\n      if (options.iframe) {\n        this.nativeFocus();\n      } else {\n        try {\n          var range = this.getRange();\n\n          if (range.startContainer === range.endContainer && util.isWysiwygDiv(range.startContainer)) {\n            var currentNode = range.commonAncestorContainer.children[range.startOffset];\n\n            if (!util.isFormatElement(currentNode) && !util.isComponent(currentNode)) {\n              var format = util.createElement(options.defaultTag);\n              var br = util.createElement(\"BR\");\n              format.appendChild(br);\n              context.element.wysiwyg.insertBefore(format, currentNode);\n              this.setRange(br, 0, br, 0);\n              return;\n            }\n          }\n\n          this.setRange(range.startContainer, range.startOffset, range.endContainer, range.endOffset);\n        } catch (e) {\n          this.nativeFocus();\n        }\n      }\n\n      event._applyTagEffects();\n\n      if (this._isBalloon) event._toggleToolbarBalloon();\n    },\n\n    /**\r\n     * @description If \"focusEl\" is a component, then that component is selected; if it is a format element, the last text is selected\r\n     * If \"focusEdge\" is null, then selected last element\r\n     * @param {Element|null} focusEl Focus element\r\n     */\n    focusEdge: function focusEdge(focusEl) {\n      if (!focusEl) focusEl = context.element.wysiwyg.lastElementChild;\n      var fileComponentInfo = this.getFileComponent(focusEl);\n\n      if (fileComponentInfo) {\n        this.selectComponent(fileComponentInfo.target, fileComponentInfo.pluginName);\n      } else if (focusEl) {\n        focusEl = util.getChildElement(focusEl, function (current) {\n          return current.childNodes.length === 0 || current.nodeType === 3;\n        }, true);\n        if (!focusEl) this.nativeFocus();else this.setRange(focusEl, focusEl.textContent.length, focusEl, focusEl.textContent.length);\n      } else {\n        this.focus();\n      }\n    },\n\n    /**\r\n     * @description Focusout to wysiwyg area (.blur())\r\n     */\n    blur: function blur() {\n      if (options.iframe) {\n        context.element.wysiwygFrame.blur();\n      } else {\n        context.element.wysiwyg.blur();\n      }\n    },\n\n    /**\r\n     * @description Set current editor's range object and return.\r\n     * @param {Node} startCon The startContainer property of the selection object.\r\n     * @param {Number} startOff The startOffset property of the selection object.\r\n     * @param {Node} endCon The endContainer property of the selection object.\r\n     * @param {Number} endOff The endOffset property of the selection object.\r\n     * @returns {Object} Range object.\r\n     */\n    setRange: function setRange(startCon, startOff, endCon, endOff) {\n      if (!startCon || !endCon) return;\n      if (startOff > startCon.textContent.length) startOff = startCon.textContent.length;\n      if (endOff > endCon.textContent.length) endOff = endCon.textContent.length;\n\n      if (util.isFormatElement(startCon)) {\n        startCon = startCon.childNodes[startOff] || startCon;\n        startOff = 0;\n      }\n\n      if (util.isFormatElement(endCon)) {\n        endCon = endCon.childNodes[endOff] || endCon;\n        endOff = startOff > 1 ? startOff : 0;\n      }\n\n      var range = this._wd.createRange();\n\n      try {\n        range.setStart(startCon, startOff);\n        range.setEnd(endCon, endOff);\n      } catch (error) {\n        console.warn(\"[KothingEditor.core.focus.error] \" + error);\n        this.nativeFocus();\n        return;\n      }\n\n      var selection = this.getSelection();\n\n      if (selection.removeAllRanges) {\n        selection.removeAllRanges();\n      }\n\n      selection.addRange(range);\n\n      this._editorRange();\n\n      if (options.iframe) this.nativeFocus();\n      return range;\n    },\n\n    /**\r\n     * @description Remove range object and button effect\r\n     */\n    removeRange: function removeRange() {\n      this._variable._range = null;\n      this._variable._selectionNode = null;\n      if (this.hasFocus) this.getSelection().removeAllRanges();\n      var commandMap = this.commandMap;\n      var activePlugins = this.activePlugins;\n\n      for (var key in commandMap) {\n        if (!util.hasOwn(commandMap, key)) continue;\n\n        if (activePlugins.indexOf(key) > -1) {\n          plugins[key].active.call(this, null);\n        } else if (commandMap.OUTDENT && /^OUTDENT$/i.test(key)) {\n          commandMap.OUTDENT.setAttribute(\"disabled\", true);\n        } else if (commandMap.INDENT && /^INDENT$/i.test(key)) {\n          commandMap.INDENT.removeAttribute(\"disabled\");\n        } else {\n          util.removeClass(commandMap[key], \"active\");\n        }\n      }\n    },\n\n    /**\r\n     * @description Get current editor's range object\r\n     * @returns {Object}\r\n     */\n    getRange: function getRange() {\n      var range = this._variable._range || this._createDefaultRange();\n\n      var selection = this.getSelection();\n      if (range.collapsed === selection.isCollapsed || !context.element.wysiwyg.contains(selection.focusNode)) return range;\n\n      if (selection.rangeCount > 0) {\n        this._variable._range = selection.getRangeAt(0);\n        return this._variable._range;\n      } else {\n        var sc = selection.anchorNode,\n            ec = selection.focusNode,\n            so = selection.anchorOffset,\n            eo = selection.focusOffset;\n        var compareValue = util.compareElements(sc, ec);\n        var rightDir = compareValue.ancestor && (compareValue.result === 0 ? so <= eo : compareValue.result > 1 ? true : false);\n        return this.setRange(rightDir ? sc : ec, rightDir ? so : eo, rightDir ? ec : sc, rightDir ? eo : so);\n      }\n    },\n\n    /**\r\n     * @description If the \"range\" object is a non-editable area, add a line at the top of the editor and update the \"range\" object.\r\n     * Returns a new \"range\" or argument \"range\".\r\n     * @param {Object} range core.getRange()\r\n     * @param {Element|null} container If there is \"container\" argument, it creates a line in front of the container.\r\n     * @returns {Object} range\r\n     */\n    getRange_addLine: function getRange_addLine(range, container) {\n      if (this._selectionVoid(range)) {\n        var wysiwyg = context.element.wysiwyg;\n        var op = util.createElement(options.defaultTag);\n        op.innerHTML = \"<br>\";\n        wysiwyg.insertBefore(op, container && container !== wysiwyg ? container.nextElementSibling : wysiwyg.firstElementChild);\n        this.setRange(op.firstElementChild, 0, op.firstElementChild, 1);\n        range = this._variable._range;\n      }\n\n      return range;\n    },\n\n    /**\r\n     * @description Get window selection obejct\r\n     * @returns {Object}\r\n     */\n    getSelection: function getSelection() {\n      return this._shadowRoot && this._shadowRoot.getSelection ? this._shadowRoot.getSelection() : this._ww.getSelection();\n    },\n\n    /**\r\n     * @description Get current select node\r\n     * @returns {Node}\r\n     */\n    getSelectionNode: function getSelectionNode() {\n      if (!context.element.wysiwyg.contains(this._variable._selectionNode)) this._editorRange();\n\n      if (!this._variable._selectionNode) {\n        var selectionNode = util.getChildElement(context.element.wysiwyg.firstChild, function (current) {\n          return current.childNodes.length === 0 || current.nodeType === 3;\n        }, false);\n\n        if (!selectionNode) {\n          this._editorRange();\n        } else {\n          this._variable._selectionNode = selectionNode;\n          return selectionNode;\n        }\n      }\n\n      return this._variable._selectionNode;\n    },\n\n    /**\r\n     * @description Saving the range object and the currently selected node of editor\r\n     * @private\r\n     */\n    _editorRange: function _editorRange() {\n      var selection = this.getSelection();\n      if (!selection) return null;\n      var range = null;\n      var selectionNode = null;\n\n      if (selection.rangeCount > 0) {\n        range = selection.getRangeAt(0);\n      } else {\n        range = this._createDefaultRange();\n      }\n\n      this._variable._range = range;\n\n      if (range.collapsed) {\n        if (util.isWysiwygDiv(range.commonAncestorContainer)) selectionNode = range.commonAncestorContainer.children[range.startOffset] || range.commonAncestorContainer;else selectionNode = range.commonAncestorContainer;\n      } else {\n        selectionNode = selection.extentNode || selection.anchorNode;\n      }\n\n      this._variable._selectionNode = selectionNode;\n    },\n\n    /**\r\n     * @description Return the range object of editor's first child node\r\n     * @returns {Object}\r\n     * @private\r\n     */\n    _createDefaultRange: function _createDefaultRange() {\n      var wysiwyg = context.element.wysiwyg;\n      wysiwyg.focus();\n\n      var range = this._wd.createRange();\n\n      var focusEl = wysiwyg.firstElementChild;\n\n      if (!focusEl) {\n        focusEl = util.createElement(options.defaultTag);\n        focusEl.innerHTML = \"<br>\";\n        wysiwyg.appendChild(focusEl);\n      }\n\n      range.setStart(focusEl, 0);\n      range.setEnd(focusEl, 0);\n      return range;\n    },\n\n    /**\r\n     * @description Returns true if there is no valid \"selection\".\r\n     * @param {Object} range core.getRange()\r\n     * @returns {Object} range\r\n     * @private\r\n     */\n    _selectionVoid: function _selectionVoid(range) {\n      var comm = range.commonAncestorContainer;\n      return util.isWysiwygDiv(range.startContainer) && util.isWysiwygDiv(range.endContainer) || /FIGURE/i.test(comm.nodeName) || this._fileManager.regExp.test(comm.nodeName) || util.isMediaComponent(comm);\n    },\n\n    /**\r\n     * @description Reset range object to text node selected status.\r\n     * @returns {Boolean} Returns false if there is no valid selection.\r\n     * @private\r\n     */\n    _resetRangeToTextNode: function _resetRangeToTextNode() {\n      var range = this.getRange();\n      if (this._selectionVoid(range)) return false;\n      var startCon = range.startContainer;\n      var startOff = range.startOffset;\n      var endCon = range.endContainer;\n      var endOff = range.endOffset;\n      var tempCon, tempOffset, tempChild;\n\n      if (util.isFormatElement(startCon)) {\n        startCon = startCon.childNodes[startOff] || startCon.lastChild;\n        startOff = startCon.textContent.length;\n      }\n\n      if (util.isFormatElement(endCon)) {\n        endCon = endCon.childNodes[endOff] || endCon.lastChild;\n        endOff = endCon.textContent.length;\n      } // startContainer\n\n\n      tempCon = util.isWysiwygDiv(startCon) ? context.element.wysiwyg.firstChild : startCon;\n      tempOffset = startOff;\n\n      if (util.isBreak(tempCon) || tempCon.nodeType === 1 && tempCon.childNodes.length > 0) {\n        var onlyBreak = util.isBreak(tempCon);\n\n        if (!onlyBreak) {\n          while (tempCon && !util.isBreak(tempCon) && tempCon.nodeType === 1) {\n            tempCon = tempCon.childNodes[tempOffset] || tempCon.nextElementSibling || tempCon.nextSibling;\n            tempOffset = 0;\n          }\n\n          var format = util.getFormatElement(tempCon, null);\n\n          if (format === util.getRangeFormatElement(format, null)) {\n            format = util.createElement(util.getParentElement(tempCon, util.isCell) ? \"DIV\" : options.defaultTag);\n            tempCon.parentNode.insertBefore(format, tempCon);\n            format.appendChild(tempCon);\n          }\n        }\n\n        if (util.isBreak(tempCon)) {\n          var emptyText = util.createTextNode(util.zeroWidthSpace);\n          tempCon.parentNode.insertBefore(emptyText, tempCon);\n          tempCon = emptyText;\n\n          if (onlyBreak) {\n            if (startCon === endCon) {\n              endCon = tempCon;\n              endOff = 1;\n            }\n          }\n        }\n      } // set startContainer\n\n\n      startCon = tempCon;\n      startOff = tempOffset; // endContainer\n\n      tempCon = util.isWysiwygDiv(endCon) ? context.element.wysiwyg.lastChild : endCon;\n      tempOffset = endOff;\n\n      if (util.isBreak(tempCon) || tempCon.nodeType === 1 && tempCon.childNodes.length > 0) {\n        var _onlyBreak = util.isBreak(tempCon);\n\n        if (!_onlyBreak) {\n          while (tempCon && !util.isBreak(tempCon) && tempCon.nodeType === 1) {\n            tempChild = tempCon.childNodes;\n            if (tempChild.length === 0) break;\n            tempCon = tempChild[tempOffset > 0 ? tempOffset - 1 : tempOffset] || !/FIGURE/i.test(tempChild[0].nodeName) ? tempChild[0] : tempCon.previousElementSibling || tempCon.previousSibling || startCon;\n            tempOffset = tempOffset > 0 ? tempCon.textContent.length : tempOffset;\n          }\n\n          var _format = util.getFormatElement(tempCon, null);\n\n          if (_format === util.getRangeFormatElement(_format, null)) {\n            _format = util.createElement(util.isCell(_format) ? \"DIV\" : options.defaultTag);\n            tempCon.parentNode.insertBefore(_format, tempCon);\n\n            _format.appendChild(tempCon);\n          }\n        }\n\n        if (util.isBreak(tempCon)) {\n          var _emptyText = util.createTextNode(util.zeroWidthSpace);\n\n          tempCon.parentNode.insertBefore(_emptyText, tempCon);\n          tempCon = _emptyText;\n          tempOffset = 1;\n\n          if (_onlyBreak && !tempCon.previousSibling) {\n            util.removeItem(endCon);\n          }\n        }\n      } // set endContainer\n\n\n      endCon = tempCon;\n      endOff = tempOffset; // set Range\n\n      this.setRange(startCon, startOff, endCon, endOff);\n      return true;\n    },\n\n    /**\r\n     * @description Returns a \"formatElement\"(util.isFormatElement) array from the currently selected range.\r\n     * @param {Function|null} validation The validation function. (Replaces the default validation function-util.isFormatElement(current))\r\n     * @returns {Array}\r\n     */\n    getSelectedElements: function getSelectedElements(validation) {\n      if (!this._resetRangeToTextNode()) return [];\n      var range = this.getRange();\n\n      if (util.isWysiwygDiv(range.startContainer)) {\n        var children = context.element.wysiwyg.children;\n        if (children.length === 0) return [];\n        this.setRange(children[0], 0, children[children.length - 1], children[children.length - 1].textContent.trim().length);\n        range = this.getRange();\n      }\n\n      var startCon = range.startContainer;\n      var endCon = range.endContainer;\n      var commonCon = range.commonAncestorContainer; // get line nodes\n\n      var lineNodes = util.getListChildren(commonCon, function (current) {\n        return validation ? validation(current) : util.isFormatElement(current);\n      });\n      if (!util.isWysiwygDiv(commonCon) && !util.isRangeFormatElement(commonCon)) lineNodes.unshift(util.getFormatElement(commonCon, null));\n      if (startCon === endCon || lineNodes.length === 1) return lineNodes;\n      var startLine = util.getFormatElement(startCon, null);\n      var endLine = util.getFormatElement(endCon, null);\n      var startIdx = null;\n      var endIdx = null;\n\n      var onlyTable = function onlyTable(current) {\n        return util.isTable(current) ? /^TABLE$/i.test(current.nodeName) : true;\n      };\n\n      var startRangeEl = util.getRangeFormatElement(startLine, onlyTable);\n      var endRangeEl = util.getRangeFormatElement(endLine, onlyTable);\n      if (util.isTable(startRangeEl) && util.isListCell(startRangeEl.parentNode)) startRangeEl = startRangeEl.parentNode;\n      if (util.isTable(endRangeEl) && util.isListCell(endRangeEl.parentNode)) endRangeEl = endRangeEl.parentNode;\n      var sameRange = startRangeEl === endRangeEl;\n\n      for (var i = 0, len = lineNodes.length, line; i < len; i++) {\n        line = lineNodes[i];\n\n        if (startLine === line || !sameRange && line === startRangeEl) {\n          startIdx = i;\n          continue;\n        }\n\n        if (endLine === line || !sameRange && line === endRangeEl) {\n          endIdx = i;\n          break;\n        }\n      }\n\n      if (startIdx === null) startIdx = 0;\n      if (endIdx === null) endIdx = lineNodes.length - 1;\n      return lineNodes.slice(startIdx, endIdx + 1);\n    },\n\n    /**\r\n     * @description Get format elements and components from the selected area. (P, DIV, H[1-6], OL, UL, TABLE..)\r\n     * If some of the component are included in the selection, get the entire that component.\r\n     * @param {Boolean} removeDuplicate If true, if there is a parent and child tag among the selected elements, the child tag is excluded.\r\n     * @returns {Array}\r\n     */\n    getSelectedElementsAndComponents: function getSelectedElementsAndComponents(removeDuplicate) {\n      var commonCon = this.getRange().commonAncestorContainer;\n      var myComponent = util.getParentElement(commonCon, util.isComponent);\n      var selectedLines = util.isTable(commonCon) ? this.getSelectedElements(null) : this.getSelectedElements(function (current) {\n        var component = this.getParentElement(current, this.isComponent);\n        return this.isFormatElement(current) && (!component || component === myComponent) || this.isComponent(current) && !this.getFormatElement(current);\n      }.bind(util));\n\n      if (removeDuplicate) {\n        for (var i = 0, len = selectedLines.length; i < len; i++) {\n          for (var j = i - 1; j >= 0; j--) {\n            if (selectedLines[j].contains(selectedLines[i])) {\n              selectedLines.splice(i, 1);\n              i--;\n              len--;\n              break;\n            }\n          }\n        }\n      }\n\n      return selectedLines;\n    },\n\n    /**\r\n     * @description Determine if this offset is the edge offset of container\r\n     * @param {Node} container The node of the selection object. (range.startContainer..)\r\n     * @param {Number} offset The offset of the selection object. (core.getRange().startOffset...)\r\n     * @param {String|undefined} dir Select check point - Both edge, Front edge or End edge. (\"front\": Front edge, \"end\": End edge, undefined: Both edge)\r\n     * @returns {Boolean}\r\n     */\n    isEdgePoint: function isEdgePoint(container, offset, dir) {\n      return dir !== \"end\" && offset === 0 || (!dir || dir !== \"front\") && !container.nodeValue && offset === 1 || (!dir || dir === \"end\") && !!container.nodeValue && offset === container.nodeValue.length;\n    },\n\n    /**\r\n     * @description Check if the container and offset values are the edges of the format tag\r\n     * @param {Node} container The node of the selection object. (range.startContainer..)\r\n     * @param {Number} offset The offset of the selection object. (core.getRange().startOffset...)\r\n     * @param {String} dir Select check point - \"front\": Front edge, \"end\": End edge, undefined: Both edge.\r\n     * @returns {Array|null}\r\n     * @private\r\n     */\n    _isEdgeFormat: function _isEdgeFormat(node, offset, dir) {\n      if (!this.isEdgePoint(node, offset, dir)) return false;\n      var result = [];\n      dir = dir === \"front\" ? \"previousSibling\" : \"nextSibling\";\n\n      while (node && !util.isFormatElement(node) && !util.isWysiwygDiv(node)) {\n        if (!node[dir] || util.isBreak(node[dir]) && !node[dir][dir]) {\n          if (node.nodeType === 1) result.push(node.cloneNode(false));\n          node = node.parentNode;\n        } else {\n          return null;\n        }\n      }\n\n      return result;\n    },\n\n    /**\r\n     * @description Show loading box\r\n     */\n    showLoading: function showLoading() {\n      context.element.loading.style.display = \"block\";\n    },\n\n    /**\r\n     * @description Close loading box\r\n     */\n    closeLoading: function closeLoading() {\n      context.element.loading.style.display = \"none\";\n    },\n\n    /**\r\n     * @description Append format element to sibling node of argument element.\r\n     * If the \"formatNodeName\" argument value is present, the tag of that argument value is inserted,\r\n     * If not, the currently selected format tag is inserted.\r\n     * @param {Element} element Insert as siblings of that element\r\n     * @param {String|Element|null} formatNode Node name or node obejct to be inserted\r\n     * @returns {Element}\r\n     */\n    appendFormatTag: function appendFormatTag(element, formatNode) {\n      var currentFormatEl = util.getFormatElement(this.getSelectionNode(), null);\n      var oFormatName = formatNode ? typeof formatNode === \"string\" ? formatNode : formatNode.nodeName : util.isFormatElement(currentFormatEl) && !util.isFreeFormatElement(currentFormatEl) ? currentFormatEl.nodeName : options.defaultTag;\n      var oFormat = util.createElement(oFormatName);\n      oFormat.innerHTML = \"<br>\";\n\n      if (formatNode && typeof formatNode !== \"string\" || !formatNode && util.isFormatElement(currentFormatEl)) {\n        util.copyTagAttributes(oFormat, formatNode || currentFormatEl);\n      }\n\n      if (util.isCell(element)) element.insertBefore(oFormat, element.nextElementSibling);else element.parentNode.insertBefore(oFormat, element.nextElementSibling);\n      return oFormat;\n    },\n\n    /**\r\n     * @description The method to insert a element and return. (used elements : table, hr, image, video)\r\n     * If \"element\" is \"HR\", insert and return the new line.\r\n     * @param {Element} element Element to be inserted\r\n     * @param {Boolean} notHistoryPush When true, it does not update the history stack and the selection object and return EdgeNodes (util.getEdgeChildNodes)\r\n     * @param {Boolean} checkCharCount If true, if \"options.maxCharCount\" is exceeded when \"element\" is added, null is returned without addition.\r\n     * @param {Boolean} notSelect If true, Do not automatically select the inserted component.\r\n     * @returns {Element}\r\n     */\n    insertComponent: function insertComponent(element, notHistoryPush, checkCharCount, notSelect) {\n      if (checkCharCount && !this.checkCharCount(element, null)) {\n        return null;\n      }\n\n      var r = this.removeNode();\n      this.getRange_addLine(this.getRange(), r.container);\n      var oNode = null;\n      var selectionNode = this.getSelectionNode();\n      var formatEl = util.getFormatElement(selectionNode, null);\n\n      if (util.isListCell(formatEl)) {\n        this.insertNode(element, selectionNode === formatEl ? null : r.container.nextSibling, false);\n        if (!element.nextSibling) element.parentNode.appendChild(util.createElement(\"BR\"));\n      } else {\n        if (this.getRange().collapsed && (r.container.nodeType === 3 || util.isBreak(r.container))) {\n          var depthFormat = util.getParentElement(r.container, function (current) {\n            return this.isRangeFormatElement(current);\n          }.bind(util));\n          oNode = util.splitElement(r.container, r.offset, !depthFormat ? 0 : util.getElementDepth(depthFormat) + 1);\n          if (oNode) formatEl = oNode.previousSibling;\n        }\n\n        this.insertNode(element, formatEl, false);\n        if (formatEl && util.onlyZeroWidthSpace(formatEl)) util.removeItem(formatEl);\n      }\n\n      this.setRange(element, 0, element, 0);\n\n      if (!notSelect) {\n        var fileComponentInfo = this.getFileComponent(element);\n\n        if (fileComponentInfo) {\n          this.selectComponent(fileComponentInfo.target, fileComponentInfo.pluginName);\n        } else if (oNode) {\n          oNode = util.getEdgeChildNodes(oNode, null).sc || oNode;\n          this.setRange(oNode, 0, oNode, 0);\n        }\n      } // history stack\n\n\n      if (!notHistoryPush) this.history.push(1);\n      return oNode || element;\n    },\n\n    /**\r\n     * @description Gets the file component and that plugin name\r\n     * return: {target, component, pluginName} | null\r\n     * @param {Element} element Target element (figure tag, component div, file tag)\r\n     * @returns {Object|null}\r\n     */\n    getFileComponent: function getFileComponent(element) {\n      if (!this._fileManager.queryString || !element) return null;\n      var target, pluginName;\n\n      if (/^FIGURE$/i.test(element.nodeName) || /ke-component/.test(element.className)) {\n        target = element.querySelector(this._fileManager.queryString);\n      }\n\n      if (!target && element.nodeName && this._fileManager.regExp.test(element.nodeName)) {\n        target = element;\n      }\n\n      if (target) {\n        pluginName = this._fileManager.pluginMap[target.nodeName.toLowerCase()];\n\n        if (pluginName) {\n          return {\n            target: target,\n            component: util.getParentElement(target, util.isComponent),\n            pluginName: pluginName\n          };\n        }\n      }\n\n      return null;\n    },\n\n    /**\r\n     * @description The component(image, video) is selected and the resizing module is called.\r\n     * @param {Element} element Element tag (img, iframe, video)\r\n     * @param {String} pluginName Plugin name (image, video)\r\n     */\n    selectComponent: function selectComponent(element, pluginName) {\n      if (util.isUneditableComponent(util.getParentElement(element, util.isComponent)) || util.isUneditableComponent(element)) return false;\n      if (!this.hasFocus) this.focus();\n      var plugin = this.plugins[pluginName];\n      if (!plugin) return;\n\n      _w.setTimeout(function () {\n        if (typeof plugin.select === \"function\") this.callPlugin(pluginName, plugin.select.bind(this, element), null);\n\n        this._setComponentLineBreaker(element);\n      }.bind(this));\n    },\n\n    /**\r\n     * @description Set line breaker of component\r\n     * @param {Element} element Element tag (img, iframe, video)\r\n     * @private\r\n     */\n    _setComponentLineBreaker: function _setComponentLineBreaker(element) {\n      // line breaker\n      this.lineBreaker.style.display = \"none\";\n      var container = util.getParentElement(element, util.isComponent);\n      var t_style = context.element.lineBreaker_t.style;\n      var b_style = context.element.lineBreaker_b.style;\n      var target = this.context.resizing.resizeContainer.style.display === \"block\" ? this.context.resizing.resizeContainer : element;\n      var isList = util.isListCell(container.parentNode);\n      var componentTop, wScroll, w; // top\n\n      if (isList ? !container.previousSibling : !util.isFormatElement(container.previousElementSibling)) {\n        this._variable._lineBreakComp = container;\n        wScroll = context.element.wysiwyg.scrollTop;\n        componentTop = util.getOffset(element, context.element.wysiwygFrame).top + wScroll;\n        w = target.offsetWidth / 2 / 2;\n        t_style.top = componentTop - wScroll - 12 + \"px\";\n        t_style.left = util.getOffset(target).left + w + \"px\";\n        t_style.display = \"block\";\n      } else {\n        t_style.display = \"none\";\n      } // bottom\n\n\n      if (isList ? !container.nextSibling : !util.isFormatElement(container.nextElementSibling)) {\n        if (!componentTop) {\n          this._variable._lineBreakComp = container;\n          wScroll = context.element.wysiwyg.scrollTop;\n          componentTop = util.getOffset(element, context.element.wysiwygFrame).top + wScroll;\n          w = target.offsetWidth / 2 / 2;\n        }\n\n        b_style.top = componentTop + target.offsetHeight - wScroll - 12 + \"px\";\n        b_style.left = util.getOffset(target).left + target.offsetWidth - w - 24 + \"px\";\n        b_style.display = \"block\";\n      } else {\n        b_style.display = \"none\";\n      }\n    },\n\n    /**\r\n     * @description Delete selected node and insert argument value node and return.\r\n     * If the \"afterNode\" exists, it is inserted after the \"afterNode\"\r\n     * Inserting a text node merges with both text nodes on both sides and returns a new \"{ container, startOffset, endOffset }\".\r\n     * @param {Node} oNode Element to be inserted\r\n     * @param {Node|null} afterNode If the node exists, it is inserted after the node\r\n     * @param {Boolean} checkCharCount If true, if \"options.maxCharCount\" is exceeded when \"element\" is added, null is returned without addition.\r\n     * @returns {Object|Node|null}\r\n     */\n    insertNode: function insertNode(oNode, afterNode, checkCharCount) {\n      if (checkCharCount && !this.checkCharCount(oNode, null)) {\n        return null;\n      }\n\n      var freeFormat = util.getFreeFormatElement(this.getSelectionNode(), null);\n      var isFormats = !freeFormat && (util.isFormatElement(oNode) || util.isRangeFormatElement(oNode)) || util.isComponent(oNode);\n\n      if (!afterNode && (isFormats || util.isComponent(oNode) || util.isMedia(oNode))) {\n        var r = this.removeNode();\n\n        if (r.container.nodeType === 3 || util.isBreak(r.container)) {\n          var depthFormat = util.getParentElement(r.container, function (current) {\n            return this.isRangeFormatElement(current) || this.isListCell(current);\n          }.bind(util));\n          afterNode = util.splitElement(r.container, r.offset, !depthFormat ? 0 : util.getElementDepth(depthFormat) + 1);\n          if (afterNode) afterNode = afterNode.previousSibling;\n        }\n      }\n\n      var range = !afterNode && !isFormats ? this.getRange_addLine(this.getRange(), null) : this.getRange();\n      var commonCon = range.commonAncestorContainer;\n      var startOff = range.startOffset;\n      var endOff = range.endOffset;\n      var formatRange = range.startContainer === commonCon && util.isFormatElement(commonCon);\n      var startCon = formatRange ? commonCon.childNodes[startOff] || commonCon.childNodes[0] : range.startContainer;\n      var endCon = formatRange ? commonCon.childNodes[endOff] || commonCon.childNodes[commonCon.childNodes.length - 1] : range.endContainer;\n      var parentNode,\n          originAfter = null;\n\n      if (!afterNode) {\n        parentNode = startCon;\n\n        if (startCon.nodeType === 3) {\n          parentNode = startCon.parentNode;\n        }\n        /** No Select range node */\n\n\n        if (range.collapsed) {\n          if (commonCon.nodeType === 3) {\n            if (commonCon.textContent.length > endOff) afterNode = commonCon.splitText(endOff);else afterNode = commonCon.nextSibling;\n          } else {\n            if (!util.isBreak(parentNode)) {\n              var c = parentNode.childNodes[startOff];\n              var focusNode = c && c.nodeType === 3 && util.onlyZeroWidthSpace(c) && util.isBreak(c.nextSibling) ? c.nextSibling : c;\n\n              if (focusNode) {\n                if (!focusNode.nextSibling) {\n                  parentNode.removeChild(focusNode);\n                  afterNode = null;\n                } else {\n                  afterNode = util.isBreak(focusNode) && !util.isBreak(oNode) ? focusNode : focusNode.nextSibling;\n                }\n              } else {\n                afterNode = null;\n              }\n            } else {\n              afterNode = parentNode;\n              parentNode = parentNode.parentNode;\n            }\n          }\n        } else {\n          /** Select range nodes */\n          var isSameContainer = startCon === endCon;\n\n          if (isSameContainer) {\n            if (this.isEdgePoint(endCon, endOff)) afterNode = endCon.nextSibling;else afterNode = endCon.splitText(endOff);\n            var removeNode = startCon;\n            if (!this.isEdgePoint(startCon, startOff)) removeNode = startCon.splitText(startOff);\n            parentNode.removeChild(removeNode);\n\n            if (parentNode.childNodes.length === 0 && isFormats) {\n              parentNode.innerHTML = \"<br>\";\n            }\n          } else {\n            var removedTag = this.removeNode();\n            var container = removedTag.container;\n            var prevContainer = removedTag.prevContainer;\n\n            if (container && container.childNodes.length === 0 && isFormats) {\n              if (util.isFormatElement(container)) {\n                container.innerHTML = \"<br>\";\n              } else if (util.isRangeFormatElement(container)) {\n                container.innerHTML = \"<\" + options.defaultTag + \"><br></\" + options.defaultTag + \">\";\n              }\n            }\n\n            if (!isFormats && prevContainer) {\n              parentNode = prevContainer.nodeType === 3 ? prevContainer.parentNode : prevContainer;\n\n              if (parentNode.contains(container)) {\n                var sameParent = true;\n                afterNode = container;\n\n                while (afterNode.parentNode !== parentNode) {\n                  afterNode = afterNode.parentNode;\n                  sameParent = false;\n                }\n\n                if (sameParent && container === prevContainer) afterNode = afterNode.nextSibling;\n              } else {\n                afterNode = null;\n              }\n            } else {\n              afterNode = isFormats ? endCon : container === prevContainer ? container.nextSibling : container;\n              parentNode = !afterNode || !afterNode.parentNode ? commonCon : afterNode.parentNode;\n            }\n\n            while (afterNode && !util.isFormatElement(afterNode) && afterNode.parentNode !== commonCon) {\n              afterNode = afterNode.parentNode;\n            }\n          }\n        }\n      } // has afterNode\n      else {\n          parentNode = afterNode.parentNode;\n          afterNode = afterNode.nextSibling;\n          originAfter = true;\n        } // --- insert node ---\n\n\n      try {\n        if (util.isWysiwygDiv(afterNode) || parentNode === context.element.wysiwyg.parentNode) {\n          parentNode = context.element.wysiwyg;\n          afterNode = null;\n        }\n\n        if (util.isFormatElement(oNode) || util.isRangeFormatElement(oNode) || !util.isListCell(parentNode) && util.isComponent(oNode)) {\n          var oldParent = parentNode;\n\n          if (util.isList(afterNode)) {\n            parentNode = afterNode;\n            afterNode = null;\n          } else if (util.isListCell(afterNode)) {\n            parentNode = afterNode.previousElementSibling || afterNode;\n          } else if (!originAfter && !afterNode) {\n            var _r = this.removeNode();\n\n            var _container = _r.container.nodeType === 3 ? util.isListCell(util.getFormatElement(_r.container, null)) ? _r.container : util.getFormatElement(_r.container, null) || _r.container.parentNode : _r.container;\n\n            var rangeCon = util.isWysiwygDiv(_container) || util.isRangeFormatElement(_container);\n            parentNode = rangeCon ? _container : _container.parentNode;\n            afterNode = rangeCon ? null : _container.nextSibling;\n          }\n\n          if (oldParent.childNodes.length === 0 && parentNode !== oldParent) util.removeItem(oldParent);\n        }\n\n        if (isFormats && !freeFormat && !util.isRangeFormatElement(parentNode) && !util.isListCell(parentNode) && !util.isWysiwygDiv(parentNode)) {\n          afterNode = parentNode.nextElementSibling;\n          parentNode = parentNode.parentNode;\n        }\n\n        if (util.isWysiwygDiv(parentNode) && (oNode.nodeType === 3 || util.isBreak(oNode))) {\n          var fNode = util.createElement(options.defaultTag);\n          fNode.appendChild(oNode);\n          oNode = fNode;\n        }\n\n        parentNode.insertBefore(oNode, parentNode === afterNode ? parentNode.lastChild : afterNode);\n      } catch (e) {\n        parentNode.appendChild(oNode);\n      } finally {\n        if ((util.isFormatElement(oNode) || util.isComponent(oNode)) && startCon === endCon) {\n          var cItem = util.getFormatElement(commonCon, null);\n\n          if (cItem && cItem.nodeType === 1 && util.isEmptyLine(cItem)) {\n            util.removeItem(cItem);\n          }\n        }\n\n        if (freeFormat && (util.isFormatElement(oNode) || util.isRangeFormatElement(oNode))) {\n          oNode = this._setIntoFreeFormat(oNode);\n        }\n\n        if (!util.isComponent(oNode)) {\n          var offset = 1;\n\n          if (oNode.nodeType === 3) {\n            var previous = oNode.previousSibling;\n            var next = oNode.nextSibling;\n            var previousText = !previous || previous.nodeType === 1 || util.onlyZeroWidthSpace(previous) ? \"\" : previous.textContent;\n            var nextText = !next || next.nodeType === 1 || util.onlyZeroWidthSpace(next) ? \"\" : next.textContent;\n\n            if (previous && previousText.length > 0) {\n              oNode.textContent = previousText + oNode.textContent;\n              util.removeItem(previous);\n            }\n\n            if (next && next.length > 0) {\n              oNode.textContent += nextText;\n              util.removeItem(next);\n            }\n\n            var newRange = {\n              container: oNode,\n              startOffset: previousText.length,\n              endOffset: oNode.textContent.length - nextText.length\n            };\n            this.setRange(oNode, newRange.startOffset, oNode, newRange.endOffset);\n            return newRange;\n          } else if (!util.isBreak(oNode) && util.isFormatElement(parentNode)) {\n            var zeroWidth = null;\n\n            if (!oNode.previousSibling || util.isBreak(oNode.previousSibling)) {\n              zeroWidth = util.createTextNode(util.zeroWidthSpace);\n              oNode.parentNode.insertBefore(zeroWidth, oNode);\n            }\n\n            if (!oNode.nextSibling || util.isBreak(oNode.nextSibling)) {\n              zeroWidth = util.createTextNode(util.zeroWidthSpace);\n              oNode.parentNode.insertBefore(zeroWidth, oNode.nextSibling);\n            }\n\n            if (util._isIgnoreNodeChange(oNode)) {\n              oNode = oNode.nextSibling;\n              offset = 0;\n            }\n          }\n\n          this.setRange(oNode, offset, oNode, offset);\n        } // history stack\n\n\n        this.history.push(true);\n        return oNode;\n      }\n    },\n    _setIntoFreeFormat: function _setIntoFreeFormat(oNode) {\n      var parentNode = oNode.parentNode;\n      var oNodeChildren, lastONode;\n\n      while (util.isFormatElement(oNode) || util.isRangeFormatElement(oNode)) {\n        oNodeChildren = oNode.childNodes;\n        lastONode = null;\n\n        while (oNodeChildren[0]) {\n          lastONode = oNodeChildren[0];\n\n          if (util.isFormatElement(lastONode) || util.isRangeFormatElement(lastONode)) {\n            this._setIntoFreeFormat(lastONode);\n\n            if (!oNode.parentNode) break;\n            oNodeChildren = oNode.childNodes;\n            continue;\n          }\n\n          parentNode.insertBefore(lastONode, oNode);\n        }\n\n        if (oNode.childNodes.length === 0) util.removeItem(oNode);\n        oNode = util.createElement(\"BR\");\n        parentNode.insertBefore(oNode, lastONode.nextSibling);\n      }\n\n      return oNode;\n    },\n\n    /**\r\n     * @description Delete the currently selected nodes and reset selection range\r\n     * Returns {container: \"the last element after deletion\", offset: \"offset\", prevContainer: \"previousElementSibling Of the deleted area\"}\r\n     * @returns {Object}\r\n     */\n    removeNode: function removeNode() {\n      this._resetRangeToTextNode();\n\n      var range = this.getRange();\n      var container,\n          offset = 0;\n      var startCon = range.startContainer;\n      var endCon = range.endContainer;\n      var startOff = range.startOffset;\n      var endOff = range.endOffset;\n      var commonCon = range.commonAncestorContainer.nodeType === 3 && range.commonAncestorContainer.parentNode === startCon.parentNode ? startCon.parentNode : range.commonAncestorContainer;\n\n      if (commonCon === startCon && commonCon === endCon) {\n        startCon = commonCon.children[startOff];\n        endCon = commonCon.children[endOff];\n        startOff = endOff = 0;\n      }\n\n      var beforeNode = null;\n      var afterNode = null;\n      var childNodes = util.getListChildNodes(commonCon, null);\n      var startIndex = util.getArrayIndex(childNodes, startCon);\n      var endIndex = util.getArrayIndex(childNodes, endCon);\n\n      if (childNodes.length > 0 && startIndex > -1 && endIndex > -1) {\n        for (var i = startIndex + 1, startNode = startCon; i >= 0; i--) {\n          if (childNodes[i] === startNode.parentNode && childNodes[i].firstChild === startNode && startOff === 0) {\n            startIndex = i;\n            startNode = startNode.parentNode;\n          }\n        }\n\n        for (var _i2 = endIndex - 1, endNode = endCon; _i2 > startIndex; _i2--) {\n          if (childNodes[_i2] === endNode.parentNode && childNodes[_i2].nodeType === 1) {\n            childNodes.splice(_i2, 1);\n            endNode = endNode.parentNode;\n            --endIndex;\n          }\n        }\n      } else {\n        if (childNodes.length === 0) {\n          if (util.isFormatElement(commonCon) || util.isRangeFormatElement(commonCon) || util.isWysiwygDiv(commonCon) || util.isBreak(commonCon) || util.isMedia(commonCon)) {\n            return {\n              container: commonCon,\n              offset: 0\n            };\n          } else if (commonCon.nodeType === 3) {\n            return {\n              container: commonCon,\n              offset: endOff\n            };\n          }\n\n          childNodes.push(commonCon);\n          startCon = endCon = commonCon;\n        } else {\n          startCon = endCon = childNodes[0];\n\n          if (util.isBreak(startCon) || util.onlyZeroWidthSpace(startCon)) {\n            return {\n              container: util.isMedia(commonCon) ? commonCon : startCon,\n              offset: 0\n            };\n          }\n        }\n\n        startIndex = endIndex = 0;\n      }\n\n      function remove(item) {\n        var format = util.getFormatElement(item, null);\n        util.removeItem(item);\n\n        if (util.isListCell(format)) {\n          var list = util.getArrayItem(format.children, util.isList, false);\n\n          if (list) {\n            var child = list.firstElementChild;\n            var children = child.childNodes;\n\n            while (children[0]) {\n              format.insertBefore(children[0], list);\n            }\n\n            util.removeItemAllParents(child, null, null);\n          }\n        }\n      }\n\n      for (var _i3 = startIndex; _i3 <= endIndex; _i3++) {\n        var item = childNodes[_i3];\n\n        if (item.length === 0 || item.nodeType === 3 && item.data === undefined) {\n          remove(item);\n          continue;\n        }\n\n        if (item === startCon) {\n          if (startCon.nodeType === 1) {\n            if (util.isComponent(startCon)) continue;else beforeNode = util.createTextNode(startCon.textContent);\n          } else {\n            if (item === endCon) {\n              beforeNode = util.createTextNode(startCon.substringData(0, startOff) + endCon.substringData(endOff, endCon.length - endOff));\n              offset = startOff;\n            } else {\n              beforeNode = util.createTextNode(startCon.substringData(0, startOff));\n            }\n          }\n\n          if (beforeNode.length > 0) {\n            startCon.data = beforeNode.data;\n          } else {\n            remove(startCon);\n          }\n\n          if (item === endCon) break;\n          continue;\n        }\n\n        if (item === endCon) {\n          if (endCon.nodeType === 1) {\n            if (util.isComponent(endCon)) continue;else afterNode = util.createTextNode(endCon.textContent);\n          } else {\n            afterNode = util.createTextNode(endCon.substringData(endOff, endCon.length - endOff));\n          }\n\n          if (afterNode.length > 0) {\n            endCon.data = afterNode.data;\n          } else {\n            remove(endCon);\n          }\n\n          continue;\n        }\n\n        remove(item);\n      }\n\n      container = endCon && endCon.parentNode ? endCon : startCon && startCon.parentNode ? startCon : range.endContainer || range.startContainer;\n\n      if (!util.isWysiwygDiv(container) && container.childNodes.length === 0) {\n        var rc = util.removeItemAllParents(container, function (current) {\n          if (this.isComponent(current)) return false;\n          var text = current.textContent;\n          return text.length === 0 || /^(\\n|\\u200B)+$/.test(text);\n        }.bind(util), null);\n        if (rc) container = rc.sc || rc.ec || context.element.wysiwyg;\n      } // set range\n\n\n      this.setRange(container, offset, container, offset); // history stack\n\n      this.history.push(true);\n      return {\n        container: container,\n        offset: offset,\n        prevContainer: startCon && startCon.parentNode ? startCon : null\n      };\n    },\n\n    /**\r\n     * @description Appended all selected format Element to the argument element and insert\r\n     * @param {Element} rangeElement Element of wrap the arguments (BLOCKQUOTE...)\r\n     */\n    applyRangeFormatElement: function applyRangeFormatElement(rangeElement) {\n      this.getRange_addLine(this.getRange(), null);\n      var rangeLines = this.getSelectedElementsAndComponents(false);\n      if (!rangeLines || rangeLines.length === 0) return;\n\n      linesLoop: for (var i = 0, len = rangeLines.length, line, nested, fEl, lEl, f, l; i < len; i++) {\n        line = rangeLines[i];\n        if (!util.isListCell(line)) continue;\n        nested = line.lastElementChild;\n\n        if (nested && util.isListCell(line.nextElementSibling) && rangeLines.indexOf(line.nextElementSibling) > -1) {\n          lEl = nested.lastElementChild;\n\n          if (rangeLines.indexOf(lEl) > -1) {\n            var list = null;\n\n            while (list = lEl.lastElementChild) {\n              if (util.isList(list)) {\n                if (rangeLines.indexOf(list.lastElementChild) > -1) {\n                  lEl = list.lastElementChild;\n                } else {\n                  continue linesLoop;\n                }\n              }\n            }\n\n            fEl = nested.firstElementChild;\n            f = rangeLines.indexOf(fEl);\n            l = rangeLines.indexOf(lEl);\n            rangeLines.splice(f, l - f + 1);\n            len = rangeLines.length;\n            continue;\n          }\n        }\n      }\n\n      var last = rangeLines[rangeLines.length - 1];\n      var standTag, beforeTag, pElement;\n\n      if (util.isRangeFormatElement(last) || util.isFormatElement(last)) {\n        standTag = last;\n      } else {\n        standTag = util.getRangeFormatElement(last, null) || util.getFormatElement(last, null);\n      }\n\n      if (util.isCell(standTag)) {\n        beforeTag = null;\n        pElement = standTag;\n      } else {\n        beforeTag = standTag.nextSibling;\n        pElement = standTag.parentNode;\n      }\n\n      var parentDepth = util.getElementDepth(standTag);\n      var listParent = null;\n      var lineArr = [];\n\n      var removeItems = function removeItems(parent, origin, before) {\n        var cc = null;\n\n        if (parent !== origin && !util.isTable(origin)) {\n          if (origin && util.getElementDepth(parent) === util.getElementDepth(origin)) return before;\n          cc = util.removeItemAllParents(origin, null, parent);\n        }\n\n        return cc ? cc.ec : before;\n      };\n\n      for (var _i4 = 0, _len = rangeLines.length, _line, originParent, depth, before, nextLine, nextList, _nested; _i4 < _len; _i4++) {\n        _line = rangeLines[_i4];\n        originParent = _line.parentNode;\n        if (!originParent || rangeElement.contains(originParent)) continue;\n        depth = util.getElementDepth(_line);\n\n        if (util.isList(originParent)) {\n          if (listParent === null) {\n            if (nextList) {\n              listParent = nextList;\n              _nested = true;\n              nextList = null;\n            } else {\n              listParent = originParent.cloneNode(false);\n            }\n          }\n\n          lineArr.push(_line);\n          nextLine = rangeLines[_i4 + 1];\n\n          if (_i4 === _len - 1 || nextLine && nextLine.parentNode !== originParent) {\n            // nested list\n            if (nextLine && _line.contains(nextLine.parentNode)) {\n              nextList = nextLine.parentNode.cloneNode(false);\n            }\n\n            var _list = originParent.parentNode,\n                p = void 0;\n\n            while (util.isList(_list)) {\n              p = util.createElement(_list.nodeName);\n              p.appendChild(listParent);\n              listParent = p;\n              _list = _list.parentNode;\n            }\n\n            var _edge = this.detachRangeFormatElement(originParent, lineArr, null, true, true);\n\n            if (parentDepth >= depth) {\n              parentDepth = depth;\n              pElement = _edge.cc;\n              beforeTag = removeItems(pElement, originParent, _edge.ec);\n              if (beforeTag) pElement = beforeTag.parentNode;\n            } else if (pElement === _edge.cc) {\n              beforeTag = _edge.ec;\n            }\n\n            if (pElement !== _edge.cc) {\n              before = removeItems(pElement, _edge.cc, before);\n              if (before !== undefined) beforeTag = before;else beforeTag = _edge.cc;\n            }\n\n            for (var c = 0, cLen = _edge.removeArray.length; c < cLen; c++) {\n              listParent.appendChild(_edge.removeArray[c]);\n            }\n\n            if (!_nested) rangeElement.appendChild(listParent);\n            if (nextList) _edge.removeArray[_edge.removeArray.length - 1].appendChild(nextList);\n            listParent = null;\n            _nested = false;\n          }\n        } else {\n          if (parentDepth >= depth) {\n            parentDepth = depth;\n            pElement = originParent;\n            beforeTag = _line.nextSibling;\n          }\n\n          rangeElement.appendChild(_line);\n\n          if (pElement !== originParent) {\n            before = removeItems(pElement, originParent);\n            if (before !== undefined) beforeTag = before;\n          }\n        }\n      }\n\n      this.effectNode = null;\n      util.mergeSameTags(rangeElement, null, false);\n      util.mergeNestedTags(rangeElement, function (current) {\n        return this.isList(current);\n      }.bind(util)); // Nested list\n\n      if (beforeTag && util.getElementDepth(beforeTag) > 0 && (util.isList(beforeTag.parentNode) || util.isList(beforeTag.parentNode.parentNode))) {\n        var depthFormat = util.getParentElement(beforeTag, function (current) {\n          return this.isRangeFormatElement(current) && !this.isList(current);\n        }.bind(util));\n        var splitRange = util.splitElement(beforeTag, null, !depthFormat ? 0 : util.getElementDepth(depthFormat) + 1);\n        splitRange.parentNode.insertBefore(rangeElement, splitRange);\n      } else {\n        // basic\n        pElement.insertBefore(rangeElement, beforeTag);\n        removeItems(rangeElement, beforeTag);\n      }\n\n      var edge = util.getEdgeChildNodes(rangeElement.firstElementChild, rangeElement.lastElementChild);\n\n      if (rangeLines.length > 1) {\n        this.setRange(edge.sc, 0, edge.ec, edge.ec.textContent.length);\n      } else {\n        this.setRange(edge.ec, edge.ec.textContent.length, edge.ec, edge.ec.textContent.length);\n      } // history stack\n\n\n      this.history.push(false);\n    },\n\n    /**\r\n     * @description The elements of the \"selectedFormats\" array are detached from the \"rangeElement\" element. (\"LI\" tags are converted to \"P\" tags)\r\n     * When \"selectedFormats\" is null, all elements are detached and return {cc: parentNode, sc: nextSibling, ec: previousSibling, removeArray: [Array of removed elements]}.\r\n     * @param {Element} rangeElement Range format element (PRE, BLOCKQUOTE, OL, UL...)\r\n     * @param {Array|null} selectedFormats Array of format elements (P, DIV, LI...) to remove.\r\n     * If null, Applies to all elements and return {cc: parentNode, sc: nextSibling, ec: previousSibling}\r\n     * @param {Element|null} newRangeElement The node(rangeElement) to replace the currently wrapped node.\r\n     * @param {Boolean} remove If true, deleted without detached.\r\n     * @param {Boolean} notHistoryPush When true, it does not update the history stack and the selection object and return EdgeNodes (util.getEdgeChildNodes)\r\n     * @returns {Object}\r\n     */\n    detachRangeFormatElement: function detachRangeFormatElement(rangeElement, selectedFormats, newRangeElement, remove, notHistoryPush) {\n      var range = this.getRange();\n      var so = range.startOffset;\n      var eo = range.endOffset;\n      var children = util.getListChildNodes(rangeElement, function (current) {\n        return current.parentNode === rangeElement;\n      });\n      var parent = rangeElement.parentNode;\n      var firstNode = null;\n      var lastNode = null;\n      var rangeEl = rangeElement.cloneNode(false);\n      var removeArray = [];\n      var newList = util.isList(newRangeElement);\n      var insertedNew = false;\n      var reset = false;\n      var moveComplete = false;\n\n      function appendNode(parent, insNode, sibling, originNode) {\n        if (util.onlyZeroWidthSpace(insNode)) insNode.innerHTML = util.zeroWidthSpace;\n\n        if (insNode.nodeType === 3) {\n          parent.insertBefore(insNode, sibling);\n          return insNode;\n        }\n\n        var insChildren = (moveComplete ? insNode : originNode).childNodes;\n        var format = insNode.cloneNode(false);\n        var first = null;\n        var c = null;\n\n        while (insChildren[0]) {\n          c = insChildren[0];\n\n          if (util._notTextNode(c) && !util.isBreak(c) && !util.isListCell(format)) {\n            if (format.childNodes.length > 0) {\n              if (!first) first = format;\n              parent.insertBefore(format, sibling);\n              format = insNode.cloneNode(false);\n            }\n\n            parent.insertBefore(c, sibling);\n            if (!first) first = c;\n          } else {\n            format.appendChild(c);\n          }\n        }\n\n        if (format.childNodes.length > 0) {\n          if (util.isListCell(parent) && util.isListCell(format) && util.isList(sibling)) {\n            if (newList) {\n              first = sibling;\n\n              while (sibling) {\n                format.appendChild(sibling);\n                sibling = sibling.nextSibling;\n              }\n\n              parent.parentNode.insertBefore(format, parent.nextElementSibling);\n            } else {\n              var originNext = originNode.nextElementSibling;\n              var detachRange = util.detachNestedList(originNode, false);\n\n              if (rangeElement !== detachRange || originNext !== originNode.nextElementSibling) {\n                var fChildren = format.childNodes;\n\n                while (fChildren[0]) {\n                  originNode.appendChild(fChildren[0]);\n                }\n\n                rangeElement = detachRange;\n                reset = true;\n              }\n            }\n          } else {\n            parent.insertBefore(format, sibling);\n          }\n\n          if (!first) first = format;\n        }\n\n        return first;\n      } // detach loop\n\n\n      for (var i = 0, len = children.length, insNode, lineIndex, next; i < len; i++) {\n        insNode = children[i];\n        if (insNode.nodeType === 3 && util.isList(rangeEl)) continue;\n        moveComplete = false;\n\n        if (remove && i === 0) {\n          if (!selectedFormats || selectedFormats.length === len || selectedFormats[0] === insNode) {\n            firstNode = rangeElement.previousSibling;\n          } else {\n            firstNode = rangeEl;\n          }\n        }\n\n        if (selectedFormats) lineIndex = selectedFormats.indexOf(insNode);\n\n        if (selectedFormats && lineIndex === -1) {\n          if (!rangeEl) rangeEl = rangeElement.cloneNode(false);\n          rangeEl.appendChild(insNode);\n        } else {\n          if (selectedFormats) next = selectedFormats[lineIndex + 1];\n\n          if (rangeEl && rangeEl.children.length > 0) {\n            parent.insertBefore(rangeEl, rangeElement);\n            rangeEl = null;\n          }\n\n          if (!newList && util.isListCell(insNode)) {\n            if (next && util.getElementDepth(insNode) !== util.getElementDepth(next) && (util.isListCell(parent) || util.getArrayItem(insNode.children, util.isList, false))) {\n              var insNext = insNode.nextElementSibling;\n              var detachRange = util.detachNestedList(insNode, false);\n\n              if (rangeElement !== detachRange || insNext !== insNode.nextElementSibling) {\n                rangeElement = detachRange;\n                reset = true;\n              }\n            } else {\n              var inner = insNode;\n              insNode = util.createElement(remove ? inner.nodeName : util.isList(rangeElement.parentNode) || util.isListCell(rangeElement.parentNode) ? \"LI\" : util.isCell(rangeElement.parentNode) ? \"DIV\" : options.defaultTag);\n              var isCell = util.isListCell(insNode);\n              var innerChildren = inner.childNodes;\n\n              while (innerChildren[0]) {\n                if (util.isList(innerChildren[0]) && !isCell) break;\n                insNode.appendChild(innerChildren[0]);\n              }\n\n              util.copyFormatAttributes(insNode, inner);\n              moveComplete = true;\n            }\n          } else {\n            insNode = insNode.cloneNode(false);\n          }\n\n          if (!reset) {\n            if (!remove) {\n              if (newRangeElement) {\n                if (!insertedNew) {\n                  parent.insertBefore(newRangeElement, rangeElement);\n                  insertedNew = true;\n                }\n\n                insNode = appendNode(newRangeElement, insNode, null, children[i]);\n              } else {\n                insNode = appendNode(parent, insNode, rangeElement, children[i]);\n              }\n\n              if (!reset) {\n                if (selectedFormats) {\n                  lastNode = insNode;\n\n                  if (!firstNode) {\n                    firstNode = insNode;\n                  }\n                } else if (!firstNode) {\n                  firstNode = lastNode = insNode;\n                }\n              }\n            } else {\n              removeArray.push(insNode);\n              util.removeItem(children[i]);\n            }\n\n            if (reset) {\n              reset = moveComplete = false;\n              children = util.getListChildNodes(rangeElement, function (current) {\n                return current.parentNode === rangeElement;\n              });\n              rangeEl = rangeElement.cloneNode(false);\n              parent = rangeElement.parentNode;\n              i = -1;\n              len = children.length;\n              continue;\n            }\n          }\n        }\n      }\n\n      var rangeParent = rangeElement.parentNode;\n      var rangeRight = rangeElement.nextSibling;\n\n      if (rangeEl && rangeEl.children.length > 0) {\n        rangeParent.insertBefore(rangeEl, rangeRight);\n      }\n\n      if (newRangeElement) firstNode = newRangeElement.previousSibling;else if (!firstNode) firstNode = rangeElement.previousSibling;\n      rangeRight = rangeElement.nextSibling;\n\n      if (rangeElement.children.length === 0 || rangeElement.textContent.length === 0) {\n        util.removeItem(rangeElement);\n      } else {\n        util.removeEmptyNode(rangeElement, null);\n      }\n\n      var edge = null;\n\n      if (remove) {\n        edge = {\n          cc: rangeParent,\n          sc: firstNode,\n          ec: rangeRight,\n          removeArray: removeArray\n        };\n      } else {\n        if (!firstNode) firstNode = lastNode;\n        if (!lastNode) lastNode = firstNode;\n        var childEdge = util.getEdgeChildNodes(firstNode, lastNode.parentNode ? firstNode : lastNode);\n        edge = {\n          cc: (childEdge.sc || childEdge.ec).parentNode,\n          sc: childEdge.sc,\n          ec: childEdge.ec\n        };\n      }\n\n      this.effectNode = null;\n      if (notHistoryPush) return edge;\n\n      if (!remove && edge) {\n        if (!selectedFormats) {\n          this.setRange(edge.sc, 0, edge.sc, 0);\n        } else {\n          this.setRange(edge.sc, so, edge.ec, eo);\n        }\n      } // history stack\n\n\n      this.history.push(false);\n    },\n\n    /**\r\n     * @description \"selectedFormats\" array are detached from the list element.\r\n     * The return value is applied when the first and last lines of \"selectedFormats\" are \"LI\" respectively.\r\n     * @param {Array} selectedFormats Array of format elements (LI, P...) to remove.\r\n     * @param {Boolean} remove If true, deleted without detached.\r\n     * @returns {Object} {sc: <LI>, ec: <LI>}.\r\n     */\n    detachList: function detachList(selectedFormats, remove) {\n      var rangeArr = {};\n      var listFirst = false;\n      var listLast = false;\n      var first = null;\n      var last = null;\n\n      var passComponent = function (current) {\n        return !this.isComponent(current);\n      }.bind(util);\n\n      for (var i = 0, len = selectedFormats.length, r, o, lastIndex, isList; i < len; i++) {\n        lastIndex = i === len - 1;\n        o = util.getRangeFormatElement(selectedFormats[i], passComponent);\n        isList = util.isList(o);\n\n        if (!r && isList) {\n          r = o;\n          rangeArr = {\n            r: r,\n            f: [util.getParentElement(selectedFormats[i], \"LI\")]\n          };\n          if (i === 0) listFirst = true;\n        } else if (r && isList) {\n          if (r !== o) {\n            var edge = this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, null, remove, true);\n            o = selectedFormats[i].parentNode;\n\n            if (listFirst) {\n              first = edge.sc;\n              listFirst = false;\n            }\n\n            if (lastIndex) last = edge.ec;\n\n            if (isList) {\n              r = o;\n              rangeArr = {\n                r: r,\n                f: [util.getParentElement(selectedFormats[i], \"LI\")]\n              };\n              if (lastIndex) listLast = true;\n            } else {\n              r = null;\n            }\n          } else {\n            rangeArr.f.push(util.getParentElement(selectedFormats[i], \"LI\"));\n            if (lastIndex) listLast = true;\n          }\n        }\n\n        if (lastIndex && util.isList(r)) {\n          var _edge2 = this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, null, remove, true);\n\n          if (listLast || len === 1) last = _edge2.ec;\n          if (listFirst) first = _edge2.sc || last;\n        }\n      }\n\n      return {\n        sc: first,\n        ec: last\n      };\n    },\n\n    /**\r\n     * @description Add, update, and delete nodes from selected text.\r\n     * 1. If there is a node in the \"appendNode\" argument, a node with the same tags and attributes as \"appendNode\" is added to the selection text.\r\n     * 2. If it is in the same tag, only the tag's attributes are changed without adding a tag.\r\n     * 3. If the \"appendNode\" argument is null, the node of the selection is update or remove without adding a new node.\r\n     * 4. The same style as the style attribute of the \"styleArray\" argument is deleted.\r\n     *    (Styles should be put with attribute names from css. [\"background-color\"])\r\n     * 5. The same class name as the class attribute of the \"styleArray\" argument is deleted.\r\n     *    (The class name is preceded by \".\" [\".className\"])\r\n     * 6. Use a list of styles and classes of \"appendNode\" in \"styleArray\" to avoid duplicate property values.\r\n     * 7. If a node with all styles and classes removed has the same tag name as \"appendNode\" or \"removeNodeArray\", or \"appendNode\" is null, that node is deleted.\r\n     * 8. Regardless of the style and class of the node, the tag with the same name as the \"removeNodeArray\" argument value is deleted.\r\n     * 9. If the \"strictRemove\" argument is true, only nodes with all styles and classes removed from the nodes of \"removeNodeArray\" are removed.\r\n     *10. It won't work if the parent node has the same class and same value style.\r\n     *    However, if there is a value in \"removeNodeArray\", it works and the text node is separated even if there is no node to replace.\r\n     * @param {Element|null} appendNode The element to be added to the selection. If it is null, only delete the node.\r\n     * @param {Array|null} styleArray The style or className attribute name Array to check (['font-size'], ['.className'], ['font-family', 'color', '.className']...])\r\n     * @param {Array|null} removeNodeArray An array of node names to remove types from, remove all formats when \"appendNode\" is null and there is an empty array or null value. (['span'], ['strong', 'em'] ...])\r\n     * @param {Boolean|null} strictRemove If true, only nodes with all styles and classes removed from the nodes of \"removeNodeArray\" are removed.\r\n     */\n    nodeChange: function nodeChange(appendNode, styleArray, removeNodeArray, strictRemove) {\n      this._resetRangeToTextNode();\n\n      var range = this.getRange_addLine(this.getRange(), null);\n      styleArray = styleArray && styleArray.length > 0 ? styleArray : false;\n      removeNodeArray = removeNodeArray && removeNodeArray.length > 0 ? removeNodeArray : false;\n      var isRemoveNode = !appendNode;\n      var isRemoveFormat = isRemoveNode && !removeNodeArray && !styleArray;\n      var startCon = range.startContainer;\n      var startOff = range.startOffset;\n      var endCon = range.endContainer;\n      var endOff = range.endOffset;\n\n      if (isRemoveFormat && range.collapsed && util.isFormatElement(startCon.parentNode) && util.isFormatElement(endCon.parentNode) || startCon === endCon && startCon.nodeType === 1 && util.isNonEditable(startCon)) {\n        return;\n      }\n\n      if (range.collapsed && !isRemoveFormat) {\n        if (startCon.nodeType === 1 && !util.isBreak(startCon) && !util.isComponent(startCon)) {\n          var afterNode = null;\n          var focusNode = startCon.childNodes[startOff];\n\n          if (focusNode) {\n            if (!focusNode.nextSibling) {\n              afterNode = null;\n            } else {\n              afterNode = util.isBreak(focusNode) ? focusNode : focusNode.nextSibling;\n            }\n          }\n\n          var zeroWidth = util.createTextNode(util.zeroWidthSpace);\n          startCon.insertBefore(zeroWidth, afterNode);\n          this.setRange(zeroWidth, 1, zeroWidth, 1);\n          range = this.getRange();\n          startCon = range.startContainer;\n          startOff = range.startOffset;\n          endCon = range.endContainer;\n          endOff = range.endOffset;\n        }\n      }\n\n      if (util.isFormatElement(startCon)) {\n        startCon = startCon.childNodes[startOff] || startCon.firstChild;\n        startOff = 0;\n      }\n\n      if (util.isFormatElement(endCon)) {\n        endCon = endCon.childNodes[endOff] || endCon.lastChild;\n        endOff = endCon.textContent.length;\n      }\n\n      if (isRemoveNode) {\n        appendNode = util.createElement(\"DIV\");\n      }\n\n      var wRegExp = _w.RegExp;\n      var newNodeName = appendNode.nodeName;\n      /* checked same style property */\n\n      if (!isRemoveFormat && startCon === endCon && !removeNodeArray && appendNode) {\n        var sNode = startCon;\n        var checkCnt = 0;\n        var checkAttrs = [];\n        var checkStyles = appendNode.style;\n\n        for (var i = 0, len = checkStyles.length; i < len; i++) {\n          checkAttrs.push(checkStyles[i]);\n        }\n\n        var ckeckClasses = appendNode.classList;\n\n        for (var _i5 = 0, _len2 = ckeckClasses.length; _i5 < _len2; _i5++) {\n          checkAttrs.push(\".\" + ckeckClasses[_i5]);\n        }\n\n        if (checkAttrs.length > 0) {\n          while (!util.isFormatElement(sNode) && !util.isWysiwygDiv(sNode)) {\n            for (var _i6 = 0; _i6 < checkAttrs.length; _i6++) {\n              if (sNode.nodeType === 1) {\n                var s = checkAttrs[_i6];\n                var classReg = /^\\./.test(s) ? new wRegExp(\"\\\\s*\" + s.replace(/^\\./, \"\") + \"(\\\\s+|$)\", \"ig\") : false;\n                var styleCheck = isRemoveNode ? !!sNode.style[s] : !!sNode.style[s] && !!appendNode.style[s] && sNode.style[s] === appendNode.style[s];\n                var classCheck = classReg === false ? false : isRemoveNode ? !!sNode.className.match(classReg) : !!sNode.className.match(classReg) && !!appendNode.className.match(classReg);\n\n                if (styleCheck || classCheck) {\n                  checkCnt++;\n                }\n              }\n            }\n\n            sNode = sNode.parentNode;\n          }\n\n          if (checkCnt >= checkAttrs.length) return;\n        }\n      }\n\n      var start = {},\n          end = {};\n      var newNode,\n          styleRegExp = \"\",\n          classRegExp = \"\",\n          removeNodeRegExp = \"\";\n\n      if (styleArray) {\n        for (var _i7 = 0, _len3 = styleArray.length, _s; _i7 < _len3; _i7++) {\n          _s = styleArray[_i7];\n\n          if (/^\\./.test(_s)) {\n            classRegExp += (classRegExp ? \"|\" : \"\\\\s*(?:\") + _s.replace(/^\\./, \"\");\n          } else {\n            styleRegExp += (styleRegExp ? \"|\" : \"(?:;|^|\\\\s)(?:\") + _s;\n          }\n        }\n\n        if (styleRegExp) {\n          styleRegExp += \")\\\\s*:[^;]*\\\\s*(?:;|$)\";\n          styleRegExp = new wRegExp(styleRegExp, \"ig\");\n        }\n\n        if (classRegExp) {\n          classRegExp += \")(?=\\\\s+|$)\";\n          classRegExp = new wRegExp(classRegExp, \"ig\");\n        }\n      }\n\n      if (removeNodeArray) {\n        removeNodeRegExp = \"^(?:\" + removeNodeArray[0];\n\n        for (var _i8 = 1; _i8 < removeNodeArray.length; _i8++) {\n          removeNodeRegExp += \"|\" + removeNodeArray[_i8];\n        }\n\n        removeNodeRegExp += \")$\";\n        removeNodeRegExp = new wRegExp(removeNodeRegExp, \"i\");\n      }\n      /** validation check function*/\n\n\n      var wBoolean = _w.Boolean;\n      var _removeCheck = {\n        v: false\n      };\n\n      var validation = function validation(checkNode) {\n        var vNode = checkNode.cloneNode(false); // all path\n\n        if (vNode.nodeType === 3 || util.isBreak(vNode)) return vNode; // all remove\n\n        if (isRemoveFormat) return null; // remove node check\n\n        var tagRemove = !removeNodeRegExp && isRemoveNode || removeNodeRegExp && removeNodeRegExp.test(vNode.nodeName); // tag remove\n\n        if (tagRemove && !strictRemove) {\n          _removeCheck.v = true;\n          return null;\n        } // style regexp\n\n\n        var originStyle = vNode.style.cssText;\n        var style = \"\";\n\n        if (styleRegExp && originStyle.length > 0) {\n          style = originStyle.replace(styleRegExp, \"\").trim();\n          if (style !== originStyle) _removeCheck.v = true;\n        } // class check\n\n\n        var originClasses = vNode.className;\n        var classes = \"\";\n\n        if (classRegExp && originClasses.length > 0) {\n          classes = originClasses.replace(classRegExp, \"\").trim();\n          if (classes !== originClasses) _removeCheck.v = true;\n        } // remove only\n\n\n        if (isRemoveNode) {\n          if ((classRegExp || !originClasses) && (styleRegExp || !originStyle) && !style && !classes && tagRemove) {\n            _removeCheck.v = true;\n            return null;\n          }\n        } // change\n\n\n        if (style || classes || vNode.nodeName !== newNodeName || wBoolean(styleRegExp) !== wBoolean(originStyle) || wBoolean(classRegExp) !== wBoolean(originClasses)) {\n          if (styleRegExp && originStyle.length > 0) vNode.style.cssText = style;\n\n          if (!vNode.style.cssText) {\n            vNode.removeAttribute(\"style\");\n          }\n\n          if (classRegExp && originClasses.length > 0) vNode.className = classes.trim();\n\n          if (!vNode.className.trim()) {\n            vNode.removeAttribute(\"class\");\n          }\n\n          if (!vNode.style.cssText && !vNode.className && (vNode.nodeName === newNodeName || tagRemove)) {\n            _removeCheck.v = true;\n            return null;\n          }\n\n          return vNode;\n        }\n\n        _removeCheck.v = true;\n        return null;\n      }; // get line nodes\n\n\n      var lineNodes = this.getSelectedElements(null);\n      range = this.getRange();\n      startCon = range.startContainer;\n      startOff = range.startOffset;\n      endCon = range.endContainer;\n      endOff = range.endOffset;\n\n      if (!util.getFormatElement(startCon, null)) {\n        startCon = util.getChildElement(lineNodes[0], function (current) {\n          return current.nodeType === 3;\n        }, false);\n        startOff = 0;\n      }\n\n      if (!util.getFormatElement(endCon, null)) {\n        endCon = util.getChildElement(lineNodes[lineNodes.length - 1], function (current) {\n          return current.nodeType === 3;\n        }, false);\n        endOff = endCon.textContent.length;\n      }\n\n      var oneLine = util.getFormatElement(startCon, null) === util.getFormatElement(endCon, null);\n      var endLength = lineNodes.length - (oneLine ? 0 : 1); // node Changes\n\n      newNode = appendNode.cloneNode(false);\n\n      var isRemoveAnchor = isRemoveFormat || isRemoveNode && function (arr) {\n        for (var n = 0, _len4 = arr.length; n < _len4; n++) {\n          if (util._isMaintainedNode(arr[n]) || util._isSizeNode(arr[n])) return true;\n        }\n\n        return false;\n      }(removeNodeArray);\n\n      var isSizeNode = isRemoveNode || util._isSizeNode(newNode);\n\n      var _getMaintainedNode = this._util_getMaintainedNode.bind(util, isRemoveAnchor, isSizeNode);\n\n      var _isMaintainedNode = this._util_isMaintainedNode.bind(util, isRemoveAnchor, isSizeNode); // one line\n\n\n      if (oneLine) {\n        var newRange = this._nodeChange_oneLine(lineNodes[0], newNode, validation, startCon, startOff, endCon, endOff, isRemoveFormat, isRemoveNode, range.collapsed, _removeCheck, _getMaintainedNode, _isMaintainedNode);\n\n        start.container = newRange.startContainer;\n        start.offset = newRange.startOffset;\n        end.container = newRange.endContainer;\n        end.offset = newRange.endOffset;\n\n        if (start.container === end.container && util.onlyZeroWidthSpace(start.container)) {\n          start.offset = end.offset = 1;\n        }\n\n        this._setCommonListStyle(newRange.ancestor, null);\n      } else {\n        // multi line\n        // end\n        if (endLength > 0) {\n          newNode = appendNode.cloneNode(false);\n          end = this._nodeChange_endLine(lineNodes[endLength], newNode, validation, endCon, endOff, isRemoveFormat, isRemoveNode, _removeCheck, _getMaintainedNode, _isMaintainedNode);\n        } // mid\n\n\n        for (var _i9 = endLength - 1, _newRange; _i9 > 0; _i9--) {\n          newNode = appendNode.cloneNode(false);\n          _newRange = this._nodeChange_middleLine(lineNodes[_i9], newNode, validation, isRemoveFormat, isRemoveNode, _removeCheck, end.container);\n\n          if (_newRange.endContainer) {\n            end.ancestor = null;\n            end.container = _newRange.endContainer;\n          }\n\n          this._setCommonListStyle(_newRange.ancestor, null);\n        } // start\n\n\n        newNode = appendNode.cloneNode(false);\n        start = this._nodeChange_startLine(lineNodes[0], newNode, validation, startCon, startOff, isRemoveFormat, isRemoveNode, _removeCheck, _getMaintainedNode, _isMaintainedNode, end.container);\n\n        if (start.endContainer) {\n          end.ancestor = null;\n          end.container = start.endContainer;\n        }\n\n        if (endLength <= 0) {\n          end = start;\n        } else if (!end.container) {\n          end.ancestor = null;\n          end.container = start.container;\n          end.offset = start.container.textContent.length;\n        }\n\n        this._setCommonListStyle(start.ancestor, null);\n\n        this._setCommonListStyle(end.ancestor || util.getFormatElement(end.container), null);\n      } // set range\n\n\n      this.controllersOff();\n      this.setRange(start.container, start.offset, end.container, end.offset); // history stack\n\n      this.history.push(false);\n    },\n\n    /**\r\n     * @description If certain styles are applied to all child nodes of the list cell, the style of the list cell is also changed. (bold, color, size)\r\n     * @param {Element} el List cell element. <li>\r\n     * @param {Element|null} child Variable for recursive call. (\"null\" on the first call)\r\n     * @private\r\n     */\n    _setCommonListStyle: function _setCommonListStyle(el, child) {\n      if (!util.isListCell(el)) return;\n      if (!child) el.removeAttribute(\"style\");\n      var children = util.getArrayItem((child || el).childNodes, function (current) {\n        return !util.isBreak(current) && !util.onlyZeroWidthSpace(current.textContent.trim());\n      }, true);\n\n      if (children[0] && children.length === 1) {\n        child = children[0];\n        if (!child || child.nodeType !== 1) return;\n        var childStyle = child.style;\n        var elStyle = el.style; // bold\n\n        if (/STRONG/i.test(child.nodeName)) elStyle.fontWeight = \"bold\"; // bold\n        else if (childStyle.fontWeight) elStyle.fontWeight = childStyle.fontWeight; // styles\n\n        if (childStyle.color) elStyle.color = childStyle.color; // color\n\n        if (childStyle.fontSize) elStyle.fontSize = childStyle.fontSize; // size\n\n        this._setCommonListStyle(el, child);\n      }\n    },\n\n    /**\r\n     * @description Strip remove node\r\n     * @param {Node} removeNode The remove node\r\n     * @private\r\n     */\n    _stripRemoveNode: function _stripRemoveNode(removeNode) {\n      var element = removeNode.parentNode;\n      if (!removeNode || removeNode.nodeType === 3 || !element) return;\n      var children = removeNode.childNodes;\n\n      while (children[0]) {\n        element.insertBefore(children[0], removeNode);\n      }\n\n      element.removeChild(removeNode);\n    },\n\n    /**\r\n     * @description Return the parent maintained tag. (bind and use a util object)\r\n     * @param {Element} element Element\r\n     * @returns {Element}\r\n     * @private\r\n     */\n    _util_getMaintainedNode: function _util_getMaintainedNode(_isRemove, _isSizeNode, element) {\n      if (!element || _isRemove) return null;\n      return this.getParentElement(element, this._isMaintainedNode.bind(this)) || (!_isSizeNode ? this.getParentElement(element, this._isSizeNode.bind(this)) : null);\n    },\n\n    /**\r\n     * @description Check if element is a tag that should be persisted. (bind and use a util object)\r\n     * @param {Element} element Element\r\n     * @returns {Element}\r\n     * @private\r\n     */\n    _util_isMaintainedNode: function _util_isMaintainedNode(_isRemove, _isSizeNode, element) {\n      if (!element || _isRemove || element.nodeType !== 1) return false;\n\n      var anchor = this._isMaintainedNode(element);\n\n      return this.getParentElement(element, this._isMaintainedNode.bind(this)) ? anchor : anchor || (!_isSizeNode ? this._isSizeNode(element) : false);\n    },\n\n    /**\r\n     * @description wraps text nodes of line selected text.\r\n     * @param {Element} element The node of the line that contains the selected text node.\r\n     * @param {Element} newInnerNode The dom that will wrap the selected text area\r\n     * @param {Function} validation Check if the node should be stripped.\r\n     * @param {Node} startCon The startContainer property of the selection object.\r\n     * @param {Number} startOff The startOffset property of the selection object.\r\n     * @param {Node} endCon The endContainer property of the selection object.\r\n     * @param {Number} endOff The endOffset property of the selection object.\r\n     * @param {Boolean} isRemoveFormat Is the remove all formats command?\r\n     * @param {Boolean} isRemoveNode \"newInnerNode\" is remove node?\r\n     * @param {Boolean} collapsed range.collapsed\r\n     * @returns {{ancestor: *, startContainer: *, startOffset: *, endContainer: *, endOffset: *}}\r\n     * @private\r\n     */\n    _nodeChange_oneLine: function _nodeChange_oneLine(element, newInnerNode, validation, startCon, startOff, endCon, endOff, isRemoveFormat, isRemoveNode, collapsed, _removeCheck, _getMaintainedNode, _isMaintainedNode) {\n      // not add tag\n      var parentCon = startCon.parentNode;\n\n      while (!parentCon.nextSibling && !parentCon.previousSibling && !util.isFormatElement(parentCon.parentNode) && !util.isWysiwygDiv(parentCon.parentNode)) {\n        if (parentCon.nodeName === newInnerNode.nodeName) break;\n        parentCon = parentCon.parentNode;\n      }\n\n      if (!isRemoveNode && parentCon === endCon.parentNode && parentCon.nodeName === newInnerNode.nodeName) {\n        if (util.onlyZeroWidthSpace(startCon.textContent.slice(0, startOff)) && util.onlyZeroWidthSpace(endCon.textContent.slice(endOff))) {\n          var children = parentCon.childNodes;\n          var sameTag = true;\n\n          for (var i = 0, len = children.length, c, s, e, z; i < len; i++) {\n            c = children[i];\n            z = !util.onlyZeroWidthSpace(c);\n\n            if (c === startCon) {\n              s = true;\n              continue;\n            }\n\n            if (c === endCon) {\n              e = true;\n              continue;\n            }\n\n            if (!s && z || s && e && z) {\n              sameTag = false;\n              break;\n            }\n          }\n\n          if (sameTag) {\n            util.copyTagAttributes(parentCon, newInnerNode);\n            return {\n              startContainer: startCon,\n              startOffset: startOff,\n              endContainer: endCon,\n              endOffset: endOff\n            };\n          }\n        }\n      } // add tag\n\n\n      _removeCheck.v = false;\n      var el = element;\n      var nNodeArray = [newInnerNode];\n      var pNode = element.cloneNode(false);\n      var isSameNode = startCon === endCon;\n      var startContainer = startCon;\n      var startOffset = startOff;\n      var endContainer = endCon;\n      var endOffset = endOff;\n      var startPass = false;\n      var endPass = false;\n      var pCurrent, newNode, appendNode, cssText, anchorNode;\n      var wRegExp = _w.RegExp;\n\n      function checkCss(vNode) {\n        var regExp = new wRegExp(\"(?:;|^|\\\\s)(?:\" + cssText + \"null)\\\\s*:[^;]*\\\\s*(?:;|$)\", \"ig\");\n        var style = \"\";\n\n        if (regExp && vNode.style.cssText.length > 0) {\n          style = regExp.test(vNode.style.cssText);\n        }\n\n        return !style;\n      }\n\n      (function recursionFunc(current, ancestor) {\n        var childNodes = current.childNodes;\n\n        for (var _i10 = 0, _len5 = childNodes.length, vNode; _i10 < _len5; _i10++) {\n          var child = childNodes[_i10];\n          if (!child) continue;\n          var coverNode = ancestor;\n          var cloneNode = void 0; // startContainer\n\n          if (!startPass && child === startContainer) {\n            var line = pNode;\n            anchorNode = _getMaintainedNode(child);\n            var prevNode = util.createTextNode(startContainer.nodeType === 1 ? \"\" : startContainer.substringData(0, startOffset));\n            var textNode = util.createTextNode(startContainer.nodeType === 1 ? \"\" : startContainer.substringData(startOffset, isSameNode ? endOffset >= startOffset ? endOffset - startOffset : startContainer.data.length - startOffset : startContainer.data.length - startOffset));\n\n            if (anchorNode) {\n              var a = _getMaintainedNode(ancestor);\n\n              if (a && a.parentNode !== line) {\n                var m = a;\n                var p = null;\n\n                while (m.parentNode !== line) {\n                  ancestor = p = m.parentNode.cloneNode(false);\n\n                  while (m.childNodes[0]) {\n                    p.appendChild(m.childNodes[0]);\n                  }\n\n                  m.appendChild(p);\n                  m = m.parentNode;\n                }\n\n                m.parentNode.appendChild(a);\n              }\n\n              anchorNode = anchorNode.cloneNode(false);\n            }\n\n            if (!util.onlyZeroWidthSpace(prevNode)) {\n              ancestor.appendChild(prevNode);\n            }\n\n            var prevAnchorNode = _getMaintainedNode(ancestor);\n\n            if (!!prevAnchorNode) anchorNode = prevAnchorNode;\n            if (anchorNode) line = anchorNode;\n            newNode = child;\n            pCurrent = [];\n            cssText = \"\";\n\n            while (newNode !== line && newNode !== el && newNode !== null) {\n              vNode = _isMaintainedNode(newNode) ? null : validation(newNode);\n\n              if (vNode && newNode.nodeType === 1 && checkCss(newNode)) {\n                pCurrent.push(vNode);\n                cssText += newNode.style.cssText.substr(0, newNode.style.cssText.indexOf(\":\")) + \"|\";\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            var childNode = pCurrent.pop() || textNode;\n            appendNode = newNode = childNode;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            newInnerNode.appendChild(childNode);\n            line.appendChild(newInnerNode);\n\n            if (anchorNode && !_getMaintainedNode(endContainer)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              pNode.appendChild(newInnerNode);\n              nNodeArray.push(newInnerNode);\n            }\n\n            startContainer = textNode;\n            startOffset = 0;\n            startPass = true;\n            if (newNode !== textNode) newNode.appendChild(startContainer);\n            if (!isSameNode) continue;\n          } // endContainer\n\n\n          if (!endPass && child === endContainer) {\n            anchorNode = _getMaintainedNode(child);\n            var afterNode = util.createTextNode(endContainer.nodeType === 1 ? \"\" : endContainer.substringData(endOffset, endContainer.length - endOffset));\n\n            var _textNode = util.createTextNode(isSameNode || endContainer.nodeType === 1 ? \"\" : endContainer.substringData(0, endOffset));\n\n            if (anchorNode) {\n              anchorNode = anchorNode.cloneNode(false);\n            } else if (_isMaintainedNode(newInnerNode.parentNode) && !anchorNode) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              pNode.appendChild(newInnerNode);\n              nNodeArray.push(newInnerNode);\n            }\n\n            if (!util.onlyZeroWidthSpace(afterNode)) {\n              newNode = child;\n              cssText = \"\";\n              pCurrent = [];\n              var anchors = [];\n\n              while (newNode !== pNode && newNode !== el && newNode !== null) {\n                if (newNode.nodeType === 1 && checkCss(newNode)) {\n                  if (_isMaintainedNode(newNode)) anchors.push(newNode.cloneNode(false));else pCurrent.push(newNode.cloneNode(false));\n                  cssText += newNode.style.cssText.substr(0, newNode.style.cssText.indexOf(\":\")) + \"|\";\n                }\n\n                newNode = newNode.parentNode;\n              }\n\n              pCurrent = pCurrent.concat(anchors);\n              cloneNode = appendNode = newNode = pCurrent.pop() || afterNode;\n\n              while (pCurrent.length > 0) {\n                newNode = pCurrent.pop();\n                appendNode.appendChild(newNode);\n                appendNode = newNode;\n              }\n\n              pNode.appendChild(cloneNode);\n              newNode.textContent = afterNode.data;\n            }\n\n            if (anchorNode && cloneNode) {\n              var afterAnchorNode = _getMaintainedNode(cloneNode);\n\n              if (afterAnchorNode) {\n                anchorNode = afterAnchorNode;\n              }\n            }\n\n            newNode = child;\n            pCurrent = [];\n            cssText = \"\";\n\n            while (newNode !== pNode && newNode !== el && newNode !== null) {\n              vNode = _isMaintainedNode(newNode) ? null : validation(newNode);\n\n              if (vNode && newNode.nodeType === 1 && checkCss(newNode)) {\n                pCurrent.push(vNode);\n                cssText += newNode.style.cssText.substr(0, newNode.style.cssText.indexOf(\":\")) + \"|\";\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            var _childNode = pCurrent.pop() || _textNode;\n\n            appendNode = newNode = _childNode;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            if (anchorNode) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              newInnerNode.appendChild(_childNode);\n              anchorNode.insertBefore(newInnerNode, anchorNode.firstChild);\n              pNode.appendChild(anchorNode);\n              nNodeArray.push(newInnerNode);\n              anchorNode = null;\n            } else {\n              newInnerNode.appendChild(_childNode);\n            }\n\n            endContainer = _textNode;\n            endOffset = _textNode.data.length;\n            endPass = true;\n\n            if (!isRemoveFormat && collapsed) {\n              newInnerNode = _textNode;\n              _textNode.textContent = util.zeroWidthSpace;\n            }\n\n            if (newNode !== _textNode) newNode.appendChild(endContainer);\n            continue;\n          } // other\n\n\n          if (startPass) {\n            if (child.nodeType === 1 && !util.isBreak(child)) {\n              if (util._isIgnoreNodeChange(child)) {\n                pNode.appendChild(child.cloneNode(true));\n\n                if (!collapsed) {\n                  newInnerNode = newInnerNode.cloneNode(false);\n                  pNode.appendChild(newInnerNode);\n                  nNodeArray.push(newInnerNode);\n                }\n              } else {\n                recursionFunc(child, child);\n              }\n\n              continue;\n            }\n\n            newNode = child;\n            pCurrent = [];\n            cssText = \"\";\n            var _anchors = [];\n\n            while (newNode.parentNode !== null && newNode !== el && newNode !== newInnerNode) {\n              vNode = endPass ? newNode.cloneNode(false) : validation(newNode);\n\n              if (newNode.nodeType === 1 && !util.isBreak(child) && vNode && checkCss(newNode)) {\n                if (_isMaintainedNode(newNode)) {\n                  if (!anchorNode) _anchors.push(vNode);\n                } else {\n                  pCurrent.push(vNode);\n                }\n\n                cssText += newNode.style.cssText.substr(0, newNode.style.cssText.indexOf(\":\")) + \"|\";\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            pCurrent = pCurrent.concat(_anchors);\n\n            var _childNode2 = pCurrent.pop() || child;\n\n            appendNode = newNode = _childNode2;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            if (_isMaintainedNode(newInnerNode.parentNode) && !_isMaintainedNode(_childNode2) && !util.onlyZeroWidthSpace(newInnerNode)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              pNode.appendChild(newInnerNode);\n              nNodeArray.push(newInnerNode);\n            }\n\n            if (!endPass && !anchorNode && _isMaintainedNode(_childNode2)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              var aChildren = _childNode2.childNodes;\n\n              for (var _a = 0, aLen = aChildren.length; _a < aLen; _a++) {\n                newInnerNode.appendChild(aChildren[_a]);\n              }\n\n              _childNode2.appendChild(newInnerNode);\n\n              pNode.appendChild(_childNode2);\n              nNodeArray.push(newInnerNode);\n              if (newInnerNode.children.length > 0) ancestor = newNode;else ancestor = newInnerNode;\n            } else if (_childNode2 === child) {\n              if (!endPass) ancestor = newInnerNode;else ancestor = pNode;\n            } else if (endPass) {\n              pNode.appendChild(_childNode2);\n              ancestor = newNode;\n            } else {\n              newInnerNode.appendChild(_childNode2);\n              ancestor = newNode;\n            }\n\n            if (anchorNode && child.nodeType === 3) {\n              if (_getMaintainedNode(child)) {\n                var ancestorAnchorNode = util.getParentElement(ancestor, function (current) {\n                  return this._isMaintainedNode(current.parentNode) || current.parentNode === pNode;\n                }.bind(util));\n                anchorNode.appendChild(ancestorAnchorNode);\n                newInnerNode = ancestorAnchorNode.cloneNode(false);\n                nNodeArray.push(newInnerNode);\n                pNode.appendChild(newInnerNode);\n              } else {\n                anchorNode = null;\n              }\n            }\n          }\n\n          cloneNode = child.cloneNode(false);\n          ancestor.appendChild(cloneNode);\n          if (child.nodeType === 1 && !util.isBreak(child)) coverNode = cloneNode;\n          recursionFunc(child, coverNode);\n        }\n      })(element, pNode); // not remove tag\n\n\n      if (isRemoveNode && !isRemoveFormat && !_removeCheck.v) {\n        return {\n          ancestor: element,\n          startContainer: startCon,\n          startOffset: startOff,\n          endContainer: endCon,\n          endOffset: endOff\n        };\n      }\n\n      isRemoveFormat = isRemoveFormat && isRemoveNode;\n\n      if (isRemoveFormat) {\n        for (var _i11 = 0; _i11 < nNodeArray.length; _i11++) {\n          var removeNode = nNodeArray[_i11];\n          var textNode = void 0,\n              textNode_s = void 0,\n              textNode_e = void 0;\n\n          if (collapsed) {\n            textNode = util.createTextNode(util.zeroWidthSpace);\n            pNode.replaceChild(textNode, removeNode);\n          } else {\n            var rChildren = removeNode.childNodes;\n            textNode_s = rChildren[0];\n\n            while (rChildren[0]) {\n              textNode_e = rChildren[0];\n              pNode.insertBefore(textNode_e, removeNode);\n            }\n\n            util.removeItem(removeNode);\n          }\n\n          if (_i11 === 0) {\n            if (collapsed) {\n              startContainer = endContainer = textNode;\n            } else {\n              startContainer = textNode_s;\n              endContainer = textNode_e;\n            }\n          }\n        }\n      } else {\n        if (isRemoveNode) {\n          for (var _i12 = 0; _i12 < nNodeArray.length; _i12++) {\n            this._stripRemoveNode(nNodeArray[_i12]);\n          }\n        }\n\n        if (collapsed) {\n          startContainer = endContainer = newInnerNode;\n        }\n      }\n\n      util.removeEmptyNode(pNode, newInnerNode);\n\n      if (collapsed) {\n        startOffset = startContainer.textContent.length;\n        endOffset = endContainer.textContent.length;\n      } // endContainer reset\n\n\n      var endConReset = isRemoveFormat || endContainer.textContent.length === 0;\n\n      if (!util.isBreak(endContainer) && endContainer.textContent.length === 0) {\n        util.removeItem(endContainer);\n        endContainer = startContainer;\n      }\n\n      endOffset = endConReset ? endContainer.textContent.length : endOffset; // node change\n\n      var newStartOffset = {\n        s: 0,\n        e: 0\n      };\n      var startPath = util.getNodePath(startContainer, pNode, newStartOffset);\n      var mergeEndCon = !endContainer.parentNode;\n      if (mergeEndCon) endContainer = startContainer;\n      var newEndOffset = {\n        s: 0,\n        e: 0\n      };\n      var endPath = util.getNodePath(endContainer, pNode, !mergeEndCon && !endConReset ? newEndOffset : null);\n      startOffset += newStartOffset.s;\n      endOffset = collapsed ? startOffset : mergeEndCon ? startContainer.textContent.length : endConReset ? endOffset + newStartOffset.s : endOffset + newEndOffset.s; // tag merge\n\n      var newOffsets = util.mergeSameTags(pNode, [startPath, endPath], true);\n      element.parentNode.replaceChild(pNode, element);\n      startContainer = util.getNodeFromPath(startPath, pNode);\n      endContainer = util.getNodeFromPath(endPath, pNode);\n      return {\n        ancestor: pNode,\n        startContainer: startContainer,\n        startOffset: startOffset + newOffsets[0],\n        endContainer: endContainer,\n        endOffset: endOffset + newOffsets[1]\n      };\n    },\n\n    /**\r\n     * @description wraps first line selected text.\r\n     * @param {Element} element The node of the line that contains the selected text node.\r\n     * @param {Element} newInnerNode The dom that will wrap the selected text area\r\n     * @param {Function} validation Check if the node should be stripped.\r\n     * @param {Node} startCon The startContainer property of the selection object.\r\n     * @param {Number} startOff The startOffset property of the selection object.\r\n     * @param {Boolean} isRemoveFormat Is the remove all formats command?\r\n     * @param {Boolean} isRemoveNode \"newInnerNode\" is remove node?\r\n     * @returns {null|Node} If end container is renewed, returned renewed node\r\n     * @returns {Object} { ancestor, container, offset, endContainer }\r\n     * @private\r\n     */\n    _nodeChange_startLine: function _nodeChange_startLine(element, newInnerNode, validation, startCon, startOff, isRemoveFormat, isRemoveNode, _removeCheck, _getMaintainedNode, _isMaintainedNode, _endContainer) {\n      // not add tag\n      var parentCon = startCon.parentNode;\n\n      while (!parentCon.nextSibling && !parentCon.previousSibling && !util.isFormatElement(parentCon.parentNode) && !util.isWysiwygDiv(parentCon.parentNode)) {\n        if (parentCon.nodeName === newInnerNode.nodeName) break;\n        parentCon = parentCon.parentNode;\n      }\n\n      if (!isRemoveNode && parentCon.nodeName === newInnerNode.nodeName && !util.isFormatElement(parentCon) && !parentCon.nextSibling && util.onlyZeroWidthSpace(startCon.textContent.slice(0, startOff))) {\n        var sameTag = true;\n        var s = startCon.previousSibling;\n\n        while (s) {\n          if (!util.onlyZeroWidthSpace(s)) {\n            sameTag = false;\n            break;\n          }\n\n          s = s.previousSibling;\n        }\n\n        if (sameTag) {\n          util.copyTagAttributes(parentCon, newInnerNode);\n          return {\n            ancestor: element,\n            container: startCon,\n            offset: startOff\n          };\n        }\n      } // add tag\n\n\n      _removeCheck.v = false;\n      var el = element;\n      var nNodeArray = [newInnerNode];\n      var pNode = element.cloneNode(false);\n      var container = startCon;\n      var offset = startOff;\n      var passNode = false;\n      var pCurrent, newNode, appendNode, anchorNode;\n\n      (function recursionFunc(current, ancestor) {\n        var childNodes = current.childNodes;\n\n        for (var i = 0, len = childNodes.length, vNode, cloneChild; i < len; i++) {\n          var child = childNodes[i];\n          if (!child) continue;\n          var coverNode = ancestor;\n\n          if (passNode && !util.isBreak(child)) {\n            if (child.nodeType === 1) {\n              if (util._isIgnoreNodeChange(child)) {\n                newInnerNode = newInnerNode.cloneNode(false);\n                cloneChild = child.cloneNode(true);\n                pNode.appendChild(cloneChild);\n                pNode.appendChild(newInnerNode);\n                nNodeArray.push(newInnerNode); // end container\n\n                if (_endContainer && child.contains(_endContainer)) {\n                  var endPath = util.getNodePath(_endContainer, child);\n                  _endContainer = util.getNodeFromPath(endPath, cloneChild);\n                }\n              } else {\n                recursionFunc(child, child);\n              }\n\n              continue;\n            }\n\n            newNode = child;\n            pCurrent = [];\n            var anchors = [];\n\n            while (newNode.parentNode !== null && newNode !== el && newNode !== newInnerNode) {\n              vNode = validation(newNode);\n\n              if (newNode.nodeType === 1 && vNode) {\n                if (_isMaintainedNode(newNode)) {\n                  if (!anchorNode) anchors.push(vNode);\n                } else {\n                  pCurrent.push(vNode);\n                }\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            pCurrent = pCurrent.concat(anchors);\n            var isTopNode = pCurrent.length > 0;\n            var childNode = pCurrent.pop() || child;\n            appendNode = newNode = childNode;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            if (_isMaintainedNode(newInnerNode.parentNode) && !_isMaintainedNode(childNode)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              pNode.appendChild(newInnerNode);\n              nNodeArray.push(newInnerNode);\n            }\n\n            if (!anchorNode && _isMaintainedNode(childNode)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              var aChildren = childNode.childNodes;\n\n              for (var a = 0, aLen = aChildren.length; a < aLen; a++) {\n                newInnerNode.appendChild(aChildren[a]);\n              }\n\n              childNode.appendChild(newInnerNode);\n              pNode.appendChild(childNode);\n              ancestor = !_isMaintainedNode(newNode) ? newNode : newInnerNode;\n              nNodeArray.push(newInnerNode);\n            } else if (isTopNode) {\n              newInnerNode.appendChild(childNode);\n              ancestor = newNode;\n            } else {\n              ancestor = newInnerNode;\n            }\n\n            if (anchorNode && child.nodeType === 3) {\n              if (_getMaintainedNode(child)) {\n                var ancestorAnchorNode = util.getParentElement(ancestor, function (current) {\n                  return this._isMaintainedNode(current.parentNode) || current.parentNode === pNode;\n                }.bind(util));\n                anchorNode.appendChild(ancestorAnchorNode);\n                newInnerNode = ancestorAnchorNode.cloneNode(false);\n                nNodeArray.push(newInnerNode);\n                pNode.appendChild(newInnerNode);\n              } else {\n                anchorNode = null;\n              }\n            }\n          } // startContainer\n\n\n          if (!passNode && child === container) {\n            var line = pNode;\n            anchorNode = _getMaintainedNode(child);\n            var prevNode = util.createTextNode(container.nodeType === 1 ? \"\" : container.substringData(0, offset));\n            var textNode = util.createTextNode(container.nodeType === 1 ? \"\" : container.substringData(offset, container.length - offset));\n\n            if (anchorNode) {\n              var _a2 = _getMaintainedNode(ancestor);\n\n              if (_a2 && _a2.parentNode !== line) {\n                var m = _a2;\n                var p = null;\n\n                while (m.parentNode !== line) {\n                  ancestor = p = m.parentNode.cloneNode(false);\n\n                  while (m.childNodes[0]) {\n                    p.appendChild(m.childNodes[0]);\n                  }\n\n                  m.appendChild(p);\n                  m = m.parentNode;\n                }\n\n                m.parentNode.appendChild(_a2);\n              }\n\n              anchorNode = anchorNode.cloneNode(false);\n            }\n\n            if (!util.onlyZeroWidthSpace(prevNode)) {\n              ancestor.appendChild(prevNode);\n            }\n\n            var prevAnchorNode = _getMaintainedNode(ancestor);\n\n            if (!!prevAnchorNode) anchorNode = prevAnchorNode;\n            if (anchorNode) line = anchorNode;\n            newNode = ancestor;\n            pCurrent = [];\n\n            while (newNode !== line && newNode !== null) {\n              vNode = validation(newNode);\n\n              if (newNode.nodeType === 1 && vNode) {\n                pCurrent.push(vNode);\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            var _childNode3 = pCurrent.pop() || ancestor;\n\n            appendNode = newNode = _childNode3;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            if (_childNode3 !== ancestor) {\n              newInnerNode.appendChild(_childNode3);\n              ancestor = newNode;\n            } else {\n              ancestor = newInnerNode;\n            }\n\n            if (util.isBreak(child)) newInnerNode.appendChild(child.cloneNode(false));\n            line.appendChild(newInnerNode);\n            container = textNode;\n            offset = 0;\n            passNode = true;\n            ancestor.appendChild(container);\n            continue;\n          }\n\n          vNode = !passNode ? child.cloneNode(false) : validation(child);\n\n          if (vNode) {\n            ancestor.appendChild(vNode);\n            if (child.nodeType === 1 && !util.isBreak(child)) coverNode = vNode;\n          }\n\n          recursionFunc(child, coverNode);\n        }\n      })(element, pNode); // not remove tag\n\n\n      if (isRemoveNode && !isRemoveFormat && !_removeCheck.v) {\n        return {\n          ancestor: element,\n          container: startCon,\n          offset: startOff,\n          endContainer: _endContainer\n        };\n      }\n\n      isRemoveFormat = isRemoveFormat && isRemoveNode;\n\n      if (isRemoveFormat) {\n        for (var i = 0; i < nNodeArray.length; i++) {\n          var removeNode = nNodeArray[i];\n          var rChildren = removeNode.childNodes;\n          var textNode = rChildren[0];\n\n          while (rChildren[0]) {\n            pNode.insertBefore(rChildren[0], removeNode);\n          }\n\n          util.removeItem(removeNode);\n          if (i === 0) container = textNode;\n        }\n      } else if (isRemoveNode) {\n        newInnerNode = newInnerNode.firstChild;\n\n        for (var _i13 = 0; _i13 < nNodeArray.length; _i13++) {\n          this._stripRemoveNode(nNodeArray[_i13]);\n        }\n      }\n\n      if (!isRemoveFormat && pNode.childNodes.length === 0) {\n        if (element.childNodes) {\n          container = element.childNodes[0];\n        } else {\n          container = util.createTextNode(util.zeroWidthSpace);\n          element.appendChild(container);\n        }\n      } else {\n        util.removeEmptyNode(pNode, newInnerNode);\n\n        if (util.onlyZeroWidthSpace(pNode.textContent)) {\n          container = pNode.firstChild;\n          offset = 0;\n        } // node change\n\n\n        var offsets = {\n          s: 0,\n          e: 0\n        };\n        var path = util.getNodePath(container, pNode, offsets);\n        offset += offsets.s; // tag merge\n\n        var newOffsets = util.mergeSameTags(pNode, [path], true);\n        element.parentNode.replaceChild(pNode, element);\n        container = util.getNodeFromPath(path, pNode);\n        offset += newOffsets[0];\n      }\n\n      return {\n        ancestor: pNode,\n        container: container,\n        offset: offset,\n        endContainer: _endContainer\n      };\n    },\n\n    /**\r\n     * @description wraps mid lines selected text.\r\n     * @param {Element} element The node of the line that contains the selected text node.\r\n     * @param {Element} newInnerNode The dom that will wrap the selected text area\r\n     * @param {Function} validation Check if the node should be stripped.\r\n     * @param {Boolean} isRemoveFormat Is the remove all formats command?\r\n     * @param {Boolean} isRemoveNode \"newInnerNode\" is remove node?\r\n     * @param {Node} _endContainer Offset node of last line already modified (end.container)\r\n     * @returns {Object} { ancestor, endContainer: \"If end container is renewed, returned renewed node\" }\r\n     * @private\r\n     */\n    _nodeChange_middleLine: function _nodeChange_middleLine(element, newInnerNode, validation, isRemoveFormat, isRemoveNode, _removeCheck, _endContainer) {\n      // not add tag\n      if (!isRemoveNode) {\n        // end container path\n        var endPath = null;\n        if (_endContainer && element.contains(_endContainer)) endPath = util.getNodePath(_endContainer, element);\n        var tempNode = element.cloneNode(true);\n        var newNodeName = newInnerNode.nodeName;\n        var newCssText = newInnerNode.style.cssText;\n        var newClass = newInnerNode.className;\n        var children = tempNode.childNodes;\n        var i = 0,\n            len = children.length;\n\n        for (var child; i < len; i++) {\n          child = children[i];\n          if (child.nodeType === 3) break;\n\n          if (child.nodeName === newNodeName) {\n            child.style.cssText += newCssText;\n            util.addClass(child, newClass);\n          } else if (!util.isBreak(child) && util._isIgnoreNodeChange(child)) {\n            continue;\n          } else if (len === 1) {\n            children = child.childNodes;\n            len = children.length;\n            i = -1;\n            continue;\n          } else {\n            break;\n          }\n        }\n\n        if (len > 0 && i === len) {\n          element.innerHTML = tempNode.innerHTML;\n          return {\n            ancestor: element,\n            endContainer: endPath ? util.getNodeFromPath(endPath, element) : null\n          };\n        }\n      } // add tag\n\n\n      _removeCheck.v = false;\n      var pNode = element.cloneNode(false);\n      var nNodeArray = [newInnerNode];\n      var noneChange = true;\n\n      (function recursionFunc(current, ancestor) {\n        var childNodes = current.childNodes;\n\n        for (var _i14 = 0, _len6 = childNodes.length, vNode, cloneChild; _i14 < _len6; _i14++) {\n          var _child = childNodes[_i14];\n          if (!_child) continue;\n          var coverNode = ancestor;\n\n          if (!util.isBreak(_child) && util._isIgnoreNodeChange(_child)) {\n            if (newInnerNode.childNodes.length > 0) {\n              pNode.appendChild(newInnerNode);\n              newInnerNode = newInnerNode.cloneNode(false);\n            }\n\n            cloneChild = _child.cloneNode(true);\n            pNode.appendChild(cloneChild);\n            pNode.appendChild(newInnerNode);\n            nNodeArray.push(newInnerNode);\n            ancestor = newInnerNode; // end container\n\n            if (_endContainer && _child.contains(_endContainer)) {\n              var _endPath = util.getNodePath(_endContainer, _child);\n\n              _endContainer = util.getNodeFromPath(_endPath, cloneChild);\n            }\n\n            continue;\n          } else {\n            vNode = validation(_child);\n\n            if (vNode) {\n              noneChange = false;\n              ancestor.appendChild(vNode);\n              if (_child.nodeType === 1) coverNode = vNode;\n            }\n          }\n\n          if (!util.isBreak(_child)) recursionFunc(_child, coverNode);\n        }\n      })(element, newInnerNode); // not remove tag\n\n\n      if (noneChange || isRemoveNode && !isRemoveFormat && !_removeCheck.v) return {\n        ancestor: element,\n        endContainer: _endContainer\n      };\n      pNode.appendChild(newInnerNode);\n\n      if (isRemoveFormat && isRemoveNode) {\n        for (var _i15 = 0; _i15 < nNodeArray.length; _i15++) {\n          var removeNode = nNodeArray[_i15];\n          var rChildren = removeNode.childNodes;\n\n          while (rChildren[0]) {\n            pNode.insertBefore(rChildren[0], removeNode);\n          }\n\n          util.removeItem(removeNode);\n        }\n      } else if (isRemoveNode) {\n        newInnerNode = newInnerNode.firstChild;\n\n        for (var _i16 = 0; _i16 < nNodeArray.length; _i16++) {\n          this._stripRemoveNode(nNodeArray[_i16]);\n        }\n      }\n\n      util.removeEmptyNode(pNode, newInnerNode);\n      util.mergeSameTags(pNode, null, true); // node change\n\n      element.parentNode.replaceChild(pNode, element);\n      return {\n        ancestor: pNode,\n        endContainer: _endContainer\n      };\n    },\n\n    /**\r\n     * @description wraps last line selected text.\r\n     * @param {Element} element The node of the line that contains the selected text node.\r\n     * @param {Element} newInnerNode The dom that will wrap the selected text area\r\n     * @param {Function} validation Check if the node should be stripped.\r\n     * @param {Node} endCon The endContainer property of the selection object.\r\n     * @param {Number} endOff The endOffset property of the selection object.\r\n     * @param {Boolean} isRemoveFormat Is the remove all formats command?\r\n     * @param {Boolean} isRemoveNode \"newInnerNode\" is remove node?\r\n     * @returns {Object} { ancestor, container, offset }\r\n     * @private\r\n     */\n    _nodeChange_endLine: function _nodeChange_endLine(element, newInnerNode, validation, endCon, endOff, isRemoveFormat, isRemoveNode, _removeCheck, _getMaintainedNode, _isMaintainedNode) {\n      // not add tag\n      var parentCon = endCon.parentNode;\n\n      while (!parentCon.nextSibling && !parentCon.previousSibling && !util.isFormatElement(parentCon.parentNode) && !util.isWysiwygDiv(parentCon.parentNode)) {\n        if (parentCon.nodeName === newInnerNode.nodeName) break;\n        parentCon = parentCon.parentNode;\n      }\n\n      if (!isRemoveNode && parentCon.nodeName === newInnerNode.nodeName && !util.isFormatElement(parentCon) && !parentCon.previousSibling && util.onlyZeroWidthSpace(endCon.textContent.slice(endOff))) {\n        var sameTag = true;\n        var e = endCon.nextSibling;\n\n        while (e) {\n          if (!util.onlyZeroWidthSpace(e)) {\n            sameTag = false;\n            break;\n          }\n\n          e = e.nextSibling;\n        }\n\n        if (sameTag) {\n          util.copyTagAttributes(parentCon, newInnerNode);\n          return {\n            ancestor: element,\n            container: endCon,\n            offset: endOff\n          };\n        }\n      } // add tag\n\n\n      _removeCheck.v = false;\n      var el = element;\n      var nNodeArray = [newInnerNode];\n      var pNode = element.cloneNode(false);\n      var container = endCon;\n      var offset = endOff;\n      var passNode = false;\n      var pCurrent, newNode, appendNode, anchorNode;\n\n      (function recursionFunc(current, ancestor) {\n        var childNodes = current.childNodes;\n\n        for (var i = childNodes.length - 1, vNode; 0 <= i; i--) {\n          var child = childNodes[i];\n          if (!child) continue;\n          var coverNode = ancestor;\n\n          if (passNode && !util.isBreak(child)) {\n            if (child.nodeType === 1) {\n              if (util._isIgnoreNodeChange(child)) {\n                newInnerNode = newInnerNode.cloneNode(false);\n                var cloneChild = child.cloneNode(true);\n                pNode.insertBefore(cloneChild, ancestor);\n                pNode.insertBefore(newInnerNode, cloneChild);\n                nNodeArray.push(newInnerNode);\n              } else {\n                recursionFunc(child, child);\n              }\n\n              continue;\n            }\n\n            newNode = child;\n            pCurrent = [];\n            var anchors = [];\n\n            while (newNode.parentNode !== null && newNode !== el && newNode !== newInnerNode) {\n              vNode = validation(newNode);\n\n              if (vNode && newNode.nodeType === 1) {\n                if (_isMaintainedNode(newNode)) {\n                  if (!anchorNode) anchors.push(vNode);\n                } else {\n                  pCurrent.push(vNode);\n                }\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            pCurrent = pCurrent.concat(anchors);\n            var isTopNode = pCurrent.length > 0;\n            var childNode = pCurrent.pop() || child;\n            appendNode = newNode = childNode;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            if (_isMaintainedNode(newInnerNode.parentNode) && !_isMaintainedNode(childNode)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              pNode.insertBefore(newInnerNode, pNode.firstChild);\n              nNodeArray.push(newInnerNode);\n            }\n\n            if (!anchorNode && _isMaintainedNode(childNode)) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              var aChildren = childNode.childNodes;\n\n              for (var a = 0, aLen = aChildren.length; a < aLen; a++) {\n                newInnerNode.appendChild(aChildren[a]);\n              }\n\n              childNode.appendChild(newInnerNode);\n              pNode.insertBefore(childNode, pNode.firstChild);\n              nNodeArray.push(newInnerNode);\n              if (newInnerNode.children.length > 0) ancestor = newNode;else ancestor = newInnerNode;\n            } else if (isTopNode) {\n              newInnerNode.insertBefore(childNode, newInnerNode.firstChild);\n              ancestor = newNode;\n            } else {\n              ancestor = newInnerNode;\n            }\n\n            if (anchorNode && child.nodeType === 3) {\n              if (_getMaintainedNode(child)) {\n                var ancestorAnchorNode = util.getParentElement(ancestor, function (current) {\n                  return this._isMaintainedNode(current.parentNode) || current.parentNode === pNode;\n                }.bind(util));\n                anchorNode.appendChild(ancestorAnchorNode);\n                newInnerNode = ancestorAnchorNode.cloneNode(false);\n                nNodeArray.push(newInnerNode);\n                pNode.insertBefore(newInnerNode, pNode.firstChild);\n              } else {\n                anchorNode = null;\n              }\n            }\n          } // endContainer\n\n\n          if (!passNode && child === container) {\n            anchorNode = _getMaintainedNode(child);\n            var afterNode = util.createTextNode(container.nodeType === 1 ? \"\" : container.substringData(offset, container.length - offset));\n            var textNode = util.createTextNode(container.nodeType === 1 ? \"\" : container.substringData(0, offset));\n\n            if (anchorNode) {\n              anchorNode = anchorNode.cloneNode(false);\n\n              var _a3 = _getMaintainedNode(ancestor);\n\n              if (_a3 && _a3.parentNode !== pNode) {\n                var m = _a3;\n                var p = null;\n\n                while (m.parentNode !== pNode) {\n                  ancestor = p = m.parentNode.cloneNode(false);\n\n                  while (m.childNodes[0]) {\n                    p.appendChild(m.childNodes[0]);\n                  }\n\n                  m.appendChild(p);\n                  m = m.parentNode;\n                }\n\n                m.parentNode.insertBefore(_a3, m.parentNode.firstChild);\n              }\n\n              anchorNode = anchorNode.cloneNode(false);\n            } else if (_isMaintainedNode(newInnerNode.parentNode) && !anchorNode) {\n              newInnerNode = newInnerNode.cloneNode(false);\n              pNode.appendChild(newInnerNode);\n              nNodeArray.push(newInnerNode);\n            }\n\n            if (!util.onlyZeroWidthSpace(afterNode)) {\n              ancestor.insertBefore(afterNode, ancestor.firstChild);\n            }\n\n            newNode = ancestor;\n            pCurrent = [];\n\n            while (newNode !== pNode && newNode !== null) {\n              vNode = _isMaintainedNode(newNode) ? null : validation(newNode);\n\n              if (vNode && newNode.nodeType === 1) {\n                pCurrent.push(vNode);\n              }\n\n              newNode = newNode.parentNode;\n            }\n\n            var _childNode4 = pCurrent.pop() || ancestor;\n\n            appendNode = newNode = _childNode4;\n\n            while (pCurrent.length > 0) {\n              newNode = pCurrent.pop();\n              appendNode.appendChild(newNode);\n              appendNode = newNode;\n            }\n\n            if (_childNode4 !== ancestor) {\n              newInnerNode.insertBefore(_childNode4, newInnerNode.firstChild);\n              ancestor = newNode;\n            } else {\n              ancestor = newInnerNode;\n            }\n\n            if (util.isBreak(child)) newInnerNode.appendChild(child.cloneNode(false));\n\n            if (anchorNode) {\n              anchorNode.insertBefore(newInnerNode, anchorNode.firstChild);\n              pNode.insertBefore(anchorNode, pNode.firstChild);\n              anchorNode = null;\n            } else {\n              pNode.insertBefore(newInnerNode, pNode.firstChild);\n            }\n\n            container = textNode;\n            offset = textNode.data.length;\n            passNode = true;\n            ancestor.insertBefore(container, ancestor.firstChild);\n            continue;\n          }\n\n          vNode = !passNode ? child.cloneNode(false) : validation(child);\n\n          if (vNode) {\n            ancestor.insertBefore(vNode, ancestor.firstChild);\n            if (child.nodeType === 1 && !util.isBreak(child)) coverNode = vNode;\n          }\n\n          recursionFunc(child, coverNode);\n        }\n      })(element, pNode); // not remove tag\n\n\n      if (isRemoveNode && !isRemoveFormat && !_removeCheck.v) {\n        return {\n          ancestor: element,\n          container: endCon,\n          offset: endOff\n        };\n      }\n\n      isRemoveFormat = isRemoveFormat && isRemoveNode;\n\n      if (isRemoveFormat) {\n        for (var i = 0; i < nNodeArray.length; i++) {\n          var removeNode = nNodeArray[i];\n          var rChildren = removeNode.childNodes;\n          var textNode = null;\n\n          while (rChildren[0]) {\n            textNode = rChildren[0];\n            pNode.insertBefore(textNode, removeNode);\n          }\n\n          util.removeItem(removeNode);\n\n          if (i === nNodeArray.length - 1) {\n            container = textNode;\n            offset = textNode.textContent.length;\n          }\n        }\n      } else if (isRemoveNode) {\n        newInnerNode = newInnerNode.firstChild;\n\n        for (var _i17 = 0; _i17 < nNodeArray.length; _i17++) {\n          this._stripRemoveNode(nNodeArray[_i17]);\n        }\n      }\n\n      if (!isRemoveFormat && pNode.childNodes.length === 0) {\n        if (element.childNodes) {\n          container = element.childNodes[0];\n        } else {\n          container = util.createTextNode(util.zeroWidthSpace);\n          element.appendChild(container);\n        }\n      } else {\n        if (!isRemoveNode && newInnerNode.textContent.length === 0) {\n          util.removeEmptyNode(pNode, null);\n          return {\n            ancestor: null,\n            container: null,\n            offset: 0\n          };\n        }\n\n        util.removeEmptyNode(pNode, newInnerNode);\n\n        if (util.onlyZeroWidthSpace(pNode.textContent)) {\n          container = pNode.firstChild;\n          offset = container.textContent.length;\n        } else if (util.onlyZeroWidthSpace(container)) {\n          container = newInnerNode;\n          offset = 1;\n        } // node change\n\n\n        var offsets = {\n          s: 0,\n          e: 0\n        };\n        var path = util.getNodePath(container, pNode, offsets);\n        offset += offsets.s; // tag merge\n\n        var newOffsets = util.mergeSameTags(pNode, [path], true);\n        element.parentNode.replaceChild(pNode, element);\n        container = util.getNodeFromPath(path, pNode);\n        offset += newOffsets[0];\n      }\n\n      return {\n        ancestor: pNode,\n        container: container,\n        offset: offset\n      };\n    },\n\n    /**\r\n     * @description Run plugin calls and basic commands.\r\n     * @param {String} command Command string\r\n     * @param {String} display Display type string ('command', 'submenu', 'dialog', 'container')\r\n     * @param {Element} target The element of command button\r\n     */\n    actionCall: function actionCall(command, display, target) {\n      // call plugins\n      if (display) {\n        if (/more/i.test(display) && target !== this._moreLayerActiveButton) {\n          var layer = context.element.toolbar.querySelector(\".\" + command);\n\n          if (layer) {\n            if (this._moreLayerActiveButton) {\n              context.element.toolbar.querySelector(\".\" + this._moreLayerActiveButton.getAttribute(\"data-command\")).style.display = \"none\";\n              util.removeClass(this._moreLayerActiveButton, \"on\");\n            }\n\n            util.addClass(target, \"on\");\n            this._moreLayerActiveButton = target;\n            layer.style.display = \"block\";\n\n            event._showToolbarBalloon();\n\n            event._showToolbarInline();\n          }\n\n          return;\n        } else if (/submenu/.test(display) && (this.menuTray[command] === null || target !== this.submenuActiveButton)) {\n          this.callPlugin(command, this.submenuOn.bind(this, target), target);\n          return;\n        } else if (/dialog/.test(display)) {\n          this.callPlugin(command, this.plugins[command].open.bind(this), target);\n          return;\n        } else if (/command/.test(display)) {\n          this.callPlugin(command, this.plugins[command].action.bind(this), target);\n        } else if (/container/.test(display) && (this.menuTray[command] === null || target !== this.containerActiveButton)) {\n          this.callPlugin(command, this.containerOn.bind(this, target), target);\n          return;\n        } else if (/fileBrowser/.test(display)) {\n          this.callPlugin(command, this.plugins[command].open.bind(this, null), target);\n        }\n      } // default command\n      else if (command) {\n          this.commandHandler(target, command);\n        }\n\n      if (/more/i.test(display)) {\n        var _layer = context.element.toolbar.querySelector(\".\" + this._moreLayerActiveButton.getAttribute(\"data-command\"));\n\n        if (_layer) {\n          util.removeClass(this._moreLayerActiveButton, \"on\");\n          this._moreLayerActiveButton = null;\n          _layer.style.display = \"none\";\n\n          event._showToolbarBalloon();\n\n          event._showToolbarInline();\n        }\n      } else if (/submenu/.test(display)) {\n        this.submenuOff();\n      } else if (!/command/.test(display)) {\n        this.submenuOff();\n        this.containerOff();\n      }\n    },\n\n    /**\r\n     * @description Execute command of command button(All Buttons except submenu and dialog)\r\n     * (selectAll, codeView, fullScreen, indent, outdent, undo, redo, removeFormat, print, preview, showBlocks, save, bold, underline, italic, strike, subscript, superscript, copy, cut, paste)\r\n     * @param {Element|null} target The element of command button\r\n     * @param {String} command Property of command button (data-value)\r\n     */\n    commandHandler: function commandHandler(target, command) {\n      switch (command) {\n        case \"copy\":\n        case \"cut\":\n          this.execCommand(command);\n          break;\n\n        case \"paste\":\n          break;\n\n        case \"selectAll\":\n          var wysiwyg = context.element.wysiwyg;\n          var first = util.getChildElement(wysiwyg.firstChild, function (current) {\n            return current.childNodes.length === 0 || current.nodeType === 3;\n          }, false) || wysiwyg.firstChild;\n          var last = util.getChildElement(wysiwyg.lastChild, function (current) {\n            return current.childNodes.length === 0 || current.nodeType === 3;\n          }, true) || wysiwyg.lastChild;\n          if (!first || !last) return;\n\n          if (util.isMedia(first)) {\n            var info = this.getFileComponent(first);\n            var br = util.createElement(\"BR\");\n            var format = util.createElement(options.defaultTag);\n            format.appendChild(br);\n            first = info ? info.component : first;\n            first.parentNode.insertBefore(format, first);\n            first = br;\n          }\n\n          if (util.isMedia(last)) {\n            var _br = util.createElement(\"BR\");\n\n            var _format2 = util.createElement(options.defaultTag);\n\n            _format2.appendChild(_br);\n\n            wysiwyg.appendChild(_format2);\n            last = _br;\n          }\n\n          this.setRange(first, 0, last, last.textContent.length);\n          break;\n\n        case \"codeView\":\n          this.toggleCodeView();\n          break;\n\n        case \"fullScreen\":\n          this.toggleFullScreen(target);\n          break;\n\n        case \"indent\":\n        case \"outdent\":\n          this.indent(command);\n          break;\n\n        case \"undo\":\n          this.history.undo();\n          break;\n\n        case \"redo\":\n          this.history.redo();\n          break;\n\n        case \"removeFormat\":\n          this.removeFormat();\n          this.focus();\n          break;\n\n        case \"print\":\n          this.print();\n          break;\n\n        case \"preview\":\n          this.preview();\n          break;\n\n        case \"showBlocks\":\n          this.toggleDisplayBlocks();\n          break;\n\n        case \"save\":\n          if (typeof options.callBackSave === \"function\") {\n            options.callBackSave(this.getContents(false), this._variable.isChanged);\n          } else if (this._variable.isChanged && typeof functions.save === \"function\") {\n            functions.save();\n          } else {\n            throw Error(\"[KothingEditor.core.commandHandler.fail] Please register call back function in creation option. (callBackSave : Function)\");\n          }\n\n          this._variable.isChanged = false;\n          if (context.tool.save) context.tool.save.setAttribute(\"disabled\", true);\n          break;\n\n        default:\n          // 'STRONG', 'U', 'EM', 'DEL', 'SUB', 'SUP'..\n          command = this._defaultCommand[command.toLowerCase()] || command;\n          if (!this.commandMap[command]) this.commandMap[command] = target;\n          var nodesMap = this._variable.currentNodesMap;\n          var cmd = nodesMap.indexOf(command) > -1 ? null : util.createElement(command);\n          var removeNode = command;\n\n          if (/^SUB$/i.test(command) && nodesMap.indexOf(\"SUP\") > -1) {\n            removeNode = \"SUP\";\n          } else if (/^SUP$/i.test(command) && nodesMap.indexOf(\"SUB\") > -1) {\n            removeNode = \"SUB\";\n          }\n\n          this.nodeChange(cmd, null, [removeNode], false);\n          this.focus();\n      }\n    },\n\n    /**\r\n     * @description Remove format of the currently selected range\r\n     */\n    removeFormat: function removeFormat() {\n      this.nodeChange(null, null, null, null);\n    },\n\n    /**\r\n     * @description This method implements indentation to selected range.\r\n     * Setted \"margin-left\" to \"25px\" in the top \"P\" tag of the parameter node.\r\n     * @param {String} command Separator (\"indent\" or \"outdent\")\r\n     */\n    indent: function indent(command) {\n      var range = this.getRange();\n      var rangeLines = this.getSelectedElements(null);\n      var cells = [];\n      var shift = \"indent\" !== command;\n      var marginDir = options.rtl ? \"marginRight\" : \"marginLeft\";\n      var sc = range.startContainer;\n      var ec = range.endContainer;\n      var so = range.startOffset;\n      var eo = range.endOffset;\n\n      for (var i = 0, len = rangeLines.length, f, margin; i < len; i++) {\n        f = rangeLines[i];\n\n        if (!util.isListCell(f) || !this.plugins.list) {\n          margin = /\\d+/.test(f.style[marginDir]) ? util.getNumber(f.style[marginDir], 0) : 0;\n\n          if (shift) {\n            margin -= 25;\n          } else {\n            margin += 25;\n          }\n\n          util.setStyle(f, marginDir, margin <= 0 ? \"\" : margin + \"px\");\n        } else {\n          if (shift || f.previousElementSibling) {\n            cells.push(f);\n          }\n        }\n      } // list cells\n\n\n      if (cells.length > 0) {\n        this.plugins.list.editInsideList.call(this, shift, cells);\n      }\n\n      this.effectNode = null;\n      this.setRange(sc, so, ec, eo); // history stack\n\n      this.history.push(false);\n    },\n\n    /**\r\n     * @description Add or remove the class name of \"body\" so that the code block is visible\r\n     */\n    toggleDisplayBlocks: function toggleDisplayBlocks() {\n      var wysiwyg = context.element.wysiwyg;\n      util.toggleClass(wysiwyg, \"ke-show-block\");\n\n      if (util.hasClass(wysiwyg, \"ke-show-block\")) {\n        util.addClass(this._styleCommandMap.showBlocks, \"active\");\n      } else {\n        util.removeClass(this._styleCommandMap.showBlocks, \"active\");\n      }\n\n      this._resourcesStateChange();\n    },\n\n    /**\r\n     * @description Changes to code view or wysiwyg view\r\n     */\n    toggleCodeView: function toggleCodeView() {\n      var isCodeView = this._variable.isCodeView;\n      this.controllersOff();\n      util.setDisabledButtons(!isCodeView, this.codeViewDisabledButtons);\n\n      if (isCodeView) {\n        this._setCodeDataToEditor();\n\n        context.element.wysiwygFrame.scrollTop = 0;\n        context.element.code.style.display = \"none\";\n        context.element.wysiwygFrame.style.display = \"block\";\n        this._variable._codeOriginCssText = this._variable._codeOriginCssText.replace(/(\\s?display(\\s+)?:(\\s+)?)[a-zA-Z]+(?=;)/, \"display: none\");\n        this._variable._wysiwygOriginCssText = this._variable._wysiwygOriginCssText.replace(/(\\s?display(\\s+)?:(\\s+)?)[a-zA-Z]+(?=;)/, \"display: block\");\n        if (options.height === \"auto\" && !options.codeMirrorEditor) context.element.code.style.height = \"0px\";\n        this._variable.isCodeView = false;\n\n        if (!this._variable.isFullScreen) {\n          this._notHideToolbar = false;\n\n          if (/balloon|balloon-always/i.test(options.mode)) {\n            context.element.arrow.style.display = \"\";\n            this._isInline = false;\n            this._isBalloon = true;\n\n            event._hideToolbar();\n          }\n        }\n\n        this.nativeFocus();\n        util.removeClass(this._styleCommandMap.codeView, \"active\"); // history stack\n\n        this.history.push(false);\n\n        this.history._resetCachingButton();\n      } else {\n        this._setEditorDataToCodeView();\n\n        this._variable._codeOriginCssText = this._variable._codeOriginCssText.replace(/(\\s?display(\\s+)?:(\\s+)?)[a-zA-Z]+(?=;)/, \"display: block\");\n        this._variable._wysiwygOriginCssText = this._variable._wysiwygOriginCssText.replace(/(\\s?display(\\s+)?:(\\s+)?)[a-zA-Z]+(?=;)/, \"display: none\");\n        if (options.height === \"auto\" && !options.codeMirrorEditor) context.element.code.style.height = context.element.code.scrollHeight > 0 ? context.element.code.scrollHeight + \"px\" : \"auto\";\n        if (options.codeMirrorEditor) options.codeMirrorEditor.refresh();\n        this._variable.isCodeView = true;\n\n        if (!this._variable.isFullScreen) {\n          this._notHideToolbar = true;\n\n          if (this._isBalloon) {\n            context.element.arrow.style.display = \"none\";\n            context.element.toolbar.style.left = \"\";\n            this._isInline = true;\n            this._isBalloon = false;\n\n            event._showToolbarInline();\n          }\n        }\n\n        this._variable._range = null;\n        context.element.code.focus();\n        util.addClass(this._styleCommandMap.codeView, \"active\");\n      }\n\n      this._checkPlaceholder(); // user event\n\n\n      if (typeof functions.toggleCodeView === \"function\") functions.toggleCodeView(this._variable.isCodeView, this);\n    },\n\n    /**\r\n     * @description Convert the data of the code view and put it in the WYSIWYG area.\r\n     * @private\r\n     */\n    _setCodeDataToEditor: function _setCodeDataToEditor() {\n      var code_html = this._getCodeView();\n\n      if (options.fullPage) {\n        var parseDocument = this._parser.parseFromString(code_html, \"text/html\");\n\n        var headChildren = parseDocument.head.children;\n\n        for (var i = 0, len = headChildren.length; i < len; i++) {\n          if (/^script$/i.test(headChildren[i].tagName)) {\n            parseDocument.head.removeChild(headChildren[i]);\n            i--, len--;\n          }\n        }\n\n        this._wd.head.innerHTML = parseDocument.head.innerHTML;\n        this._wd.body.innerHTML = this.convertContentsForEditor(parseDocument.body.innerHTML);\n        var attrs = parseDocument.body.attributes;\n\n        for (var _i18 = 0, _len7 = attrs.length; _i18 < _len7; _i18++) {\n          if (attrs[_i18].name === \"contenteditable\") continue;\n\n          this._wd.body.setAttribute(attrs[_i18].name, attrs[_i18].value);\n        }\n\n        if (!util.hasClass(this._wd.body, \"kothing-editor-editable\")) {\n          var editableClasses = options._editableClass.split(\" \");\n\n          for (var _i19 = 0; _i19 < editableClasses.length; _i19++) {\n            util.addClass(this._wd.body, options._editableClass[_i19]);\n          }\n        }\n      } else {\n        context.element.wysiwyg.innerHTML = code_html.length > 0 ? this.convertContentsForEditor(code_html) : \"<\" + options.defaultTag + \"><br></\" + options.defaultTag + \">\";\n      }\n    },\n\n    /**\r\n     * @description Convert the data of the WYSIWYG area and put it in the code view area.\r\n     * @private\r\n     */\n    _setEditorDataToCodeView: function _setEditorDataToCodeView() {\n      var codeContents = this.convertHTMLForCodeView(context.element.wysiwyg);\n      var codeValue = \"\";\n\n      if (options.fullPage) {\n        var attrs = util.getAttributesToString(this._wd.body, null);\n        codeValue = \"<!DOCTYPE html>\\n<html>\\n\" + this._wd.head.outerHTML.replace(/>(?!\\n)/g, \">\\n\") + \"<body \" + attrs + \">\\n\" + codeContents + \"</body>\\n</html>\";\n      } else {\n        codeValue = codeContents;\n      }\n\n      context.element.code.style.display = \"block\";\n      context.element.wysiwygFrame.style.display = \"none\";\n\n      this._setCodeView(codeValue);\n    },\n\n    /**\r\n     * @description Changes to full screen or default screen\r\n     * @param {Element} element full screen button\r\n     */\n    toggleFullScreen: function toggleFullScreen(element) {\n      var topArea = context.element.topArea;\n      var toolbar = context.element.toolbar;\n      var editorArea = context.element.editorArea;\n      var wysiwygFrame = context.element.wysiwygFrame;\n      var code = context.element.code;\n      var _var = this._variable;\n      this.controllersOff();\n\n      if (!_var.isFullScreen) {\n        _var.isFullScreen = true;\n        _var._fullScreenAttrs.inline = this._isInline;\n        _var._fullScreenAttrs.balloon = this._isBalloon;\n\n        if (this._isInline || this._isBalloon) {\n          this._isInline = false;\n          this._isBalloon = false;\n        }\n\n        if (!!options.toolbarContainer) context.element.relative.insertBefore(toolbar, editorArea);\n        topArea.style.position = \"fixed\";\n        topArea.style.top = \"0\";\n        topArea.style.left = \"0\";\n        topArea.style.width = \"100%\";\n        topArea.style.maxWidth = \"100%\";\n        topArea.style.height = \"100%\";\n        topArea.style.zIndex = \"2147483647\";\n\n        if (context.element.stickyDummy.style.display !== (\"none\" && \"\")) {\n          _var._fullScreenAttrs.sticky = true;\n          context.element.stickyDummy.style.display = \"none\";\n          util.removeClass(toolbar, \"ke-toolbar-sticky\");\n        }\n\n        _var._bodyOverflow = _d.body.style.overflow;\n        _d.body.style.overflow = \"hidden\";\n        _var.editorAreaOriginCssText = editorArea.style.cssText;\n        _var._wysiwygOriginCssText = wysiwygFrame.style.cssText;\n        _var._codeOriginCssText = code.style.cssText;\n        editorArea.style.cssText = toolbar.style.cssText = \"\";\n        wysiwygFrame.style.cssText = (wysiwygFrame.style.cssText.match(/\\s?display(\\s+)?:(\\s+)?[a-zA-Z]+;/) || [\"\"])[0];\n        code.style.cssText = (code.style.cssText.match(/\\s?display(\\s+)?:(\\s+)?[a-zA-Z]+;/) || [\"\"])[0];\n        toolbar.style.width = wysiwygFrame.style.height = code.style.height = \"100%\";\n        toolbar.style.position = \"relative\";\n        toolbar.style.display = \"block\";\n        _var.innerHeight_fullScreen = _w.innerHeight - toolbar.offsetHeight;\n        editorArea.style.height = _var.innerHeight_fullScreen - options.fullScreenOffset + \"px\";\n        util.changeElement(element.firstElementChild, icons.reduction);\n\n        if (options.iframe && options.height === \"auto\") {\n          editorArea.style.overflow = \"auto\";\n\n          this._iframeAutoHeight();\n        }\n\n        context.element.topArea.style.marginTop = options.fullScreenOffset + \"px\";\n        util.addClass(this._styleCommandMap.fullScreen, \"active\");\n      } else {\n        _var.isFullScreen = false;\n        wysiwygFrame.style.cssText = _var._wysiwygOriginCssText;\n        code.style.cssText = _var._codeOriginCssText;\n        toolbar.style.cssText = \"\";\n        editorArea.style.cssText = _var.editorAreaOriginCssText;\n        topArea.style.cssText = _var._originCssText;\n        _d.body.style.overflow = _var._bodyOverflow;\n        if (!!options.toolbarContainer) options.toolbarContainer.appendChild(toolbar);\n\n        if (options.stickyToolbar > -1) {\n          util.removeClass(toolbar, \"ke-toolbar-sticky\");\n        }\n\n        if (_var._fullScreenAttrs.sticky && !options.toolbarContainer) {\n          _var._fullScreenAttrs.sticky = false;\n          context.element.stickyDummy.style.display = \"block\";\n          util.addClass(toolbar, \"ke-toolbar-sticky\");\n        }\n\n        this._isInline = _var._fullScreenAttrs.inline;\n        this._isBalloon = _var._fullScreenAttrs.balloon;\n        if (this._isInline) event._showToolbarInline();\n        if (!!options.toolbarContainer) util.removeClass(toolbar, \"ke-toolbar-balloon\");\n        event.onScroll_window();\n        util.changeElement(element.firstElementChild, icons.expansion);\n        context.element.topArea.style.marginTop = \"\";\n        util.removeClass(this._styleCommandMap.fullScreen, \"active\");\n      } // user event\n\n\n      if (typeof functions.toggleFullScreen === \"function\") functions.toggleFullScreen(this._variable.isFullScreen, this);\n    },\n\n    /**\r\n     * @description Prints the current contents of the editor.\r\n     */\n    print: function print() {\n      var iframe = util.createElement(\"IFRAME\");\n      iframe.style.display = \"none\";\n\n      _d.body.appendChild(iframe);\n\n      var contentsHTML = options.printTemplate ? options.printTemplate.replace(/\\{\\{\\s*contents\\s*\\}\\}/i, this.getContents(true)) : this.getContents(true);\n      var printDocument = util.getIframeDocument(iframe);\n      var wDoc = this._wd;\n\n      if (options.iframe) {\n        var arrts = options._printClass !== null ? 'class=\"' + options._printClass + '\"' : options.fullPage ? util.getAttributesToString(wDoc.body, [\"contenteditable\"]) : 'class=\"' + options._editableClass + '\"';\n        printDocument.write(\"\" + \"<!DOCTYPE html><html>\" + \"<head>\" + wDoc.head.innerHTML + \"</head>\" + \"<body \" + arrts + \">\" + contentsHTML + \"</body>\" + \"</html>\");\n      } else {\n        var links = _d.head.getElementsByTagName(\"link\");\n\n        var styles = _d.head.getElementsByTagName(\"style\");\n\n        var linkHTML = \"\";\n\n        for (var i = 0, len = links.length; i < len; i++) {\n          linkHTML += links[i].outerHTML;\n        }\n\n        for (var _i20 = 0, _len8 = styles.length; _i20 < _len8; _i20++) {\n          linkHTML += styles[_i20].outerHTML;\n        }\n\n        printDocument.write(\"\" + \"<!DOCTYPE html><html>\" + \"<head>\" + linkHTML + \"</head>\" + '<body class=\"' + (options._printClass !== null ? options._printClass : options._editableClass) + '\">' + contentsHTML + \"</body>\" + \"</html>\");\n      }\n\n      this.showLoading();\n\n      _w.setTimeout(function () {\n        try {\n          iframe.focus(); // IE or Edge\n\n          if (util.isIE_Edge || !!_d.documentMode || !!_w.StyleMedia) {\n            try {\n              iframe.contentWindow.document.execCommand(\"print\", false, null);\n            } catch (e) {\n              iframe.contentWindow.print();\n            }\n          } else {\n            // Other browsers\n            iframe.contentWindow.print();\n          }\n        } catch (error) {\n          throw Error(\"[KothingEditor.core.print.fail] error: \" + error);\n        } finally {\n          core.closeLoading();\n          util.removeItem(iframe);\n        }\n      }, 1000);\n    },\n\n    /**\r\n     * @description Open the preview window.\r\n     */\n    preview: function preview() {\n      core.submenuOff();\n      core.containerOff();\n      core.controllersOff();\n      var contentsHTML = options.previewTemplate ? options.previewTemplate.replace(/\\{\\{\\s*contents\\s*\\}\\}/i, this.getContents(true)) : this.getContents(true);\n\n      var windowObject = _w.open(\"\", \"_blank\");\n\n      windowObject.mimeType = \"text/html\";\n      var wDoc = this._wd;\n\n      if (options.iframe) {\n        var arrts = options._printClass !== null ? 'class=\"' + options._printClass + '\"' : options.fullPage ? util.getAttributesToString(wDoc.body, [\"contenteditable\"]) : 'class=\"' + options._editableClass + '\"';\n        windowObject.document.write(\"\" + \"<!DOCTYPE html><html>\" + \"<head>\" + wDoc.head.innerHTML + \"<style>body {overflow:auto !important; margin: 10px auto !important; height:auto !important; outline:1px dashed #ccc;}</style>\" + \"</head>\" + \"<body \" + arrts + \">\" + contentsHTML + \"</body>\" + \"</html>\");\n      } else {\n        var links = _d.head.getElementsByTagName(\"link\");\n\n        var styles = _d.head.getElementsByTagName(\"style\");\n\n        var linkHTML = \"\";\n\n        for (var i = 0, len = links.length; i < len; i++) {\n          linkHTML += links[i].outerHTML;\n        }\n\n        for (var _i21 = 0, _len9 = styles.length; _i21 < _len9; _i21++) {\n          linkHTML += styles[_i21].outerHTML;\n        }\n\n        windowObject.document.write(\"\" + \"<!DOCTYPE html><html>\" + \"<head>\" + '<meta charset=\"utf-8\" />' + '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">' + \"<title>\" + lang.toolbar.preview + \"</title>\" + linkHTML + \"</head>\" + '<body class=\"' + (options._printClass !== null ? options._printClass : options._editableClass) + '\" style=\"margin:10px auto !important; height:auto !important; outline:1px dashed #ccc;\">' + contentsHTML + \"</body>\" + \"</html>\");\n      }\n    },\n\n    /**\r\n     * @description Sets the HTML string\r\n     * @param {String|undefined} html HTML string\r\n     */\n    setContents: function setContents(html) {\n      this.removeRange();\n      var convertValue = html === null || html === undefined ? \"\" : this.convertContentsForEditor(html);\n\n      this._resetComponents();\n\n      if (!this._variable.isCodeView) {\n        context.element.wysiwyg.innerHTML = convertValue; // history stack\n\n        this.history.push(false);\n      } else {\n        var value = this.convertHTMLForCodeView(convertValue);\n\n        this._setCodeView(value);\n      }\n    },\n\n    /**\r\n     * @description Sets the contents of the iframe's head tag and body tag when using the \"iframe\" or \"fullPage\" option.\r\n     * @param {Object} ctx { head: HTML string, body: HTML string}\r\n     */\n    setIframeContents: function setIframeContents(ctx) {\n      if (!options.iframe) return false;\n      if (ctx.head) this._wd.head.innerHTML = ctx.head.replace(/<script[\\s\\S]*>[\\s\\S]*<\\/script>/gi, \"\");\n      if (ctx.body) this._wd.body.innerHTML = this.convertContentsForEditor(ctx.body);\n    },\n\n    /**\r\n     * @description Gets the current contents\r\n     * @param {Boolean} onlyContents Return only the contents of the body without headers when the \"fullPage\" option is true\r\n     * @returns {Object}\r\n     */\n    getContents: function getContents(onlyContents) {\n      var contents = context.element.wysiwyg.innerHTML;\n      var renderHTML = util.createElement(\"DIV\");\n      renderHTML.innerHTML = contents;\n      var figcaptions = util.getListChildren(renderHTML, function (current) {\n        return /FIGCAPTION/i.test(current.nodeName);\n      });\n\n      for (var i = 0, len = figcaptions.length; i < len; i++) {\n        figcaptions[i].removeAttribute(\"contenteditable\");\n      }\n\n      if (options.fullPage && !onlyContents) {\n        var attrs = util.getAttributesToString(this._wd.body, [\"contenteditable\"]);\n        return \"<!DOCTYPE html><html>\" + this._wd.head.outerHTML + \"<body \" + attrs + \">\" + renderHTML.innerHTML + \"</body></html>\";\n      } else {\n        return renderHTML.innerHTML;\n      }\n    },\n\n    /**\r\n     * @description Returns HTML string according to tag type and configuration.\r\n     * Use only \"cleanHTML\"\r\n     * @param {Node} node Node\r\n     * @param {Boolean} requireFormat If true, text nodes that do not have a format node is wrapped with the format tag.\r\n     * @private\r\n     */\n    _makeLine: function _makeLine(node, requireFormat) {\n      var defaultTag = options.defaultTag; // element\n\n      if (node.nodeType === 1) {\n        if (util._disallowedTags(node)) return \"\";\n\n        if (!requireFormat || util.isFormatElement(node) || util.isRangeFormatElement(node) || util.isComponent(node) || util.isMedia(node) || util.isAnchor(node) && util.isMedia(node.firstElementChild)) {\n          return node.outerHTML;\n        } else {\n          return \"<\" + defaultTag + \">\" + node.outerHTML + \"</\" + defaultTag + \">\";\n        }\n      } // text\n\n\n      if (node.nodeType === 3) {\n        if (!requireFormat) return util._HTMLConvertor(node.textContent);\n        var textArray = node.textContent.split(/\\n/g);\n        var html = \"\";\n\n        for (var i = 0, tLen = textArray.length, text; i < tLen; i++) {\n          text = textArray[i].trim();\n          if (text.length > 0) html += \"<\" + defaultTag + \">\" + util._HTMLConvertor(text) + \"</\" + defaultTag + \">\";\n        }\n\n        return html;\n      } // comments\n\n\n      if (node.nodeType === 8 && this._allowHTMLComments) {\n        return \"<!--\" + node.textContent.trim() + \"-->\";\n      }\n\n      return \"\";\n    },\n\n    /**\r\n     * @description Removes attribute values such as style and converts tags that do not conform to the \"html5\" standard.\r\n     * @param {String} text\r\n     * @returns {String} HTML string\r\n     * @private\r\n     */\n    _tagConvertor: function _tagConvertor(text) {\n      if (!this._disallowedTextTagsRegExp) return text;\n      var ec = options._textTagsMap;\n      return text.replace(this._disallowedTextTagsRegExp, function (m, t, n, p) {\n        return t + (typeof ec[n] === \"string\" ? ec[n] : n) + (p ? \" \" + p : \"\");\n      });\n    },\n\n    /**\r\n     * @description Delete disallowed tags\r\n     * @param {String} html HTML string\r\n     * @returns {String}\r\n     * @private\r\n     */\n    _deleteDisallowedTags: function _deleteDisallowedTags(html) {\n      return html.replace(/\\n/g, \"\").replace(/<(script|style)[\\s\\S]*>[\\s\\S]*<\\/(script|style)>/gi, \"\").replace(/<[a-z0-9]+\\:[a-z0-9]+[^>^\\/]*>[^>]*<\\/[a-z0-9]+\\:[a-z0-9]+>/gi, \"\").replace(this.editorTagsWhitelistRegExp, \"\");\n    },\n\n    /**\r\n     * @description Tag and tag attribute check RegExp function. (used by \"cleanHTML\" and \"convertContentsForEditor\")\r\n     * @param {Boolean} rowLevelCheck Row level check\r\n     * @param {String} m RegExp value\r\n     * @param {String} t RegExp value\r\n     * @returns {String}\r\n     * @private\r\n     */\n    _cleanTags: function _cleanTags(rowLevelCheck, m, t) {\n      if (/^<[a-z0-9]+\\:[a-z0-9]+/i.test(m)) return m;\n      var v = null;\n\n      var tAttr = this._attributesTagsWhitelist[t.match(/(?!<)[a-zA-Z0-9\\-]+/)[0].toLowerCase()];\n\n      if (tAttr) v = m.match(tAttr);else v = m.match(this._attributesWhitelistRegExp);\n\n      if ((rowLevelCheck || /<span/i.test(t)) && (!v || !/style=/i.test(v.toString()))) {\n        var sv = m.match(/style\\s*=\\s*(?:\"|')[^\"']*(?:\"|')/);\n\n        if (sv) {\n          if (!v) v = [];\n          v.push(sv[0]);\n        }\n      }\n\n      if (/<a\\b/i.test(t)) {\n        var _sv = m.match(/id\\s*=\\s*(?:\"|')[^\"']*(?:\"|')/);\n\n        if (_sv) {\n          if (!v) v = [];\n          v.push(_sv[0]);\n        }\n      }\n\n      if (v) {\n        for (var i = 0, len = v.length; i < len; i++) {\n          if (!rowLevelCheck && /^class=\"(?!(__ke__|ke-|katex))/.test(v[i])) continue;\n          t += \" \" + (/^href\\s*=\\s*('|\"|\\s)*javascript\\s*\\:/i.test(v[i]) ? \"\" : v[i]);\n        }\n      }\n\n      return t;\n    },\n\n    /**\r\n     * @description Gets the clean HTML code for editor\r\n     * @param {String} html HTML string\r\n     * @param {String|RegExp|null} whitelist Regular expression of allowed tags.\r\n     * RegExp object is create by util.createTagsWhitelist method. (core.pasteTagsWhitelistRegExp)\r\n     * @returns {String}\r\n     */\n    cleanHTML: function cleanHTML(html, whitelist) {\n      html = this._deleteDisallowedTags(this._parser.parseFromString(html, \"text/html\").body.innerHTML).replace(/(<[a-zA-Z0-9\\-]+)[^>]*(?=>)/g, this._cleanTags.bind(this, false));\n\n      var dom = _d.createRange().createContextualFragment(html);\n\n      try {\n        util._consistencyCheckOfHTML(dom, this._htmlCheckWhitelistRegExp);\n      } catch (error) {\n        console.warn(\"[KothingEditor.cleanHTML.consistencyCheck.fail] \" + error);\n      }\n\n      if (this.managedTagsInfo && this.managedTagsInfo.query) {\n        var textCompList = dom.querySelectorAll(this.managedTagsInfo.query);\n\n        for (var i = 0, len = textCompList.length, initMethod, classList; i < len; i++) {\n          classList = [].slice.call(textCompList[i].classList);\n\n          for (var c = 0, cLen = classList.length; c < cLen; c++) {\n            initMethod = this.managedTagsInfo.map[classList[c]];\n\n            if (initMethod) {\n              initMethod(textCompList[i]);\n              break;\n            }\n          }\n        }\n      }\n\n      var domTree = dom.childNodes;\n      var cleanHTML = \"\";\n      var requireFormat = false;\n\n      for (var _i22 = 0, _len10 = domTree.length, t; _i22 < _len10; _i22++) {\n        t = domTree[_i22];\n\n        if (t.nodeType === 1 && !util.isTextStyleElement(t) && !util.isBreak(t) && !util._disallowedTags(t)) {\n          requireFormat = true;\n          break;\n        }\n      }\n\n      for (var _i23 = 0, _len11 = domTree.length; _i23 < _len11; _i23++) {\n        cleanHTML += this._makeLine(domTree[_i23], requireFormat);\n      }\n\n      cleanHTML = util.htmlRemoveWhiteSpace(cleanHTML);\n      return this._tagConvertor(!cleanHTML ? html : !whitelist ? cleanHTML : cleanHTML.replace(typeof whitelist === \"string\" ? util.createTagsWhitelist(whitelist) : whitelist, \"\"));\n    },\n\n    /**\r\n     * @description Converts contents into a format that can be placed in an editor\r\n     * @param {String} contents contents\r\n     * @returns {String}\r\n     */\n    convertContentsForEditor: function convertContentsForEditor(contents) {\n      contents = this._deleteDisallowedTags(this._parser.parseFromString(contents, \"text/html\").body.innerHTML).replace(/(<[a-zA-Z0-9\\-]+)[^>]*(?=>)/g, this._cleanTags.bind(this, true));\n\n      var dom = _d.createRange().createContextualFragment(contents);\n\n      try {\n        util._consistencyCheckOfHTML(dom, this._htmlCheckWhitelistRegExp);\n      } catch (error) {\n        console.warn(\"[KothingEditor.convertContentsForEditor.consistencyCheck.fail] \" + error);\n      }\n\n      if (this.managedTagsInfo && this.managedTagsInfo.query) {\n        var textCompList = dom.querySelectorAll(this.managedTagsInfo.query);\n\n        for (var i = 0, len = textCompList.length, initMethod, classList; i < len; i++) {\n          classList = [].slice.call(textCompList[i].classList);\n\n          for (var c = 0, cLen = classList.length; c < cLen; c++) {\n            initMethod = this.managedTagsInfo.map[classList[c]];\n\n            if (initMethod) {\n              initMethod(textCompList[i]);\n              break;\n            }\n          }\n        }\n      }\n\n      var domTree = dom.childNodes;\n      var cleanHTML = \"\";\n\n      for (var _i24 = 0, _len12 = domTree.length; _i24 < _len12; _i24++) {\n        cleanHTML += this._makeLine(domTree[_i24], true);\n      }\n\n      if (cleanHTML.length === 0) return \"<\" + options.defaultTag + \"><br></\" + options.defaultTag + \">\";\n      cleanHTML = util.htmlRemoveWhiteSpace(cleanHTML);\n      return this._tagConvertor(cleanHTML);\n    },\n\n    /**\r\n     * @description Converts wysiwyg area element into a format that can be placed in an editor of code view mode\r\n     * @param {Element|String} html WYSIWYG element (context.element.wysiwyg) or HTML string.\r\n     * @returns {String}\r\n     */\n    convertHTMLForCodeView: function convertHTMLForCodeView(html) {\n      var returnHTML = \"\";\n      var wRegExp = _w.RegExp;\n      var brReg = new wRegExp(\"^(BLOCKQUOTE|PRE|TABLE|THEAD|TBODY|TR|TH|TD|OL|UL|IMG|IFRAME|VIDEO|AUDIO|FIGURE|FIGCAPTION|HR|BR|CANVAS|SELECT)$\", \"i\");\n      var wDoc = typeof html === \"string\" ? _d.createRange().createContextualFragment(html) : html;\n\n      var isFormat = function (current) {\n        return this.isFormatElement(current) || this.isComponent(current);\n      }.bind(util);\n\n      var indentSize = this._variable.codeIndent * 1;\n      indentSize = indentSize > 0 ? new _w.Array(indentSize + 1).join(\" \") : \"\";\n\n      (function recursionFunc(element, indent, lineBR) {\n        var children = element.childNodes;\n        var elementRegTest = brReg.test(element.nodeName);\n        var elementIndent = elementRegTest ? indent : \"\";\n\n        for (var i = 0, len = children.length, node, br, nodeRegTest, tag, tagIndent; i < len; i++) {\n          node = children[i];\n          nodeRegTest = brReg.test(node.nodeName);\n          br = nodeRegTest ? \"\\n\" : \"\";\n          lineBR = isFormat(node) && !elementRegTest && !/^(TH|TD)$/i.test(element.nodeName) ? \"\\n\" : \"\";\n\n          if (node.nodeType === 8) {\n            returnHTML += \"\\n<!-- \" + node.textContent.trim() + \" -->\" + br;\n            continue;\n          }\n\n          if (node.nodeType === 3) {\n            if (!util.isList(node.parentElement)) returnHTML += util._HTMLConvertor(/^\\n+$/.test(node.data) ? \"\" : node.data);\n            continue;\n          }\n\n          if (node.childNodes.length === 0) {\n            returnHTML += (/^HR$/i.test(node.nodeName) ? \"\\n\" : \"\") + (/^PRE$/i.test(node.parentElement.nodeName) && /^BR$/i.test(node.nodeName) ? \"\" : elementIndent) + node.outerHTML + br;\n            continue;\n          }\n\n          if (!node.outerHTML) {\n            // IE\n            returnHTML += new _w.XMLSerializer().serializeToString(node);\n          } else {\n            tag = node.nodeName.toLowerCase();\n            tagIndent = elementIndent || nodeRegTest ? indent : \"\";\n            returnHTML += (lineBR || (elementRegTest ? \"\" : br)) + tagIndent + node.outerHTML.match(wRegExp(\"<\" + tag + \"[^>]*>\", \"i\"))[0] + br;\n            recursionFunc(node, indent + indentSize, \"\");\n            returnHTML += (/\\n$/.test(returnHTML) ? tagIndent : \"\") + \"</\" + tag + \">\" + (lineBR || br || elementRegTest ? \"\\n\" : \"\" || /^(TH|TD)$/i.test(node.nodeName) ? \"\\n\" : \"\");\n          }\n        }\n      })(wDoc, \"\", \"\\n\");\n\n      return returnHTML.trim() + \"\\n\";\n    },\n\n    /**\r\n     * @description Add an event to document.\r\n     * When created as an Iframe, the same event is added to the document in the Iframe.\r\n     * @param {String} type Event type\r\n     * @param {Function} listener Event listener\r\n     * @param {Boolean} useCapture Use event capture\r\n     */\n    addDocEvent: function addDocEvent(type, listener, useCapture) {\n      _d.addEventListener(type, listener, useCapture);\n\n      if (options.iframe) {\n        this._wd.addEventListener(type, listener);\n      }\n    },\n\n    /**\r\n     * @description Remove events from document.\r\n     * When created as an Iframe, the event of the document inside the Iframe is also removed.\r\n     * @param {String} type Event type\r\n     * @param {Function} listener Event listener\r\n     */\n    removeDocEvent: function removeDocEvent(type, listener) {\n      _d.removeEventListener(type, listener);\n\n      if (options.iframe) {\n        this._wd.removeEventListener(type, listener);\n      }\n    },\n\n    /**\r\n     * @description The current number of characters is counted and displayed.\r\n     * @param {String} inputText Text added.\r\n     * @returns {Boolean}\r\n     * @private\r\n     */\n    _charCount: function _charCount(inputText) {\n      var maxCharCount = options.maxCharCount;\n      var countType = options.charCounterType;\n      var nextCharCount = 0;\n      if (!!inputText) nextCharCount = this.getCharLength(inputText, countType);\n\n      this._setCharCount();\n\n      if (maxCharCount > 0) {\n        var over = false;\n        var count = functions.getCharCount(countType);\n\n        if (count > maxCharCount) {\n          over = true;\n\n          if (nextCharCount > 0) {\n            this._editorRange();\n\n            var range = this.getRange();\n            var endOff = range.endOffset - 1;\n            var text = this.getSelectionNode().textContent;\n            var slicePosition = range.endOffset - (count - maxCharCount);\n            this.getSelectionNode().textContent = text.slice(0, slicePosition < 0 ? 0 : slicePosition) + text.slice(range.endOffset, text.length);\n            this.setRange(range.endContainer, endOff, range.endContainer, endOff);\n          }\n        } else if (count + nextCharCount > maxCharCount) {\n          over = true;\n        }\n\n        if (over) {\n          this._callCounterBlink();\n\n          if (nextCharCount > 0) return false;\n        }\n      }\n\n      return true;\n    },\n\n    /**\r\n     * @description When \"element\" is added, if it is greater than \"options.maxCharCount\", false is returned.\r\n     * @param {Node|String} element Element node or String.\r\n     * @param {String|null} charCounterType charCounterType. If it is null, the options.charCounterType\r\n     * @returns {Boolean}\r\n     */\n    checkCharCount: function checkCharCount(element, charCounterType) {\n      if (options.maxCharCount) {\n        var countType = charCounterType || options.charCounterType;\n        var length = this.getCharLength(typeof element === \"string\" ? element : this._charTypeHTML && element.nodeType === 1 ? element.outerHTML : element.textContent, countType);\n\n        if (length > 0 && length + functions.getCharCount(countType) > options.maxCharCount) {\n          this._callCounterBlink();\n\n          return false;\n        }\n      }\n\n      return true;\n    },\n\n    /**\r\n     * @description Get the length of the content.\r\n     * Depending on the option, the length of the character is taken. (charCounterType)\r\n     * @param {String} content Content to count\r\n     * @param {String} charCounterType options.charCounterType\r\n     * @returns {Number}\r\n     */\n    getCharLength: function getCharLength(content, charCounterType) {\n      return /byte/.test(charCounterType) ? util.getByteLength(content) : content.length;\n    },\n\n    /**\r\n     * @description Set the char count to charCounter element textContent.\r\n     * @private\r\n     */\n    _setCharCount: function _setCharCount() {\n      if (context.element.charCounter) {\n        _w.setTimeout(function () {\n          context.element.charCounter.textContent = functions.getCharCount(options.charCounterType);\n        });\n      }\n    },\n\n    /**\r\n     * @description The character counter blinks.\r\n     * @private\r\n     */\n    _callCounterBlink: function _callCounterBlink() {\n      var charWrapper = context.element.charWrapper;\n\n      if (charWrapper && !util.hasClass(charWrapper, \"ke-blink\")) {\n        util.addClass(charWrapper, \"ke-blink\");\n\n        _w.setTimeout(function () {\n          util.removeClass(charWrapper, \"ke-blink\");\n        }, 600);\n      }\n    },\n\n    /**\r\n     * @description Check the components such as image and video and modify them according to the format.\r\n     * @private\r\n     */\n    _checkComponents: function _checkComponents() {\n      for (var i = 0, len = this._fileInfoPluginsCheck.length; i < len; i++) {\n        this._fileInfoPluginsCheck[i]();\n      }\n    },\n\n    /**\r\n     * @description Initialize the information of the components.\r\n     * @private\r\n     */\n    _resetComponents: function _resetComponents() {\n      for (var i = 0, len = this._fileInfoPluginsReset.length; i < len; i++) {\n        this._fileInfoPluginsReset[i]();\n      }\n    },\n\n    /**\r\n     * @description Set method in the code view area\r\n     * @param {String} value HTML string\r\n     * @private\r\n     */\n    _setCodeView: function _setCodeView(value) {\n      if (options.codeMirrorEditor) {\n        options.codeMirrorEditor.getDoc().setValue(value);\n      } else {\n        context.element.code.value = value;\n      }\n    },\n\n    /**\r\n     * @description Get method in the code view area\r\n     * @private\r\n     */\n    _getCodeView: function _getCodeView() {\n      return options.codeMirrorEditor ? options.codeMirrorEditor.getDoc().getValue() : context.element.code.value;\n    },\n\n    /**\r\n     * @description Initializ core variable\r\n     * @param {Boolean} reload Is relooad?\r\n     * @param {String} _initHTML initial html string\r\n     * @private\r\n     */\n    _init: function _init(reload, _initHTML) {\n      var wRegExp = _w.RegExp;\n      this._ww = options.iframe ? context.element.wysiwygFrame.contentWindow : _w;\n      this._wd = _d;\n      this._charTypeHTML = options.charCounterType === \"byte-html\";\n\n      if (!options.iframe && typeof _w.ShadowRoot === \"function\") {\n        var child = context.element.wysiwygFrame;\n\n        while (child) {\n          if (child.shadowRoot) {\n            this._shadowRoot = child.shadowRoot;\n            break;\n          } else if (child instanceof _w.ShadowRoot) {\n            this._shadowRoot = child;\n            break;\n          }\n\n          child = child.parentNode;\n        }\n\n        if (this._shadowRoot) this._shadowRootControllerEventTarget = [];\n      } // set disallow text nodes\n\n\n      var disallowTextTags = _w.Object.keys(options._textTagsMap);\n\n      var allowTextTags = !options.addTagsWhitelist ? [] : options.addTagsWhitelist.split(\"|\").filter(function (v) {\n        return /b|i|ins|s|strike/i.test(v);\n      });\n\n      for (var i = 0; i < allowTextTags.length; i++) {\n        disallowTextTags.splice(disallowTextTags.indexOf(allowTextTags[i].toLowerCase()), 1);\n      }\n\n      this._disallowedTextTagsRegExp = disallowTextTags.length === 0 ? null : new wRegExp(\"(<\\\\/?)(\" + disallowTextTags.join(\"|\") + \")\\\\b\\\\s*([^>^<]+)?\\\\s*(?=>)\", \"gi\"); // set whitelist\n\n      var defaultAttr = \"contenteditable|id|colspan|rowspan|target|href|download|rel|src|alt|class|type|controls|data-format|data-size|data-file-size|data-file-name|data-origin|data-align|data-image-link|data-rotate|data-proportion|data-percentage|origin-size|data-exp|data-font-size\";\n      this._allowHTMLComments = options._editorTagsWhitelist.indexOf(\"//\") > -1;\n      this._htmlCheckWhitelistRegExp = new wRegExp(\"^(\" + options._editorTagsWhitelist.replace(\"|//\", \"\") + \")$\", \"i\");\n      this.editorTagsWhitelistRegExp = util.createTagsWhitelist(options._editorTagsWhitelist.replace(\"|//\", \"|<!--|-->\"));\n      this.pasteTagsWhitelistRegExp = util.createTagsWhitelist(options.pasteTagsWhitelist);\n      var regEndStr = '\\\\s*=\\\\s*(\")[^\"]*\\\\1';\n      var _attr = options.attributesWhitelist;\n      var tagsAttr = {};\n      var allAttr = \"\";\n\n      if (!!_attr) {\n        for (var k in _attr) {\n          if (!util.hasOwn(_attr, k) || /^on[a-z]+$/i.test(_attr[k])) continue;\n\n          if (k === \"all\") {\n            allAttr = _attr[k] + \"|\";\n          } else {\n            tagsAttr[k] = new wRegExp(\"(?:\" + _attr[k] + \"|\" + defaultAttr + \")\" + regEndStr, \"ig\");\n          }\n        }\n      }\n\n      this._attributesWhitelistRegExp = new wRegExp(\"(?:\" + allAttr + defaultAttr + \")\" + regEndStr, \"ig\");\n      this._attributesTagsWhitelist = tagsAttr; // set modes\n\n      this._isInline = /inline/i.test(options.mode);\n      this._isBalloon = /balloon|balloon-always/i.test(options.mode);\n      this._isBalloonAlways = /balloon-always/i.test(options.mode); // caching buttons\n\n      this._cachingButtons(); // file components\n\n\n      this._fileInfoPluginsCheck = [];\n      this._fileInfoPluginsReset = []; // text components\n\n      this.managedTagsInfo = {\n        query: \"\",\n        map: {}\n      };\n      var managedClass = []; // Command and file plugins registration\n\n      this.activePlugins = [];\n      this._fileManager.tags = [];\n      this._fileManager.pluginMap = {};\n      var filePluginRegExp = [];\n      var plugin, button;\n\n      for (var key in plugins) {\n        if (!util.hasOwn(plugins, key)) continue;\n        plugin = plugins[key];\n        button = pluginCallButtons[key];\n\n        if (plugin.active && button) {\n          this.callPlugin(key, null, button);\n        }\n\n        if (typeof plugin.checkFileInfo === \"function\" && typeof plugin.resetFileInfo === \"function\") {\n          this.callPlugin(key, null, button);\n\n          this._fileInfoPluginsCheck.push(plugin.checkFileInfo.bind(this));\n\n          this._fileInfoPluginsReset.push(plugin.resetFileInfo.bind(this));\n        }\n\n        if (_w.Array.isArray(plugin.fileTags)) {\n          var fileTags = plugin.fileTags;\n          this.callPlugin(key, null, button);\n          this._fileManager.tags = this._fileManager.tags.concat(fileTags);\n          filePluginRegExp.push(key);\n\n          for (var tag = 0, tLen = fileTags.length; tag < tLen; tag++) {\n            this._fileManager.pluginMap[fileTags[tag].toLowerCase()] = key;\n          }\n        }\n\n        if (plugin.managedTags) {\n          var info = plugin.managedTags();\n          managedClass.push(\".\" + info.className);\n          this.managedTagsInfo.map[info.className] = info.method.bind(this);\n        }\n      }\n\n      this.managedTagsInfo.query = managedClass.toString();\n      this._fileManager.queryString = this._fileManager.tags.join(\",\");\n      this._fileManager.regExp = new wRegExp(\"^(\" + this._fileManager.tags.join(\"|\") + \")$\", \"i\");\n      this._fileManager.pluginRegExp = new wRegExp(\"^(\" + (filePluginRegExp.length === 0 ? \"undefined\" : filePluginRegExp.join(\"|\")) + \")$\", \"i\"); // cache editor's element\n\n      this._variable._originCssText = context.element.topArea.style.cssText;\n      this.placeholder = context.element.placeholder;\n      this.lineBreaker = context.element.lineBreaker;\n      this.lineBreakerButton = this.lineBreaker.querySelector(\"button\"); // Excute history function\n\n      this.history = (0, _history.default)(this, this._onChange_historyStack.bind(this)); // register notice module\n\n      this.addModule([_notice.default]); // Init, validate\n\n      if (options.iframe) {\n        this._wd = context.element.wysiwygFrame.contentDocument;\n        context.element.wysiwyg = this._wd.body;\n        if (options._editorStyles.editor) context.element.wysiwyg.style.cssText = options._editorStyles.editor;\n        if (options.height === \"auto\") this._iframeAuto = this._wd.body;\n      }\n\n      this._initWysiwygArea(reload, _initHTML);\n    },\n\n    /**\r\n     * @description Caching basic buttons to use\r\n     * @private\r\n     */\n    _cachingButtons: function _cachingButtons() {\n      _w.setTimeout(function () {\n        this.codeViewDisabledButtons = context.element.buttonTray.querySelectorAll('.ke-menu-list button[data-display]:not([class~=\"ke-code-view-enabled\"])');\n        this.resizingDisabledButtons = context.element.buttonTray.querySelectorAll('.ke-menu-list button[data-display]:not([class~=\"ke-resizing-enabled\"]):not([data-display=\"MORE\"])');\n      }.bind(this));\n\n      var tool = context.tool;\n      this.commandMap = {\n        SUB: tool.subscript,\n        SUP: tool.superscript,\n        OUTDENT: tool.outdent,\n        INDENT: tool.indent\n      };\n      this.commandMap[options.textTags.bold.toUpperCase()] = tool.bold;\n      this.commandMap[options.textTags.underline.toUpperCase()] = tool.underline;\n      this.commandMap[options.textTags.italic.toUpperCase()] = tool.italic;\n      this.commandMap[options.textTags.strike.toUpperCase()] = tool.strike;\n      this._styleCommandMap = {\n        fullScreen: tool.fullScreen,\n        showBlocks: tool.showBlocks,\n        codeView: tool.codeView\n      };\n    },\n\n    /**\r\n     * @description Initializ wysiwyg area (Only called from core._init)\r\n     * @param {Boolean} reload Is relooad?\r\n     * @param {String} _initHTML initial html string\r\n     * @private\r\n     */\n    _initWysiwygArea: function _initWysiwygArea(reload, _initHTML) {\n      context.element.wysiwyg.innerHTML = reload ? _initHTML : this.convertContentsForEditor(typeof _initHTML === \"string\" ? _initHTML : context.element.originElement.value);\n    },\n\n    /**\r\n     * @description Called when there are changes to tags in the wysiwyg region.\r\n     * @private\r\n     */\n    _resourcesStateChange: function _resourcesStateChange() {\n      this._iframeAutoHeight();\n\n      this._checkPlaceholder();\n    },\n\n    /**\r\n     * @description Called when after execute \"history.push\"\r\n     * @private\r\n     */\n    _onChange_historyStack: function _onChange_historyStack() {\n      if (this.hasFocus) event._applyTagEffects();\n      this._variable.isChanged = true;\n      if (context.tool.save) context.tool.save.removeAttribute(\"disabled\"); // user event\n\n      if (functions.onChange) functions.onChange(this.getContents(true), this);\n      if (context.element.toolbar.style.display === \"block\") event._showToolbarBalloon();\n    },\n\n    /**\r\n     * @description Modify the height value of the iframe when the height of the iframe is automatic.\r\n     * @private\r\n     */\n    _iframeAutoHeight: function _iframeAutoHeight() {\n      if (this._iframeAuto) {\n        _w.setTimeout(function () {\n          context.element.wysiwygFrame.style.height = core._iframeAuto.offsetHeight + \"px\";\n        });\n      }\n    },\n\n    /**\r\n     * @description Set display property when there is placeholder.\r\n     * @private\r\n     */\n    _checkPlaceholder: function _checkPlaceholder() {\n      if (this.placeholder) {\n        if (this._variable.isCodeView) {\n          this.placeholder.style.display = \"none\";\n          return;\n        }\n\n        var wysiwyg = context.element.wysiwyg;\n\n        if (!util.onlyZeroWidthSpace(wysiwyg.textContent) || wysiwyg.querySelector(util._allowedEmptyNodeList) || (wysiwyg.innerText.match(/\\n/g) || \"\").length > 1) {\n          this.placeholder.style.display = \"none\";\n        } else {\n          this.placeholder.style.display = \"block\";\n        }\n      }\n    },\n\n    /**\r\n     * @description If there is no default format, add a format and move \"selection\".\r\n     * @param {String|null} formatName Format tag name (default: 'P')\r\n     * @private\r\n     */\n    _setDefaultFormat: function _setDefaultFormat(formatName) {\n      if (this._fileManager.pluginRegExp.test(this.currentControllerName)) return;\n      var range = this.getRange();\n      var commonCon = range.commonAncestorContainer;\n      var startCon = range.startContainer;\n      var rangeEl = util.getRangeFormatElement(commonCon, null);\n      var focusNode, offset, format;\n      var fileComponent = util.getParentElement(commonCon, util.isComponent);\n      if (fileComponent && !util.isTable(fileComponent)) return;\n      if ((util.isRangeFormatElement(startCon) || util.isWysiwygDiv(startCon)) && (util.isComponent(startCon.children[range.startOffset]) || util.isComponent(startCon.children[range.startOffset - 1]))) return;\n\n      if (rangeEl) {\n        format = util.createElement(formatName || options.defaultTag);\n        format.innerHTML = rangeEl.innerHTML;\n        if (format.childNodes.length === 0) format.innerHTML = util.zeroWidthSpace;\n        rangeEl.innerHTML = format.outerHTML;\n        format = rangeEl.firstChild;\n        focusNode = util.getEdgeChildNodes(format, null).sc;\n\n        if (!focusNode) {\n          focusNode = util.createTextNode(util.zeroWidthSpace);\n          format.insertBefore(focusNode, format.firstChild);\n        }\n\n        offset = focusNode.textContent.length;\n        this.setRange(focusNode, offset, focusNode, offset);\n        return;\n      }\n\n      if (util.isRangeFormatElement(commonCon) && commonCon.childNodes.length <= 1) {\n        var br = null;\n\n        if (commonCon.childNodes.length === 1 && util.isBreak(commonCon.firstChild)) {\n          br = commonCon.firstChild;\n        } else {\n          br = util.createTextNode(util.zeroWidthSpace);\n          commonCon.appendChild(br);\n        }\n\n        this.setRange(br, 1, br, 1);\n        return;\n      }\n\n      this.execCommand(\"formatBlock\", false, formatName || options.defaultTag);\n      focusNode = util.getEdgeChildNodes(commonCon, commonCon);\n      focusNode = focusNode ? focusNode.ec : commonCon;\n      format = util.getFormatElement(focusNode, null);\n\n      if (!format) {\n        this.removeRange();\n\n        this._editorRange();\n\n        return;\n      }\n\n      if (util.isBreak(format.nextSibling)) util.removeItem(format.nextSibling);\n      if (util.isBreak(format.previousSibling)) util.removeItem(format.previousSibling);\n\n      if (util.isBreak(focusNode)) {\n        var zeroWidth = util.createTextNode(util.zeroWidthSpace);\n        focusNode.parentNode.insertBefore(zeroWidth, focusNode);\n        focusNode = zeroWidth;\n      }\n\n      this.effectNode = null;\n      this.nativeFocus();\n    },\n\n    /**\r\n     * @description Initialization after \"setOptions\"\r\n     * @param {Object} el context.element\r\n     * @param {String} _initHTML Initial html string\r\n     * @private\r\n     */\n    _setOptionsInit: function _setOptionsInit(el, _initHTML) {\n      this.context = context = (0, _context.default)(el.originElement, this._getConstructed(el), options);\n      this._componentsInfoReset = true;\n\n      this._editorInit(true, _initHTML);\n    },\n\n    /**\r\n     * @description Initializ editor\r\n     * @param {Boolean} reload Is relooad?\r\n     * @param {String} _initHTML initial html string\r\n     * @private\r\n     */\n    _editorInit: function _editorInit(reload, _initHTML) {\n      // initialize core and add event listeners\n      this._init(reload, _initHTML);\n\n      event._addEvent();\n\n      this._setCharCount();\n\n      event._offStickyToolbar();\n\n      event.onResize_window(); // toolbar visibility\n\n      context.element.toolbar.style.visibility = \"\";\n\n      this._checkComponents();\n\n      this._componentsInfoInit = false;\n      this._componentsInfoReset = false;\n      this.history.reset(true);\n\n      this._resourcesStateChange();\n\n      _w.setTimeout(function () {\n        // user event\n        if (typeof functions.onload === \"function\") functions.onload(core, reload);\n      });\n    },\n\n    /**\r\n     * @description Create and return an object to cache the new context.\r\n     * @param {Element} contextEl context.element\r\n     * @returns {Object}\r\n     * @private\r\n     */\n    _getConstructed: function _getConstructed(contextEl) {\n      return {\n        top: contextEl.topArea,\n        relative: contextEl.relative,\n        toolBar: contextEl.toolbar,\n        menuTray: contextEl.menuTray,\n        editorArea: contextEl.editorArea,\n        wysiwygArea: contextEl.wysiwygFrame,\n        codeArea: contextEl.code,\n        placeholder: contextEl.placeholder,\n        resizingBar: contextEl.resizingBar,\n        navigation: contextEl.navigation,\n        charCounter: contextEl.charCounter,\n        charWrapper: contextEl.charWrapper,\n        loading: contextEl.loading,\n        lineBreaker: contextEl.lineBreaker,\n        lineBreaker_t: contextEl.lineBreaker_t,\n        lineBreaker_b: contextEl.lineBreaker_b,\n        resizeBack: contextEl.resizeBackground,\n        stickyDummy: contextEl.stickyDummy,\n        arrow: contextEl.arrow\n      };\n    }\n  };\n  /**\r\n   * @description event function\r\n   */\n\n  var event = {\n    _IEisComposing: false,\n    // In IE, there is no \"e.isComposing\" in the key-up event.\n    lineBreakerBind: null,\n    _responsiveCurrentSize: \"default\",\n    _responsiveButtonSize: null,\n    _responsiveButtons: null,\n    _directionKeyCode: new _w.RegExp(\"^(8|13|3[2-9]|40|46)$\"),\n    _nonTextKeyCode: new _w.RegExp(\"^(8|13|1[6-9]|20|27|3[3-9]|40|45|46|11[2-9]|12[0-3]|144|145)$\"),\n    $historyIgnoreKeyCode: new _w.RegExp(\"^(1[6-9]|20|27|3[3-9]|40|45|11[2-9]|12[0-3]|144|145)$\"),\n    _onButtonsCheck: new _w.RegExp(\"^(\" + _w.Object.keys(options._textTagsMap).join(\"|\") + \")$\", \"i\"),\n    _frontZeroWidthReg: new _w.RegExp(util.zeroWidthSpace + \"+\", \"\"),\n    _keyCodeShortcut: {\n      65: \"A\",\n      66: \"B\",\n      83: \"S\",\n      85: \"U\",\n      73: \"I\",\n      89: \"Y\",\n      90: \"Z\",\n      219: \"[\",\n      221: \"]\"\n    },\n    _shortcutCommand: function _shortcutCommand(keyCode, shift) {\n      var command = null;\n      var keyStr = event._keyCodeShortcut[keyCode];\n\n      switch (keyStr) {\n        case \"A\":\n          command = \"selectAll\";\n          break;\n\n        case \"B\":\n          if (options.shortcutsDisable.indexOf(\"bold\") === -1) {\n            command = \"bold\";\n          }\n\n          break;\n\n        case \"S\":\n          if (shift && options.shortcutsDisable.indexOf(\"strike\") === -1) {\n            command = \"strike\";\n          } else if (!shift && options.shortcutsDisable.indexOf(\"save\") === -1) {\n            command = \"save\";\n          }\n\n          break;\n\n        case \"U\":\n          if (options.shortcutsDisable.indexOf(\"underline\") === -1) {\n            command = \"underline\";\n          }\n\n          break;\n\n        case \"I\":\n          if (options.shortcutsDisable.indexOf(\"italic\") === -1) {\n            command = \"italic\";\n          }\n\n          break;\n\n        case \"Z\":\n          if (options.shortcutsDisable.indexOf(\"undo\") === -1) {\n            if (shift) {\n              command = \"redo\";\n            } else {\n              command = \"undo\";\n            }\n          }\n\n          break;\n\n        case \"Y\":\n          if (options.shortcutsDisable.indexOf(\"undo\") === -1) {\n            command = \"redo\";\n          }\n\n          break;\n\n        case \"[\":\n          if (options.shortcutsDisable.indexOf(\"indent\") === -1) {\n            command = options.rtl ? \"indent\" : \"outdent\";\n          }\n\n          break;\n\n        case \"]\":\n          if (options.shortcutsDisable.indexOf(\"indent\") === -1) {\n            command = options.rtl ? \"outdent\" : \"indent\";\n          }\n\n          break;\n      }\n\n      if (!command) return false;\n      core.commandHandler(core.commandMap[command], command);\n      return true;\n    },\n    _applyTagEffects: function _applyTagEffects() {\n      var selectionNode = core.getSelectionNode();\n      if (selectionNode === core.effectNode) return;\n      core.effectNode = selectionNode;\n      var marginDir = options.rtl ? \"marginRight\" : \"marginLeft\";\n      var commandMap = core.commandMap;\n      var classOnCheck = this._onButtonsCheck;\n      var commandMapNodes = [];\n      var currentNodes = [];\n      var activePlugins = core.activePlugins;\n      var cLen = activePlugins.length;\n      var nodeName = \"\";\n\n      while (selectionNode.firstChild) {\n        selectionNode = selectionNode.firstChild;\n      }\n\n      for (var element = selectionNode; !util.isWysiwygDiv(element); element = element.parentNode) {\n        if (!element) break;\n        if (element.nodeType !== 1 || util.isBreak(element)) continue;\n        nodeName = element.nodeName.toUpperCase();\n        currentNodes.push(nodeName);\n        /* Active plugins */\n\n        for (var c = 0, name; c < cLen; c++) {\n          name = activePlugins[c];\n\n          if (commandMapNodes.indexOf(name) === -1 && plugins[name].active.call(core, element)) {\n            commandMapNodes.push(name);\n          }\n        }\n\n        if (util.isFormatElement(element)) {\n          /* Outdent */\n          if (commandMapNodes.indexOf(\"OUTDENT\") === -1 && commandMap.OUTDENT) {\n            if (util.isListCell(element) || element.style[marginDir] && util.getNumber(element.style[marginDir], 0) > 0) {\n              commandMapNodes.push(\"OUTDENT\");\n              commandMap.OUTDENT.removeAttribute(\"disabled\");\n            }\n          }\n          /* Indent */\n\n\n          if (commandMapNodes.indexOf(\"INDENT\") === -1 && commandMap.INDENT) {\n            commandMapNodes.push(\"INDENT\");\n\n            if (util.isListCell(element) && !element.previousElementSibling) {\n              commandMap.INDENT.setAttribute(\"disabled\", true);\n            } else {\n              commandMap.INDENT.removeAttribute(\"disabled\");\n            }\n          }\n\n          continue;\n        }\n        /** default active buttons [strong, ins, em, del, sub, sup] */\n\n\n        if (classOnCheck.test(nodeName)) {\n          commandMapNodes.push(nodeName);\n          util.addClass(commandMap[nodeName], \"active\");\n        }\n      }\n      /** remove class, display text */\n\n\n      for (var key in commandMap) {\n        if (commandMapNodes.indexOf(key) > -1 || !util.hasOwn(commandMap, key)) continue;\n\n        if (activePlugins.indexOf(key) > -1) {\n          plugins[key].active.call(core, null);\n        } else if (commandMap.OUTDENT && /^OUTDENT$/i.test(key)) {\n          commandMap.OUTDENT.setAttribute(\"disabled\", true);\n        } else if (commandMap.INDENT && /^INDENT$/i.test(key)) {\n          commandMap.INDENT.removeAttribute(\"disabled\");\n        } else {\n          util.removeClass(commandMap[key], \"active\");\n        }\n      }\n      /** save current nodes */\n\n\n      core._variable.currentNodes = currentNodes.reverse();\n      core._variable.currentNodesMap = commandMapNodes;\n      /**  Displays the current node structure to resizingBar */\n\n      if (options.showPathLabel) context.element.navigation.textContent = core._variable.currentNodes.join(\" > \");\n    },\n    _cancelCaptionEdit: function _cancelCaptionEdit() {\n      this.setAttribute(\"contenteditable\", false);\n      this.removeEventListener(\"blur\", event._cancelCaptionEdit);\n    },\n    _buttonsEventHandler: function _buttonsEventHandler(e) {\n      var target = e.target;\n      if (core._bindControllersOff) e.stopPropagation();\n\n      if (/^(input|textarea|select|option)$/i.test(target.nodeName)) {\n        core._antiBlur = false;\n      } else {\n        e.preventDefault();\n      }\n\n      if (util.getParentElement(target, \".ke-submenu\")) {\n        e.stopPropagation();\n        core._notHideToolbar = true;\n      } else {\n        var command = target.getAttribute(\"data-command\");\n        var className = target.className;\n\n        while (!command && !/ke-menu-list/.test(className) && !/kothing-editor-common/.test(className)) {\n          target = target.parentNode;\n          command = target.getAttribute(\"data-command\");\n          className = target.className;\n        }\n\n        if (command === core._submenuName || command === core._containerName) {\n          e.stopPropagation();\n        }\n      }\n    },\n    onClick_toolbar: function onClick_toolbar(e) {\n      var target = e.target;\n      var display = target.getAttribute(\"data-display\");\n      var command = target.getAttribute(\"data-command\");\n      var className = target.className;\n      core.controllersOff();\n\n      while (target.parentNode && !command && !/ke-menu-list/.test(className) && !/ke-toolbar/.test(className)) {\n        target = target.parentNode;\n        command = target.getAttribute(\"data-command\");\n        display = target.getAttribute(\"data-display\");\n        className = target.className;\n      }\n\n      if (!command && !display) return;\n      if (target.disabled) return;\n      if (!core.hasFocus) core.nativeFocus();\n      if (!core._variable.isCodeView) core._editorRange();\n      core.actionCall(command, display, target);\n    },\n    onMouseDown_wysiwyg: function onMouseDown_wysiwyg(e) {\n      if (util.isNonEditable(context.element.wysiwyg)) return; // user event\n\n      if (typeof functions.onMouseDown === \"function\" && functions.onMouseDown(e, core) === false) return;\n      var tableCell = util.getParentElement(e.target, util.isCell);\n\n      if (tableCell) {\n        var tablePlugin = core.plugins.table;\n\n        if (tablePlugin && tableCell !== tablePlugin._fixedCell && !tablePlugin._shift) {\n          core.callPlugin(\"table\", function () {\n            tablePlugin.onTableCellMultiSelect.call(core, tableCell, false);\n          }, null);\n        }\n      }\n\n      if (core._isBalloon) {\n        event._hideToolbar();\n      }\n\n      if (/FIGURE/i.test(e.target.nodeName)) e.preventDefault();\n    },\n    onClick_wysiwyg: function onClick_wysiwyg(e) {\n      var targetElement = e.target;\n      if (util.isNonEditable(context.element.wysiwyg)) return; // user event\n\n      if (typeof functions.onClick === \"function\" && functions.onClick(e, core) === false) return;\n      var fileComponentInfo = core.getFileComponent(targetElement);\n\n      if (fileComponentInfo) {\n        e.preventDefault();\n        core.selectComponent(fileComponentInfo.target, fileComponentInfo.pluginName);\n        return;\n      }\n\n      var figcaption = util.getParentElement(targetElement, \"FIGCAPTION\");\n\n      if (util.isNonEditable(figcaption)) {\n        e.preventDefault();\n        figcaption.setAttribute(\"contenteditable\", true);\n        figcaption.focus();\n\n        if (core._isInline && !core._inlineToolbarAttr.isShow) {\n          event._showToolbarInline();\n\n          var hideToolbar = function hideToolbar() {\n            event._hideToolbar();\n\n            figcaption.removeEventListener(\"blur\", hideToolbar);\n          };\n\n          figcaption.addEventListener(\"blur\", hideToolbar);\n        }\n      }\n\n      _w.setTimeout(core._editorRange.bind(core));\n\n      core._editorRange();\n\n      var selectionNode = core.getSelectionNode();\n      var formatEl = util.getFormatElement(selectionNode, null);\n      var rangeEl = util.getRangeFormatElement(selectionNode, null);\n\n      if ((!formatEl || formatEl === rangeEl) && !util.isNonEditable(targetElement) && !util.isList(rangeEl)) {\n        var range = core.getRange();\n\n        if (util.getFormatElement(range.startContainer) === util.getFormatElement(range.endContainer)) {\n          if (util.isList(rangeEl)) {\n            e.preventDefault();\n            var oLi = util.createElement(\"LI\");\n            var prevLi = selectionNode.nextElementSibling;\n            oLi.appendChild(selectionNode);\n            rangeEl.insertBefore(oLi, prevLi);\n            core.focus();\n          } else if (!util.isWysiwygDiv(selectionNode) && !util.isComponent(selectionNode) && (!util.isTable(selectionNode) || util.isCell(selectionNode))) {\n            e.preventDefault();\n\n            core._setDefaultFormat(util.isRangeFormatElement(rangeEl) ? \"DIV\" : options.defaultTag);\n\n            core.focus();\n          } else {\n            event._applyTagEffects();\n          }\n        }\n      } else {\n        event._applyTagEffects();\n      }\n\n      if (core._isBalloon) _w.setTimeout(event._toggleToolbarBalloon);\n    },\n    _balloonDelay: null,\n    _showToolbarBalloonDelay: function _showToolbarBalloonDelay() {\n      if (event._balloonDelay) {\n        _w.clearTimeout(event._balloonDelay);\n      }\n\n      event._balloonDelay = _w.setTimeout(function () {\n        _w.clearTimeout(this._balloonDelay);\n\n        this._balloonDelay = null;\n\n        this._showToolbarBalloon();\n      }.bind(event), 350);\n    },\n    _toggleToolbarBalloon: function _toggleToolbarBalloon() {\n      core._editorRange();\n\n      var range = core.getRange();\n      if (core._bindControllersOff || !core._isBalloonAlways && range.collapsed) event._hideToolbar();else event._showToolbarBalloon(range);\n    },\n    _showToolbarBalloon: function _showToolbarBalloon(rangeObj) {\n      if (!core._isBalloon) return;\n      var range = rangeObj || core.getRange();\n      var toolbar = context.element.toolbar;\n      var topArea = context.element.topArea;\n      var selection = core.getSelection();\n      var isDirTop;\n\n      if (core._isBalloonAlways && range.collapsed) {\n        isDirTop = true;\n      } else if (selection.focusNode === selection.anchorNode) {\n        isDirTop = selection.focusOffset < selection.anchorOffset;\n      } else {\n        var childNodes = util.getListChildNodes(range.commonAncestorContainer, null);\n        isDirTop = util.getArrayIndex(childNodes, selection.focusNode) < util.getArrayIndex(childNodes, selection.anchorNode);\n      }\n\n      var rects = range.getClientRects();\n      rects = rects[isDirTop ? 0 : rects.length - 1];\n      var globalScroll = core.getGlobalScrollOffset();\n      var scrollLeft = globalScroll.left;\n      var scrollTop = globalScroll.top;\n      var editorWidth = topArea.offsetWidth;\n\n      var offsets = event._getEditorOffsets(null);\n\n      var stickyTop = offsets.top;\n      var editorLeft = offsets.left;\n      toolbar.style.top = \"-10000px\";\n      toolbar.style.visibility = \"hidden\";\n      toolbar.style.display = \"block\";\n\n      if (!rects) {\n        var node = core.getSelectionNode();\n\n        if (util.isFormatElement(node)) {\n          var zeroWidth = util.createTextNode(util.zeroWidthSpace);\n          core.insertNode(zeroWidth, null, false);\n          core.setRange(zeroWidth, 1, zeroWidth, 1);\n\n          core._editorRange();\n\n          rects = core.getRange().getClientRects();\n          rects = rects[isDirTop ? 0 : rects.length - 1];\n        }\n\n        if (!rects) {\n          var nodeOffset = util.getOffset(node, context.element.wysiwygFrame);\n          rects = {\n            left: nodeOffset.left,\n            top: nodeOffset.top,\n            right: nodeOffset.left,\n            bottom: nodeOffset.top + node.offsetHeight,\n            noText: true\n          };\n          scrollLeft = 0;\n          scrollTop = 0;\n        }\n\n        isDirTop = true;\n      }\n\n      var arrowMargin = _w.Math.round(context.element.arrow.offsetWidth / 2);\n\n      var toolbarWidth = toolbar.offsetWidth;\n      var toolbarHeight = toolbar.offsetHeight;\n      var iframeRects = /iframe/i.test(context.element.wysiwygFrame.nodeName) ? context.element.wysiwygFrame.getClientRects()[0] : null;\n\n      if (iframeRects) {\n        rects = {\n          left: rects.left + iframeRects.left,\n          top: rects.top + iframeRects.top,\n          right: rects.right + iframeRects.right - iframeRects.width,\n          bottom: rects.bottom + iframeRects.bottom - iframeRects.height\n        };\n      }\n\n      event._setToolbarOffset(isDirTop, rects, toolbar, editorLeft, editorWidth, scrollLeft, scrollTop, stickyTop, arrowMargin);\n\n      if (toolbarWidth !== toolbar.offsetWidth || toolbarHeight !== toolbar.offsetHeight) {\n        event._setToolbarOffset(isDirTop, rects, toolbar, editorLeft, editorWidth, scrollLeft, scrollTop, stickyTop, arrowMargin);\n      }\n\n      if (options.toolbarContainer) {\n        var editorParent = topArea.parentElement;\n        var container = options.toolbarContainer;\n        var left = container.offsetLeft;\n        var top = container.offsetTop;\n\n        while (!container.parentElement.contains(editorParent) || !/^(BODY|HTML)$/i.test(container.parentElement.nodeName)) {\n          container = container.offsetParent;\n          left += container.offsetLeft;\n          top += container.offsetTop;\n        }\n\n        toolbar.style.left = toolbar.offsetLeft - left + topArea.offsetLeft + \"px\";\n        toolbar.style.top = toolbar.offsetTop - top + topArea.offsetTop + \"px\";\n      }\n\n      toolbar.style.visibility = \"\";\n    },\n    _setToolbarOffset: function _setToolbarOffset(isDirTop, rects, toolbar, editorLeft, editorWidth, scrollLeft, scrollTop, stickyTop, arrowMargin) {\n      var padding = 1;\n      var toolbarWidth = toolbar.offsetWidth;\n      var toolbarHeight = rects.noText && !isDirTop ? 0 : toolbar.offsetHeight;\n      var absoluteLeft = (isDirTop ? rects.left : rects.right) - editorLeft - toolbarWidth / 2 + scrollLeft;\n      var overRight = absoluteLeft + toolbarWidth - editorWidth;\n      var t = (isDirTop ? rects.top - toolbarHeight - arrowMargin : rects.bottom + arrowMargin) - (rects.noText ? 0 : stickyTop) + scrollTop;\n      var l = absoluteLeft < 0 ? padding : overRight < 0 ? absoluteLeft : absoluteLeft - overRight - padding - 1;\n      var resetTop = false;\n      var space = t + (isDirTop ? event._getEditorOffsets(null).top : toolbar.offsetHeight - context.element.wysiwyg.offsetHeight);\n\n      if (!isDirTop && space > 0 && event._getPageBottomSpace() < space) {\n        isDirTop = true;\n        resetTop = true;\n      } else if (isDirTop && _d.documentElement.offsetTop > space) {\n        isDirTop = false;\n        resetTop = true;\n      }\n\n      if (resetTop) t = (isDirTop ? rects.top - toolbarHeight - arrowMargin : rects.bottom + arrowMargin) - (rects.noText ? 0 : stickyTop) + scrollTop;\n      toolbar.style.left = _w.Math.floor(l) + \"px\";\n      toolbar.style.top = _w.Math.floor(t) + \"px\";\n\n      if (isDirTop) {\n        util.removeClass(context.element.arrow, \"ke-arrow-up\");\n        util.addClass(context.element.arrow, \"ke-arrow-down\");\n        context.element.arrow.style.top = toolbarHeight + \"px\";\n      } else {\n        util.removeClass(context.element.arrow, \"ke-arrow-down\");\n        util.addClass(context.element.arrow, \"ke-arrow-up\");\n        context.element.arrow.style.top = -arrowMargin + \"px\";\n      }\n\n      var arrow_left = _w.Math.floor(toolbarWidth / 2 + (absoluteLeft - l));\n\n      context.element.arrow.style.left = (arrow_left + arrowMargin > toolbar.offsetWidth ? toolbar.offsetWidth - arrowMargin : arrow_left < arrowMargin ? arrowMargin : arrow_left) + \"px\";\n    },\n    _showToolbarInline: function _showToolbarInline() {\n      if (!core._isInline) return;\n      var toolbar = context.element.toolbar;\n      if (options.toolbarContainer) toolbar.style.position = \"relative\";else toolbar.style.position = \"absolute\";\n      toolbar.style.visibility = \"hidden\";\n      toolbar.style.display = \"block\";\n      core._inlineToolbarAttr.width = toolbar.style.width = options.toolbarWidth;\n      core._inlineToolbarAttr.top = toolbar.style.top = (options.toolbarContainer ? 0 : -1 - toolbar.offsetHeight) + \"px\";\n      if (typeof functions.showInline === \"function\") functions.showInline(toolbar, context, core);\n      event.onScroll_window();\n      core._inlineToolbarAttr.isShow = true;\n      toolbar.style.visibility = \"\";\n    },\n    _hideToolbar: function _hideToolbar() {\n      if (!core._notHideToolbar && !core._variable.isFullScreen) {\n        context.element.toolbar.style.display = \"none\";\n        core._inlineToolbarAttr.isShow = false;\n      }\n    },\n    onInput_wysiwyg: function onInput_wysiwyg(e) {\n      core._editorRange(); // user event\n\n\n      if (typeof functions.onInput === \"function\" && functions.onInput(e, core) === false) return;\n      var data = (e.data === null ? \"\" : e.data === undefined ? \" \" : e.data) || \"\";\n\n      if (!core._charCount(data)) {\n        e.preventDefault();\n        e.stopPropagation();\n      } // history stack\n\n\n      core.history.push(true);\n    },\n    _isUneditableNode: function _isUneditableNode(range, isFront) {\n      var container = isFront ? range.startContainer : range.endContainer;\n      var offset = isFront ? range.startOffset : range.endOffset;\n      var siblingKey = isFront ? \"previousSibling\" : \"nextSibling\";\n      var isElement = container.nodeType === 1;\n      var siblingNode;\n\n      if (isElement) {\n        siblingNode = event._isUneditableNode_getSibling(container.childNodes[offset], siblingKey, container);\n        return siblingNode && siblingNode.nodeType === 1 && siblingNode.getAttribute(\"contenteditable\") === \"false\";\n      } else {\n        siblingNode = event._isUneditableNode_getSibling(container, siblingKey, container);\n        return core.isEdgePoint(container, offset, isFront ? \"front\" : \"end\") && siblingNode && siblingNode.nodeType === 1 && siblingNode.getAttribute(\"contenteditable\") === \"false\";\n      }\n    },\n    _isUneditableNode_getSibling: function _isUneditableNode_getSibling(selectNode, siblingKey, container) {\n      if (!selectNode) return null;\n      var siblingNode = selectNode[siblingKey];\n\n      if (!siblingNode) {\n        siblingNode = util.getFormatElement(container);\n        siblingNode = siblingNode ? siblingNode[siblingKey] : null;\n        if (siblingNode && !util.isComponent(siblingNode)) siblingNode = siblingKey === \"previousSibling\" ? siblingNode.firstElementChild : siblingNode.lastElementChild;else return null;\n      }\n\n      return siblingNode;\n    },\n    _onShortcutKey: false,\n    onKeyDown_wysiwyg: function onKeyDown_wysiwyg(e) {\n      var keyCode = e.keyCode;\n      var shift = e.shiftKey;\n      var ctrl = e.ctrlKey || e.metaKey || keyCode === 91 || keyCode === 92 || keyCode === 224;\n      var alt = e.altKey;\n      event._IEisComposing = keyCode === 229;\n      core.submenuOff();\n\n      if (core._isBalloon) {\n        event._hideToolbar();\n      } // user event\n\n\n      if (typeof functions.onKeyDown === \"function\" && functions.onKeyDown(e, core) === false) return;\n      /** Shortcuts */\n\n      if (ctrl && event._shortcutCommand(keyCode, shift)) {\n        event._onShortcutKey = true;\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      } else if (event._onShortcutKey) {\n        event._onShortcutKey = false;\n      }\n      /** default key action */\n\n\n      var selectionNode = core.getSelectionNode();\n      var range = core.getRange();\n      var selectRange = !range.collapsed || range.startContainer !== range.endContainer;\n      var fileComponentName = core._fileManager.pluginRegExp.test(core.currentControllerName) ? core.currentControllerName : \"\";\n      var formatEl = util.getFormatElement(selectionNode, null) || selectionNode;\n      var rangeEl = util.getRangeFormatElement(formatEl, null);\n\n      switch (keyCode) {\n        case 8\n        /** backspace key */\n        :\n          if (!selectRange) {\n            if (fileComponentName) {\n              e.preventDefault();\n              e.stopPropagation();\n              core.plugins[fileComponentName].destroy.call(core);\n              break;\n            }\n          }\n\n          if (selectRange && event._hardDelete()) {\n            e.preventDefault();\n            e.stopPropagation();\n            break;\n          }\n\n          if (!util.isFormatElement(formatEl) && !context.element.wysiwyg.firstElementChild && !util.isComponent(selectionNode)) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            core._setDefaultFormat(options.defaultTag);\n\n            return false;\n          }\n\n          if (!selectRange && !formatEl.previousElementSibling && range.startOffset === 0 && !selectionNode.previousSibling && !util.isListCell(formatEl) && util.isFormatElement(formatEl) && (!util.isFreeFormatElement(formatEl) || util.isClosureFreeFormatElement(formatEl))) {\n            // closure range\n            if (util.isClosureRangeFormatElement(formatEl.parentNode)) {\n              e.preventDefault();\n              e.stopPropagation();\n              return false;\n            } // maintain default format\n\n\n            if (util.isWysiwygDiv(formatEl.parentNode) && formatEl.childNodes.length <= 1 && (!formatEl.firstChild || util.onlyZeroWidthSpace(formatEl.textContent))) {\n              e.preventDefault();\n              e.stopPropagation();\n\n              if (formatEl.nodeName.toUpperCase() === options.defaultTag.toUpperCase()) {\n                formatEl.innerHTML = \"<br>\";\n                var attrs = formatEl.attributes;\n\n                while (attrs[0]) {\n                  formatEl.removeAttribute(attrs[0].name);\n                }\n              } else {\n                var defaultFormat = util.createElement(options.defaultTag);\n                defaultFormat.innerHTML = \"<br>\";\n                formatEl.parentElement.replaceChild(defaultFormat, formatEl);\n              }\n\n              core.nativeFocus();\n              return false;\n            }\n          } // clean remove tag\n\n\n          if (formatEl && range.startContainer === range.endContainer && selectionNode.nodeType === 3 && !util.isFormatElement(selectionNode.parentNode)) {\n            if (range.collapsed ? selectionNode.textContent.length === 1 : range.endOffset - range.startOffset === selectionNode.textContent.length) {\n              e.preventDefault();\n              var offset = null;\n              var prev = selectionNode.parentNode.previousSibling;\n              var next = selectionNode.parentNode.nextSibling;\n\n              if (!prev) {\n                if (!next) {\n                  prev = util.createElement(\"BR\");\n                  formatEl.appendChild(prev);\n                } else {\n                  prev = next;\n                  offset = 0;\n                }\n              }\n\n              selectionNode.textContent = \"\";\n              util.removeItemAllParents(selectionNode, null, formatEl);\n              offset = typeof offset === \"number\" ? offset : prev.nodeType === 3 ? prev.textContent.length : 1;\n              core.setRange(prev, offset, prev, offset);\n              break;\n            }\n          } // tag[contenteditable=\"false\"]\n\n\n          if (event._isUneditableNode(range, true)) {\n            e.preventDefault();\n            e.stopPropagation();\n            break;\n          } // nested list\n\n\n          var commonCon = range.commonAncestorContainer;\n          formatEl = util.getFormatElement(range.startContainer, null);\n          rangeEl = util.getRangeFormatElement(formatEl, null);\n\n          if (rangeEl && formatEl && !util.isCell(rangeEl) && !/^FIGCAPTION$/i.test(rangeEl.nodeName)) {\n            if (util.isListCell(formatEl) && util.isList(rangeEl) && (util.isListCell(rangeEl.parentNode) || formatEl.previousElementSibling) && (selectionNode === formatEl || selectionNode.nodeType === 3 && (!selectionNode.previousSibling || util.isList(selectionNode.previousSibling))) && (util.getFormatElement(range.startContainer, null) !== util.getFormatElement(range.endContainer, null) ? rangeEl.contains(range.startContainer) : range.startOffset === 0 && range.collapsed)) {\n              if (range.startContainer !== range.endContainer) {\n                e.preventDefault();\n                core.removeNode();\n\n                if (range.startContainer.nodeType === 3) {\n                  core.setRange(range.startContainer, range.startContainer.textContent.length, range.startContainer, range.startContainer.textContent.length);\n                } // history stack\n\n\n                core.history.push(true);\n              } else {\n                var _prev = formatEl.previousElementSibling || rangeEl.parentNode;\n\n                if (util.isListCell(_prev)) {\n                  e.preventDefault();\n                  var prevLast = _prev;\n\n                  if (!_prev.contains(formatEl) && util.isListCell(prevLast) && util.isList(prevLast.lastElementChild)) {\n                    prevLast = prevLast.lastElementChild.lastElementChild;\n\n                    while (util.isListCell(prevLast) && util.isList(prevLast.lastElementChild)) {\n                      prevLast = prevLast.lastElementChild && prevLast.lastElementChild.lastElementChild;\n                    }\n\n                    _prev = prevLast;\n                  }\n\n                  var con = _prev === rangeEl.parentNode ? rangeEl.previousSibling : _prev.lastChild;\n\n                  if (!con) {\n                    con = util.createTextNode(util.zeroWidthSpace);\n                    rangeEl.parentNode.insertBefore(con, rangeEl.parentNode.firstChild);\n                  }\n\n                  var _offset = con.nodeType === 3 ? con.textContent.length : 1;\n\n                  var children = formatEl.childNodes;\n                  var after = con;\n                  var child = children[0];\n\n                  while (child = children[0]) {\n                    _prev.insertBefore(child, after.nextSibling);\n\n                    after = child;\n                  }\n\n                  util.removeItem(formatEl);\n                  if (rangeEl.children.length === 0) util.removeItem(rangeEl);\n                  core.setRange(con, _offset, con, _offset); // history stack\n\n                  core.history.push(true);\n                }\n              }\n\n              break;\n            } // detach range\n\n\n            if (!selectRange && range.startOffset === 0) {\n              var detach = true;\n              var comm = commonCon;\n\n              while (comm && comm !== rangeEl && !util.isWysiwygDiv(comm)) {\n                if (comm.previousSibling) {\n                  if (comm.previousSibling.nodeType === 1 || !util.onlyZeroWidthSpace(comm.previousSibling.textContent.trim())) {\n                    detach = false;\n                    break;\n                  }\n                }\n\n                comm = comm.parentNode;\n              }\n\n              if (detach && rangeEl.parentNode) {\n                e.preventDefault();\n                core.detachRangeFormatElement(rangeEl, util.isListCell(formatEl) ? [formatEl] : null, null, false, false); // history stack\n\n                core.history.push(true);\n                break;\n              }\n            }\n          } // component\n\n\n          if (!selectRange && formatEl && (range.startOffset === 0 || (selectionNode === formatEl ? !!formatEl.childNodes[range.startOffset] : false))) {\n            var sel = selectionNode === formatEl ? formatEl.childNodes[range.startOffset] : selectionNode;\n            var _prev2 = formatEl.previousSibling; // select file component\n\n            var ignoreZWS = (commonCon.nodeType === 3 || util.isBreak(commonCon)) && !commonCon.previousSibling && range.startOffset === 0;\n\n            if (!sel.previousSibling && (util.isComponent(commonCon.previousSibling) || ignoreZWS && util.isComponent(_prev2))) {\n              var fileComponentInfo = core.getFileComponent(_prev2);\n\n              if (fileComponentInfo) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (formatEl.textContent.length === 0) util.removeItem(formatEl);\n                if (core.selectComponent(fileComponentInfo.target, fileComponentInfo.pluginName) === false) core.blur();\n              } else if (util.isComponent(_prev2)) {\n                e.preventDefault();\n                e.stopPropagation();\n                util.removeItem(_prev2);\n              }\n\n              break;\n            } // delete nonEditable\n\n\n            if (util.isNonEditable(sel.previousSibling)) {\n              e.preventDefault();\n              e.stopPropagation();\n              util.removeItem(sel.previousSibling);\n              break;\n            }\n          }\n\n          break;\n\n        case 46\n        /** delete key */\n        :\n          if (fileComponentName) {\n            e.preventDefault();\n            e.stopPropagation();\n            core.plugins[fileComponentName].destroy.call(core);\n            break;\n          }\n\n          if (selectRange && event._hardDelete()) {\n            e.preventDefault();\n            e.stopPropagation();\n            break;\n          } // tag[contenteditable=\"false\"]\n\n\n          if (event._isUneditableNode(range, false)) {\n            e.preventDefault();\n            e.stopPropagation();\n            break;\n          } // component\n\n\n          if ((util.isFormatElement(selectionNode) || selectionNode.nextSibling === null || util.onlyZeroWidthSpace(selectionNode.nextSibling) && selectionNode.nextSibling.nextSibling === null) && range.startOffset === selectionNode.textContent.length) {\n            var nextEl = formatEl.nextElementSibling;\n            if (!nextEl) break;\n\n            if (util.isComponent(nextEl)) {\n              e.preventDefault();\n\n              if (util.onlyZeroWidthSpace(formatEl)) {\n                util.removeItem(formatEl); // table component\n\n                if (util.isTable(nextEl)) {\n                  var cell = util.getChildElement(nextEl, util.isCell, false);\n                  cell = cell.firstElementChild || cell;\n                  core.setRange(cell, 0, cell, 0);\n                  break;\n                }\n              } // select file component\n\n\n              var _fileComponentInfo = core.getFileComponent(nextEl);\n\n              if (_fileComponentInfo) {\n                e.stopPropagation();\n                if (core.selectComponent(_fileComponentInfo.target, _fileComponentInfo.pluginName) === false) core.blur();\n              } else if (util.isComponent(nextEl)) {\n                e.stopPropagation();\n                util.removeItem(nextEl);\n              }\n\n              break;\n            }\n          }\n\n          if (!selectRange && (core.isEdgePoint(range.endContainer, range.endOffset) || (selectionNode === formatEl ? !!formatEl.childNodes[range.startOffset] : false))) {\n            var _sel = selectionNode === formatEl ? formatEl.childNodes[range.startOffset] : selectionNode; // delete nonEditable\n\n\n            if (util.isNonEditable(_sel.nextSibling)) {\n              e.preventDefault();\n              e.stopPropagation();\n              util.removeItem(_sel.nextSibling);\n              break;\n            }\n          } // nested list\n\n\n          formatEl = util.getFormatElement(range.startContainer, null);\n          rangeEl = util.getRangeFormatElement(formatEl, null);\n\n          if (util.isListCell(formatEl) && util.isList(rangeEl) && (selectionNode === formatEl || selectionNode.nodeType === 3 && (!selectionNode.nextSibling || util.isList(selectionNode.nextSibling)) && (util.getFormatElement(range.startContainer, null) !== util.getFormatElement(range.endContainer, null) ? rangeEl.contains(range.endContainer) : range.endOffset === selectionNode.textContent.length && range.collapsed))) {\n            if (range.startContainer !== range.endContainer) core.removeNode();\n\n            var _next = util.getArrayItem(formatEl.children, util.isList, false);\n\n            _next = _next || formatEl.nextElementSibling || rangeEl.parentNode.nextElementSibling;\n\n            if (_next && (util.isList(_next) || util.getArrayItem(_next.children, util.isList, false))) {\n              e.preventDefault();\n\n              var _con, _children;\n\n              if (util.isList(_next)) {\n                var _child2 = _next.firstElementChild;\n                _children = _child2.childNodes;\n                _con = _children[0];\n\n                while (_children[0]) {\n                  formatEl.insertBefore(_children[0], _next);\n                }\n\n                util.removeItem(_child2);\n              } else {\n                _con = _next.firstChild;\n                _children = _next.childNodes;\n\n                while (_children[0]) {\n                  formatEl.appendChild(_children[0]);\n                }\n\n                util.removeItem(_next);\n              }\n\n              core.setRange(_con, 0, _con, 0); // history stack\n\n              core.history.push(true);\n            }\n\n            break;\n          }\n\n          break;\n\n        case 9\n        /** tab key */\n        :\n          if (fileComponentName || options.tabDisable) break;\n          e.preventDefault();\n          if (ctrl || alt || util.isWysiwygDiv(selectionNode)) break;\n          var isEdge = !range.collapsed || core.isEdgePoint(range.startContainer, range.startOffset);\n          var selectedFormats = core.getSelectedElements(null);\n          selectionNode = core.getSelectionNode();\n          var cells = [];\n          var lines = [];\n          var fc = util.isListCell(selectedFormats[0]),\n              lc = util.isListCell(selectedFormats[selectedFormats.length - 1]);\n          var r = {\n            sc: range.startContainer,\n            so: range.startOffset,\n            ec: range.endContainer,\n            eo: range.endOffset\n          };\n\n          for (var i = 0, len = selectedFormats.length, f; i < len; i++) {\n            f = selectedFormats[i];\n\n            if (util.isListCell(f)) {\n              if (!f.previousElementSibling && !shift) {\n                continue;\n              } else {\n                cells.push(f);\n              }\n            } else {\n              lines.push(f);\n            }\n          } // Nested list\n\n\n          if (cells.length > 0 && isEdge && core.plugins.list) {\n            r = core.plugins.list.editInsideList.call(core, shift, cells);\n          } else {\n            // table\n            var tableCell = util.getParentElement(selectionNode, util.isCell);\n\n            if (tableCell && isEdge) {\n              var table = util.getParentElement(tableCell, \"table\");\n\n              var _cells = util.getListChildren(table, util.isCell);\n\n              var idx = shift ? util.prevIdx(_cells, tableCell) : util.nextIdx(_cells, tableCell);\n              if (idx === _cells.length && !shift) idx = 0;\n              if (idx === -1 && shift) idx = _cells.length - 1;\n              var moveCell = _cells[idx];\n              if (!moveCell) break;\n              moveCell = moveCell.firstElementChild || moveCell;\n              core.setRange(moveCell, 0, moveCell, 0);\n              break;\n            }\n\n            lines = lines.concat(cells);\n            fc = lc = null;\n          } // Lines tab(4)\n\n\n          if (lines.length > 0) {\n            if (!shift) {\n              var tabText = util.createTextNode(new _w.Array(core._variable.tabSize + 1).join(\"\\xA0\"));\n\n              if (lines.length === 1) {\n                var textRange = core.insertNode(tabText, null, true);\n                if (!textRange) return false;\n\n                if (!fc) {\n                  r.sc = tabText;\n                  r.so = textRange.endOffset;\n                }\n\n                if (!lc) {\n                  r.ec = tabText;\n                  r.eo = textRange.endOffset;\n                }\n              } else {\n                var _len13 = lines.length - 1;\n\n                for (var _i25 = 0, _child3; _i25 <= _len13; _i25++) {\n                  _child3 = lines[_i25].firstChild;\n                  if (!_child3) continue;\n\n                  if (util.isBreak(_child3)) {\n                    lines[_i25].insertBefore(tabText.cloneNode(false), _child3);\n                  } else {\n                    _child3.textContent = tabText.textContent + _child3.textContent;\n                  }\n                }\n\n                var firstChild = util.getChildElement(lines[0], \"text\", false);\n                var endChild = util.getChildElement(lines[_len13], \"text\", true);\n\n                if (!fc && firstChild) {\n                  r.sc = firstChild;\n                  r.so = 0;\n                }\n\n                if (!lc && endChild) {\n                  r.ec = endChild;\n                  r.eo = endChild.textContent.length;\n                }\n              }\n            } else {\n              var _len14 = lines.length - 1;\n\n              for (var _i26 = 0, line; _i26 <= _len14; _i26++) {\n                line = lines[_i26].childNodes;\n\n                for (var c = 0, cLen = line.length, _child4; c < cLen; c++) {\n                  _child4 = line[c];\n                  if (!_child4) break;\n                  if (util.onlyZeroWidthSpace(_child4)) continue;\n\n                  if (/^\\s{1,4}$/.test(_child4.textContent)) {\n                    util.removeItem(_child4);\n                  } else if (/^\\s{1,4}/.test(_child4.textContent)) {\n                    _child4.textContent = _child4.textContent.replace(/^\\s{1,4}/, \"\");\n                  }\n\n                  break;\n                }\n              }\n\n              var _firstChild = util.getChildElement(lines[0], \"text\", false);\n\n              var _endChild = util.getChildElement(lines[_len14], \"text\", true);\n\n              if (!fc && _firstChild) {\n                r.sc = _firstChild;\n                r.so = 0;\n              }\n\n              if (!lc && _endChild) {\n                r.ec = _endChild;\n                r.eo = _endChild.textContent.length;\n              }\n            }\n          }\n\n          core.setRange(r.sc, r.so, r.ec, r.eo); // history stack\n\n          core.history.push(false);\n          break;\n\n        case 13\n        /** enter key */\n        :\n          var freeFormatEl = util.getFreeFormatElement(selectionNode, null);\n\n          if (core._charTypeHTML) {\n            var enterHTML = \"\";\n\n            if (!shift && freeFormatEl || shift) {\n              enterHTML = \"<br>\";\n            } else {\n              enterHTML = \"<\" + formatEl.nodeName + \"><br></\" + formatEl.nodeName + \">\";\n            }\n\n            if (!core.checkCharCount(enterHTML, \"byte-html\")) {\n              e.preventDefault();\n              return false;\n            }\n          }\n\n          if (!shift) {\n            var formatInners = core._isEdgeFormat(range.endContainer, range.endOffset, \"end\");\n\n            if (formatInners && /^H[1-6]$/i.test(formatEl.nodeName) || /^HR$/i.test(formatEl.nodeName)) {\n              e.preventDefault();\n              var temp = null;\n              var newFormat = core.appendFormatTag(formatEl, options.defaultTag);\n\n              if (formatInners && formatInners.length > 0) {\n                temp = formatInners.pop();\n                var innerNode = temp;\n\n                while (formatInners.length > 0) {\n                  temp = temp.appendChild(formatInners.pop());\n                }\n\n                newFormat.appendChild(innerNode);\n              }\n\n              temp = !temp ? newFormat.firstChild : temp.appendChild(newFormat.firstChild);\n              core.setRange(temp, 0, temp, 0);\n              break;\n            }\n\n            if (freeFormatEl) {\n              e.preventDefault();\n              var selectionFormat = selectionNode === freeFormatEl;\n              var wSelection = core.getSelection();\n              var _children2 = selectionNode.childNodes,\n                  _offset2 = wSelection.focusOffset,\n                  _prev3 = selectionNode.previousElementSibling,\n                  _next2 = selectionNode.nextSibling;\n\n              if (!util.isClosureFreeFormatElement(freeFormatEl) && !!_children2 && (selectionFormat && range.collapsed && _children2.length - 1 <= _offset2 + 1 && util.isBreak(_children2[_offset2]) && (!_children2[_offset2 + 1] || (!_children2[_offset2 + 2] || util.onlyZeroWidthSpace(_children2[_offset2 + 2].textContent)) && _children2[_offset2 + 1].nodeType === 3 && util.onlyZeroWidthSpace(_children2[_offset2 + 1].textContent)) && _offset2 > 0 && util.isBreak(_children2[_offset2 - 1]) || !selectionFormat && util.onlyZeroWidthSpace(selectionNode.textContent) && util.isBreak(_prev3) && (util.isBreak(_prev3.previousSibling) || !util.onlyZeroWidthSpace(_prev3.previousSibling.textContent)) && (!_next2 || !util.isBreak(_next2) && util.onlyZeroWidthSpace(_next2.textContent)))) {\n                if (selectionFormat) util.removeItem(_children2[_offset2 - 1]);else util.removeItem(selectionNode);\n                var newEl = core.appendFormatTag(freeFormatEl, util.isFormatElement(freeFormatEl.nextElementSibling) ? freeFormatEl.nextElementSibling : null);\n                util.copyFormatAttributes(newEl, freeFormatEl);\n                core.setRange(newEl, 1, newEl, 1);\n                break;\n              }\n\n              if (selectionFormat) {\n                functions.insertHTML(range.collapsed && util.isBreak(range.startContainer.childNodes[range.startOffset - 1]) ? \"<br>\" : \"<br><br>\", true, false);\n                var focusNode = wSelection.focusNode;\n                var wOffset = wSelection.focusOffset;\n\n                if (freeFormatEl === focusNode) {\n                  focusNode = focusNode.childNodes[wOffset - _offset2 > 1 ? wOffset - 1 : wOffset];\n                }\n\n                core.setRange(focusNode, 1, focusNode, 1);\n              } else {\n                var focusNext = wSelection.focusNode.nextSibling;\n                var br = util.createElement(\"BR\");\n                core.insertNode(br, null, false);\n                var brPrev = br.previousSibling,\n                    brNext = br.nextSibling;\n\n                if (!util.isBreak(focusNext) && !util.isBreak(brPrev) && (!brNext || util.onlyZeroWidthSpace(brNext))) {\n                  br.parentNode.insertBefore(br.cloneNode(false), br);\n                  core.setRange(br, 1, br, 1);\n                } else {\n                  core.setRange(brNext, 0, brNext, 0);\n                }\n              }\n\n              event._onShortcutKey = true;\n              break;\n            }\n          }\n\n          if (selectRange) break;\n\n          if (rangeEl && formatEl && !util.isCell(rangeEl) && !/^FIGCAPTION$/i.test(rangeEl.nodeName)) {\n            var _range = core.getRange();\n\n            if (core.isEdgePoint(_range.endContainer, _range.endOffset) && util.isList(selectionNode.nextSibling)) {\n              e.preventDefault();\n\n              var _newEl = util.createElement(\"LI\");\n\n              var _br2 = util.createElement(\"BR\");\n\n              _newEl.appendChild(_br2);\n\n              formatEl.parentNode.insertBefore(_newEl, formatEl.nextElementSibling);\n\n              _newEl.appendChild(selectionNode.nextSibling);\n\n              core.setRange(_br2, 1, _br2, 1);\n              break;\n            }\n\n            if ((_range.commonAncestorContainer.nodeType === 3 ? !_range.commonAncestorContainer.nextElementSibling : true) && util.onlyZeroWidthSpace(formatEl.innerText.trim())) {\n              e.preventDefault();\n              var _newEl2 = null;\n\n              if (util.isListCell(rangeEl.parentNode)) {\n                rangeEl = formatEl.parentNode.parentNode.parentNode;\n                _newEl2 = util.splitElement(formatEl, null, util.getElementDepth(formatEl) - 2);\n\n                if (!_newEl2) {\n                  var newListCell = util.createElement(\"LI\");\n                  newListCell.innerHTML = \"<br>\";\n                  rangeEl.insertBefore(newListCell, _newEl2);\n                  _newEl2 = newListCell;\n                }\n              } else {\n                var _newFormat = util.isCell(rangeEl.parentNode) ? \"DIV\" : util.isList(rangeEl.parentNode) ? \"LI\" : util.isFormatElement(rangeEl.nextElementSibling) ? rangeEl.nextElementSibling.nodeName : util.isFormatElement(rangeEl.previousElementSibling) ? rangeEl.previousElementSibling.nodeName : options.defaultTag;\n\n                _newEl2 = util.createElement(_newFormat);\n                var edge = core.detachRangeFormatElement(rangeEl, [formatEl], null, true, true);\n                edge.cc.insertBefore(_newEl2, edge.ec);\n              }\n\n              _newEl2.innerHTML = \"<br>\";\n              util.copyFormatAttributes(_newEl2, formatEl);\n              util.removeItemAllParents(formatEl, null, null);\n              core.setRange(_newEl2, 1, _newEl2, 1);\n              break;\n            }\n          }\n\n          if (rangeEl && util.getParentElement(rangeEl, \"FIGCAPTION\") && util.getParentElement(rangeEl, util.isList)) {\n            e.preventDefault();\n            formatEl = core.appendFormatTag(formatEl, null);\n            core.setRange(formatEl, 0, formatEl, 0);\n          }\n\n          if (fileComponentName) {\n            e.preventDefault();\n            e.stopPropagation();\n            var compContext = context[fileComponentName];\n            var container = compContext._container;\n            var sibling = container.previousElementSibling || container.nextElementSibling;\n            var _newEl3 = null;\n\n            if (util.isListCell(container.parentNode)) {\n              _newEl3 = util.createElement(\"BR\");\n            } else {\n              _newEl3 = util.createElement(util.isFormatElement(sibling) ? sibling.nodeName : options.defaultTag);\n              _newEl3.innerHTML = \"<br>\";\n            }\n\n            container.parentNode.insertBefore(_newEl3, container);\n            core.callPlugin(fileComponentName, function () {\n              if (core.selectComponent(compContext._element, fileComponentName) === false) core.blur();\n            }, null);\n          }\n\n          break;\n\n        case 27:\n          if (fileComponentName) {\n            e.preventDefault();\n            e.stopPropagation();\n            core.controllersOff();\n            return false;\n          }\n\n          break;\n      }\n\n      if (shift && keyCode === 16) {\n        e.preventDefault();\n        e.stopPropagation();\n        var tablePlugin = core.plugins.table;\n\n        if (tablePlugin && !tablePlugin._shift && !tablePlugin._ref) {\n          var _cell = util.getParentElement(formatEl, util.isCell);\n\n          if (_cell) {\n            tablePlugin.onTableCellMultiSelect.call(core, _cell, true);\n            return;\n          }\n        }\n      } else if (shift && (util.isOSX_IOS ? alt : ctrl) && keyCode === 32) {\n        e.preventDefault();\n        e.stopPropagation();\n        var nbsp = core.insertNode(util.createTextNode(\"\\xA0\"));\n\n        if (nbsp && nbsp.container) {\n          core.setRange(nbsp.container, nbsp.endOffset, nbsp.container, nbsp.endOffset);\n          return;\n        }\n      }\n\n      var textKey = !ctrl && !alt && !selectRange && !event._nonTextKeyCode.test(keyCode);\n\n      if (textKey && range.collapsed && range.startContainer === range.endContainer && util.isBreak(range.commonAncestorContainer)) {\n        var zeroWidth = util.createTextNode(util.zeroWidthSpace);\n        core.insertNode(zeroWidth, null, false);\n        core.setRange(zeroWidth, 1, zeroWidth, 1);\n      }\n    },\n    onKeyUp_wysiwyg: function onKeyUp_wysiwyg(e) {\n      if (event._onShortcutKey) return;\n\n      core._editorRange();\n\n      var range = core.getRange();\n      var keyCode = e.keyCode;\n      var ctrl = e.ctrlKey || e.metaKey || keyCode === 91 || keyCode === 92 || keyCode === 224;\n      var alt = e.altKey;\n      var selectionNode = core.getSelectionNode();\n\n      if (core._isBalloon && (core._isBalloonAlways && keyCode !== 27 || !range.collapsed)) {\n        if (core._isBalloonAlways) {\n          if (keyCode !== 27) event._showToolbarBalloonDelay();\n        } else {\n          event._showToolbarBalloon();\n\n          return;\n        }\n      } // user event\n\n\n      if (typeof functions.onKeyUp === \"function\" && functions.onKeyUp(e, core) === false) return;\n      /** when format tag deleted */\n\n      if (keyCode === 8 && util.isWysiwygDiv(selectionNode) && selectionNode.textContent === \"\" && selectionNode.children.length === 0) {\n        e.preventDefault();\n        e.stopPropagation();\n        selectionNode.innerHTML = \"\";\n        var oFormatTag = util.createElement(util.isFormatElement(core._variable.currentNodes[0]) ? core._variable.currentNodes[0] : options.defaultTag);\n        oFormatTag.innerHTML = \"<br>\";\n        selectionNode.appendChild(oFormatTag);\n        core.setRange(oFormatTag, 0, oFormatTag, 0);\n\n        event._applyTagEffects();\n\n        core.history.push(false);\n        return;\n      }\n\n      var formatEl = util.getFormatElement(selectionNode, null);\n      var rangeEl = util.getRangeFormatElement(selectionNode, null);\n\n      if ((!formatEl && range.collapsed || formatEl === rangeEl) && !util.isComponent(selectionNode) && !util.isList(selectionNode)) {\n        core._setDefaultFormat(util.isRangeFormatElement(rangeEl) ? \"DIV\" : options.defaultTag);\n\n        selectionNode = core.getSelectionNode();\n      }\n\n      if (event._directionKeyCode.test(keyCode)) {\n        event._applyTagEffects();\n      }\n\n      var textKey = !ctrl && !alt && !event._nonTextKeyCode.test(keyCode);\n\n      if (textKey && selectionNode.nodeType === 3 && util.zeroWidthRegExp.test(selectionNode.textContent) && !(e.isComposing !== undefined ? e.isComposing : event._IEisComposing)) {\n        var so = range.startOffset,\n            eo = range.endOffset;\n        var frontZeroWidthCnt = (selectionNode.textContent.substring(0, eo).match(event._frontZeroWidthReg) || \"\").length;\n        so = range.startOffset - frontZeroWidthCnt;\n        eo = range.endOffset - frontZeroWidthCnt;\n        selectionNode.textContent = selectionNode.textContent.replace(util.zeroWidthRegExp, \"\");\n        core.setRange(selectionNode, so < 0 ? 0 : so, selectionNode, eo < 0 ? 0 : eo);\n      }\n\n      core._charCount(\"\"); // history stack\n\n\n      core.history.push(true);\n    },\n    onScroll_wysiwyg: function onScroll_wysiwyg(e) {\n      core.controllersOff();\n      if (core._isBalloon) event._hideToolbar(); // user event\n\n      if (typeof functions.onScroll === \"function\") functions.onScroll(e, core);\n    },\n    onFocus_wysiwyg: function onFocus_wysiwyg(e) {\n      if (core._antiBlur) return;\n      core.hasFocus = true;\n\n      event._applyTagEffects();\n\n      if (core._isInline) event._showToolbarInline(); // user event\n\n      if (typeof functions.onFocus === \"function\") functions.onFocus(e, core);\n    },\n    onBlur_wysiwyg: function onBlur_wysiwyg(e) {\n      if (core._antiBlur || core._variable.isCodeView) return;\n      core.hasFocus = false;\n      core.controllersOff();\n      if (core._isInline || core._isBalloon) event._hideToolbar(); // user event\n\n      if (typeof functions.onBlur === \"function\") functions.onBlur(e, core); // active class reset of buttons\n\n      var commandMap = core.commandMap;\n      var activePlugins = core.activePlugins;\n\n      for (var key in commandMap) {\n        if (!util.hasOwn(commandMap, key)) continue;\n\n        if (activePlugins.indexOf(key) > -1) {\n          plugins[key].active.call(core, null);\n        } else if (commandMap.OUTDENT && /^OUTDENT$/i.test(key)) {\n          commandMap.OUTDENT.setAttribute(\"disabled\", true);\n        } else if (commandMap.INDENT && /^INDENT$/i.test(key)) {\n          commandMap.INDENT.removeAttribute(\"disabled\");\n        } else {\n          util.removeClass(commandMap[key], \"active\");\n        }\n      }\n\n      core._variable.currentNodes = [];\n      core._variable.currentNodesMap = [];\n      if (options.showPathLabel) context.element.navigation.textContent = \"\";\n    },\n    onMouseDown_resizingBar: function onMouseDown_resizingBar(e) {\n      e.stopPropagation();\n      core.submenuOff();\n      core.controllersOff();\n      var prevHeight = util.getNumber(context.element.wysiwygFrame.style.height, 0);\n      core._variable.resizeClientY = e.clientY;\n      context.element.resizeBackground.style.display = \"block\";\n\n      function closureFunc() {\n        context.element.resizeBackground.style.display = \"none\";\n\n        _d.removeEventListener(\"mousemove\", event._resize_editor);\n\n        _d.removeEventListener(\"mouseup\", closureFunc);\n\n        if (typeof functions.onResizeEditor === \"function\") functions.onResizeEditor(util.getNumber(context.element.wysiwygFrame.style.height, 0), prevHeight, core);\n      }\n\n      _d.addEventListener(\"mousemove\", event._resize_editor);\n\n      _d.addEventListener(\"mouseup\", closureFunc);\n    },\n    _resize_editor: function _resize_editor(e) {\n      var resizeInterval = context.element.editorArea.offsetHeight + (e.clientY - core._variable.resizeClientY);\n      context.element.wysiwygFrame.style.height = context.element.code.style.height = (resizeInterval < core._variable.minResizingSize ? core._variable.minResizingSize : resizeInterval) + \"px\";\n      core._variable.resizeClientY = e.clientY;\n    },\n    onResize_window: function onResize_window() {\n      core.controllersOff();\n      var responsiveSize = event._responsiveButtonSize;\n\n      if (responsiveSize) {\n        var w = 0;\n\n        if ((core._isBalloon || core._isInline) && options.toolbarWidth === \"auto\") {\n          w = context.element.topArea.offsetWidth;\n        } else {\n          w = context.element.toolbar.offsetWidth;\n        }\n\n        var responsiveWidth = \"default\";\n\n        for (var i = 1, len = responsiveSize.length; i < len; i++) {\n          if (w < responsiveSize[i]) {\n            responsiveWidth = responsiveSize[i] + \"\";\n            break;\n          }\n        }\n\n        if (event._responsiveCurrentSize !== responsiveWidth) {\n          event._responsiveCurrentSize = responsiveWidth;\n          functions.setToolbarButtons(event._responsiveButtons[responsiveWidth]);\n        }\n      }\n\n      if (context.element.toolbar.offsetWidth === 0) return;\n\n      if (context.fileBrowser && context.fileBrowser.area.style.display === \"block\") {\n        context.fileBrowser.body.style.maxHeight = _w.innerHeight - context.fileBrowser.header.offsetHeight - 50 + \"px\";\n      }\n\n      if (core.submenuActiveButton && core.submenu) {\n        core._setMenuPosition(core.submenuActiveButton, core.submenu);\n      }\n\n      if (core._variable.isFullScreen) {\n        core._variable.innerHeight_fullScreen += _w.innerHeight - context.element.toolbar.offsetHeight - core._variable.innerHeight_fullScreen;\n        context.element.editorArea.style.height = core._variable.innerHeight_fullScreen + \"px\";\n        return;\n      }\n\n      if (core._variable.isCodeView && core._isInline) {\n        event._showToolbarInline();\n\n        return;\n      }\n\n      core._iframeAutoHeight();\n\n      if (core._sticky) {\n        context.element.toolbar.style.width = context.element.topArea.offsetWidth - 2 + \"px\";\n        event.onScroll_window();\n      }\n    },\n    onScroll_window: function onScroll_window() {\n      if (core._variable.isFullScreen || context.element.toolbar.offsetWidth === 0 || options.stickyToolbar < 0) return;\n      var element = context.element;\n      var editorHeight = element.editorArea.offsetHeight;\n      var y = (this.scrollY || _d.documentElement.scrollTop) + options.stickyToolbar;\n      var editorTop = event._getEditorOffsets(options.toolbarContainer).top - (core._isInline ? element.toolbar.offsetHeight : 0);\n      var inlineOffset = core._isInline && y - editorTop > 0 ? y - editorTop - context.element.toolbar.offsetHeight : 0;\n\n      if (y < editorTop) {\n        event._offStickyToolbar();\n      } else if (y + core._variable.minResizingSize >= editorHeight + editorTop) {\n        if (!core._sticky) event._onStickyToolbar(inlineOffset);\n        element.toolbar.style.top = inlineOffset + editorHeight + editorTop + options.stickyToolbar - y - core._variable.minResizingSize + \"px\";\n      } else if (y >= editorTop) {\n        event._onStickyToolbar(inlineOffset);\n      }\n    },\n    _getEditorOffsets: function _getEditorOffsets(container) {\n      var offsetEl = container || context.element.topArea;\n      var t = 0,\n          l = 0,\n          s = 0;\n\n      while (offsetEl) {\n        t += offsetEl.offsetTop;\n        l += offsetEl.offsetLeft;\n        s += offsetEl.scrollTop;\n        offsetEl = offsetEl.offsetParent;\n      }\n\n      return {\n        top: t,\n        left: l,\n        scroll: s\n      };\n    },\n    _getPageBottomSpace: function _getPageBottomSpace() {\n      return _d.documentElement.scrollHeight - (event._getEditorOffsets(null).top + context.element.topArea.offsetHeight);\n    },\n    _onStickyToolbar: function _onStickyToolbar(inlineOffset) {\n      var element = context.element;\n\n      if (!core._isInline && !options.toolbarContainer) {\n        element.stickyDummy.style.height = element.toolbar.offsetHeight + \"px\";\n        element.stickyDummy.style.display = \"block\";\n      }\n\n      element.toolbar.style.top = options.stickyToolbar + inlineOffset + \"px\";\n      element.toolbar.style.width = core._isInline ? core._inlineToolbarAttr.width : element.toolbar.offsetWidth + \"px\";\n      util.addClass(element.toolbar, \"ke-toolbar-sticky\");\n      core._sticky = true;\n    },\n    _offStickyToolbar: function _offStickyToolbar() {\n      var element = context.element;\n      element.stickyDummy.style.display = \"none\";\n      element.toolbar.style.top = core._isInline ? core._inlineToolbarAttr.top : \"\";\n      element.toolbar.style.width = core._isInline ? core._inlineToolbarAttr.width : \"\";\n      element.editorArea.style.marginTop = \"\";\n      util.removeClass(element.toolbar, \"ke-toolbar-sticky\");\n      core._sticky = false;\n    },\n    _codeViewAutoHeight: function _codeViewAutoHeight() {\n      context.element.code.style.height = context.element.code.scrollHeight + \"px\";\n    },\n    // FireFox - table delete, Chrome - image, video, audio\n    _hardDelete: function _hardDelete() {\n      var range = core.getRange();\n      var sc = range.startContainer;\n      var ec = range.endContainer; // table\n\n      var sCell = util.getRangeFormatElement(sc);\n      var eCell = util.getRangeFormatElement(ec);\n      var sIsCell = util.isCell(sCell);\n      var eIsCell = util.isCell(eCell);\n\n      if ((sIsCell && !sCell.previousElementSibling && !sCell.parentElement.previousElementSibling || eIsCell && !eCell.nextElementSibling && !eCell.parentElement.nextElementSibling) && sCell !== eCell) {\n        if (!sIsCell) {\n          util.removeItem(util.getParentElement(eCell, util.isComponent));\n        } else if (!eIsCell) {\n          util.removeItem(util.getParentElement(sCell, util.isComponent));\n        } else {\n          util.removeItem(util.getParentElement(sCell, util.isComponent));\n          core.nativeFocus();\n          return true;\n        }\n      } // component\n\n\n      var sComp = sc.nodeType === 1 ? util.getParentElement(sc, \".ke-component\") : null;\n      var eComp = ec.nodeType === 1 ? util.getParentElement(ec, \".ke-component\") : null;\n      if (sComp) util.removeItem(sComp);\n      if (eComp) util.removeItem(eComp);\n      return false;\n    },\n    onPaste_wysiwyg: function onPaste_wysiwyg(e) {\n      var clipboardData = util.isIE ? _w.clipboardData : e.clipboardData;\n      if (!clipboardData) return true;\n      return event._dataTransferAction(\"paste\", e, clipboardData);\n    },\n    _setClipboardComponent: function _setClipboardComponent(e, info, clipboardData) {\n      e.preventDefault();\n      e.stopPropagation();\n      clipboardData.setData(\"text/html\", info.component.outerHTML);\n    },\n    onCopy_wysiwyg: function onCopy_wysiwyg(e) {\n      var clipboardData = util.isIE ? _w.clipboardData : e.clipboardData; // user event\n\n      if (typeof functions.onCopy === \"function\" && !functions.onCopy(e, clipboardData, core)) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n\n      var info = core.currentFileComponentInfo;\n\n      if (info && !util.isIE) {\n        event._setClipboardComponent(e, info, clipboardData);\n\n        util.addClass(info.component, \"ke-component-copy\"); // copy effect\n\n        _w.setTimeout(function () {\n          util.removeClass(info.component, \"ke-component-copy\");\n        }, 150);\n      }\n    },\n    onCut_wysiwyg: function onCut_wysiwyg(e) {\n      var clipboardData = util.isIE ? _w.clipboardData : e.clipboardData; // user event\n\n      if (typeof functions.onCut === \"function\" && !functions.onCut(e, clipboardData, core)) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n\n      var info = core.currentFileComponentInfo;\n\n      if (info && !util.isIE) {\n        event._setClipboardComponent(e, info, clipboardData);\n\n        util.removeItem(info.component);\n        core.controllersOff();\n      }\n\n      _w.setTimeout(function () {\n        // history stack\n        core.history.push(false);\n      });\n    },\n    onDrop_wysiwyg: function onDrop_wysiwyg(e) {\n      var dataTransfer = e.dataTransfer;\n      if (!dataTransfer) return true;\n\n      if (util.isIE) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n\n      core.removeNode();\n\n      event._setDropLocationSelection(e);\n\n      return event._dataTransferAction(\"drop\", e, dataTransfer);\n    },\n    _setDropLocationSelection: function _setDropLocationSelection(e) {\n      if (e.rangeParent) {\n        core.setRange(e.rangeParent, e.rangeOffset, e.rangeParent, e.rangeOffset);\n      } else if (core._wd.caretRangeFromPoint) {\n        var r = core._wd.caretRangeFromPoint(e.clientX, e.clientY);\n\n        core.setRange(r.startContainer, r.startOffset, r.endContainer, r.endOffset);\n      } else {\n        var _r2 = core.getRange();\n\n        core.setRange(_r2.startContainer, _r2.startOffset, _r2.endContainer, _r2.endOffset);\n      }\n    },\n    _dataTransferAction: function _dataTransferAction(type, e, data) {\n      var plainText, cleanData;\n\n      if (util.isIE) {\n        plainText = data.getData(\"Text\");\n        var range = core.getRange();\n        var tempDiv = util.createElement(\"DIV\");\n        var tempRange = {\n          sc: range.startContainer,\n          so: range.startOffset,\n          ec: range.endContainer,\n          eo: range.endOffset\n        };\n        tempDiv.setAttribute(\"contenteditable\", true);\n        tempDiv.style.cssText = \"position:absolute; top:0; left:0; width:1px; height:1px; overflow:hidden;\";\n        context.element.relative.appendChild(tempDiv);\n        tempDiv.focus();\n\n        _w.setTimeout(function () {\n          cleanData = tempDiv.innerHTML;\n          util.removeItem(tempDiv);\n          core.setRange(tempRange.sc, tempRange.so, tempRange.ec, tempRange.eo);\n\n          event._setClipboardData(type, e, plainText, cleanData, data);\n        });\n\n        return true;\n      } else {\n        plainText = data.getData(\"text/plain\");\n        cleanData = data.getData(\"text/html\");\n\n        if (event._setClipboardData(type, e, plainText, cleanData, data) === false) {\n          e.preventDefault();\n          e.stopPropagation();\n          return false;\n        }\n      }\n    },\n    _setClipboardData: function _setClipboardData(type, e, plainText, cleanData, data) {\n      // MS word, OneNode, Excel\n      var MSData = /class=[\"']*Mso(Normal|List)/i.test(cleanData) || /content=[\"']*Word.Document/i.test(cleanData) || /content=[\"']*OneNote.File/i.test(cleanData) || /content=[\"']*Excel.Sheet/i.test(cleanData);\n      var onlyText = !cleanData;\n\n      if (!onlyText) {\n        if (MSData) {\n          cleanData = cleanData.replace(/\\n/g, \" \");\n          plainText = plainText.replace(/\\n/g, \" \");\n        } else {\n          cleanData = (plainText === cleanData ? plainText : cleanData).replace(/\\n/g, \"<br>\");\n        }\n\n        cleanData = core.cleanHTML(cleanData, core.pasteTagsWhitelistRegExp);\n      } else {\n        cleanData = util._HTMLConvertor(plainText).replace(/\\n/g, \"<br>\");\n      }\n\n      var maxCharCount = core._charCount(core._charTypeHTML ? cleanData : plainText); // user event - paste\n\n\n      if (type === \"paste\" && typeof functions.onPaste === \"function\") {\n        var value = functions.onPaste(e, cleanData, maxCharCount, core);\n        if (!value) return false;\n        if (typeof value === \"string\") cleanData = value;\n      } // user event - drop\n\n\n      if (type === \"drop\" && typeof functions.onDrop === \"function\") {\n        var _value = functions.onDrop(e, cleanData, maxCharCount, core);\n\n        if (!_value) return false;\n        if (typeof _value === \"string\") cleanData = _value;\n      } // files\n\n\n      var files = data.files;\n\n      if (files.length > 0 && !MSData) {\n        if (/^image/.test(files[0].type) && core.plugins.image) {\n          functions.insertImage(files);\n        }\n\n        return false;\n      }\n\n      if (!maxCharCount) {\n        return false;\n      }\n\n      if (cleanData) {\n        functions.insertHTML(cleanData, true, false);\n        return false;\n      }\n    },\n    onMouseMove_wysiwyg: function onMouseMove_wysiwyg(e) {\n      if (core.isDisabled) return;\n      var component = util.getParentElement(e.target, util.isComponent);\n      var lineBreakerStyle = core.lineBreaker.style;\n\n      if (component && !core.currentControllerName) {\n        var ctxEl = context.element;\n        var scrollTop = 0;\n        var el = ctxEl.wysiwyg;\n\n        do {\n          scrollTop += el.scrollTop;\n          el = el.parentElement;\n        } while (el && !/^(BODY|HTML)$/i.test(el.nodeName));\n\n        var wScroll = ctxEl.wysiwyg.scrollTop;\n\n        var offsets = event._getEditorOffsets(null);\n\n        var componentTop = util.getOffset(component, ctxEl.wysiwygFrame).top + wScroll;\n        var y = e.pageY + scrollTop + (options.iframe && !options.toolbarContainer ? ctxEl.toolbar.offsetHeight : 0);\n        var c = componentTop + (options.iframe ? scrollTop : offsets.top);\n        var isList = util.isListCell(component.parentNode);\n        var dir = \"\",\n            top = \"\";\n\n        if ((isList ? !component.previousSibling : !util.isFormatElement(component.previousElementSibling)) && y < c + 20) {\n          top = componentTop;\n          dir = \"t\";\n        } else if ((isList ? !component.nextSibling : !util.isFormatElement(component.nextElementSibling)) && y > c + component.offsetHeight - 20) {\n          top = componentTop + component.offsetHeight;\n          dir = \"b\";\n        } else {\n          lineBreakerStyle.display = \"none\";\n          return;\n        }\n\n        core._variable._lineBreakComp = component;\n        core._variable._lineBreakDir = dir;\n        lineBreakerStyle.top = top - wScroll + \"px\";\n        core.lineBreakerButton.style.left = util.getOffset(component).left + component.offsetWidth / 2 - 15 + \"px\";\n        lineBreakerStyle.display = \"block\";\n      } // off line breaker\n      else if (lineBreakerStyle.display !== \"none\") {\n          lineBreakerStyle.display = \"none\";\n        }\n    },\n    _onMouseDown_lineBreak: function _onMouseDown_lineBreak(e) {\n      e.preventDefault();\n    },\n    _onLineBreak: function _onLineBreak(e) {\n      e.preventDefault();\n      var component = core._variable._lineBreakComp;\n      var dir = !this ? core._variable._lineBreakDir : this;\n      var isList = util.isListCell(component.parentNode);\n      var format = util.createElement(isList ? \"BR\" : util.isCell(component.parentNode) ? \"DIV\" : options.defaultTag);\n      if (!isList) format.innerHTML = \"<br>\";\n      if (core._charTypeHTML && !core.checkCharCount(format.outerHTML, \"byte-html\")) return;\n      component.parentNode.insertBefore(format, dir === \"t\" ? component : component.nextSibling);\n      core.lineBreaker.style.display = \"none\";\n      core._variable._lineBreakComp = null;\n      var focusEl = isList ? format : format.firstChild;\n      core.setRange(focusEl, 1, focusEl, 1); // history stack\n\n      core.history.push(false);\n    },\n    _addEvent: function _addEvent() {\n      var eventWysiwyg = options.iframe ? core._ww : context.element.wysiwyg;\n      /** toolbar event */\n\n      context.element.toolbar.addEventListener(\"mousedown\", event._buttonsEventHandler, false);\n      context.element.menuTray.addEventListener(\"mousedown\", event._buttonsEventHandler, false);\n      context.element.toolbar.addEventListener(\"click\", event.onClick_toolbar, false);\n      /** editor area */\n\n      eventWysiwyg.addEventListener(\"mousedown\", event.onMouseDown_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"click\", event.onClick_wysiwyg, false);\n      eventWysiwyg.addEventListener(util.isIE ? \"textinput\" : \"input\", event.onInput_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"keydown\", event.onKeyDown_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"keyup\", event.onKeyUp_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"paste\", event.onPaste_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"copy\", event.onCopy_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"cut\", event.onCut_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"drop\", event.onDrop_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"scroll\", event.onScroll_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"focus\", event.onFocus_wysiwyg, false);\n      eventWysiwyg.addEventListener(\"blur\", event.onBlur_wysiwyg, false);\n      /** line breaker */\n\n      event.lineBreakerBind = {\n        a: event._onLineBreak.bind(\"\"),\n        t: event._onLineBreak.bind(\"t\"),\n        b: event._onLineBreak.bind(\"b\")\n      };\n      eventWysiwyg.addEventListener(\"mousemove\", event.onMouseMove_wysiwyg, false);\n      core.lineBreakerButton.addEventListener(\"mousedown\", event._onMouseDown_lineBreak, false);\n      core.lineBreakerButton.addEventListener(\"click\", event.lineBreakerBind.a, false);\n      context.element.lineBreaker_t.addEventListener(\"mousedown\", event.lineBreakerBind.t, false);\n      context.element.lineBreaker_b.addEventListener(\"mousedown\", event.lineBreakerBind.b, false);\n      /** Events are registered only when there is a table plugin.  */\n\n      if (core.plugins.table) {\n        eventWysiwyg.addEventListener(\"touchstart\", event.onMouseDown_wysiwyg, {\n          passive: true,\n          useCapture: false\n        });\n      }\n      /** code view area auto line */\n\n\n      if (options.height === \"auto\" && !options.codeMirrorEditor) {\n        context.element.code.addEventListener(\"keydown\", event._codeViewAutoHeight, false);\n        context.element.code.addEventListener(\"keyup\", event._codeViewAutoHeight, false);\n        context.element.code.addEventListener(\"paste\", event._codeViewAutoHeight, false);\n      }\n      /** resizingBar */\n\n\n      if (context.element.resizingBar) {\n        if (/\\d+/.test(options.height)) {\n          context.element.resizingBar.addEventListener(\"mousedown\", event.onMouseDown_resizingBar, false);\n        } else {\n          util.addClass(context.element.resizingBar, \"ke-resizing-none\");\n        }\n      }\n      /** window event */\n\n\n      event._setResponsiveToolbar();\n\n      _w.removeEventListener(\"resize\", event.onResize_window);\n\n      _w.removeEventListener(\"scroll\", event.onScroll_window);\n\n      _w.addEventListener(\"resize\", event.onResize_window, false);\n\n      if (options.stickyToolbar > -1) {\n        _w.addEventListener(\"scroll\", event.onScroll_window, false);\n      }\n    },\n    _removeEvent: function _removeEvent() {\n      var eventWysiwyg = options.iframe ? core._ww : context.element.wysiwyg;\n      context.element.toolbar.removeEventListener(\"mousedown\", event._buttonsEventHandler);\n      context.element.menuTray.removeEventListener(\"mousedown\", event._buttonsEventHandler);\n      context.element.toolbar.removeEventListener(\"click\", event.onClick_toolbar);\n      eventWysiwyg.removeEventListener(\"mousedown\", event.onMouseDown_wysiwyg);\n      eventWysiwyg.removeEventListener(\"click\", event.onClick_wysiwyg);\n      eventWysiwyg.removeEventListener(util.isIE ? \"textinput\" : \"input\", event.onInput_wysiwyg);\n      eventWysiwyg.removeEventListener(\"keydown\", event.onKeyDown_wysiwyg);\n      eventWysiwyg.removeEventListener(\"keyup\", event.onKeyUp_wysiwyg);\n      eventWysiwyg.removeEventListener(\"paste\", event.onPaste_wysiwyg);\n      eventWysiwyg.removeEventListener(\"copy\", event.onCopy_wysiwyg);\n      eventWysiwyg.removeEventListener(\"cut\", event.onCut_wysiwyg);\n      eventWysiwyg.removeEventListener(\"drop\", event.onDrop_wysiwyg);\n      eventWysiwyg.removeEventListener(\"scroll\", event.onScroll_wysiwyg);\n      eventWysiwyg.removeEventListener(\"mousemove\", event.onMouseMove_wysiwyg);\n      core.lineBreakerButton.removeEventListener(\"mousedown\", event._onMouseDown_lineBreak);\n      core.lineBreakerButton.removeEventListener(\"click\", event.lineBreakerBind.a);\n      context.element.lineBreaker_t.removeEventListener(\"mousedown\", event.lineBreakerBind.t);\n      context.element.lineBreaker_b.removeEventListener(\"mousedown\", event.lineBreakerBind.b);\n      event.lineBreakerBind = null;\n      eventWysiwyg.removeEventListener(\"touchstart\", event.onMouseDown_wysiwyg, {\n        passive: true,\n        useCapture: false\n      });\n      eventWysiwyg.removeEventListener(\"focus\", event.onFocus_wysiwyg);\n      eventWysiwyg.removeEventListener(\"blur\", event.onBlur_wysiwyg);\n      context.element.code.removeEventListener(\"keydown\", event._codeViewAutoHeight);\n      context.element.code.removeEventListener(\"keyup\", event._codeViewAutoHeight);\n      context.element.code.removeEventListener(\"paste\", event._codeViewAutoHeight);\n\n      if (context.element.resizingBar) {\n        context.element.resizingBar.removeEventListener(\"mousedown\", event.onMouseDown_resizingBar);\n      }\n\n      _w.removeEventListener(\"resize\", event.onResize_window);\n\n      _w.removeEventListener(\"scroll\", event.onScroll_window);\n    },\n    _setResponsiveToolbar: function _setResponsiveToolbar() {\n      if (_responsiveButtons.length === 0) {\n        _responsiveButtons = null;\n        return;\n      }\n\n      event._responsiveCurrentSize = \"default\";\n      var sizeArray = event._responsiveButtonSize = [];\n      var buttonsObj = event._responsiveButtons = {\n        default: _responsiveButtons[0]\n      };\n\n      for (var i = 1, len = _responsiveButtons.length, size, buttonGroup; i < len; i++) {\n        buttonGroup = _responsiveButtons[i];\n        size = buttonGroup[0] * 1;\n        sizeArray.push(size);\n        buttonsObj[size] = buttonGroup[1];\n      }\n\n      sizeArray.sort(function (a, b) {\n        return a - b;\n      }).unshift(\"default\");\n    }\n  };\n  /** functions */\n\n  var functions = {\n    /**\r\n     * @description Core, Util object\r\n     */\n    core: core,\n    util: util,\n\n    /**\r\n     * @description Event functions\r\n     * @param {Object} e Event Object\r\n     * @param {Object} core Core object\r\n     */\n    onload: null,\n    onScroll: null,\n    onMouseDown: null,\n    onClick: null,\n    onInput: null,\n    onKeyDown: null,\n    onKeyUp: null,\n    onCopy: null,\n    onCut: null,\n    onFocus: null,\n    onBlur: null,\n\n    /**\r\n     * @description Event functions\r\n     * @param {String} contents Current contents\r\n     * @param {Object} core Core object\r\n     */\n    onChange: null,\n\n    /**\r\n     * @description Event functions (drop, paste)\r\n     * When false is returned, the default behavior is stopped.\r\n     * If the string is returned, the cleanData value is modified to the return value.\r\n     * @param {Object} e Event object.\r\n     * @param {String} cleanData HTML string modified for editor format.\r\n     * @param {Boolean} maxChartCount option (true if max character is exceeded)\r\n     * @param {Object} core Core object\r\n     * @returns {Boolean|String}\r\n     */\n    onDrop: null,\n    onPaste: null,\n\n    /**\r\n     * @description Called just before the inline toolbar is positioned and displayed on the screen.\r\n     * @param {Element} toolbar Toolbar Element\r\n     * @param {Object} context The editor's context object (editor.getContext())\r\n     * @param {Object} core Core object\r\n     */\n    showInline: null,\n\n    /**\r\n     * @description Called just after the controller is positioned and displayed on the screen.\r\n     * controller - editing elements displayed on the screen [image resizing, table editor, link editor..]]\r\n     * @param {String} name The name of the plugin that called the controller\r\n     * @param {Array} controllers Array of Controller elements\r\n     * @param {Object} core Core object\r\n     */\n    showController: null,\n\n    /**\r\n     * @description An event when toggling between code view and wysiwyg view.\r\n     * @param {Boolean} isCodeView Whether the current code view mode\r\n     * @param {Object} core Core object\r\n     */\n    toggleCodeView: null,\n\n    /**\r\n     * @description An event when toggling full screen.\r\n     * @param {Boolean} isFullScreen Whether the current full screen mode\r\n     * @param {Object} core Core object\r\n     */\n    toggleFullScreen: null,\n\n    /**\r\n     * @description It replaces the default callback function of the image upload\r\n     * @param {Object} response Response object\r\n     * @param {Object} info Input information\r\n     * - linkValue: Link url value\r\n     * - linkNewWindow: Open in new window Check Value\r\n     * - inputWidth: Value of width input\r\n     * - inputHeight: Value of height input\r\n     * - align: Align Check Value\r\n     * - isUpdate: Update image if true, create image if false\r\n     * - element: If isUpdate is true, the currently selected image.\r\n     * @param {Object} core Core object\r\n     */\n    imageUploadHandler: null,\n\n    /**\r\n     * @description It replaces the default callback function of the video upload\r\n     * @param xmlHttp xmlHttpRequest object\r\n     * @param info Input information\r\n     * - inputWidth: Value of width input\r\n     * - inputHeight: Value of height input\r\n     * - align: Align Check Value\r\n     * - isUpdate: Update video if true, create video if false\r\n     * - element: If isUpdate is true, the currently selected video.\r\n     * @param core Core object\r\n     */\n    videoUploadHandler: null,\n\n    /**\r\n     * @description It replaces the default callback function of the audio upload\r\n     * @param xmlHttp xmlHttpRequest object\r\n     * @param info Input information\r\n     * - isUpdate: Update audio if true, create audio if false\r\n     * - element: If isUpdate is true, the currently selected audio.\r\n     * @param core Core object\r\n     */\n    audioUploadHandler: null,\n\n    /**\r\n     * @description Called before the image is uploaded\r\n     * If true is returned, the internal upload process runs normally.\r\n     * If false is returned, no image upload is performed.\r\n     * If new fileList are returned,  replaced the previous fileList\r\n     * If undefined is returned, it waits until \"uploadHandler\" is executed.\r\n     * @param {Array} files Files array\r\n     * @param {Object} info info: {\r\n     * - linkValue: Link url value\r\n     * - linkNewWindow: Open in new window Check Value\r\n     * - inputWidth: Value of width input\r\n     * - inputHeight: Value of height input\r\n     * - align: Align Check Value\r\n     * - isUpdate: Update image if true, create image if false\r\n     * - element: If isUpdate is true, the currently selected image.\r\n     * }\r\n     * @param {Object} core Core object\r\n     * @param {Function} uploadHandler If undefined is returned, it waits until \"uploadHandler\" is executed.\r\n     *                \"uploadHandler\" is an upload function with \"core\" and \"info\" bound.\r\n     *                [upload files] : uploadHandler(files or [new File(...),])\r\n     *                [error]        : uploadHandler(\"Error message\")\r\n     *                [Just finish]  : uploadHandler()\r\n     *                [directly register] : uploadHandler(response) // Same format as \"imageUploadUrl\" response\r\n     *                                   ex) {\r\n     *                                      // \"errorMessage\": \"insert error message\",\r\n     *                                      \"result\": [ { \"url\": \"...\", \"name\": \"...\", \"size\": \"999\" }, ]\r\n     *                                   }\r\n     * @returns {Boolean|Array|undefined}\r\n     */\n    onImageUploadBefore: null,\n\n    /**\r\n     * @description Called before the video is uploaded\r\n     * If true is returned, the internal upload process runs normally.\r\n     * If false is returned, no video(iframe, video) upload is performed.\r\n     * If new fileList are returned,  replaced the previous fileList\r\n     * If undefined is returned, it waits until \"uploadHandler\" is executed.\r\n     * @param {Array} files Files array\r\n     * @param {Object} info info: {\r\n     * - inputWidth: Value of width input\r\n     * - inputHeight: Value of height input\r\n     * - align: Align Check Value\r\n     * - isUpdate: Update video if true, create video if false\r\n     * - element: If isUpdate is true, the currently selected video.\r\n     * }\r\n     * @param {Object} core Core object\r\n     * @param {Function} uploadHandler If undefined is returned, it waits until \"uploadHandler\" is executed.\r\n     *                \"uploadHandler\" is an upload function with \"core\" and \"info\" bound.\r\n     *                [upload files] : uploadHandler(files or [new File(...),])\r\n     *                [error]        : uploadHandler(\"Error message\")\r\n     *                [Just finish]  : uploadHandler()\r\n     *                [directly register] : uploadHandler(response) // Same format as \"videoUploadUrl\" response\r\n     *                                   ex) {\r\n     *                                      // \"errorMessage\": \"insert error message\",\r\n     *                                      \"result\": [ { \"url\": \"...\", \"name\": \"...\", \"size\": \"999\" }, ]\r\n     *                                   }\r\n     * @returns {Boolean|Array|undefined}\r\n     */\n    onVideoUploadBefore: null,\n\n    /**\r\n     * @description Called before the audio is uploaded\r\n     * If true is returned, the internal upload process runs normally.\r\n     * If false is returned, no audio upload is performed.\r\n     * If new fileList are returned,  replaced the previous fileList\r\n     * If undefined is returned, it waits until \"uploadHandler\" is executed.\r\n     * @param {Array} files Files array\r\n     * @param {Object} info info: {\r\n     * - isUpdate: Update audio if true, create audio if false\r\n     * - element: If isUpdate is true, the currently selected audio.\r\n     * }\r\n     * @param {Object} core Core object\r\n     * @param {Function} uploadHandler If undefined is returned, it waits until \"uploadHandler\" is executed.\r\n     *                \"uploadHandler\" is an upload function with \"core\" and \"info\" bound.\r\n     *                [upload files] : uploadHandler(files or [new File(...),])\r\n     *                [error]        : uploadHandler(\"Error message\")\r\n     *                [Just finish]  : uploadHandler()\r\n     *                [directly register] : uploadHandler(response) // Same format as \"audioUploadUrl\" response\r\n     *                                   ex) {\r\n     *                                      // \"errorMessage\": \"insert error message\",\r\n     *                                      \"result\": [ { \"url\": \"...\", \"name\": \"...\", \"size\": \"999\" }, ]\r\n     *                                   }\r\n     * @returns {Boolean|Array|undefined}\r\n     */\n    onAudioUploadBefore: null,\n\n    /**\r\n     * @description Called when the image is uploaded, updated, deleted\r\n     * @param {Element} targetElement Target element\r\n     * @param {Number} index Uploaded index\r\n     * @param {String} state Upload status ('create', 'update', 'delete')\r\n     * @param {Object} info Image info object\r\n     * - index: data index\r\n     * - name: file name\r\n     * - size: file size\r\n     * - select: select function\r\n     * - delete: delete function\r\n     * - element: target element\r\n     * - src: src attribute of tag\r\n     * @param {Number} remainingFilesCount Count of remaining files to upload (0 when added as a url)\r\n     * @param {Object} core Core object\r\n     */\n    onImageUpload: null,\n\n    /**\r\n     * @description Called when the video(iframe, video) is is uploaded, updated, deleted\r\n     * -- arguments is same \"onImageUpload\" --\r\n     */\n    onVideoUpload: null,\n\n    /**\r\n     * @description Called when the audio is is uploaded, updated, deleted\r\n     * -- arguments is same \"onImageUpload\" --\r\n     */\n    onAudioUpload: null,\n\n    /**\r\n     * @description Called when the image is upload failed\r\n     * @param {String} errorMessage Error message\r\n     * @param {Object} result Response Object\r\n     * @param {Object} core Core object\r\n     * @returns {Boolean}\r\n     */\n    onImageUploadError: null,\n\n    /**\r\n     * @description Called when the video(iframe, video) upload failed\r\n     * -- arguments is same \"onImageUploadError\" --\r\n     */\n    onVideoUploadError: null,\n\n    /**\r\n     * @description Called when the audio upload failed\r\n     * -- arguments is same \"onImageUploadError\" --\r\n     */\n    onAudioUploadError: null,\n\n    /**\r\n     * @description Called when the editor is resized using the bottom bar\r\n     */\n    onResizeEditor: null,\n\n    /**\r\n     * @description Reset the buttons on the toolbar. (Editor is not reloaded)\r\n     * You cannot set a new plugin for the button.\r\n     * @param {Array} toolbarItem Button list\r\n     */\n    setToolbarButtons: function setToolbarButtons(toolbarItem) {\n      core.submenuOff();\n      core.containerOff();\n\n      var newToolbar = _constructor.default._createToolBar(_d, toolbarItem, core.plugins, options);\n\n      _responsiveButtons = newToolbar.responsiveButtons;\n      core._moreLayerActiveButton = null;\n\n      event._setResponsiveToolbar();\n\n      context.element.toolbar.replaceChild(newToolbar.buttonTray, context.element.buttonTray);\n      var newContext = (0, _context.default)(context.element.originElement, core._getConstructed(context.element), options);\n      context.element = newContext.element;\n      context.tool = newContext.tool;\n      if (options.iframe) context.element.wysiwyg = core._wd.body;\n\n      core._cachingButtons();\n\n      core.history._resetCachingButton();\n\n      core.activePlugins = [];\n      var oldCallButtons = pluginCallButtons;\n      pluginCallButtons = newToolbar.pluginCallButtons;\n      var plugin, button, oldButton;\n\n      for (var key in pluginCallButtons) {\n        if (!util.hasOwn(pluginCallButtons, key)) continue;\n        plugin = plugins[key];\n        button = pluginCallButtons[key];\n\n        if (plugin.active && button) {\n          oldButton = oldCallButtons[key];\n          core.callPlugin(key, null, oldButton || button);\n\n          if (oldButton) {\n            button.parentElement.replaceChild(oldButton, button);\n            pluginCallButtons[key] = oldButton;\n          }\n        }\n      }\n\n      if (core.hasFocus) event._applyTagEffects();\n      if (core._variable.isCodeView) util.addClass(core._styleCommandMap.codeView, \"active\");\n      if (core._variable.isFullScreen) util.addClass(core._styleCommandMap.fullScreen, \"active\");\n      if (util.hasClass(context.element.wysiwyg, \"ke-show-block\")) util.addClass(core._styleCommandMap.showBlocks, \"active\");\n    },\n\n    /**\r\n     * @description Add or reset option property (Editor is reloaded)\r\n     * @param {Object} _options Options\r\n     */\n    setOptions: function setOptions(_options) {\n      event._removeEvent();\n\n      core._resetComponents();\n\n      util.removeClass(core._styleCommandMap.showBlocks, \"active\");\n      util.removeClass(core._styleCommandMap.codeView, \"active\");\n      core._variable.isCodeView = false;\n      core._iframeAuto = null;\n      core.plugins = _options.plugins || core.plugins;\n      var mergeOptions = [options, _options].reduce(function (init, option) {\n        for (var key in option) {\n          if (!util.hasOwn(option, key)) continue;\n\n          if (key === \"plugins\" && option[key] && init[key]) {\n            (function () {\n              var i = init[key],\n                  o = option[key];\n              i = i.length ? i : _w.Object.keys(i).map(function (name) {\n                return i[name];\n              });\n              o = o.length ? o : _w.Object.keys(o).map(function (name) {\n                return o[name];\n              });\n              init[key] = o.filter(function (val) {\n                return i.indexOf(val) === -1;\n              }).concat(i);\n            })();\n          } else {\n            init[key] = option[key];\n          }\n        }\n\n        return init;\n      }, {});\n      var el = context.element;\n      var _initHTML = el.wysiwyg.innerHTML; // set option\n\n      var cons = _constructor.default._setOptions(mergeOptions, context, options);\n\n      if (cons.callButtons) {\n        pluginCallButtons = cons.callButtons;\n        core.initPlugins = {};\n      }\n\n      if (cons.plugins) {\n        core.plugins = plugins = cons.plugins;\n      } // reset context\n\n\n      if (el.menuTray.children.length === 0) this.menuTray = {};\n      _responsiveButtons = cons.toolbar.responsiveButtons;\n      core.options = options = mergeOptions;\n      core.lang = lang = options.lang;\n\n      if (options.iframe) {\n        el.wysiwygFrame.addEventListener(\"load\", function () {\n          util._setIframeDocument(this, options);\n\n          core._setOptionsInit(el, _initHTML);\n        });\n      }\n\n      el.editorArea.appendChild(el.wysiwygFrame);\n\n      if (!options.iframe) {\n        core._setOptionsInit(el, _initHTML);\n      }\n    },\n\n    /**\r\n     * @description Set \"options.defaultStyle\" style.\r\n     * Define the style of the edit area\r\n     * It can also be defined with the \"setOptions\" method, but the \"setDefaultStyle\" method does not render the editor again.\r\n     * @param {String} style Style string\r\n     */\n    setDefaultStyle: function setDefaultStyle(style) {\n      var newStyles = options._editorStyles = util._setDefaultOptionStyle(options, style);\n\n      var el = context.element; // top area\n\n      el.topArea.style.cssText = newStyles.top; // code view\n\n      el.code.style.cssText = options._editorStyles.frame;\n      el.code.style.display = \"none\";\n\n      if (options.height === \"auto\") {\n        el.code.style.overflow = \"hidden\";\n      } else {\n        el.code.style.overflow = \"\";\n      } // wysiwyg frame\n\n\n      if (!options.iframe) {\n        el.wysiwygFrame.style.cssText = newStyles.frame + newStyles.editor;\n      } else {\n        el.wysiwygFrame.style.cssText = newStyles.frame;\n        el.wysiwyg.style.cssText = newStyles.editor;\n      }\n    },\n\n    /**\r\n     * @description Open a notice area\r\n     * @param {String} message Notice message\r\n     */\n    noticeOpen: function noticeOpen(message) {\n      core.notice.open.call(core, message);\n    },\n\n    /**\r\n     * @description Close a notice area\r\n     */\n    noticeClose: function noticeClose() {\n      core.notice.close.call(core);\n    },\n\n    /**\r\n     * @description Copying the contents of the editor to the original textarea\r\n     */\n    save: function save() {\n      context.element.originElement.value = core.getContents(false);\n    },\n\n    /**\r\n     * @description Gets the KothingEditor's context object. Contains settings, plugins, and cached element objects\r\n     * @returns {Object}\r\n     */\n    getContext: function getContext() {\n      return context;\n    },\n\n    /**\r\n     * @description Gets the contents of the KothingEditor\r\n     * @param {Boolean} onlyContents - Return only the contents of the body without headers when the \"fullPage\" option is true\r\n     * @returns {String}\r\n     */\n    getContents: function getContents(onlyContents) {\n      return core.getContents(onlyContents);\n    },\n\n    /**\r\n     * @description Gets only the text of the KothingEditor contents\r\n     * @returns {String}\r\n     */\n    getText: function getText() {\n      return context.element.wysiwyg.textContent;\n    },\n\n    /**\r\n     * @description Get the editor's number of characters or binary data size.\r\n     * You can use the \"charCounterType\" option format.\r\n     * @param {String|null} charCounterType options - charCounterType ('char', 'byte', 'byte-html')\r\n     * If argument is no value, the currently set \"charCounterType\" option is used.\r\n     * @returns {Number}\r\n     */\n    getCharCount: function getCharCount(charCounterType) {\n      charCounterType = typeof charCounterType === \"string\" ? charCounterType : options.charCounterType;\n      return core.getCharLength(core._charTypeHTML ? context.element.wysiwyg.innerHTML : context.element.wysiwyg.textContent, charCounterType);\n    },\n\n    /**\r\n     * @description Gets uploaded images informations\r\n     * - index: data index\r\n     * - name: file name\r\n     * - size: file size\r\n     * - select: select function\r\n     * - delete: delete function\r\n     * - element: target element\r\n     * - src: src attribute of tag\r\n     * @returns {Array}\r\n     */\n    getImagesInfo: function getImagesInfo() {\n      return context.image ? context.image._infoList : [];\n    },\n\n    /**\r\n     * @description Gets uploaded files(plugin using fileManager) information list.\r\n     * image: [img], video: [video, iframe], audio: [audio]\r\n     * When the argument value is 'image', it is the same function as \"getImagesInfo\".\r\n     * - index: data index\r\n     * - name: file name\r\n     * - size: file size\r\n     * - select: select function\r\n     * - delete: delete function\r\n     * - element: target element\r\n     * - src: src attribute of tag\r\n     * @param {String} pluginName Plugin name (image, video, audio)\r\n     * @returns {Array}\r\n     */\n    getFilesInfo: function getFilesInfo(pluginName) {\n      return context[pluginName] ? context[pluginName]._infoList : [];\n    },\n\n    /**\r\n     * @description Upload images using image plugin\r\n     * @param {FileList} files FileList\r\n     */\n    insertImage: function insertImage(files) {\n      if (!core.plugins.image || !files) return;\n      if (!core.initPlugins.image) core.callPlugin(\"image\", core.plugins.image.submitAction.bind(core, files), null);else core.plugins.image.submitAction.call(core, files);\n      core.focus();\n    },\n\n    /**\r\n     * @description Inserts an HTML element or HTML string or plain string at the current cursor position\r\n     * @param {Element|String} html HTML Element or HTML string or plain string\r\n     * @param {Boolean} notCleaningData If true, inserts the HTML string without refining it with core.cleanHTML.\r\n     * @param {Boolean} checkCharCount If true, if \"options.maxCharCount\" is exceeded when \"element\" is added, null is returned without addition.\r\n     * @param {Boolean} rangeSelection If true, range select the inserted node.\r\n     */\n    insertHTML: function insertHTML(html, notCleaningData, checkCharCount, rangeSelection) {\n      if (typeof html === \"string\") {\n        if (!notCleaningData) html = core.cleanHTML(html, null);\n\n        try {\n          var dom = _d.createRange().createContextualFragment(html);\n\n          var domTree = dom.childNodes;\n\n          if (checkCharCount) {\n            var type = core._charTypeHTML ? \"outerHTML\" : \"textContent\";\n            var checkHTML = \"\";\n\n            for (var i = 0, len = domTree.length; i < len; i++) {\n              checkHTML += domTree[i][type];\n            }\n\n            if (!core.checkCharCount(checkHTML, null)) return;\n          }\n\n          var c, a, t, prev, firstCon;\n\n          while (c = domTree[0]) {\n            if (prev && prev.nodeType === 3 && a && a.nodeType === 1 && util.isBreak(c)) {\n              prev = c;\n              util.removeItem(c);\n              continue;\n            }\n\n            t = core.insertNode(c, a, false);\n            a = t.container || t;\n            if (!firstCon) firstCon = t;\n            prev = c;\n          }\n\n          if (prev.nodeType === 3 && a.nodeType === 1) a = prev;\n          var offset = a.nodeType === 3 ? t.endOffset || a.textContent.length : a.childNodes.length;\n          if (rangeSelection) core.setRange(firstCon.container || firstCon, firstCon.startOffset || 0, a, offset);else core.setRange(a, offset, a, offset);\n        } catch (error) {\n          console.warn(\"[KothingEditor.insertHTML.fail] \" + error);\n          core.execCommand(\"insertHTML\", false, html);\n        }\n      } else {\n        if (util.isComponent(html)) {\n          core.insertComponent(html, false, checkCharCount, false);\n        } else {\n          var afterNode = null;\n\n          if (util.isFormatElement(html) || util.isMedia(html)) {\n            afterNode = util.getFormatElement(core.getSelectionNode(), null);\n          }\n\n          core.insertNode(html, afterNode, checkCharCount);\n        }\n      }\n\n      core.effectNode = null;\n      core.focus(); // history stack\n\n      core.history.push(false);\n    },\n\n    /**\r\n     * @description Change the contents of the KothingEditor\r\n     * @param {String|undefined} contents Contents to Input\r\n     */\n    setContents: function setContents(contents) {\n      core.setContents(contents);\n    },\n\n    /**\r\n     * @description Add contents to the KothingEditor\r\n     * @param {String} contents Contents to Input\r\n     */\n    appendContents: function appendContents(contents) {\n      var convertValue = core.convertContentsForEditor(contents);\n\n      if (!core._variable.isCodeView) {\n        var temp = util.createElement(\"DIV\");\n        temp.innerHTML = convertValue;\n        var wysiwyg = context.element.wysiwyg;\n        var children = temp.children;\n\n        for (var i = 0, len = children.length; i < len; i++) {\n          wysiwyg.appendChild(children[i]);\n        }\n      } else {\n        core._setCodeView(core._getCodeView() + \"\\n\" + core.convertHTMLForCodeView(convertValue));\n      } // history stack\n\n\n      core.history.push(false);\n    },\n\n    /**\r\n     * @description Disable the KothingEditor\r\n     */\n    disabled: function disabled() {\n      context.tool.cover.style.display = \"block\";\n      context.element.wysiwyg.setAttribute(\"contenteditable\", false);\n      core.isDisabled = true;\n\n      if (options.codeMirrorEditor) {\n        options.codeMirrorEditor.setOption(\"readOnly\", true);\n      } else {\n        context.element.code.setAttribute(\"disabled\", \"disabled\");\n      }\n    },\n\n    /**\r\n     * @description Enable the KothingEditor\r\n     */\n    enabled: function enabled() {\n      context.tool.cover.style.display = \"none\";\n      context.element.wysiwyg.setAttribute(\"contenteditable\", true);\n      core.isDisabled = false;\n\n      if (options.codeMirrorEditor) {\n        options.codeMirrorEditor.setOption(\"readOnly\", false);\n      } else {\n        context.element.code.removeAttribute(\"disabled\");\n      }\n    },\n\n    /**\r\n     * @description Show the KothingEditor\r\n     */\n    show: function show() {\n      var topAreaStyle = context.element.topArea.style;\n      if (topAreaStyle.display === \"none\") topAreaStyle.display = options.display;\n    },\n\n    /**\r\n     * @description Hide the KothingEditor\r\n     */\n    hide: function hide() {\n      context.element.topArea.style.display = \"none\";\n    },\n\n    /**\r\n     * @description Destroy the KothingEditor\r\n     */\n    destroy: function destroy() {\n      /** off menus */\n      core.submenuOff();\n      core.containerOff();\n      core.controllersOff();\n      if (core.notice) core.notice.close.call(core);\n      if (core.modalForm) core.plugins.dialog.close.call(core);\n      /** remove history */\n\n      core.history._destroy();\n      /** remove event listeners */\n\n\n      event._removeEvent();\n      /** remove element */\n\n\n      util.removeItem(context.element.toolbar);\n      util.removeItem(context.element.topArea);\n      /** remove object reference */\n\n      for (var k in core.functions) {\n        if (util.hasOwn(core, k)) delete core.functions[k];\n      }\n\n      for (var _k in core) {\n        if (util.hasOwn(core, _k)) delete core[_k];\n      }\n\n      for (var _k2 in event) {\n        if (util.hasOwn(event, _k2)) delete event[_k2];\n      }\n\n      for (var _k3 in context) {\n        if (util.hasOwn(context, _k3)) delete context[_k3];\n      }\n\n      for (var _k4 in pluginCallButtons) {\n        if (util.hasOwn(pluginCallButtons, _k4)) delete pluginCallButtons[_k4];\n      }\n      /** remove user object */\n\n\n      for (var _k5 in this) {\n        if (util.hasOwn(this, _k5)) delete this[_k5];\n      }\n    },\n\n    /**\r\n     * @description Toolbar methods\r\n     */\n    toolbar: {\n      /**\r\n       * @description Disable the toolbar\r\n       */\n      disabled: function disabled() {\n        context.tool.cover.style.display = \"block\";\n      },\n\n      /**\r\n       * @description Enable the toolbar\r\n       */\n      enabled: function enabled() {\n        context.tool.cover.style.display = \"none\";\n      },\n\n      /**\r\n       * @description Show the toolbar\r\n       */\n      show: function show() {\n        if (core._isInline) {\n          event._showToolbarInline();\n        } else {\n          context.element.toolbar.style.display = \"\";\n          context.element.stickyDummy.style.display = \"\";\n        }\n      },\n\n      /**\r\n       * @description Hide the toolbar\r\n       */\n      hide: function hide() {\n        if (core._isInline) {\n          event._hideToolbar();\n        } else {\n          context.element.toolbar.style.display = \"none\";\n          context.element.stickyDummy.style.display = \"none\";\n        }\n      }\n    }\n  };\n  /************ Core init ************/\n  // functions\n\n  core.functions = functions;\n  core.options = options; // Create to sibling node\n\n  var contextEl = context.element;\n  var originEl = contextEl.originElement;\n  var topEl = contextEl.topArea;\n  originEl.style.display = \"none\";\n  topEl.style.display = \"block\"; // init\n\n  if (options.iframe) {\n    contextEl.wysiwygFrame.addEventListener(\"load\", function () {\n      util._setIframeDocument(this, options);\n\n      core._editorInit(false, options.value);\n\n      options.value = null;\n    });\n  } // insert editor element\n\n\n  if (_typeof(originEl.nextElementSibling) === \"object\") {\n    originEl.parentNode.insertBefore(topEl, originEl.nextElementSibling);\n  } else {\n    originEl.parentNode.appendChild(topEl);\n  }\n\n  contextEl.editorArea.appendChild(contextEl.wysiwygFrame);\n  contextEl = originEl = topEl = null; // init\n\n  if (!options.iframe) {\n    core._editorInit(false, options.value);\n\n    options.value = null;\n  }\n\n  return functions;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{staticClass:\"mx-1 py-2\"},[_c('v-col',{staticClass:\"d-flex justify-center align-center flex-column\",attrs:{\"cols\":\"12\"}},[_c('v-row',{staticClass:\"py-1\"},[(!_vm.disabled)?_c('v-col',{staticStyle:{\"position\":\"relative\"},attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"820\"}},[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"editor\"},[_c('textarea',{ref:\"editor\",staticClass:\"full-width\",attrs:{\"id\":\"editor\"}})]),_c('v-btn',{staticStyle:{\"position\":\"absolute\",\"top\":\"30px\",\"right\":\"-40px\",\"z-index\":\"11\"},attrs:{\"color\":\"primary\",\"dark\":\"\",\"title\":_vm.$t('orders.form.fields.select_template'),\"icon\":\"\"},on:{\"click\":function($event){return _vm.toggle()}}},[_c('v-icon',[_vm._v(\"mdi-text-box-plus-outline\")])],1)],1)],1)],1):_vm._e(),(_vm.model && _vm.disabled)?_c('v-col',{staticClass:\"editor\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-4\",attrs:{\"width\":\"820\"}},[(_vm.model)?_c('div',{staticClass:\"full-width\",attrs:{\"id\":\"content\"},domProps:{\"innerHTML\":_vm._s(_vm.model)}}):_vm._e()])],1):_vm._e()],1),(!_vm.disabled)?_c('v-row',{staticClass:\"actions mt-15 full-width\"},[_c('v-col',{staticClass:\"ml-3 pa-2\"},[_c('v-col',{staticClass:\"d-flex align-center justify-end\",attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticClass:\"ml-2\",attrs:{\"color\":\"primary\",\"depressed\":\"\",\"outlined\":\"\",\"text\":\"\",\"disabled\":_vm.isLoading},on:{\"click\":function($event){return _vm.close()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"global-buttons.cancel\"))+\" \")]),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"color\":\"primary\",\"depressed\":\"\",\"disabled\":_vm.isLoading},on:{\"click\":_vm.submit}},[(_vm.isLoading)?_c('v-progress-circular',{staticStyle:{\"position\":\"absolute\"},attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.$t(\"global-buttons.save\"))+\" \")],1)],1)],1)],1):_vm._e()],1),_c('v-dialog',{attrs:{\"scrollable\":\"\",\"persistent\":\"\",\"max-width\":\"800px\",\"max-height\":\"600\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"d-block\"},[_c('span',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"orders.form.fields.select_template\"))+\" \")]),_c('v-select',{attrs:{\"label\":_vm.$t('orders.form.fields.select_one_template'),\"items\":_vm.templates},on:{\"input\":_vm.getTemplate}})],1),(_vm.dialog)?_c('v-card-text',[(_vm.selectedTemplate)?_c('v-card',{staticClass:\"pa-3\",attrs:{\"id\":\"content\"},domProps:{\"innerHTML\":_vm._s(_vm.selectedTemplate)}}):_vm._e()],1):_vm._e(),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.toggle()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"global-buttons.cancel\"))+\" \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.setEditorsContent()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"global-buttons.select\"))+\" \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from \"vue\";\nimport API from \"@/api/API\";\nimport store from \"@/store\";\n\nimport KothingEditor from \"kothing-editor\";\nimport kothingConfig from \"../config/editorConfig.json\";\nimport plugins from \"kothing-editor/lib/plugins\";\nimport \"kothing-editor/dist/css/kothing-editor.min.css\";\n\nexport default Vue.extend({\n  name: \"OrderTemplate\",\n\n  props: {\n    orderId: {\n      type: Number,\n      required: false\n    },\n    disabled: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  data: () => ({\n    kothingConfig,\n    headerImage: require(\"@/assets/images/aaij-print-template-header.png\"),\n    logo1: require(\"@/assets/images/logo_1.jpg\"),\n    logo2: require(\"@/assets/images/logo_2.jpg\"),\n    model: \"\" as string,\n    templates: [] as Array<SelectComponentInterface>,\n    errorMessages: {} as any,\n    dialog: false as boolean,\n    isLoading: false as boolean,\n    selectedTemplate: \"\" as string,\n    queryNumber: \"\" as string\n  }),\n\n  watch: {\n    disabled: {\n      immediate: true,\n      handler() {\n        if (!this.disabled) {\n          setTimeout(() => {\n            this.createEditor();\n            this.setEditorsContent();\n          }, 300);\n        }\n      }\n    }\n  },\n\n  async mounted() {\n    try {\n      const { content } = await API.orders().getDocumentContent(this.orderId);\n      const { order } = await API.orders().getForEdit(this.orderId);\n      const templates = await API.documentTemplates().getList(2);\n\n      this.model = content;\n      this.templates = templates;\n      this.queryNumber = order.number;\n    } catch (e) {\n      await store.dispatch(\"alert/showError\", e.message);\n    }\n  },\n\n  methods: {\n    async submit(): Promise<void> {\n      this.isLoading = true;\n      try {\n        const { content } = await this.$API\n          .orders()\n          .saveDocumentContent(this.orderId, {\n            content: this.editor.getContents()\n          });\n        this.model = content;\n        await this.$emit(\"save\");\n      } catch (e) {\n        if (e.hasOwnProperty(\"errors\")) {\n          this.errorMessages = e.errors;\n          setTimeout(() => {\n            this.errorMessages = {};\n          }, 2000);\n        }\n        await this.$store.dispatch(\"alert/showError\", e.message);\n      }\n      this.isLoading = false;\n    },\n    createEditor(): void {\n      this.editor = KothingEditor.create(\"editor\", {\n        plugins: plugins,\n        mode: \"classic\",\n        ...this.kothingConfig\n      });\n    },\n    async setEditorsContent(): Promise<void> {\n      if (this.selectedTemplate) {\n        this.model = this.selectedTemplate;\n        this.toggle();\n      }\n      this.editor.setContents(this.model);\n    },\n    async getTemplate(event: number): Promise<void> {\n      try {\n        const response = await this.$API\n          .documentTemplates()\n          .show(event, this.orderId);\n\n        this.selectedTemplate = response.content;\n      } catch (e) {\n        await this.$store.dispatch(\"alert/showError\", e.message);\n      }\n    },\n    toggle() {\n      this.dialog = !this.dialog;\n      this.selectedTemplate = \"\";\n    },\n    close() {\n      this.$emit(\"save\", this.selectedTemplate);\n    }\n  }\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTemplate.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTemplate.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./orderTemplate.vue?vue&type=template&id=832ebdd8&scoped=true&\"\nimport script from \"./orderTemplate.vue?vue&type=script&lang=ts&\"\nexport * from \"./orderTemplate.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./orderTemplate.vue?vue&type=style&index=0&id=832ebdd8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"832ebdd8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VIcon,VProgressCircular,VRow,VSelect,VSpacer})\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _core = _interopRequireDefault(require(\"./lib/core\"));\n\nvar _util = _interopRequireDefault(require(\"./lib/util\"));\n\nvar _constructor = _interopRequireDefault(require(\"./lib/constructor\"));\n\nvar _context = _interopRequireDefault(require(\"./lib/context\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _default = {\n  /**\r\n   * @description Returns the create function with preset options.\r\n   * If the options overlap, the options of the 'create' function take precedence.\r\n   * @param {Json} options Initialization options\r\n   * @returns {Object}\r\n   */\n  init: function init(init_options) {\n    return {\n      create: function (idOrElement, options) {\n        return this.create(idOrElement, options, init_options);\n      }.bind(this)\n    };\n  },\n\n  /**\r\n   * @description Create the KothingEditor\r\n   * @param {String|Element} idOrElement textarea Id or textarea element\r\n   * @param {JSON|Object} options user options\r\n   * @returns {Object}\r\n   */\n  create: function create(idOrElement, options, _init_options) {\n    _util.default._propertiesInit();\n\n    if (_typeof(options) !== \"object\") {\n      options = {};\n    }\n\n    if (_init_options) {\n      options = [_init_options, options].reduce(function (init, option) {\n        for (var key in option) {\n          if (!_util.default.hasOwn(option, key)) {\n            continue;\n          }\n\n          if (key === \"plugins\" && option[key] && init[key]) {\n            (function () {\n              var i = init[key],\n                  o = option[key];\n              i = i.length ? i : Object.keys(i).map(function (name) {\n                return i[name];\n              });\n              o = o.length ? o : Object.keys(o).map(function (name) {\n                return o[name];\n              });\n              init[key] = o.filter(function (val) {\n                return i.indexOf(val) === -1;\n              }).concat(i);\n            })();\n          } else {\n            init[key] = option[key];\n          }\n        }\n\n        return init;\n      }, {});\n    }\n\n    var element = typeof idOrElement === \"string\" ? document.getElementById(idOrElement) : idOrElement;\n\n    if (!element) {\n      if (typeof idOrElement === \"string\") {\n        throw Error(\"[KothingEditor.create.fail] The element for that id was not found (ID:\\\"\".concat(idOrElement, \"\\\")\"));\n      }\n\n      throw Error(\"[KothingEditor.create.fail] KothingEditor requires textarea's element or id value\");\n    }\n\n    var cons = _constructor.default.init(element, options);\n\n    if (cons.constructed.top.id && document.getElementById(cons.constructed.top.id)) {\n      throw Error(\"[KothingEditor.create.fail] The ID of the KothingEditor you are trying to create already exists (ID:\\\"\".concat(cons.constructed.top.id, \"\\\")\"));\n    }\n\n    return (0, _core.default)((0, _context.default)(element, cons.constructed, cons.options), cons.pluginCallButtons, cons.plugins, cons.options.lang, options, cons._responsiveButtons);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"lineHeight\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.lineHeight = {\n      _sizeList: null,\n      currentSize: -1\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector(\"ul\");\n    /** add event listeners */\n\n    listUl.addEventListener(\"click\", this.pickup.bind(core));\n    context.lineHeight._sizeList = listUl.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer\";\n    var sizeList = !option.lineHeights ? [{\n      text: \"1\",\n      value: 1\n    }, {\n      text: \"1.15\",\n      value: 1.15\n    }, {\n      text: \"1.5\",\n      value: 1.5\n    }, {\n      text: \"2\",\n      value: 2\n    }] : option.lineHeights;\n    var list = '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + '<li><button type=\"button\" class=\"default_value ke-btn-list\" title=\"' + lang.toolbar.default + '\">(' + lang.toolbar.default + \")</button></li>\";\n\n    for (var i = 0, len = sizeList.length, size; i < len; i++) {\n      size = sizeList[i];\n      list += '<li><button type=\"button\" class=\"ke-btn-list\" data-value=\"' + size.value + '\" title=\"' + size.text + '\">' + size.text + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var lineHeightContext = this.context.lineHeight;\n    var sizeList = lineHeightContext._sizeList;\n    var format = this.util.getFormatElement(this.getSelectionNode());\n    var currentSize = !format ? \"\" : format.style.lineHeight + \"\";\n\n    if (currentSize !== lineHeightContext.currentSize) {\n      for (var i = 0, len = sizeList.length; i < len; i++) {\n        if (currentSize === sizeList[i].getAttribute(\"data-value\")) {\n          this.util.addClass(sizeList[i], \"active\");\n        } else {\n          this.util.removeClass(sizeList[i], \"active\");\n        }\n      }\n\n      lineHeightContext.currentSize = currentSize;\n    }\n  },\n  pickup: function pickup(e) {\n    if (!/^BUTTON$/i.test(e.target.tagName)) {\n      return false;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    var value = e.target.getAttribute(\"data-value\") || \"\";\n    var formats = this.getSelectedElements();\n\n    for (var i = 0, len = formats.length; i < len; i++) {\n      formats[i].style.lineHeight = value;\n    }\n\n    this.submenuOff(); // history stack\n\n    this.history.push(false);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"fontSize\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    var icons = core.icons;\n    context.fontSize = {\n      targetText: targetElement.querySelector(\".txt\"),\n      _sizeList: null,\n      currentSize: \"\",\n      icon: icons.font_size\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector(\"ul\");\n    /** add event listeners */\n\n    listUl.addEventListener(\"click\", this.pickup.bind(core));\n    context.fontSize._sizeList = listUl.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-font-size\";\n    var sizeList = !option.fontSize ? [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72] : option.fontSize;\n    var list = '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + '<li><button type=\"button\" class=\"default_value ke-btn-list\" title=\"' + lang.toolbar.default + '\">(' + lang.toolbar.default + \")</button></li>\";\n\n    for (var i = 0, unit = option.fontSizeUnit, len = sizeList.length, size; i < len; i++) {\n      size = sizeList[i];\n      list += '<li><button type=\"button\" class=\"ke-btn-list\" data-value=\"' + size + unit + '\" title=\"' + size + unit + '\" style=\"font-size:' + size + unit + ';\">' + size + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    var target = this.context.fontSize.targetText.firstElementChild;\n    var icon = this.context.fontSize.icon;\n\n    if (!element) {\n      // this.util.changeTxt(\n      //   this.context.fontSize.targetText,\n      //   this.hasFocus\n      //     ? this.wwComputedStyle.fontSize\n      //     : this.lang.toolbar.fontSize\n      // );\n      var sizeIcon = this.hasFocus ? this.wwComputedStyle.fontSize ? \"<span>\".concat(this.wwComputedStyle.fontSize, \"</span>\") : \"\" : icon;\n      this.util.changeElement(target, sizeIcon);\n    } else if (element.style && element.style.fontSize.length > 0) {\n      // this.util.changeTxt(\n      //   this.context.fontSize.targetText,\n      //   element.style.fontSize\n      // );\n      this.util.changeElement(target, \"<span>\".concat(element.style.fontSize, \"</span>\"));\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var fontSizeContext = this.context.fontSize;\n    var sizeList = fontSizeContext._sizeList;\n    var currentSize = fontSizeContext.targetText.textContent;\n\n    if (currentSize !== fontSizeContext.currentSize) {\n      for (var i = 0, len = sizeList.length; i < len; i++) {\n        if (currentSize === sizeList[i].getAttribute(\"data-value\")) {\n          this.util.addClass(sizeList[i], \"active\");\n        } else {\n          this.util.removeClass(sizeList[i], \"active\");\n        }\n      }\n\n      fontSizeContext.currentSize = currentSize;\n    }\n  },\n  pickup: function pickup(e) {\n    if (!/^BUTTON$/i.test(e.target.tagName)) {\n      return false;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    var value = e.target.getAttribute(\"data-value\");\n\n    if (value) {\n      var newNode = this.util.createElement(\"SPAN\");\n      newNode.style.fontSize = value;\n      this.nodeChange(newNode, [\"font-size\"], null, null);\n    } else {\n      this.nodeChange(null, [\"font-size\"], [\"span\"], true);\n    }\n\n    this.submenuOff();\n  }\n};\nexports.default = _default;","module.exports = __webpack_public_path__ + \"img/logo_2.b4d585db.jpg\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"template\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.template = {};\n    /** set submenu */\n\n    var templateDiv = this.setSubmenu(core);\n    /** add event listeners */\n\n    templateDiv.querySelector(\"ul\").addEventListener(\"click\", this.pickup.bind(core));\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, templateDiv);\n    /** empty memory */\n\n    templateDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var templateList = core.options.templates;\n\n    if (!templateList || templateList.length === 0) {\n      throw Error('[KothingEditor.plugins.template.fail] To use the \"template\" plugin, please define the \"templates\" option.');\n    }\n\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-list-layer\";\n    var list = '<div class=\"ke-submenu ke-list-inner\">' + '<ul class=\"ke-list-basic\">';\n\n    for (var i = 0, len = templateList.length, t; i < len; i++) {\n      t = templateList[i];\n      list += '<li><button type=\"button\" class=\"ke-btn-list\" data-value=\"' + i + '\" title=\"' + t.name + '\">' + t.name + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n  pickup: function pickup(e) {\n    if (!/^BUTTON$/i.test(e.target.tagName)) {\n      return false;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    var temp = this.options.templates[e.target.getAttribute(\"data-value\")];\n\n    if (temp.html) {\n      this.setContents(temp.html);\n    } else {\n      this.submenuOff();\n      throw Error('[KothingEditor.template.fail] cause : \"templates[i].html not found\"');\n    }\n\n    this.submenuOff();\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"table\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    var contextTable = context.table = {\n      _element: null,\n      _tdElement: null,\n      _trElement: null,\n      _trElements: null,\n      _tableXY: [],\n      _maxWidth: true,\n      _fixedColumn: false,\n      _rtl: core.options.rtl,\n      cellControllerTop: core.options.tableCellControllerPosition === \"top\",\n      resizeText: null,\n      headerButton: null,\n      mergeButton: null,\n      splitButton: null,\n      splitMenu: null,\n      maxText: core.lang.controller.maxSize,\n      minText: core.lang.controller.minSize,\n      _physical_cellCnt: 0,\n      _logical_cellCnt: 0,\n      _rowCnt: 0,\n      _rowIndex: 0,\n      _physical_cellIndex: 0,\n      _logical_cellIndex: 0,\n      _current_colSpan: 0,\n      _current_rowSpan: 0,\n      icons: {\n        expansion: core.icons.expansion,\n        reduction: core.icons.reduction\n      }\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var tablePicker = listDiv.querySelector(\".ke-controller-table-picker\");\n    contextTable.tableHighlight = listDiv.querySelector(\".ke-table-size-highlighted\");\n    contextTable.tableUnHighlight = listDiv.querySelector(\".ke-table-size-unhighlighted\");\n    contextTable.tableDisplay = listDiv.querySelector(\".ke-table-size-display\");\n\n    if (core.options.rtl) {\n      contextTable.tableHighlight.style.left = 10 * 18 - 13 + \"px\";\n    }\n    /** set table controller */\n\n\n    var tableController = this.setController_table(core);\n    contextTable.tableController = tableController;\n    contextTable.resizeButton = tableController.querySelector(\"._ke_table_resize\");\n    contextTable.resizeText = tableController.querySelector(\"._ke_table_resize > span > span\");\n    contextTable.columnFixedButton = tableController.querySelector(\"._ke_table_fixed_column\");\n    contextTable.headerButton = tableController.querySelector(\"._ke_table_header\");\n    /** set resizing */\n\n    var resizeDiv = this.setController_tableEditor(core, contextTable.cellControllerTop);\n    contextTable.resizeDiv = resizeDiv;\n    contextTable.splitMenu = resizeDiv.querySelector(\".ke-btn-group-sub\");\n    contextTable.mergeButton = resizeDiv.querySelector(\"._ke_table_merge_button\");\n    contextTable.splitButton = resizeDiv.querySelector(\"._ke_table_split_button\");\n    contextTable.insertRowAboveButton = resizeDiv.querySelector(\"._ke_table_insert_row_a\");\n    contextTable.insertRowBelowButton = resizeDiv.querySelector(\"._ke_table_insert_row_b\");\n    /** add event listeners */\n\n    tablePicker.addEventListener(\"mousemove\", this.onMouseMove_tablePicker.bind(core, contextTable));\n    tablePicker.addEventListener(\"click\", this.appendTable.bind(core));\n    resizeDiv.addEventListener(\"click\", this.onClick_tableController.bind(core));\n    tableController.addEventListener(\"click\", this.onClick_tableController.bind(core));\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** append controller */\n\n    context.element.relative.appendChild(resizeDiv);\n    context.element.relative.appendChild(tableController);\n    /** empty memory */\n\n    listDiv = null, tablePicker = null, resizeDiv = null, tableController = null, contextTable = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-selector-table\";\n    listDiv.innerHTML = \"\" + '<div class=\"ke-table-size\">' + '<div class=\"ke-table-size-picker ke-controller-table-picker\"></div>' + '<div class=\"ke-table-size-highlighted\"></div>' + '<div class=\"ke-table-size-unhighlighted\"></div>' + \"</div>\" + '<div class=\"ke-table-size-display\">1 x 1</div>';\n    return listDiv;\n  },\n  setController_table: function setController_table(core) {\n    var lang = core.lang;\n    var icons = core.icons;\n    var tableResize = core.util.createElement(\"DIV\");\n    tableResize.className = \"ke-controller ke-controller-table\";\n    tableResize.innerHTML = \"\" + \"<div>\" + '<div class=\"ke-btn-group\">' + '<button type=\"button\" data-command=\"resize\" class=\"ke-btn ke-tooltip _ke_table_resize\">' + icons.expansion + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.maxSize + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"layout\" class=\"ke-btn ke-tooltip _ke_table_fixed_column\">' + icons.fixed_column_width + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.fixedColumnWidth + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"header\" class=\"ke-btn ke-tooltip _ke_table_header\">' + icons.table_header + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.tableHeader + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"remove\" class=\"ke-btn ke-tooltip\">' + icons.delete + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.remove + \"</span></span>\" + \"</button>\" + \"</div>\" + \"</div>\";\n    return tableResize;\n  },\n  setController_tableEditor: function setController_tableEditor(core, cellControllerTop) {\n    var lang = core.lang;\n    var icons = core.icons;\n    var tableResize = core.util.createElement(\"DIV\");\n    tableResize.className = \"ke-controller ke-controller-table-cell\";\n    tableResize.innerHTML = (cellControllerTop ? \"\" : '<div class=\"ke-arrow ke-arrow-up\"></div>') + '<div class=\"ke-btn-group\">' + '<button type=\"button\" data-command=\"insert\" data-value=\"row\" data-option=\"up\" class=\"ke-btn ke-tooltip _ke_table_insert_row_a\">' + icons.insert_row_above + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.insertRowAbove + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"insert\" data-value=\"row\" data-option=\"down\" class=\"ke-btn ke-tooltip _ke_table_insert_row_b\">' + icons.insert_row_below + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.insertRowBelow + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"delete\" data-value=\"row\" class=\"ke-btn ke-tooltip\">' + icons.delete_row + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.deleteRow + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"merge\" class=\"_ke_table_merge_button ke-btn ke-tooltip\" disabled>' + icons.merge_cell + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.mergeCells + \"</span></span>\" + \"</button>\" + \"</div>\" + '<div class=\"ke-btn-group\" style=\"padding-top: 0;\">' + '<button type=\"button\" data-command=\"insert\" data-value=\"cell\" data-option=\"left\" class=\"ke-btn ke-tooltip\">' + icons.insert_column_left + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.insertColumnBefore + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"insert\" data-value=\"cell\" data-option=\"right\" class=\"ke-btn ke-tooltip\">' + icons.insert_column_right + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.insertColumnAfter + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"delete\" data-value=\"cell\" class=\"ke-btn ke-tooltip\">' + icons.delete_column + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.deleteColumn + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"onsplit\" class=\"_ke_table_split_button ke-btn ke-tooltip\">' + icons.split_cell + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.splitCells + \"</span></span>\" + \"</button>\" + '<div class=\"ke-btn-group-sub kothing-editor-common ke-list-layer ke-table-split\">' + '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + '<li class=\"ke-btn-list\" data-command=\"split\" data-value=\"vertical\" style=\"line-height:32px;\" title=\"' + lang.controller.VerticalSplit + '\">' + lang.controller.VerticalSplit + \"</li>\" + '<li class=\"ke-btn-list\" data-command=\"split\" data-value=\"horizontal\" style=\"line-height:32px;\" title=\"' + lang.controller.HorizontalSplit + '\">' + lang.controller.HorizontalSplit + \"</li>\" + \"</ul>\" + \"</div>\" + \"</div>\" + \"</div>\";\n    return tableResize;\n  },\n  appendTable: function appendTable() {\n    var oTable = this.util.createElement(\"TABLE\");\n    var createCells = this.plugins.table.createCells;\n    var x = this.context.table._tableXY[0];\n    var y = this.context.table._tableXY[1];\n    var tableHTML = \"<tbody>\";\n\n    while (y > 0) {\n      tableHTML += \"<tr>\" + createCells.call(this, \"td\", x) + \"</tr>\";\n      --y;\n    }\n\n    tableHTML += \"</tbody>\";\n    oTable.innerHTML = tableHTML;\n    var changed = this.insertComponent(oTable, false, true, false);\n\n    if (changed) {\n      var firstTd = oTable.querySelector(\"td div\");\n      this.setRange(firstTd, 0, firstTd, 0);\n      this.plugins.table.reset_table_picker.call(this);\n    }\n  },\n  createCells: function createCells(nodeName, cnt, returnElement) {\n    nodeName = nodeName.toLowerCase();\n\n    if (!returnElement) {\n      var cellsHTML = \"\";\n\n      while (cnt > 0) {\n        cellsHTML += \"<\" + nodeName + \"><div><br></div></\" + nodeName + \">\";\n        cnt--;\n      }\n\n      return cellsHTML;\n    } else {\n      var cell = this.util.createElement(nodeName);\n      cell.innerHTML = \"<div><br></div>\";\n      return cell;\n    }\n  },\n  onMouseMove_tablePicker: function onMouseMove_tablePicker(contextTable, e) {\n    e.stopPropagation();\n\n    var x = this._w.Math.ceil(e.offsetX / 18);\n\n    var y = this._w.Math.ceil(e.offsetY / 18);\n\n    x = x < 1 ? 1 : x;\n    y = y < 1 ? 1 : y;\n\n    if (contextTable._rtl) {\n      contextTable.tableHighlight.style.left = x * 18 - 13 + \"px\";\n      x = 11 - x;\n    }\n\n    contextTable.tableHighlight.style.width = x + \"em\";\n    contextTable.tableHighlight.style.height = y + \"em\"; // let x_u = x < 5 ? 5 : (x > 9 ? 10 : x + 1);\n    // let y_u = y < 5 ? 5 : (y > 9 ? 10 : y + 1);\n    // contextTable.tableUnHighlight.style.width = x_u + 'em';\n    // contextTable.tableUnHighlight.style.height = y_u + 'em';\n\n    this.util.changeTxt(contextTable.tableDisplay, x + \" x \" + y);\n    contextTable._tableXY = [x, y];\n  },\n  reset_table_picker: function reset_table_picker() {\n    if (!this.context.table.tableHighlight) {\n      return;\n    }\n\n    var highlight = this.context.table.tableHighlight.style;\n    var unHighlight = this.context.table.tableUnHighlight.style;\n    highlight.width = \"1em\";\n    highlight.height = \"1em\";\n    unHighlight.width = \"10em\";\n    unHighlight.height = \"10em\";\n    this.util.changeTxt(this.context.table.tableDisplay, \"1 x 1\");\n    this.submenuOff();\n  },\n  init: function init() {\n    var contextTable = this.context.table;\n    var tablePlugin = this.plugins.table;\n\n    tablePlugin._removeEvents.call(this);\n\n    if (tablePlugin._selectedTable) {\n      var selectedCells = tablePlugin._selectedTable.querySelectorAll(\".ke-table-selected-cell\");\n\n      for (var i = 0, len = selectedCells.length; i < len; i++) {\n        this.util.removeClass(selectedCells[i], \"ke-table-selected-cell\");\n      }\n    }\n\n    tablePlugin._toggleEditor.call(this, true);\n\n    contextTable._element = null;\n    contextTable._tdElement = null;\n    contextTable._trElement = null;\n    contextTable._trElements = null;\n    contextTable._tableXY = [];\n    contextTable._maxWidth = true;\n    contextTable._fixedColumn = false;\n    contextTable._physical_cellCnt = 0;\n    contextTable._logical_cellCnt = 0;\n    contextTable._rowCnt = 0;\n    contextTable._rowIndex = 0;\n    contextTable._physical_cellIndex = 0;\n    contextTable._logical_cellIndex = 0;\n    contextTable._current_colSpan = 0;\n    contextTable._current_rowSpan = 0;\n    tablePlugin._shift = false;\n    tablePlugin._selectedCells = null;\n    tablePlugin._selectedTable = null;\n    tablePlugin._ref = null;\n    tablePlugin._fixedCell = null;\n    tablePlugin._selectedCell = null;\n    tablePlugin._fixedCellName = null;\n  },\n\n  /** table edit controller */\n  call_controller_tableEdit: function call_controller_tableEdit(tdElement) {\n    var tablePlugin = this.plugins.table;\n    var contextTable = this.context.table;\n\n    if (!this.getSelection().isCollapsed && !tablePlugin._selectedCell) {\n      this.controllersOff();\n      this.util.removeClass(tdElement, \"ke-table-selected-cell\");\n      return;\n    }\n\n    var tableElement = contextTable._element || this.plugins.table._selectedTable || this.util.getParentElement(tdElement, \"TABLE\");\n    contextTable._maxWidth = this.util.hasClass(tableElement, \"ke-table-size-100\") || tableElement.style.width === \"100%\" || !tableElement.style.width && !this.util.hasClass(tableElement, \"ke-table-size-auto\");\n    contextTable._fixedColumn = this.util.hasClass(tableElement, \"ke-table-layout-fixed\") || tableElement.style.tableLayout === \"fixed\";\n    tablePlugin.setTableStyle.call(this, contextTable._maxWidth ? \"width|column\" : \"width\");\n    tablePlugin.setPositionControllerTop.call(this, tableElement);\n    tablePlugin.setPositionControllerDiv.call(this, tdElement, tablePlugin._shift);\n\n    if (!tablePlugin._shift) {\n      this.controllersOn(contextTable.resizeDiv, contextTable.tableController, tablePlugin.init.bind(this), tdElement, \"table\");\n    }\n  },\n  setPositionControllerTop: function setPositionControllerTop(tableElement) {\n    this.setControllerPosition(this.context.table.tableController, tableElement, \"top\", {\n      left: 0,\n      top: 0\n    });\n  },\n  setPositionControllerDiv: function setPositionControllerDiv(tdElement, reset) {\n    var contextTable = this.context.table;\n    var resizeDiv = contextTable.resizeDiv;\n    this.plugins.table.setCellInfo.call(this, tdElement, reset);\n\n    if (contextTable.cellControllerTop) {\n      this.setControllerPosition(resizeDiv, contextTable._element, \"top\", {\n        left: contextTable.tableController.offsetWidth,\n        top: 0\n      });\n    } else {\n      this.setControllerPosition(resizeDiv, tdElement, \"bottom\", {\n        left: 0,\n        top: 0\n      });\n    }\n  },\n  setCellInfo: function setCellInfo(tdElement, reset) {\n    var contextTable = this.context.table;\n    var table = contextTable._element = this.plugins.table._selectedTable || this.util.getParentElement(tdElement, \"TABLE\");\n\n    if (/THEAD/i.test(table.firstElementChild.nodeName)) {\n      this.util.addClass(contextTable.headerButton, \"active\");\n    } else {\n      this.util.removeClass(contextTable.headerButton, \"active\");\n    }\n\n    if (reset || contextTable._physical_cellCnt === 0) {\n      if (contextTable._tdElement !== tdElement) {\n        contextTable._tdElement = tdElement;\n        contextTable._trElement = tdElement.parentNode;\n      }\n\n      var rows = contextTable._trElements = table.rows;\n      var cellIndex = tdElement.cellIndex;\n      var cellCnt = 0;\n\n      for (var i = 0, cells = rows[0].cells, len = rows[0].cells.length; i < len; i++) {\n        cellCnt += cells[i].colSpan;\n      } // row cnt, row index\n\n\n      var rowIndex = contextTable._rowIndex = contextTable._trElement.rowIndex;\n      contextTable._rowCnt = rows.length; // cell cnt, physical cell index\n\n      contextTable._physical_cellCnt = contextTable._trElement.cells.length;\n      contextTable._logical_cellCnt = cellCnt;\n      contextTable._physical_cellIndex = cellIndex; // span\n\n      contextTable._current_colSpan = contextTable._tdElement.colSpan - 1;\n      contextTable._current_rowSpan - contextTable._trElement.cells[cellIndex].rowSpan - 1; // find logcal cell index\n\n      var rowSpanArr = [];\n      var spanIndex = [];\n\n      for (var _i = 0, _cells, colSpan; _i <= rowIndex; _i++) {\n        _cells = rows[_i].cells;\n        colSpan = 0;\n\n        for (var c = 0, cLen = _cells.length, cell, cs, rs, logcalIndex; c < cLen; c++) {\n          cell = _cells[c];\n          cs = cell.colSpan - 1;\n          rs = cell.rowSpan - 1;\n          logcalIndex = c + colSpan;\n\n          if (spanIndex.length > 0) {\n            for (var r = 0, arr; r < spanIndex.length; r++) {\n              arr = spanIndex[r];\n\n              if (arr.row > _i) {\n                continue;\n              }\n\n              if (logcalIndex >= arr.index) {\n                colSpan += arr.cs;\n                logcalIndex += arr.cs;\n                arr.rs -= 1;\n                arr.row = _i + 1;\n\n                if (arr.rs < 1) {\n                  spanIndex.splice(r, 1);\n                  r--;\n                }\n              } else if (c === cLen - 1) {\n                arr.rs -= 1;\n                arr.row = _i + 1;\n\n                if (arr.rs < 1) {\n                  spanIndex.splice(r, 1);\n                  r--;\n                }\n              }\n            }\n          } // logcal cell index\n\n\n          if (_i === rowIndex && c === cellIndex) {\n            contextTable._logical_cellIndex = logcalIndex;\n            break;\n          }\n\n          if (rs > 0) {\n            rowSpanArr.push({\n              index: logcalIndex,\n              cs: cs + 1,\n              rs: rs,\n              row: -1\n            });\n          }\n\n          colSpan += cs;\n        }\n\n        spanIndex = spanIndex.concat(rowSpanArr).sort(function (a, b) {\n          return a.index - b.index;\n        });\n        rowSpanArr = [];\n      }\n\n      rowSpanArr = null;\n      spanIndex = null;\n    }\n  },\n  editTable: function editTable(type, option) {\n    var tablePlugin = this.plugins.table;\n    var contextTable = this.context.table;\n    var table = contextTable._element;\n    var isRow = type === \"row\";\n\n    if (isRow) {\n      var tableAttr = contextTable._trElement.parentNode;\n\n      if (/^THEAD$/i.test(tableAttr.nodeName)) {\n        if (option === \"up\") {\n          return;\n        } else if (!tableAttr.nextElementSibling || !/^TBODY$/i.test(tableAttr.nextElementSibling.nodeName)) {\n          table.innerHTML += \"<tbody><tr>\" + tablePlugin.createCells.call(this, \"td\", contextTable._logical_cellCnt, false) + \"</tr></tbody>\";\n          return;\n        }\n      }\n    } // multi\n\n\n    if (tablePlugin._ref) {\n      var positionCell = contextTable._tdElement;\n      var selectedCells = tablePlugin._selectedCells; // multi - row\n\n      if (isRow) {\n        // remove row\n        if (!option) {\n          var row = selectedCells[0].parentNode;\n          var removeCells = [selectedCells[0]];\n\n          for (var i = 1, len = selectedCells.length, cell; i < len; i++) {\n            cell = selectedCells[i];\n\n            if (row !== cell.parentNode) {\n              removeCells.push(cell);\n              row = cell.parentNode;\n            }\n          }\n\n          for (var _i2 = 0, _len = removeCells.length; _i2 < _len; _i2++) {\n            tablePlugin.setCellInfo.call(this, removeCells[_i2], true);\n            tablePlugin.editRow.call(this, option);\n          }\n        } else {\n          // edit row\n          tablePlugin.setCellInfo.call(this, option === \"up\" ? selectedCells[0] : selectedCells[selectedCells.length - 1], true);\n          tablePlugin.editRow.call(this, option, positionCell);\n        }\n      } else {\n        // multi - cell\n        var firstRow = selectedCells[0].parentNode; // remove cell\n\n        if (!option) {\n          var _removeCells = [selectedCells[0]];\n\n          for (var _i3 = 1, _len2 = selectedCells.length, _cell; _i3 < _len2; _i3++) {\n            _cell = selectedCells[_i3];\n\n            if (firstRow === _cell.parentNode) {\n              _removeCells.push(_cell);\n            } else {\n              break;\n            }\n          }\n\n          for (var _i4 = 0, _len3 = _removeCells.length; _i4 < _len3; _i4++) {\n            tablePlugin.setCellInfo.call(this, _removeCells[_i4], true);\n            tablePlugin.editCell.call(this, option);\n          }\n        } else {\n          // edit cell\n          var rightCell = null;\n\n          for (var _i5 = 0, _len4 = selectedCells.length - 1; _i5 < _len4; _i5++) {\n            if (firstRow !== selectedCells[_i5 + 1].parentNode) {\n              rightCell = selectedCells[_i5];\n              break;\n            }\n          }\n\n          tablePlugin.setCellInfo.call(this, option === \"left\" ? selectedCells[0] : rightCell || selectedCells[0], true);\n          tablePlugin.editCell.call(this, option, positionCell);\n        }\n      }\n\n      if (!option) {\n        tablePlugin.init.call(this);\n      }\n    } else {\n      // one\n      tablePlugin[isRow ? \"editRow\" : \"editCell\"].call(this, option);\n    } // after remove\n\n\n    if (!option) {\n      var children = table.children;\n\n      for (var _i6 = 0; _i6 < children.length; _i6++) {\n        if (children[_i6].children.length === 0) {\n          this.util.removeItem(children[_i6]);\n          _i6--;\n        }\n      }\n\n      if (table.children.length === 0) {\n        this.util.removeItem(table);\n      }\n    }\n  },\n  editRow: function editRow(option, positionResetElement) {\n    var contextTable = this.context.table;\n    var remove = !option;\n    var up = option === \"up\";\n    var originRowIndex = contextTable._rowIndex;\n    var rowIndex = remove || up ? originRowIndex : originRowIndex + contextTable._current_rowSpan + 1;\n    var sign = remove ? -1 : 1;\n    var rows = contextTable._trElements;\n    var cellCnt = contextTable._logical_cellCnt;\n\n    for (var i = 0, len = originRowIndex + (remove ? -1 : 0), cell; i <= len; i++) {\n      cell = rows[i].cells;\n\n      if (cell.length === 0) {\n        return;\n      }\n\n      for (var c = 0, cLen = cell.length, rs, cs; c < cLen; c++) {\n        rs = cell[c].rowSpan;\n        cs = cell[c].colSpan;\n\n        if (rs < 2 && cs < 2) {\n          continue;\n        }\n\n        if (rs + i > rowIndex && rowIndex > i) {\n          cell[c].rowSpan = rs + sign;\n          cellCnt -= cs;\n        }\n      }\n    }\n\n    if (remove) {\n      var next = rows[originRowIndex + 1];\n\n      if (next) {\n        var spanCells = [];\n        var cells = rows[originRowIndex].cells;\n        var colSpan = 0;\n\n        for (var _i7 = 0, _len5 = cells.length, _cell2, logcalIndex; _i7 < _len5; _i7++) {\n          _cell2 = cells[_i7];\n          logcalIndex = _i7 + colSpan;\n          colSpan += _cell2.colSpan - 1;\n\n          if (_cell2.rowSpan > 1) {\n            _cell2.rowSpan -= 1;\n            spanCells.push({\n              cell: _cell2.cloneNode(false),\n              index: logcalIndex\n            });\n          }\n        }\n\n        if (spanCells.length > 0) {\n          var spanCell = spanCells.shift();\n          cells = next.cells;\n          colSpan = 0;\n\n          for (var _i8 = 0, _len6 = cells.length, _cell3, _logcalIndex; _i8 < _len6; _i8++) {\n            _cell3 = cells[_i8];\n            _logcalIndex = _i8 + colSpan;\n            colSpan += _cell3.colSpan - 1;\n\n            if (_logcalIndex >= spanCell.index) {\n              _i8--, colSpan--;\n              colSpan += spanCell.cell.colSpan - 1;\n              next.insertBefore(spanCell.cell, _cell3);\n              spanCell = spanCells.shift();\n\n              if (!spanCell) {\n                break;\n              }\n            }\n          }\n\n          if (spanCell) {\n            next.appendChild(spanCell.cell);\n\n            for (var _i9 = 0, _len7 = spanCells.length; _i9 < _len7; _i9++) {\n              next.appendChild(spanCells[_i9].cell);\n            }\n          }\n        }\n      }\n\n      contextTable._element.deleteRow(rowIndex);\n    } else {\n      var newRow = contextTable._element.insertRow(rowIndex);\n\n      newRow.innerHTML = this.plugins.table.createCells.call(this, \"td\", cellCnt, false);\n    }\n\n    if (!remove) {\n      this.plugins.table.setPositionControllerDiv.call(this, positionResetElement || contextTable._tdElement, true);\n    } else {\n      this.controllersOff();\n    }\n  },\n  editCell: function editCell(option, positionResetElement) {\n    var contextTable = this.context.table;\n    var util = this.util;\n    var remove = !option;\n    var left = option === \"left\";\n    var colSpan = contextTable._current_colSpan;\n    var cellIndex = remove || left ? contextTable._logical_cellIndex : contextTable._logical_cellIndex + colSpan + 1;\n    var rows = contextTable._trElements;\n    var rowSpanArr = [];\n    var spanIndex = [];\n    var passCell = 0;\n    var removeCell = [];\n    var removeSpanArr = [];\n\n    for (var i = 0, len = contextTable._rowCnt, row, insertIndex, cells, newCell, applySpan, cellColSpan; i < len; i++) {\n      row = rows[i];\n      insertIndex = cellIndex;\n      applySpan = false;\n      cells = row.cells;\n      cellColSpan = 0;\n\n      for (var c = 0, cell, cLen = cells.length, rs, cs, removeIndex; c < cLen; c++) {\n        cell = cells[c];\n\n        if (!cell) {\n          break;\n        }\n\n        rs = cell.rowSpan - 1;\n        cs = cell.colSpan - 1;\n\n        if (!remove) {\n          if (c >= insertIndex) {\n            break;\n          }\n\n          if (cs > 0) {\n            if (passCell < 1 && cs + c >= insertIndex) {\n              cell.colSpan += 1;\n              insertIndex = null;\n              passCell = rs + 1;\n              break;\n            }\n\n            insertIndex -= cs;\n          }\n\n          if (!applySpan) {\n            for (var r = 0, arr; r < spanIndex.length; r++) {\n              arr = spanIndex[r];\n              insertIndex -= arr.cs;\n              arr.rs -= 1;\n\n              if (arr.rs < 1) {\n                spanIndex.splice(r, 1);\n                r--;\n              }\n            }\n\n            applySpan = true;\n          }\n        } else {\n          removeIndex = c + cellColSpan;\n\n          if (spanIndex.length > 0) {\n            var lastCell = !cells[c + 1];\n\n            for (var _r = 0, _arr; _r < spanIndex.length; _r++) {\n              _arr = spanIndex[_r];\n\n              if (_arr.row > i) {\n                continue;\n              }\n\n              if (removeIndex >= _arr.index) {\n                cellColSpan += _arr.cs;\n                removeIndex = c + cellColSpan;\n                _arr.rs -= 1;\n                _arr.row = i + 1;\n\n                if (_arr.rs < 1) {\n                  spanIndex.splice(_r, 1);\n                  _r--;\n                }\n              } else if (lastCell) {\n                _arr.rs -= 1;\n                _arr.row = i + 1;\n\n                if (_arr.rs < 1) {\n                  spanIndex.splice(_r, 1);\n                  _r--;\n                }\n              }\n            }\n          }\n\n          if (rs > 0) {\n            rowSpanArr.push({\n              rs: rs,\n              cs: cs + 1,\n              index: removeIndex,\n              row: -1\n            });\n          }\n\n          if (removeIndex >= insertIndex && removeIndex + cs <= insertIndex + colSpan) {\n            removeCell.push(cell);\n          } else if (removeIndex <= insertIndex + colSpan && removeIndex + cs >= insertIndex) {\n            cell.colSpan -= util.getOverlapRangeAtIndex(cellIndex, cellIndex + colSpan, removeIndex, removeIndex + cs);\n          } else if (rs > 0 && (removeIndex < insertIndex || removeIndex + cs > insertIndex + colSpan)) {\n            removeSpanArr.push({\n              cell: cell,\n              i: i,\n              rs: i + rs\n            });\n          }\n\n          cellColSpan += cs;\n        }\n      }\n\n      spanIndex = spanIndex.concat(rowSpanArr).sort(function (a, b) {\n        return a.index - b.index;\n      });\n      rowSpanArr = [];\n\n      if (!remove) {\n        if (passCell > 0) {\n          passCell -= 1;\n          continue;\n        }\n\n        if (insertIndex !== null && cells.length > 0) {\n          newCell = this.plugins.table.createCells.call(this, cells[0].nodeName, 0, true);\n          newCell = row.insertBefore(newCell, cells[insertIndex]);\n        }\n      }\n    }\n\n    if (remove) {\n      var removeFirst, removeEnd;\n\n      for (var _r2 = 0, rLen = removeCell.length, _row; _r2 < rLen; _r2++) {\n        _row = removeCell[_r2].parentNode;\n        util.removeItem(removeCell[_r2]);\n\n        if (_row.cells.length === 0) {\n          if (!removeFirst) {\n            removeFirst = util.getArrayIndex(rows, _row);\n          }\n\n          removeEnd = util.getArrayIndex(rows, _row);\n          util.removeItem(_row);\n        }\n      }\n\n      for (var _c = 0, _cLen = removeSpanArr.length, rowSpanCell; _c < _cLen; _c++) {\n        rowSpanCell = removeSpanArr[_c];\n        rowSpanCell.cell.rowSpan = util.getOverlapRangeAtIndex(removeFirst, removeEnd, rowSpanCell.i, rowSpanCell.rs);\n      }\n\n      this.controllersOff();\n    } else {\n      this.plugins.table.setPositionControllerDiv.call(this, positionResetElement || contextTable._tdElement, true);\n    }\n  },\n  _closeSplitMenu: null,\n  openSplitMenu: function openSplitMenu() {\n    this.util.addClass(this.context.table.splitButton, \"on\");\n    this.context.table.splitMenu.style.display = \"inline-table\";\n\n    this.plugins.table._closeSplitMenu = function () {\n      this.util.removeClass(this.context.table.splitButton, \"on\");\n      this.context.table.splitMenu.style.display = \"none\";\n      this.removeDocEvent(\"click\", this.plugins.table._closeSplitMenu);\n      this.plugins.table._closeSplitMenu = null;\n    }.bind(this);\n\n    this.addDocEvent(\"click\", this.plugins.table._closeSplitMenu);\n  },\n  splitCells: function splitCells(direction) {\n    var util = this.util;\n    var vertical = direction === \"vertical\";\n    var contextTable = this.context.table;\n    var currentCell = contextTable._tdElement;\n    var rows = contextTable._trElements;\n    var currentRow = contextTable._trElement;\n    var index = contextTable._logical_cellIndex;\n    var rowIndex = contextTable._rowIndex;\n    var newCell = this.plugins.table.createCells.call(this, currentCell.nodeName, 0, true); // vertical\n\n    if (vertical) {\n      var currentColSpan = currentCell.colSpan;\n      newCell.rowSpan = currentCell.rowSpan; // colspan > 1\n\n      if (currentColSpan > 1) {\n        newCell.colSpan = this._w.Math.floor(currentColSpan / 2);\n        currentCell.colSpan = currentColSpan - newCell.colSpan;\n        currentRow.insertBefore(newCell, currentCell.nextElementSibling);\n      } else {\n        // colspan - 1\n        var rowSpanArr = [];\n        var spanIndex = [];\n\n        for (var i = 0, len = contextTable._rowCnt, cells, colSpan; i < len; i++) {\n          cells = rows[i].cells;\n          colSpan = 0;\n\n          for (var c = 0, cLen = cells.length, cell, cs, rs, logcalIndex; c < cLen; c++) {\n            cell = cells[c];\n            cs = cell.colSpan - 1;\n            rs = cell.rowSpan - 1;\n            logcalIndex = c + colSpan;\n\n            if (spanIndex.length > 0) {\n              for (var r = 0, arr; r < spanIndex.length; r++) {\n                arr = spanIndex[r];\n\n                if (arr.row > i) {\n                  continue;\n                }\n\n                if (logcalIndex >= arr.index) {\n                  colSpan += arr.cs;\n                  logcalIndex += arr.cs;\n                  arr.rs -= 1;\n                  arr.row = i + 1;\n\n                  if (arr.rs < 1) {\n                    spanIndex.splice(r, 1);\n                    r--;\n                  }\n                } else if (c === cLen - 1) {\n                  arr.rs -= 1;\n                  arr.row = i + 1;\n\n                  if (arr.rs < 1) {\n                    spanIndex.splice(r, 1);\n                    r--;\n                  }\n                }\n              }\n            }\n\n            if (logcalIndex <= index && rs > 0) {\n              rowSpanArr.push({\n                index: logcalIndex,\n                cs: cs + 1,\n                rs: rs,\n                row: -1\n              });\n            }\n\n            if (cell !== currentCell && logcalIndex <= index && logcalIndex + cs >= index + currentColSpan - 1) {\n              cell.colSpan += 1;\n              break;\n            }\n\n            if (logcalIndex > index) {\n              break;\n            }\n\n            colSpan += cs;\n          }\n\n          spanIndex = spanIndex.concat(rowSpanArr).sort(function (a, b) {\n            return a.index - b.index;\n          });\n          rowSpanArr = [];\n        }\n\n        currentRow.insertBefore(newCell, currentCell.nextElementSibling);\n      }\n    } else {\n      // horizontal\n      var currentRowSpan = currentCell.rowSpan;\n      newCell.colSpan = currentCell.colSpan; // rowspan > 1\n\n      if (currentRowSpan > 1) {\n        newCell.rowSpan = this._w.Math.floor(currentRowSpan / 2);\n        var newRowSpan = currentRowSpan - newCell.rowSpan;\n        var _rowSpanArr = [];\n        var nextRowIndex = util.getArrayIndex(rows, currentRow) + newRowSpan;\n\n        for (var _i10 = 0, _cells2, _colSpan; _i10 < nextRowIndex; _i10++) {\n          _cells2 = rows[_i10].cells;\n          _colSpan = 0;\n\n          for (var _c2 = 0, _cLen2 = _cells2.length, _cell4, _cs, _logcalIndex2; _c2 < _cLen2; _c2++) {\n            _logcalIndex2 = _c2 + _colSpan;\n\n            if (_logcalIndex2 >= index) {\n              break;\n            }\n\n            _cell4 = _cells2[_c2];\n            _cs = _cell4.rowSpan - 1;\n\n            if (_cs > 0 && _cs + _i10 >= nextRowIndex && _logcalIndex2 < index) {\n              _rowSpanArr.push({\n                index: _logcalIndex2,\n                cs: _cell4.colSpan\n              });\n            }\n\n            _colSpan += _cell4.colSpan - 1;\n          }\n        }\n\n        var nextRow = rows[nextRowIndex];\n        var nextCells = nextRow.cells;\n\n        var _rs = _rowSpanArr.shift();\n\n        for (var _c3 = 0, _cLen3 = nextCells.length, _colSpan2 = 0, _cell5, _cs2, _logcalIndex3, insertIndex; _c3 < _cLen3; _c3++) {\n          _logcalIndex3 = _c3 + _colSpan2;\n          _cell5 = nextCells[_c3];\n          _cs2 = _cell5.colSpan - 1;\n          insertIndex = _logcalIndex3 + _cs2 + 1;\n\n          if (_rs && insertIndex >= _rs.index) {\n            _colSpan2 += _rs.cs;\n            insertIndex += _rs.cs;\n            _rs = _rowSpanArr.shift();\n          }\n\n          if (insertIndex >= index || _c3 === _cLen3 - 1) {\n            nextRow.insertBefore(newCell, _cell5.nextElementSibling);\n            break;\n          }\n\n          _colSpan2 += _cs2;\n        }\n\n        currentCell.rowSpan = newRowSpan;\n      } else {\n        // rowspan - 1\n        newCell.rowSpan = currentCell.rowSpan;\n        var newRow = util.createElement(\"TR\");\n        newRow.appendChild(newCell);\n\n        for (var _i11 = 0, _cells4; _i11 < rowIndex; _i11++) {\n          _cells4 = rows[_i11].cells;\n\n          if (_cells4.length === 0) {\n            return;\n          }\n\n          for (var _c4 = 0, _cLen4 = _cells4.length; _c4 < _cLen4; _c4++) {\n            if (_i11 + _cells4[_c4].rowSpan - 1 >= rowIndex) {\n              _cells4[_c4].rowSpan += 1;\n            }\n          }\n        }\n\n        var physicalIndex = contextTable._physical_cellIndex;\n        var _cells3 = currentRow.cells;\n\n        for (var _c5 = 0, _cLen5 = _cells3.length; _c5 < _cLen5; _c5++) {\n          if (_c5 === physicalIndex) {\n            continue;\n          }\n\n          _cells3[_c5].rowSpan += 1;\n        }\n\n        currentRow.parentNode.insertBefore(newRow, currentRow.nextElementSibling);\n      }\n    }\n\n    this.focusEdge(currentCell);\n    this.plugins.table.setPositionControllerDiv.call(this, currentCell, true);\n  },\n  mergeCells: function mergeCells() {\n    var tablePlugin = this.plugins.table;\n    var contextTable = this.context.table;\n    var util = this.util;\n    var ref = tablePlugin._ref;\n    var selectedCells = tablePlugin._selectedCells;\n    var mergeCell = selectedCells[0];\n    var emptyRowFirst = null;\n    var emptyRowLast = null;\n    var cs = ref.ce - ref.cs + 1;\n    var rs = ref.re - ref.rs + 1;\n    var mergeHTML = \"\";\n    var row = null;\n\n    for (var i = 1, len = selectedCells.length, cell, ch; i < len; i++) {\n      cell = selectedCells[i];\n\n      if (row !== cell.parentNode) {\n        row = cell.parentNode;\n      }\n\n      ch = cell.children;\n\n      for (var c = 0, cLen = ch.length; c < cLen; c++) {\n        if (util.isFormatElement(ch[c]) && util.onlyZeroWidthSpace(ch[c].textContent)) {\n          util.removeItem(ch[c]);\n        }\n      }\n\n      mergeHTML += cell.innerHTML;\n      util.removeItem(cell);\n\n      if (row.cells.length === 0) {\n        if (!emptyRowFirst) {\n          emptyRowFirst = row;\n        } else {\n          emptyRowLast = row;\n        }\n\n        rs -= 1;\n      }\n    }\n\n    if (emptyRowFirst) {\n      var rows = contextTable._trElements;\n      var rowIndexFirst = util.getArrayIndex(rows, emptyRowFirst);\n      var rowIndexLast = util.getArrayIndex(rows, emptyRowLast || emptyRowFirst);\n      var removeRows = [];\n\n      for (var _i12 = 0, cells; _i12 <= rowIndexLast; _i12++) {\n        cells = rows[_i12].cells;\n\n        if (cells.length === 0) {\n          removeRows.push(rows[_i12]);\n          continue;\n        }\n\n        for (var _c6 = 0, _cLen6 = cells.length, _cell6, _rs2; _c6 < _cLen6; _c6++) {\n          _cell6 = cells[_c6];\n          _rs2 = _cell6.rowSpan - 1;\n\n          if (_rs2 > 0 && _i12 + _rs2 >= rowIndexFirst) {\n            _cell6.rowSpan -= util.getOverlapRangeAtIndex(rowIndexFirst, rowIndexLast, _i12, _i12 + _rs2);\n          }\n        }\n      }\n\n      for (var _i13 = 0, _len8 = removeRows.length; _i13 < _len8; _i13++) {\n        util.removeItem(removeRows[_i13]);\n      }\n    }\n\n    mergeCell.innerHTML += mergeHTML;\n    mergeCell.colSpan = cs;\n    mergeCell.rowSpan = rs;\n    this.controllersOff();\n    tablePlugin.setActiveButton.call(this, true, false);\n    tablePlugin.call_controller_tableEdit.call(this, mergeCell);\n    util.addClass(mergeCell, \"ke-table-selected-cell\");\n    this.focusEdge(mergeCell);\n  },\n  toggleHeader: function toggleHeader() {\n    var util = this.util;\n    var headerButton = this.context.table.headerButton;\n    var active = util.hasClass(headerButton, \"active\");\n    var table = this.context.table._element;\n\n    if (!active) {\n      var header = util.createElement(\"THEAD\");\n      header.innerHTML = \"<tr>\" + this.plugins.table.createCells.call(this, \"th\", this.context.table._logical_cellCnt, false) + \"</tr>\";\n      table.insertBefore(header, table.firstElementChild);\n    } else {\n      util.removeItem(table.querySelector(\"thead\"));\n    }\n\n    util.toggleClass(headerButton, \"active\");\n\n    if (/TH/i.test(this.context.table._tdElement.nodeName)) {\n      this.controllersOff();\n    } else {\n      this.plugins.table.setPositionControllerDiv.call(this, this.context.table._tdElement, false);\n    }\n  },\n  setTableStyle: function setTableStyle(styles) {\n    var contextTable = this.context.table;\n    var tableElement = contextTable._element;\n    var icon, span, sizeIcon, text;\n\n    if (styles.indexOf(\"width\") > -1) {\n      icon = contextTable.resizeButton.firstElementChild;\n      span = contextTable.resizeText;\n\n      if (!contextTable._maxWidth) {\n        sizeIcon = contextTable.icons.expansion;\n        text = contextTable.maxText;\n        contextTable.columnFixedButton.style.display = \"none\";\n        this.util.removeClass(tableElement, \"ke-table-size-100\");\n        this.util.addClass(tableElement, \"ke-table-size-auto\");\n      } else {\n        sizeIcon = contextTable.icons.reduction;\n        text = contextTable.minText;\n        contextTable.columnFixedButton.style.display = \"block\";\n        this.util.removeClass(tableElement, \"ke-table-size-auto\");\n        this.util.addClass(tableElement, \"ke-table-size-100\");\n      }\n\n      this.util.changeElement(icon, sizeIcon);\n      this.util.changeTxt(span, text);\n    }\n\n    if (styles.indexOf(\"column\") > -1) {\n      if (!contextTable._fixedColumn) {\n        this.util.removeClass(tableElement, \"ke-table-layout-fixed\");\n        this.util.addClass(tableElement, \"ke-table-layout-auto\");\n        this.util.removeClass(contextTable.columnFixedButton, \"active\");\n      } else {\n        this.util.removeClass(tableElement, \"ke-table-layout-auto\");\n        this.util.addClass(tableElement, \"ke-table-layout-fixed\");\n        this.util.addClass(contextTable.columnFixedButton, \"active\");\n      }\n    }\n  },\n  setActiveButton: function setActiveButton(fixedCell, selectedCell) {\n    var contextTable = this.context.table;\n\n    if (/^TH$/i.test(fixedCell.nodeName)) {\n      contextTable.insertRowAboveButton.setAttribute(\"disabled\", true);\n      contextTable.insertRowBelowButton.setAttribute(\"disabled\", true);\n    } else {\n      contextTable.insertRowAboveButton.removeAttribute(\"disabled\");\n      contextTable.insertRowBelowButton.removeAttribute(\"disabled\");\n    }\n\n    if (!selectedCell || fixedCell === selectedCell) {\n      contextTable.splitButton.removeAttribute(\"disabled\");\n      contextTable.mergeButton.setAttribute(\"disabled\", true);\n    } else {\n      contextTable.splitButton.setAttribute(\"disabled\", true);\n      contextTable.mergeButton.removeAttribute(\"disabled\");\n    }\n  },\n  // multi selecte\n  _bindOnSelect: null,\n  _bindOffSelect: null,\n  _bindOffShift: null,\n  _selectedCells: null,\n  _shift: false,\n  _fixedCell: null,\n  _fixedCellName: null,\n  _selectedCell: null,\n  _selectedTable: null,\n  _ref: null,\n  _toggleEditor: function _toggleEditor(enabled) {\n    this.context.element.wysiwyg.setAttribute(\"contenteditable\", enabled);\n\n    if (enabled) {\n      this.util.removeClass(this.context.element.wysiwyg, \"ke-disabled\");\n    } else {\n      this.util.addClass(this.context.element.wysiwyg, \"ke-disabled\");\n    }\n  },\n  _offCellMultiSelect: function _offCellMultiSelect(e) {\n    e.stopPropagation();\n    var tablePlugin = this.plugins.table;\n\n    if (!tablePlugin._shift) {\n      tablePlugin._removeEvents.call(this);\n\n      tablePlugin._toggleEditor.call(this, true);\n    } else if (tablePlugin._initBind) {\n      this._wd.removeEventListener(\"touchmove\", tablePlugin._initBind);\n\n      tablePlugin._initBind = null;\n    }\n\n    if (!tablePlugin._fixedCell || !tablePlugin._selectedTable) {\n      return;\n    }\n\n    tablePlugin.setActiveButton.call(this, tablePlugin._fixedCell, tablePlugin._selectedCell);\n    tablePlugin.call_controller_tableEdit.call(this, tablePlugin._selectedCell || tablePlugin._fixedCell);\n    tablePlugin._selectedCells = tablePlugin._selectedTable.querySelectorAll(\".ke-table-selected-cell\");\n\n    if (tablePlugin._selectedCell && tablePlugin._fixedCell) {\n      this.focusEdge(tablePlugin._selectedCell);\n    }\n\n    if (!tablePlugin._shift) {\n      tablePlugin._fixedCell = null;\n      tablePlugin._selectedCell = null;\n      tablePlugin._fixedCellName = null;\n    }\n  },\n  _onCellMultiSelect: function _onCellMultiSelect(e) {\n    this._antiBlur = true;\n    var tablePlugin = this.plugins.table;\n    var target = this.util.getParentElement(e.target, this.util.isCell);\n\n    if (tablePlugin._shift) {\n      if (target === tablePlugin._fixedCell) {\n        tablePlugin._toggleEditor.call(this, true);\n      } else {\n        tablePlugin._toggleEditor.call(this, false);\n      }\n    } else if (!tablePlugin._ref) {\n      if (target === tablePlugin._fixedCell) {\n        return;\n      } else {\n        tablePlugin._toggleEditor.call(this, false);\n      }\n    }\n\n    if (!target || target === tablePlugin._selectedCell || tablePlugin._fixedCellName !== target.nodeName || tablePlugin._selectedTable !== this.util.getParentElement(target, \"TABLE\")) {\n      return;\n    }\n\n    tablePlugin._selectedCell = target;\n\n    tablePlugin._setMultiCells.call(this, tablePlugin._fixedCell, target);\n  },\n  _setMultiCells: function _setMultiCells(startCell, endCell) {\n    var tablePlugin = this.plugins.table;\n    var rows = tablePlugin._selectedTable.rows;\n    var util = this.util;\n\n    var selectedCells = tablePlugin._selectedTable.querySelectorAll(\".ke-table-selected-cell\");\n\n    for (var i = 0, len = selectedCells.length; i < len; i++) {\n      util.removeClass(selectedCells[i], \"ke-table-selected-cell\");\n    }\n\n    if (startCell === endCell) {\n      util.addClass(startCell, \"ke-table-selected-cell\");\n\n      if (!tablePlugin._shift) {\n        return;\n      }\n    }\n\n    var findSelectedCell = true;\n    var spanIndex = [];\n    var rowSpanArr = [];\n    var ref = tablePlugin._ref = {\n      _i: 0,\n      cs: null,\n      ce: null,\n      rs: null,\n      re: null\n    };\n\n    for (var _i14 = 0, _len9 = rows.length, cells, colSpan; _i14 < _len9; _i14++) {\n      cells = rows[_i14].cells;\n      colSpan = 0;\n\n      for (var c = 0, cLen = cells.length, cell, logcalIndex, cs, rs; c < cLen; c++) {\n        cell = cells[c];\n        cs = cell.colSpan - 1;\n        rs = cell.rowSpan - 1;\n        logcalIndex = c + colSpan;\n\n        if (spanIndex.length > 0) {\n          for (var r = 0, arr; r < spanIndex.length; r++) {\n            arr = spanIndex[r];\n\n            if (arr.row > _i14) {\n              continue;\n            }\n\n            if (logcalIndex >= arr.index) {\n              colSpan += arr.cs;\n              logcalIndex += arr.cs;\n              arr.rs -= 1;\n              arr.row = _i14 + 1;\n\n              if (arr.rs < 1) {\n                spanIndex.splice(r, 1);\n                r--;\n              }\n            } else if (c === cLen - 1) {\n              arr.rs -= 1;\n              arr.row = _i14 + 1;\n\n              if (arr.rs < 1) {\n                spanIndex.splice(r, 1);\n                r--;\n              }\n            }\n          }\n        }\n\n        if (findSelectedCell) {\n          if (cell === startCell || cell === endCell) {\n            ref.cs = ref.cs !== null && ref.cs < logcalIndex ? ref.cs : logcalIndex;\n            ref.ce = ref.ce !== null && ref.ce > logcalIndex + cs ? ref.ce : logcalIndex + cs;\n            ref.rs = ref.rs !== null && ref.rs < _i14 ? ref.rs : _i14;\n            ref.re = ref.re !== null && ref.re > _i14 + rs ? ref.re : _i14 + rs;\n            ref._i += 1;\n          }\n\n          if (ref._i === 2) {\n            findSelectedCell = false;\n            spanIndex = [];\n            rowSpanArr = [];\n            _i14 = -1;\n            break;\n          }\n        } else if (util.getOverlapRangeAtIndex(ref.cs, ref.ce, logcalIndex, logcalIndex + cs) && util.getOverlapRangeAtIndex(ref.rs, ref.re, _i14, _i14 + rs)) {\n          var newCs = ref.cs < logcalIndex ? ref.cs : logcalIndex;\n          var newCe = ref.ce > logcalIndex + cs ? ref.ce : logcalIndex + cs;\n          var newRs = ref.rs < _i14 ? ref.rs : _i14;\n          var newRe = ref.re > _i14 + rs ? ref.re : _i14 + rs;\n\n          if (ref.cs !== newCs || ref.ce !== newCe || ref.rs !== newRs || ref.re !== newRe) {\n            ref.cs = newCs;\n            ref.ce = newCe;\n            ref.rs = newRs;\n            ref.re = newRe;\n            _i14 = -1;\n            spanIndex = [];\n            rowSpanArr = [];\n            break;\n          }\n\n          util.addClass(cell, \"ke-table-selected-cell\");\n        }\n\n        if (rs > 0) {\n          rowSpanArr.push({\n            index: logcalIndex,\n            cs: cs + 1,\n            rs: rs,\n            row: -1\n          });\n        }\n\n        colSpan += cell.colSpan - 1;\n      }\n\n      spanIndex = spanIndex.concat(rowSpanArr).sort(function (a, b) {\n        return a.index - b.index;\n      });\n      rowSpanArr = [];\n    }\n  },\n  _removeEvents: function _removeEvents() {\n    var tablePlugin = this.plugins.table;\n\n    if (tablePlugin._initBind) {\n      this._wd.removeEventListener(\"touchmove\", tablePlugin._initBind);\n\n      tablePlugin._initBind = null;\n    }\n\n    if (tablePlugin._bindOnSelect) {\n      this._wd.removeEventListener(\"mousedown\", tablePlugin._bindOnSelect);\n\n      this._wd.removeEventListener(\"mousemove\", tablePlugin._bindOnSelect);\n\n      tablePlugin._bindOnSelect = null;\n    }\n\n    if (tablePlugin._bindOffSelect) {\n      this._wd.removeEventListener(\"mouseup\", tablePlugin._bindOffSelect);\n\n      tablePlugin._bindOffSelect = null;\n    }\n\n    if (tablePlugin._bindOffShift) {\n      this._wd.removeEventListener(\"keyup\", tablePlugin._bindOffShift);\n\n      tablePlugin._bindOffShift = null;\n    }\n  },\n  _initBind: null,\n  onTableCellMultiSelect: function onTableCellMultiSelect(tdElement, shift) {\n    var tablePlugin = this.plugins.table;\n\n    tablePlugin._removeEvents.call(this);\n\n    this.controllersOff();\n    tablePlugin._shift = shift;\n    tablePlugin._fixedCell = tdElement;\n    tablePlugin._fixedCellName = tdElement.nodeName;\n    tablePlugin._selectedTable = this.util.getParentElement(tdElement, \"TABLE\");\n\n    var selectedCells = tablePlugin._selectedTable.querySelectorAll(\".ke-table-selected-cell\");\n\n    for (var i = 0, len = selectedCells.length; i < len; i++) {\n      this.util.removeClass(selectedCells[i], \"ke-table-selected-cell\");\n    }\n\n    this.util.addClass(tdElement, \"ke-table-selected-cell\");\n    tablePlugin._bindOnSelect = tablePlugin._onCellMultiSelect.bind(this);\n    tablePlugin._bindOffSelect = tablePlugin._offCellMultiSelect.bind(this);\n\n    if (!shift) {\n      this._wd.addEventListener(\"mousemove\", tablePlugin._bindOnSelect, false);\n    } else {\n      tablePlugin._bindOffShift = function () {\n        this.controllersOn(this.context.table.resizeDiv, this.context.table.tableController, this.plugins.table.init.bind(this), tdElement, \"table\");\n\n        if (!tablePlugin._ref) {\n          this.controllersOff();\n        }\n      }.bind(this);\n\n      this._wd.addEventListener(\"keyup\", tablePlugin._bindOffShift, false);\n\n      this._wd.addEventListener(\"mousedown\", tablePlugin._bindOnSelect, false);\n    }\n\n    this._wd.addEventListener(\"mouseup\", tablePlugin._bindOffSelect, false);\n\n    tablePlugin._initBind = tablePlugin.init.bind(this);\n\n    this._wd.addEventListener(\"touchmove\", tablePlugin._initBind, false);\n  },\n  onClick_tableController: function onClick_tableController(e) {\n    e.stopPropagation();\n    var target = e.target.getAttribute(\"data-command\") ? e.target : e.target.parentNode;\n\n    if (target.getAttribute(\"disabled\")) {\n      return;\n    }\n\n    var command = target.getAttribute(\"data-command\");\n    var value = target.getAttribute(\"data-value\");\n    var option = target.getAttribute(\"data-option\");\n    var tablePlugin = this.plugins.table;\n\n    if (typeof tablePlugin._closeSplitMenu === \"function\") {\n      tablePlugin._closeSplitMenu();\n\n      if (command === \"onsplit\") {\n        return;\n      }\n    }\n\n    if (!command) {\n      return;\n    }\n\n    e.preventDefault();\n    var contextTable = this.context.table;\n\n    switch (command) {\n      case \"insert\":\n      case \"delete\":\n        tablePlugin.editTable.call(this, value, option);\n        break;\n\n      case \"header\":\n        tablePlugin.toggleHeader.call(this);\n        break;\n\n      case \"onsplit\":\n        tablePlugin.openSplitMenu.call(this);\n        break;\n\n      case \"split\":\n        tablePlugin.splitCells.call(this, value);\n        break;\n\n      case \"merge\":\n        tablePlugin.mergeCells.call(this);\n        break;\n\n      case \"resize\":\n        contextTable._maxWidth = !contextTable._maxWidth;\n        tablePlugin.setTableStyle.call(this, \"width\");\n        tablePlugin.setPositionControllerTop.call(this, contextTable._element);\n        tablePlugin.setPositionControllerDiv.call(this, contextTable._tdElement, tablePlugin._shift);\n        break;\n\n      case \"layout\":\n        contextTable._fixedColumn = !contextTable._fixedColumn;\n        tablePlugin.setTableStyle.call(this, \"column\");\n        tablePlugin.setPositionControllerTop.call(this, contextTable._element);\n        tablePlugin.setPositionControllerDiv.call(this, contextTable._tdElement, tablePlugin._shift);\n        break;\n\n      case \"remove\":\n        var emptyDiv = contextTable._element.parentNode;\n        this.util.removeItem(contextTable._element);\n        this.controllersOff();\n\n        if (emptyDiv !== this.context.element.wysiwyg) {\n          this.util.removeItemAllParents(emptyDiv, function (current) {\n            return current.childNodes.length === 0;\n          }, null);\n        }\n\n        this.focus();\n    } // history stack\n\n\n    this.history.push(false);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"formatBlock\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    var icons = core.icons;\n    context.formatBlock = {\n      targetText: targetElement.querySelector(\".txt\"),\n      targetTooltip: targetElement.parentNode.querySelector(\".ke-tooltip-text\"),\n      _formatList: null,\n      currentFormat: \"\",\n      icon: icons.format_block\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    /** add event listeners */\n\n    listDiv.querySelector(\"ul\").addEventListener(\"click\", this.pickUp.bind(core));\n    context.formatBlock._formatList = listDiv.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var lang_toolbar = core.lang.toolbar;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-format\";\n    var defaultFormats = [\"p\", \"div\", \"blockquote\", \"pre\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\n    var formatList = !option.formats || option.formats.length === 0 ? defaultFormats : option.formats;\n    var list = '<div class=\"ke-list-inner\"><ul class=\"ke-list-basic\">';\n\n    for (var i = 0, len = formatList.length, format, tagName, command, name, h, attrs, className; i < len; i++) {\n      format = formatList[i];\n\n      if (typeof format === \"string\" && defaultFormats.indexOf(format) > -1) {\n        tagName = format.toLowerCase();\n        command = tagName === \"blockquote\" ? \"range\" : tagName === \"pre\" ? \"free\" : \"replace\";\n        h = /^h/.test(tagName) ? tagName.match(/\\d+/)[0] : \"\";\n        name = lang_toolbar[\"tag_\" + (h ? \"h\" : tagName)] + h;\n        className = \"\";\n        attrs = \"\";\n      } else {\n        tagName = format.tag.toLowerCase();\n        command = format.command;\n        name = format.name || tagName;\n        className = format.class;\n        attrs = className ? ' class=\"' + className + '\"' : \"\";\n      }\n\n      list += \"<li>\" + '<button type=\"button\" class=\"ke-btn-list\" data-command=\"' + command + '\" data-value=\"' + tagName + '\" data-class=\"' + className + '\" title=\"' + name + '\">' + \"<\" + tagName + attrs + \">\" + name + \"</\" + tagName + \">\" + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    var formatTitle = this.lang.toolbar.formats; // const target = this.context.formatBlock.targetText;\n\n    var target = this.context.formatBlock.targetText.firstElementChild;\n    var icon = this.context.formatBlock.icon;\n\n    if (!element) {\n      // this.util.changeTxt(target, formatTitle);\n      this.util.changeElement(target, icon);\n    } else if (this.util.isFormatElement(element)) {\n      var formatContext = this.context.formatBlock;\n      var formatList = formatContext._formatList;\n      var nodeName = element.nodeName.toLowerCase();\n      var className = (element.className.match(/(\\s|^)__ke__format__[^\\s]+/) || [\"\"])[0].trim();\n\n      for (var i = 0, len = formatList.length, f; i < len; i++) {\n        f = formatList[i];\n\n        if (nodeName === f.getAttribute(\"data-value\") && className === f.getAttribute(\"data-class\")) {\n          formatTitle = f.title;\n          break;\n        }\n      } // this.util.changeTxt(target, formatTitle);\n\n\n      this.util.changeElement(target, \"<span>\".concat(formatTitle, \"</span>\"));\n      target.setAttribute(\"data-value\", nodeName);\n      target.setAttribute(\"data-class\", className);\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var formatContext = this.context.formatBlock;\n    var formatList = formatContext._formatList;\n    var target = formatContext.targetText;\n    var currentFormat = (target.getAttribute(\"data-value\") || \"\") + (target.getAttribute(\"data-class\") || \"\");\n\n    if (currentFormat !== formatContext.currentFormat) {\n      for (var i = 0, len = formatList.length, f; i < len; i++) {\n        f = formatList[i];\n\n        if (currentFormat === f.getAttribute(\"data-value\") + f.getAttribute(\"data-class\")) {\n          this.util.addClass(f, \"active\");\n        } else {\n          this.util.removeClass(f, \"active\");\n        }\n      }\n\n      formatContext.currentFormat = currentFormat;\n    }\n  },\n  pickUp: function pickUp(e) {\n    var _this = this;\n\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var command = null,\n        value = null,\n        tag = null,\n        className = \"\";\n\n    while (!command && !/UL/i.test(target.tagName)) {\n      command = target.getAttribute(\"data-command\");\n      value = target.getAttribute(\"data-value\");\n      className = target.getAttribute(\"data-class\");\n\n      if (command) {\n        tag = target.firstChild;\n        break;\n      }\n\n      target = target.parentNode;\n    }\n\n    if (!command) {\n      return;\n    } // blockquote\n\n\n    if (command === \"range\") {\n      var rangeElement = tag.cloneNode(false);\n      this.applyRangeFormatElement(rangeElement);\n    } else {\n      // free, replace\n      var range = this.getRange();\n      var selectedFormsts = this.getSelectedElementsAndComponents(false);\n\n      if (selectedFormsts.length === 0) {\n        range = this.getRange_addLine(range, null);\n        selectedFormsts = this.getSelectedElementsAndComponents(false);\n\n        if (selectedFormsts.length === 0) {\n          return;\n        }\n      }\n\n      var startOffset = range.startOffset;\n      var endOffset = range.endOffset;\n      var util = this.util;\n      var first = selectedFormsts[0];\n      var last = selectedFormsts[selectedFormsts.length - 1];\n      var firstPath = util.getNodePath(range.startContainer, first, null, null);\n      var lastPath = util.getNodePath(range.endContainer, last, null, null); // remove selected list\n\n      var rlist = this.detachList(selectedFormsts, false);\n\n      if (rlist.sc) {\n        first = rlist.sc;\n      }\n\n      if (rlist.ec) {\n        last = rlist.ec;\n      } // change format tag\n\n\n      this.setRange(util.getNodeFromPath(firstPath, first), startOffset, util.getNodeFromPath(lastPath, last), endOffset);\n      var modifiedFormsts = this.getSelectedElementsAndComponents(false); // free format\n\n      if (command === \"free\") {\n        (function () {\n          var len = modifiedFormsts.length - 1;\n          var parentNode = modifiedFormsts[len].parentNode;\n          var freeElement = tag.cloneNode(false);\n          var focusElement = freeElement;\n\n          for (var i = len, f, html, before, next, inner, isComp, _first = true; i >= 0; i--) {\n            f = modifiedFormsts[i];\n\n            if (f === (!modifiedFormsts[i + 1] ? null : modifiedFormsts[i + 1].parentNode)) {\n              continue;\n            }\n\n            isComp = util.isComponent(f);\n            html = isComp ? \"\" : f.innerHTML.replace(/(?!>)\\s+(?=<)|\\n/g, \" \");\n            before = util.getParentElement(f, function (current) {\n              return current.parentNode === parentNode;\n            });\n\n            if (parentNode !== f.parentNode || isComp) {\n              if (util.isFormatElement(parentNode)) {\n                parentNode.parentNode.insertBefore(freeElement, parentNode.nextSibling);\n                parentNode = parentNode.parentNode;\n              } else {\n                parentNode.insertBefore(freeElement, before ? before.nextSibling : null);\n                parentNode = f.parentNode;\n              }\n\n              next = freeElement.nextSibling;\n\n              if (next && freeElement.nodeName === next.nodeName && util.isSameAttributes(freeElement, next)) {\n                freeElement.innerHTML += \"<BR>\" + next.innerHTML;\n                util.removeItem(next);\n              }\n\n              freeElement = tag.cloneNode(false);\n              _first = true;\n            }\n\n            inner = freeElement.innerHTML;\n            freeElement.innerHTML = (_first || !html || !inner || /<br>$/i.test(html) ? html : html + \"<BR>\") + inner;\n\n            if (i === 0) {\n              parentNode.insertBefore(freeElement, f);\n              next = f.nextSibling;\n\n              if (next && freeElement.nodeName === next.nodeName && util.isSameAttributes(freeElement, next)) {\n                freeElement.innerHTML += \"<BR>\" + next.innerHTML;\n                util.removeItem(next);\n              }\n\n              var prev = freeElement.previousSibling;\n\n              if (prev && freeElement.nodeName === prev.nodeName && util.isSameAttributes(freeElement, prev)) {\n                prev.innerHTML += \"<BR>\" + freeElement.innerHTML;\n                util.removeItem(freeElement);\n              }\n            }\n\n            if (!isComp) {\n              util.removeItem(f);\n            }\n\n            if (html) {\n              _first = false;\n            }\n          }\n\n          _this.setRange(focusElement, 0, focusElement, 0);\n        })();\n      } else {\n        // replace format\n        for (var i = 0, len = modifiedFormsts.length, node, newFormat; i < len; i++) {\n          node = modifiedFormsts[i];\n\n          if ((node.nodeName.toLowerCase() !== value.toLowerCase() || (node.className.match(/(\\s|^)__ke__format__[^\\s]+/) || [\"\"])[0].trim() !== className) && !util.isComponent(node)) {\n            newFormat = tag.cloneNode(false);\n            util.copyFormatAttributes(newFormat, node);\n            newFormat.innerHTML = node.innerHTML;\n            node.parentNode.replaceChild(newFormat, node);\n          }\n\n          if (i === 0) {\n            first = newFormat || node;\n          }\n\n          if (i === len - 1) {\n            last = newFormat || node;\n          }\n\n          newFormat = null;\n        }\n\n        this.setRange(util.getNodeFromPath(firstPath, first), startOffset, util.getNodeFromPath(lastPath, last), endOffset);\n      } // history stack\n\n\n      this.history.push(false);\n    }\n\n    this.submenuOff();\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"font\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    var icons = core.icons;\n    context.font = {\n      targetText: targetElement.querySelector(\".txt\"),\n      targetTooltip: targetElement.parentNode.querySelector(\".ke-tooltip-text\"),\n      _fontList: null,\n      currentFont: \"\",\n      icon: icons.font\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    /** add event listeners */\n\n    listDiv.querySelector(\".ke-list-inner\").addEventListener(\"click\", this.pickup.bind(core));\n    context.font._fontList = listDiv.querySelectorAll(\"ul li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-font-family\";\n    var font, text, i, len;\n    var fontList = !option.font ? [\"Arial\", \"Comic Sans MS\", \"Courier New\", \"Impact\", \"Georgia\", \"tahoma\", \"Trebuchet MS\", \"Verdana\"] : option.font;\n    var list = '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + '<li><button type=\"button\" class=\"default_value ke-btn-list\" title=\"' + lang.toolbar.default + '\">(' + lang.toolbar.default + \")</button></li>\";\n\n    for (i = 0, len = fontList.length; i < len; i++) {\n      font = fontList[i];\n      text = font.split(\",\")[0];\n      list += '<li><button type=\"button\" class=\"ke-btn-list\" data-value=\"' + font + '\" data-txt=\"' + text + '\" title=\"' + text + '\" style=\"font-family:' + font + ';\">' + text + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    // const target = this.context.font.targetText;\n    var target = this.context.font.targetText.firstElementChild;\n    var tooltip = this.context.font.targetTooltip;\n    var icon = this.context.font.icon;\n\n    if (!element) {\n      var fontElement = this.hasFocus ? this.wwComputedStyle.fontFamily ? \"<span>\".concat(JSON.parse(this.wwComputedStyle.fontFamily), \"</span>\") : \"\" : icon;\n      this.util.changeElement(target, fontElement);\n      var font = this.hasFocus ? this.wwComputedStyle.fontFamily ? JSON.parse(this.wwComputedStyle.fontFamily) : \"\" : this.lang.toolbar.font;\n      this.util.changeTxt(tooltip, this.hasFocus ? this.lang.toolbar.font + \" (\" + font + \")\" : font);\n    } else if (element.style && element.style.fontFamily.length > 0) {\n      var selectFont = element.style.fontFamily.replace(/[\"']/g, \"\");\n      this.util.changeElement(target, \"<span>\".concat(selectFont, \"</span>\"));\n      this.util.changeTxt(tooltip, this.lang.toolbar.font + \" (\" + selectFont + \")\");\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var fontContext = this.context.font;\n    var fontList = fontContext._fontList;\n    var currentFont = fontContext.targetText.textContent;\n\n    if (currentFont !== fontContext.currentFont) {\n      for (var i = 0, len = fontList.length; i < len; i++) {\n        if (currentFont === fontList[i].getAttribute(\"data-value\")) {\n          this.util.addClass(fontList[i], \"active\");\n        } else {\n          this.util.removeClass(fontList[i], \"active\");\n        }\n      }\n\n      fontContext.currentFont = currentFont;\n    }\n  },\n  pickup: function pickup(e) {\n    if (!/^BUTTON$/i.test(e.target.tagName)) {\n      return false;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n    var value = e.target.getAttribute(\"data-value\");\n\n    if (value) {\n      var newNode = this.util.createElement(\"SPAN\");\n      newNode.style.fontFamily = value;\n      this.nodeChange(newNode, [\"font-family\"], null, null);\n    } else {\n      this.nodeChange(null, [\"font-family\"], [\"span\"], true);\n    }\n\n    this.submenuOff();\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"notice\",\n\n  /**\r\n   * @description Constructor\r\n   * @param {Object} core Core object\r\n   */\n  add: function add(core) {\n    var context = core.context;\n    context.notice = {};\n    /** dialog */\n\n    var notice_div = core.util.createElement(\"DIV\");\n    var notice_span = core.util.createElement(\"SPAN\");\n    var notice_button = core.util.createElement(\"BUTTON\");\n    notice_div.className = \"ke-notice\";\n    notice_button.className = \"close\";\n    notice_button.setAttribute(\"aria-label\", \"Close\");\n    notice_button.setAttribute(\"title\", core.lang.dialogBox.close);\n    notice_button.innerHTML = core.icons.cancel;\n    notice_div.appendChild(notice_span);\n    notice_div.appendChild(notice_button);\n    context.notice.modal = notice_div;\n    context.notice.message = notice_span;\n    /** add event listeners */\n\n    notice_button.addEventListener(\"click\", this.onClick_cancel.bind(core));\n    /** append html */\n\n    context.element.editorArea.appendChild(notice_div);\n    /** empty memory */\n\n    notice_div = null;\n  },\n\n  /**\r\n   * @description Event when clicking the cancel button\r\n   * @param {MouseEvent} e Event object\r\n   */\n  onClick_cancel: function onClick_cancel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.plugins.notice.close.call(this);\n  },\n\n  /**\r\n   * @description  Open the notice panel\r\n   * @param {String} text Notice message\r\n   */\n  open: function open(text) {\n    this.context.notice.message.textContent = text;\n    this.context.notice.modal.style.display = \"block\";\n  },\n\n  /**\r\n   * @description  Open the notice panel\r\n   */\n  close: function close() {\n    this.context.notice.modal.style.display = \"none\";\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dialog = _interopRequireDefault(require(\"../modules/dialog\"));\n\nvar _component = _interopRequireDefault(require(\"../modules/component\"));\n\nvar _fileManager = _interopRequireDefault(require(\"../modules/fileManager\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _default = {\n  name: \"audio\",\n  display: \"dialog\",\n  add: function add(core) {\n    core.addModule([_dialog.default, _component.default, _fileManager.default]);\n    var context = core.context;\n    var contextAudio = context.audio = {\n      _infoList: [],\n      // @Override fileManager\n      _infoIndex: 0,\n      // @Override fileManager\n      _uploadFileLength: 0,\n      // @Override fileManager\n      focusElement: null,\n      // @Override dialog // This element has focus when the dialog is opened.\n      targetSelect: null,\n      _origin_w: core.options.audioWidth,\n      _origin_h: core.options.audioHeight,\n      _linkValue: \"\",\n      // @require @Override component\n      _element: null,\n      _cover: null,\n      _container: null\n    };\n    /** dialog */\n\n    var audio_dialog = this.setDialog(core);\n    contextAudio.modal = audio_dialog;\n    contextAudio.audioInputFile = audio_dialog.querySelector(\"._ke_audio_files\");\n    contextAudio.audioUrlFile = audio_dialog.querySelector(\".ke-input-url\");\n    contextAudio.focusElement = contextAudio.audioInputFile || contextAudio.audioUrlFile;\n    contextAudio.preview = audio_dialog.querySelector(\".ke-link-preview\");\n    /** controller */\n\n    var audio_controller = this.setController(core);\n    contextAudio.controller = audio_controller;\n    /** add event listeners */\n\n    audio_dialog.querySelector(\"form\").addEventListener(\"submit\", this.submit.bind(core));\n\n    if (contextAudio.audioInputFile) {\n      audio_dialog.querySelector(\".ke-dialog-files-edge-button\").addEventListener(\"click\", this._removeSelectedFiles.bind(contextAudio.audioInputFile, contextAudio.audioUrlFile, contextAudio.preview));\n    }\n\n    if (contextAudio.audioInputFile && contextAudio.audioUrlFile) {\n      contextAudio.audioInputFile.addEventListener(\"change\", this._fileInputChange.bind(contextAudio));\n    }\n\n    audio_controller.addEventListener(\"click\", this.onClick_controller.bind(core));\n\n    if (contextAudio.audioUrlFile) {\n      contextAudio.audioUrlFile.addEventListener(\"input\", this._onLinkPreview.bind(contextAudio.preview, contextAudio, core.options.linkProtocol));\n    }\n    /** append html */\n\n\n    context.dialog.modal.appendChild(audio_dialog);\n    /** append controller */\n\n    context.element.relative.appendChild(audio_controller);\n    /** empty memory */\n\n    audio_dialog = null, audio_controller = null;\n  },\n\n  /** HTML - dialog */\n  setDialog: function setDialog(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var dialog = core.util.createElement(\"DIV\");\n    dialog.className = \"ke-dialog-content\";\n    dialog.style.display = \"none\";\n    var html = \"\" + '<form method=\"post\" enctype=\"multipart/form-data\">' + '<div class=\"ke-dialog-header\">' + '<button type=\"button\" data-command=\"close\" class=\"ke-btn ke-dialog-close\" aria-label=\"Close\" title=\"' + lang.dialogBox.close + '\">' + core.icons.cancel + \"</button>\" + '<span class=\"ke-modal-title\">' + lang.dialogBox.audioBox.title + \"</span>\" + \"</div>\" + '<div class=\"ke-dialog-body\">';\n\n    if (option.audioFileInput) {\n      html += \"\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.audioBox.file + \"</label>\" + '<div class=\"ke-dialog-form-files\">' + '<input class=\"ke-input-form _ke_audio_files\" type=\"file\" accept=\"' + option.audioAccept + '\"' + (option.audioMultipleFile ? ' multiple=\"multiple\"' : \"\") + \"/>\" + '<button type=\"button\" data-command=\"filesRemove\" class=\"ke-btn ke-dialog-files-edge-button ke-file-remove\" title=\"' + lang.controller.remove + '\">' + core.icons.cancel + \"</button>\" + \"</div>\" + \"</div>\";\n    }\n\n    if (option.audioUrlInput) {\n      html += \"\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.audioBox.url + \"</label>\" + '<input class=\"ke-input-form ke-input-url\" type=\"text\" />' + '<pre class=\"ke-link-preview\"></pre>' + \"</div>\";\n    }\n\n    html += \"\" + \"</div>\" + '<div class=\"ke-dialog-footer\">' + '<button type=\"submit\" class=\"ke-btn-primary\" title=\"' + lang.dialogBox.submitButton + '\"><span>' + lang.dialogBox.submitButton + \"</span></button>\" + \"</div>\" + \"</form>\";\n    dialog.innerHTML = html;\n    return dialog;\n  },\n\n  /** HTML - controller */\n  setController: function setController(core) {\n    var lang = core.lang;\n    var icons = core.icons;\n    var link_btn = core.util.createElement(\"DIV\");\n    link_btn.className = \"ke-controller ke-controller-link\";\n    link_btn.innerHTML = \"\" + '<div class=\"ke-arrow ke-arrow-up\"></div>' + '<div class=\"link-content\">' + '<div class=\"ke-btn-group\">' + '<button type=\"button\" data-command=\"update\" tabindex=\"-1\" class=\"ke-tooltip\">' + icons.edit + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.edit + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"delete\" tabindex=\"-1\" class=\"ke-tooltip\">' + icons.delete + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.remove + \"</span></span>\" + \"</button>\" + \"</div>\" + \"</div>\";\n    return link_btn;\n  },\n  // Disable url input when uploading files\n  _fileInputChange: function _fileInputChange() {\n    if (!this.audioInputFile.value) {\n      this.audioUrlFile.removeAttribute(\"disabled\");\n      this.preview.style.textDecoration = \"\";\n    } else {\n      this.audioUrlFile.setAttribute(\"disabled\", true);\n      this.preview.style.textDecoration = \"line-through\";\n    }\n  },\n  // Disable url input when uploading files\n  _removeSelectedFiles: function _removeSelectedFiles(urlInput, preview) {\n    this.value = \"\";\n\n    if (urlInput) {\n      urlInput.removeAttribute(\"disabled\");\n      preview.style.textDecoration = \"\";\n    }\n  },\n  // create new audio tag\n  _createAudioTag: function _createAudioTag() {\n    var oAudio = this.util.createElement(\"AUDIO\");\n\n    this.plugins.audio._setTagAttrs.call(this, oAudio);\n\n    var w = this.context.audio._origin_w;\n    var h = this.context.audio._origin_h;\n    oAudio.setAttribute(\"origin-size\", w + \",\" + h);\n    oAudio.style.cssText = (w ? \"width:\" + w + \"; \" : \"\") + (h ? \"height:\" + h + \";\" : \"\");\n    return oAudio;\n  },\n  _setTagAttrs: function _setTagAttrs(element) {\n    element.setAttribute(\"controls\", true);\n    var attrs = this.options.audioTagAttrs;\n\n    if (!attrs) {\n      return;\n    }\n\n    for (var key in attrs) {\n      if (!this.util.hasOwn(attrs, key)) {\n        continue;\n      }\n\n      element.setAttribute(key, attrs[key]);\n    }\n  },\n  _onLinkPreview: function _onLinkPreview(context, protocol, e) {\n    var value = e.target.value.trim();\n    context._linkValue = this.textContent = !value ? \"\" : protocol && value.indexOf(\"://\") === -1 && value.indexOf(\"#\") !== 0 ? protocol + value : value.indexOf(\"://\") === -1 ? \"/\" + value : value;\n  },\n\n  /**\r\n   * @Required @Override fileManager\r\n   */\n  fileTags: [\"audio\"],\n\n  /**\r\n   * @Override core, fileManager, resizing\r\n   * @description It is called from core.selectComponent.\r\n   * @param {Element} element Target element\r\n   */\n  select: function select(element) {\n    this.plugins.audio.onModifyMode.call(this, element);\n  },\n\n  /**\r\n   * @Override fileManager, resizing\r\n   */\n  destroy: function destroy(element) {\n    element = element || this.context.audio._element;\n    var container = this.util.getParentElement(element, this.util.isComponent) || element;\n    var dataIndex = element.getAttribute(\"data-index\") * 1;\n    var focusEl = container.previousElementSibling || container.nextElementSibling;\n    var emptyDiv = container.parentNode;\n    this.util.removeItem(container);\n    this.plugins.audio.init.call(this);\n    this.controllersOff();\n\n    if (emptyDiv !== this.context.element.wysiwyg) {\n      this.util.removeItemAllParents(emptyDiv, function (current) {\n        return current.childNodes.length === 0;\n      }, null);\n    } // focus\n\n\n    this.focusEdge(focusEl); // fileManager event\n\n    this.plugins.fileManager.deleteInfo.call(this, \"audio\", dataIndex, this.functions.onAudioUpload); // history stack\n\n    this.history.push(false);\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  checkFileInfo: function checkFileInfo() {\n    this.plugins.fileManager.checkInfo.call(this, \"audio\", [\"audio\"], this.functions.onAudioUpload, this.plugins.audio.updateCover.bind(this), false);\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  resetFileInfo: function resetFileInfo() {\n    this.plugins.fileManager.resetInfo.call(this, \"audio\", this.functions.onAudioUpload);\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  on: function on(update) {\n    var contextAudio = this.context.audio;\n\n    if (!update) {\n      this.plugins.audio.init.call(this);\n\n      if (contextAudio.audioInputFile && this.options.audioMultipleFile) {\n        contextAudio.audioInputFile.setAttribute(\"multiple\", \"multiple\");\n      }\n    } else if (contextAudio._element) {\n      this.context.dialog.updateModal = true;\n      contextAudio._linkValue = contextAudio.preview.textContent = contextAudio.audioUrlFile.value = contextAudio._element.src;\n\n      if (contextAudio.audioInputFile && this.options.audioMultipleFile) {\n        contextAudio.audioInputFile.removeAttribute(\"multiple\");\n      }\n    } else {\n      if (contextAudio.audioInputFile && this.options.audioMultipleFile) {\n        contextAudio.audioInputFile.removeAttribute(\"multiple\");\n      }\n    }\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  open: function open() {\n    this.plugins.dialog.open.call(this, \"audio\", \"audio\" === this.currentControllerName);\n  },\n  submit: function submit(e) {\n    var contextAudio = this.context.audio;\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      if (contextAudio.audioInputFile && contextAudio.audioInputFile.files.length > 0) {\n        this.showLoading();\n        this.plugins.audio.submitAction.call(this, contextAudio.audioInputFile.files);\n      } else if (contextAudio.audioUrlFile && contextAudio._linkValue.length > 0) {\n        this.showLoading();\n        this.plugins.audio.setupUrl.call(this, contextAudio._linkValue);\n      }\n    } catch (error) {\n      this.closeLoading();\n      throw Error('[KothingEditor.audio.submit.fail] cause : \"' + error.message + '\"');\n    } finally {\n      this.plugins.dialog.close.call(this);\n    }\n\n    return false;\n  },\n  submitAction: function submitAction(fileList) {\n    if (fileList.length === 0) {\n      return;\n    }\n\n    var fileSize = 0;\n    var files = [];\n\n    for (var i = 0, len = fileList.length; i < len; i++) {\n      if (/audio/i.test(fileList[i].type)) {\n        files.push(fileList[i]);\n        fileSize += fileList[i].size;\n      }\n    }\n\n    var limitSize = this.options.audioUploadSizeLimit;\n\n    if (limitSize > 0) {\n      var infoSize = 0;\n      var audiosInfo = this.context.audio._infoList;\n\n      for (var _i = 0, _len = audiosInfo.length; _i < _len; _i++) {\n        infoSize += audiosInfo[_i].size * 1;\n      }\n\n      if (fileSize + infoSize > limitSize) {\n        this.closeLoading();\n        var err = \"[KothingEditor.audioUpload.fail] Size of uploadable total audios: \" + limitSize / 1000 + \"KB\";\n\n        if (typeof this.functions.onAudioUploadError !== \"function\" || this.functions.onAudioUploadError(err, {\n          limitSize: limitSize,\n          currentSize: infoSize,\n          uploadSize: fileSize\n        }, this)) {\n          this.functions.noticeOpen(err);\n        }\n\n        return;\n      }\n    }\n\n    var contextAudio = this.context.audio;\n    contextAudio._uploadFileLength = files.length;\n    var info = {\n      isUpdate: this.context.dialog.updateModal,\n      element: contextAudio._element\n    };\n\n    if (typeof this.functions.onAudioUploadBefore === \"function\") {\n      var result = this.functions.onAudioUploadBefore(files, info, this, function (data) {\n        if (data && this._w.Array.isArray(data.result)) {\n          this.plugins.audio.register.call(this, info, data);\n        } else {\n          this.plugins.audio.upload.call(this, info, data);\n        }\n      }.bind(this));\n\n      if (typeof result === \"undefined\") {\n        return;\n      }\n\n      if (!result) {\n        this.closeLoading();\n        return;\n      }\n\n      if (_typeof(result) === \"object\" && result.length > 0) {\n        files = result;\n      }\n    }\n\n    this.plugins.audio.upload.call(this, info, files);\n  },\n  error: function error(message, response) {\n    this.closeLoading();\n\n    if (typeof this.functions.onAudioUploadError !== \"function\" || this.functions.onAudioUploadError(message, response, this)) {\n      this.functions.noticeOpen(message);\n      throw Error(\"[KothingEditor.plugin.audio.exception] response: \" + message);\n    }\n  },\n  upload: function upload(info, files) {\n    if (!files) {\n      this.closeLoading();\n      return;\n    }\n\n    if (typeof files === \"string\") {\n      this.plugins.audio.error.call(this, files, null);\n      return;\n    }\n\n    var audioUploadUrl = this.options.audioUploadUrl;\n    var filesLen = this.context.dialog.updateModal ? 1 : files.length; // create formData\n\n    var formData = new FormData();\n\n    for (var i = 0; i < filesLen; i++) {\n      formData.append(\"file-\" + i, files[i]);\n    } // server upload\n\n\n    this.plugins.fileManager.upload.call(this, audioUploadUrl, this.options.audioUploadHeader, formData, this.plugins.audio.callBack_upload.bind(this, info), this.functions.onAudioUploadError);\n  },\n  callBack_upload: function callBack_upload(info, xmlHttp) {\n    if (typeof this.functions.audioUploadHandler === \"function\") {\n      this.functions.audioUploadHandler(xmlHttp, info, this);\n    } else {\n      var response = JSON.parse(xmlHttp.responseText);\n\n      if (response.errorMessage) {\n        this.plugins.audio.error.call(this, response.errorMessage, response);\n      } else {\n        this.plugins.audio.register.call(this, info, response);\n      }\n    }\n  },\n  register: function register(info, response) {\n    var fileList = response.result;\n\n    for (var i = 0, len = fileList.length, file, oAudio; i < len; i++) {\n      if (info.isUpdate) {\n        oAudio = info.element;\n      } else {\n        oAudio = this.plugins.audio._createAudioTag.call(this);\n      }\n\n      file = {\n        name: fileList[i].name,\n        size: fileList[i].size\n      };\n      this.plugins.audio.create_audio.call(this, oAudio, fileList[i].url, file, info.isUpdate);\n    }\n\n    this.closeLoading();\n  },\n  setupUrl: function setupUrl(src) {\n    try {\n      if (src.length === 0) {\n        return false;\n      }\n\n      this.plugins.audio.create_audio.call(this, this.plugins.audio._createAudioTag.call(this), src, null, this.context.dialog.updateModal);\n    } catch (error) {\n      throw Error('[KothingEditor.audio.audio.fail] cause : \"' + error.message + '\"');\n    } finally {\n      this.closeLoading();\n    }\n  },\n  create_audio: function create_audio(element, src, file, isUpdate) {\n    var contextAudio = this.context.audio; // create new tag\n\n    if (!isUpdate) {\n      element.src = src;\n      var cover = this.plugins.component.set_cover.call(this, element);\n      var container = this.plugins.component.set_container.call(this, cover, \"\");\n\n      if (!this.insertComponent(container, false, true, !this.options.mediaAutoSelect)) {\n        this.focus();\n        return;\n      }\n\n      if (!this.options.mediaAutoSelect) {\n        var line = this.appendFormatTag(container, null);\n        this.setRange(line, 0, line, 0);\n      }\n    } else {\n      // update\n      if (contextAudio._element) {\n        element = contextAudio._element;\n      }\n\n      if (element && element.src !== src) {\n        element.src = src;\n        this.selectComponent(element, \"audio\");\n      } else {\n        this.selectComponent(element, \"audio\");\n        return;\n      }\n    }\n\n    this.plugins.fileManager.setInfo.call(this, \"audio\", element, this.functions.onAudioUpload, file, false);\n\n    if (isUpdate) {\n      this.history.push(false);\n    }\n  },\n  updateCover: function updateCover(element) {\n    var contextAudio = this.context.audio;\n\n    this.plugins.audio._setTagAttrs.call(this, element); // find component element\n\n\n    var existElement = this.util.getParentElement(element, this.util.isMediaComponent) || this.util.getParentElement(element, function (current) {\n      return this.isWysiwygDiv(current.parentNode);\n    }.bind(this.util)); // clone element\n\n    var prevElement = element;\n    contextAudio._element = element = element.cloneNode(false);\n    var cover = this.plugins.component.set_cover.call(this, element);\n    var container = this.plugins.component.set_container.call(this, cover, \"ke-audio-container\");\n\n    try {\n      if (this.util.isFormatElement(existElement) && existElement.childNodes.length > 0) {\n        existElement.parentNode.insertBefore(container, existElement);\n        this.util.removeItem(prevElement); // clean format tag\n\n        this.util.removeEmptyNode(existElement, null);\n\n        if (existElement.children.length === 0) {\n          existElement.innerHTML = this.util.htmlRemoveWhiteSpace(existElement.innerHTML);\n        }\n      } else {\n        existElement.parentNode.replaceChild(container, existElement);\n      }\n    } catch (error) {\n      console.warn(\"[KothingEditor.audio.error] Maybe the audio tag is nested.\", error);\n    }\n\n    this.plugins.fileManager.setInfo.call(this, \"audio\", element, this.functions.onAudioUpload, null, false);\n  },\n\n  /**\r\n   * @Required @Override fileManager, resizing\r\n   */\n  onModifyMode: function onModifyMode(selectionTag) {\n    var contextAudio = this.context.audio;\n    this.setControllerPosition(contextAudio.controller, selectionTag, \"bottom\", {\n      left: 0,\n      top: 0\n    });\n    this.controllersOn(contextAudio.controller, selectionTag, this.plugins.audio.onControllerOff.bind(this, selectionTag), \"audio\");\n    this.util.addClass(selectionTag, \"active\");\n    contextAudio._element = selectionTag;\n    contextAudio._cover = this.util.getParentElement(selectionTag, \"FIGURE\");\n    contextAudio._container = this.util.getParentElement(selectionTag, this.util.isComponent);\n  },\n\n  /**\r\n   * @Required @Override fileManager, resizing\r\n   */\n  openModify: function openModify(notOpen) {\n    if (this.context.audio.audioUrlFile) {\n      var contextAudio = this.context.audio;\n      contextAudio._linkValue = contextAudio.preview.textContent = contextAudio.audioUrlFile.value = contextAudio._element.src;\n    }\n\n    if (!notOpen) {\n      this.plugins.dialog.open.call(this, \"audio\", true);\n    }\n  },\n  onClick_controller: function onClick_controller(e) {\n    e.stopPropagation();\n    var command = e.target.getAttribute(\"data-command\");\n\n    if (!command) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (/update/.test(command)) {\n      this.plugins.audio.openModify.call(this, false);\n    } else {\n      /** delete */\n      this.plugins.audio.destroy.call(this, this.context.audio._element);\n    }\n\n    this.controllersOff();\n  },\n  onControllerOff: function onControllerOff(selectionTag) {\n    this.util.removeClass(selectionTag, \"active\");\n    this.context.audio.controller.style.display = \"none\";\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  init: function init() {\n    if (this.context.dialog.updateModal) {\n      return;\n    }\n\n    var contextAudio = this.context.audio;\n\n    if (contextAudio.audioInputFile) {\n      contextAudio.audioInputFile.value = \"\";\n    }\n\n    if (contextAudio.audioUrlFile) {\n      contextAudio._linkValue = contextAudio.preview.textContent = contextAudio.audioUrlFile.value = \"\";\n    }\n\n    if (contextAudio.audioInputFile && contextAudio.audioUrlFile) {\n      contextAudio.audioUrlFile.removeAttribute(\"disabled\");\n      contextAudio.preview.style.textDecoration = \"\";\n    }\n\n    contextAudio._element = null;\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dialog = _interopRequireDefault(require(\"../modules/dialog\"));\n\nvar _anchor = _interopRequireDefault(require(\"../modules/anchor\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"link\",\n  display: \"dialog\",\n  add: function add(core) {\n    core.addModule([_dialog.default, _anchor.default]);\n    var context = core.context;\n    var contextLink = context.link = {\n      focusElement: null,\n      // @Override dialog // This element has focus when the dialog is opened.\n      _linkAnchor: null,\n      anchorCtx: null\n    };\n    /** link dialog */\n\n    var link_dialog = this.setDialog(core);\n    contextLink.modal = link_dialog;\n    /** link controller */\n\n    var link_controller = this.setController_LinkButton(core);\n    contextLink.linkController = link_controller;\n    link_dialog.querySelector(\"form\").addEventListener(\"submit\", this.submit.bind(core));\n    link_controller.addEventListener(\"click\", this.onClick_linkController.bind(core));\n    /** append html */\n\n    context.dialog.modal.appendChild(link_dialog);\n    /** append controller */\n\n    context.element.relative.appendChild(link_controller);\n    /** link event */\n\n    core.plugins.anchor.initEvent.call(core, \"link\", link_dialog);\n    contextLink.focusElement = context.anchor.caller.link.urlInput;\n    /** empty memory */\n\n    link_dialog = null, link_controller = null;\n  },\n\n  /** dialog */\n  setDialog: function setDialog(core) {\n    var lang = core.lang;\n    var dialog = core.util.createElement(\"DIV\");\n    var icons = core.icons;\n    dialog.className = \"ke-dialog-content\";\n    dialog.style.display = \"none\";\n    var html = \"\" + \"<form>\" + '<div class=\"ke-dialog-header\">' + '<button type=\"button\" data-command=\"close\" class=\"ke-btn ke-dialog-close\" aria-label=\"Close\" title=\"' + lang.dialogBox.close + '\">' + icons.cancel + \"</button>\" + '<span class=\"ke-modal-title\">' + lang.dialogBox.linkBox.title + \"</span>\" + \"</div>\" + core.context.anchor.forms.innerHTML + '<div class=\"ke-dialog-footer\">' + '<button type=\"submit\" class=\"ke-btn-primary\" title=\"' + lang.dialogBox.submitButton + '\"><span>' + lang.dialogBox.submitButton + \"</span></button>\" + \"</div>\" + \"</form>\";\n    dialog.innerHTML = html;\n    return dialog;\n  },\n\n  /** modify controller button */\n  setController_LinkButton: function setController_LinkButton(core) {\n    var lang = core.lang;\n    var icons = core.icons;\n    var link_btn = core.util.createElement(\"DIV\");\n    link_btn.className = \"ke-controller ke-controller-link\";\n    link_btn.innerHTML = \"\" + '<div class=\"ke-arrow ke-arrow-up\"></div>' + '<div class=\"link-content\"><span><a target=\"_blank\" href=\"\"></a>&nbsp;</span>' + '<div class=\"ke-btn-group\">' + '<button type=\"button\" data-command=\"update\" tabindex=\"-1\" class=\"ke-btn ke-tooltip\">' + icons.edit + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.edit + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"unlink\" tabindex=\"-1\" class=\"ke-btn ke-tooltip\">' + icons.unlink + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.unlink + \"</span></span>\" + \"</button>\" + '<button type=\"button\" data-command=\"delete\" tabindex=\"-1\" class=\"ke-btn ke-tooltip\">' + icons.delete + '<span class=\"ke-tooltip-inner\"><span class=\"ke-tooltip-text\">' + lang.controller.remove + \"</span></span>\" + \"</button>\" + \"</div>\" + \"</div>\";\n    return link_btn;\n  },\n\n  /**\r\n   * @Override dialog\r\n   */\n  open: function open() {\n    this.plugins.dialog.open.call(this, \"link\", \"link\" === this.currentControllerName);\n  },\n  submit: function submit(e) {\n    this.showLoading();\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      var oA = this.plugins.anchor.createAnchor.call(this, this.context.anchor.caller.link, false);\n\n      if (!this.context.dialog.updateModal) {\n        var selectedFormats = this.getSelectedElements();\n\n        if (selectedFormats.length > 1) {\n          var oFormat = this.util.createElement(selectedFormats[0].nodeName);\n          oFormat.appendChild(oA);\n\n          if (!this.insertNode(oFormat, null, true)) {\n            return;\n          }\n        } else {\n          if (!this.insertNode(oA, null, true)) {\n            return;\n          }\n        }\n\n        this.setRange(oA.childNodes[0], 0, oA.childNodes[0], oA.textContent.length);\n      } else {\n        // set range\n        var textNode = this.context.link._linkAnchor.childNodes[0];\n        this.setRange(textNode, 0, textNode, textNode.textContent.length);\n      }\n    } finally {\n      this.plugins.dialog.close.call(this);\n      this.closeLoading(); // history stack\n\n      this.history.push(false);\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    if (!element) {\n      if (this.controllerArray.indexOf(this.context.link.linkController) > -1) {\n        this.controllersOff();\n      }\n    } else if (this.util.isAnchor(element) && element.getAttribute(\"data-image-link\") === null) {\n      if (this.controllerArray.indexOf(this.context.link.linkController) < 0) {\n        this.plugins.link.call_controller.call(this, element);\n      }\n\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override dialog\r\n   */\n  on: function on(update) {\n    this.plugins.anchor.on.call(this, this.context.anchor.caller.link, update);\n  },\n  call_controller: function call_controller(selectionATag) {\n    this.editLink = this.context.link._linkAnchor = this.context.anchor.caller.link.linkAnchor = selectionATag;\n    var linkBtn = this.context.link.linkController;\n    var link = linkBtn.querySelector(\"a\");\n    link.href = selectionATag.href;\n    link.title = selectionATag.textContent;\n    link.textContent = selectionATag.textContent;\n    this.util.addClass(selectionATag, \"on\");\n    this.setControllerPosition(linkBtn, selectionATag, \"bottom\", {\n      left: 0,\n      top: 0\n    });\n    this.controllersOn(linkBtn, selectionATag, \"link\", this.util.removeClass.bind(this.util, this.context.link._linkAnchor, \"on\"));\n  },\n  onClick_linkController: function onClick_linkController(e) {\n    e.stopPropagation();\n    var command = e.target.getAttribute(\"data-command\") || e.target.parentNode.getAttribute(\"data-command\");\n\n    if (!command) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (/update/.test(command)) {\n      this.plugins.dialog.open.call(this, \"link\", true);\n    } else if (/unlink/.test(command)) {\n      var sc = this.util.getChildElement(this.context.link._linkAnchor, function (current) {\n        return current.childNodes.length === 0 || current.nodeType === 3;\n      }, false);\n      var ec = this.util.getChildElement(this.context.link._linkAnchor, function (current) {\n        return current.childNodes.length === 0 || current.nodeType === 3;\n      }, true);\n      this.setRange(sc, 0, ec, ec.textContent.length);\n      this.nodeChange(null, null, [\"A\"], false);\n    } else {\n      /** delete */\n      this.util.removeItem(this.context.link._linkAnchor);\n      this.context.anchor.caller.link.linkAnchor = null;\n      this.focus(); // history stack\n\n      this.history.push(false);\n    }\n\n    this.controllersOff();\n  },\n\n  /**\r\n   * @Override dialog\r\n   */\n  init: function init() {\n    this.context.link.linkController.style.display = \"none\";\n    this.plugins.anchor.init.call(this, this.context.anchor.caller.link);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dialog = _interopRequireDefault(require(\"../modules/dialog\"));\n\nvar _anchor = _interopRequireDefault(require(\"../modules/anchor\"));\n\nvar _component = _interopRequireDefault(require(\"../modules/component\"));\n\nvar _resizing = _interopRequireDefault(require(\"../modules/resizing\"));\n\nvar _fileManager = _interopRequireDefault(require(\"../modules/fileManager\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"image\",\n  display: \"dialog\",\n  add: function add(core) {\n    core.addModule([_dialog.default, _anchor.default, _component.default, _resizing.default, _fileManager.default]);\n    var options = core.options;\n    var context = core.context;\n    var contextImage = context.image = {\n      _infoList: [],\n      // @Override fileManager\n      _infoIndex: 0,\n      // @Override fileManager\n      _uploadFileLength: 0,\n      // @Override fileManager\n      focusElement: null,\n      // @Override dialog // This element has focus when the dialog is opened.\n      sizeUnit: options._imageSizeUnit,\n      _linkElement: \"\",\n      _altText: \"\",\n      _align: \"none\",\n      _floatClassRegExp: \"__ke__float\\\\-[a-z]+\",\n      _v_src: {\n        _linkValue: \"\"\n      },\n      svgDefaultSize: \"30%\",\n      base64RenderIndex: 0,\n      // @require @Override component\n      _element: null,\n      _cover: null,\n      _container: null,\n      // @Override resizing properties\n      inputX: null,\n      inputY: null,\n      _element_w: 1,\n      _element_h: 1,\n      _element_l: 0,\n      _element_t: 0,\n      _defaultSizeX: \"auto\",\n      _defaultSizeY: \"auto\",\n      _origin_w: options.imageWidth === \"auto\" ? \"\" : options.imageWidth,\n      _origin_h: options.imageHeight === \"auto\" ? \"\" : options.imageHeight,\n      _proportionChecked: true,\n      _resizing: options.imageResizing,\n      _resizeDotHide: !options.imageHeightShow,\n      _rotation: options.imageRotation,\n      _onlyPercentage: options.imageSizeOnlyPercentage,\n      _ratio: false,\n      _ratioX: 1,\n      _ratioY: 1,\n      _captionShow: true,\n      _captionChecked: false,\n      _caption: null,\n      captionCheckEl: null\n    };\n    /** image dialog */\n\n    var image_dialog = this.setDialog(core);\n    contextImage.modal = image_dialog;\n    contextImage.imgInputFile = image_dialog.querySelector(\"._ke_image_file\");\n    contextImage.imgUrlFile = image_dialog.querySelector(\"._ke_image_url\");\n    contextImage.focusElement = contextImage.imgInputFile || contextImage.imgUrlFile;\n    contextImage.altText = image_dialog.querySelector(\"._ke_image_alt\");\n    contextImage.captionCheckEl = image_dialog.querySelector(\"._ke_image_check_caption\");\n    contextImage.previewSrc = image_dialog.querySelector(\"._ke_tab_content_image .ke-link-preview\");\n    /** add event listeners */\n\n    image_dialog.querySelector(\".ke-dialog-tabs\").addEventListener(\"click\", this.openTab.bind(core));\n    image_dialog.querySelector(\"form\").addEventListener(\"submit\", this.submit.bind(core));\n\n    if (contextImage.imgInputFile) {\n      image_dialog.querySelector(\".ke-file-remove\").addEventListener(\"click\", this._removeSelectedFiles.bind(contextImage.imgInputFile, contextImage.imgUrlFile, contextImage.previewSrc));\n    }\n\n    if (contextImage.imgUrlFile) {\n      contextImage.imgUrlFile.addEventListener(\"input\", this._onLinkPreview.bind(contextImage.previewSrc, contextImage._v_src, options.linkProtocol));\n    }\n\n    if (contextImage.imgInputFile && contextImage.imgUrlFile) {\n      contextImage.imgInputFile.addEventListener(\"change\", this._fileInputChange.bind(contextImage));\n    }\n\n    var imageGalleryButton = image_dialog.querySelector(\".__ke__gallery\");\n\n    if (imageGalleryButton) {\n      imageGalleryButton.addEventListener(\"click\", this._openGallery.bind(core));\n    }\n\n    contextImage.proportion = {};\n    contextImage.inputX = {};\n    contextImage.inputY = {};\n\n    if (options.imageResizing) {\n      contextImage.proportion = image_dialog.querySelector(\"._ke_image_check_proportion\");\n      contextImage.inputX = image_dialog.querySelector(\"._ke_image_size_x\");\n      contextImage.inputY = image_dialog.querySelector(\"._ke_image_size_y\");\n      contextImage.inputX.value = options.imageWidth;\n      contextImage.inputY.value = options.imageHeight;\n      contextImage.inputX.addEventListener(\"keyup\", this.setInputSize.bind(core, \"x\"));\n      contextImage.inputY.addEventListener(\"keyup\", this.setInputSize.bind(core, \"y\"));\n      contextImage.inputX.addEventListener(\"change\", this.setRatio.bind(core));\n      contextImage.inputY.addEventListener(\"change\", this.setRatio.bind(core));\n      contextImage.proportion.addEventListener(\"change\", this.setRatio.bind(core));\n      image_dialog.querySelector(\".ke-dialog-btn-revert\").addEventListener(\"click\", this.sizeRevert.bind(core));\n    }\n    /** append html */\n\n\n    context.dialog.modal.appendChild(image_dialog);\n    /** link event */\n\n    core.plugins.anchor.initEvent.call(core, \"image\", image_dialog.querySelector(\"._ke_tab_content_url\"));\n    contextImage.anchorCtx = core.context.anchor.caller.image;\n    /** empty memory */\n\n    image_dialog = null;\n  },\n\n  /** dialog */\n  setDialog: function setDialog(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var dialog = core.util.createElement(\"DIV\");\n    dialog.className = \"ke-dialog-content ke-dialog-image\";\n    dialog.style.display = \"none\";\n    var html = \"\" + '<div class=\"ke-dialog-header\">' + '<button type=\"button\" data-command=\"close\" class=\"ke-btn ke-dialog-close\" class=\"close\" aria-label=\"Close\" title=\"' + lang.dialogBox.close + '\">' + core.icons.cancel + \"</button>\" + '<span class=\"ke-modal-title\">' + lang.dialogBox.imageBox.title + \"</span>\" + \"</div>\" + '<div class=\"ke-dialog-tabs\">' + '<button type=\"button\" class=\"_ke_tab_link active\" data-tab-link=\"image\">' + lang.toolbar.image + \"</button>\" + '<button type=\"button\" class=\"_ke_tab_link\" data-tab-link=\"url\">' + lang.toolbar.link + \"</button>\" + \"</div>\" + '<form method=\"post\" enctype=\"multipart/form-data\">' + '<div class=\"_ke_tab_content _ke_tab_content_image\">' + '<div class=\"ke-dialog-body\"><div style=\"border-bottom: 1px dashed #ccc;\">';\n\n    if (option.imageFileInput) {\n      html += \"\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.imageBox.file + \"</label>\" + '<div class=\"ke-dialog-form-files\">' + '<input class=\"ke-input-form _ke_image_file\" type=\"file\" accept=\"' + option.imageAccept + '\"' + (option.imageMultipleFile ? ' multiple=\"multiple\"' : \"\") + \"/>\" + '<button type=\"button\" class=\"ke-btn ke-dialog-files-edge-button ke-file-remove\" title=\"' + lang.controller.remove + '\">' + core.icons.cancel + \"</button>\" + \"</div>\" + \"</div>\";\n    }\n\n    if (option.imageUrlInput) {\n      html += \"\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.imageBox.url + \"</label>\" + '<div class=\"ke-dialog-form-files\">' + '<input class=\"ke-input-form ke-input-url _ke_image_url\" type=\"text\" />' + (option.imageGalleryUrl && core.plugins.imageGallery ? '<button type=\"button\" class=\"ke-btn ke-dialog-files-edge-button __ke__gallery\" title=\"' + lang.toolbar.imageGallery + '\">' + core.icons.image_gallery + \"</button>\" : \"\") + \"</div>\" + '<pre class=\"ke-link-preview\"></pre>' + \"</div>\";\n    }\n\n    html += \"</div>\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.imageBox.altText + '</label><input class=\"ke-input-form _ke_image_alt\" type=\"text\" />' + \"</div>\";\n\n    if (option.imageResizing) {\n      var onlyPercentage = option.imageSizeOnlyPercentage;\n      var onlyPercentDisplay = onlyPercentage ? ' style=\"display: none !important;\"' : \"\";\n      var heightDisplay = !option.imageHeightShow ? ' style=\"display: none !important;\"' : \"\";\n      html += '<div class=\"ke-dialog-form\">';\n\n      if (onlyPercentage || !option.imageHeightShow) {\n        html += \"\" + '<div class=\"ke-dialog-size-text\">' + '<label class=\"size-w\">' + lang.dialogBox.size + \"</label>\" + \"</div>\";\n      } else {\n        html += \"\" + '<div class=\"ke-dialog-size-text\">' + '<label class=\"size-w\">' + lang.dialogBox.width + \"</label>\" + '<label class=\"ke-dialog-size-x\">&nbsp;</label>' + '<label class=\"size-h\">' + lang.dialogBox.height + \"</label>\" + \"</div>\";\n      }\n\n      html += \"\" + '<input class=\"ke-input-control _ke_image_size_x\" placeholder=\"auto\"' + (onlyPercentage ? ' type=\"number\" min=\"1\"' : 'type=\"text\"') + (onlyPercentage ? ' max=\"100\"' : \"\") + \" />\" + '<label class=\"ke-dialog-size-x\"' + heightDisplay + \">\" + (onlyPercentage ? \"%\" : \"x\") + \"</label>\" + '<input type=\"text\" class=\"ke-input-control _ke_image_size_y\" placeholder=\"auto\"' + onlyPercentDisplay + (onlyPercentage ? ' max=\"100\"' : \"\") + heightDisplay + \"/>\" + \"<label\" + onlyPercentDisplay + heightDisplay + '><input type=\"checkbox\" class=\"ke-dialog-btn-check _ke_image_check_proportion\" checked/>&nbsp;' + lang.dialogBox.proportion + \"</label>\" + '<button type=\"button\" title=\"' + lang.dialogBox.revertButton + '\" class=\"ke-btn ke-dialog-btn-revert\" style=\"float: right;\">' + core.icons.revert + \"</button>\" + \"</div>\";\n    }\n\n    html += \"\" + '<div class=\"ke-dialog-form ke-dialog-form-footer\">' + '<label><input type=\"checkbox\" class=\"ke-dialog-btn-check _ke_image_check_caption\" />&nbsp;' + lang.dialogBox.caption + \"</label>\" + \"</div>\" + \"</div>\" + \"</div>\" + '<div class=\"_ke_tab_content _ke_tab_content_url\" style=\"display: none\">' + core.context.anchor.forms.innerHTML + \"</div>\" + '<div class=\"ke-dialog-footer\">' + \"<div>\" + '<label><input type=\"radio\" name=\"kothingEditor_image_radio\" class=\"ke-dialog-btn-radio\" value=\"none\" checked>' + lang.dialogBox.basic + \"</label>\" + '<label><input type=\"radio\" name=\"kothingEditor_image_radio\" class=\"ke-dialog-btn-radio\" value=\"left\">' + lang.dialogBox.left + \"</label>\" + '<label><input type=\"radio\" name=\"kothingEditor_image_radio\" class=\"ke-dialog-btn-radio\" value=\"center\">' + lang.dialogBox.center + \"</label>\" + '<label><input type=\"radio\" name=\"kothingEditor_image_radio\" class=\"ke-dialog-btn-radio\" value=\"right\">' + lang.dialogBox.right + \"</label>\" + \"</div>\" + '<button type=\"submit\" class=\"ke-btn-primary\" title=\"' + lang.dialogBox.submitButton + '\"><span>' + lang.dialogBox.submitButton + \"</span></button>\" + \"</div>\" + \"</form>\";\n    dialog.innerHTML = html;\n    return dialog;\n  },\n  _fileInputChange: function _fileInputChange() {\n    if (!this.imgInputFile.value) {\n      this.imgUrlFile.removeAttribute(\"disabled\");\n      this.previewSrc.style.textDecoration = \"\";\n    } else {\n      this.imgUrlFile.setAttribute(\"disabled\", true);\n      this.previewSrc.style.textDecoration = \"line-through\";\n    }\n  },\n  _removeSelectedFiles: function _removeSelectedFiles(urlInput, previewSrc) {\n    this.value = \"\";\n\n    if (urlInput) {\n      urlInput.removeAttribute(\"disabled\");\n      previewSrc.style.textDecoration = \"\";\n    }\n  },\n  _openGallery: function _openGallery() {\n    this.callPlugin(\"imageGallery\", this.plugins.imageGallery.open.bind(this, this.plugins.image._setUrlInput.bind(this.context.image)), null);\n  },\n  _setUrlInput: function _setUrlInput(target) {\n    this.altText.value = target.alt;\n    this._v_src._linkValue = this.previewSrc.textContent = this.imgUrlFile.value = target.src;\n    this.imgUrlFile.focus();\n  },\n  _onLinkPreview: function _onLinkPreview(context, protocol, e) {\n    var value = e.target.value.trim();\n    context._linkValue = this.textContent = !value ? \"\" : protocol && value.indexOf(\"://\") === -1 && value.indexOf(\"#\") !== 0 ? protocol + value : value.indexOf(\"://\") === -1 ? \"/\" + value : value;\n  },\n\n  /**\r\n   * @Override @Required fileManager\r\n   */\n  fileTags: [\"img\"],\n\n  /**\r\n   * @Override core, fileManager, resizing\r\n   * @description It is called from core.selectComponent.\r\n   * @param {Element} element Target element\r\n   */\n  select: function select(element) {\n    this.plugins.image.onModifyMode.call(this, element, this.plugins.resizing.call_controller_resize.call(this, element, \"image\"));\n  },\n\n  /**\r\n   * @Override fileManager, resizing\r\n   */\n  destroy: function destroy(element) {\n    var imageEl = element || this.context.image._element;\n    var imageContainer = this.util.getParentElement(imageEl, this.util.isMediaComponent) || imageEl;\n    var dataIndex = imageEl.getAttribute(\"data-index\") * 1;\n    var focusEl = imageContainer.previousElementSibling || imageContainer.nextElementSibling;\n    var emptyDiv = imageContainer.parentNode;\n    this.util.removeItem(imageContainer);\n    this.plugins.image.init.call(this);\n    this.controllersOff();\n\n    if (emptyDiv !== this.context.element.wysiwyg) {\n      this.util.removeItemAllParents(emptyDiv, function (current) {\n        return current.childNodes.length === 0;\n      }, null);\n    } // focus\n\n\n    this.focusEdge(focusEl); // event\n\n    this.plugins.fileManager.deleteInfo.call(this, \"image\", dataIndex, this.functions.onImageUpload); // history stack\n\n    this.history.push(false);\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  on: function on(update) {\n    var contextImage = this.context.image;\n\n    if (!update) {\n      contextImage.inputX.value = contextImage._origin_w = this.options.imageWidth === contextImage._defaultSizeX ? \"\" : this.options.imageWidth;\n      contextImage.inputY.value = contextImage._origin_h = this.options.imageHeight === contextImage._defaultSizeY ? \"\" : this.options.imageHeight;\n\n      if (contextImage.imgInputFile && this.options.imageMultipleFile) {\n        contextImage.imgInputFile.setAttribute(\"multiple\", \"multiple\");\n      }\n    } else {\n      if (contextImage.imgInputFile && this.options.imageMultipleFile) {\n        contextImage.imgInputFile.removeAttribute(\"multiple\");\n      }\n    }\n\n    this.plugins.anchor.on.call(this, contextImage.anchorCtx, update);\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  open: function open() {\n    this.plugins.dialog.open.call(this, \"image\", \"image\" === this.currentControllerName);\n  },\n  openTab: function openTab(e) {\n    var modal = this.context.image.modal;\n    var targetElement = e === \"init\" ? modal.querySelector(\"._ke_tab_link\") : e.target;\n\n    if (!/^BUTTON$/i.test(targetElement.tagName)) {\n      return false;\n    } // Declare all variables\n\n\n    var tabName = targetElement.getAttribute(\"data-tab-link\");\n    var contentClassName = \"_ke_tab_content\";\n    var i, tabContent, tabLinks; // Get all elements with class=\"tabcontent\" and hide them\n\n    tabContent = modal.getElementsByClassName(contentClassName);\n\n    for (i = 0; i < tabContent.length; i++) {\n      tabContent[i].style.display = \"none\";\n    } // Get all elements with class=\"tablinks\" and remove the class \"active\"\n\n\n    tabLinks = modal.getElementsByClassName(\"_ke_tab_link\");\n\n    for (i = 0; i < tabLinks.length; i++) {\n      this.util.removeClass(tabLinks[i], \"active\");\n    } // Show the current tab, and add an \"active\" class to the button that opened the tab\n\n\n    modal.querySelector(\".\" + contentClassName + \"_\" + tabName).style.display = \"block\";\n    this.util.addClass(targetElement, \"active\"); // focus\n\n    if (tabName === \"image\" && this.context.image.focusElement) {\n      this.context.image.focusElement.focus();\n    } else if (tabName === \"url\") {\n      this.context.anchor.caller.image.urlInput.focus();\n    }\n\n    return false;\n  },\n  submit: function submit(e) {\n    var contextImage = this.context.image;\n    var imagePlugin = this.plugins.image;\n    e.preventDefault();\n    e.stopPropagation();\n    contextImage._altText = contextImage.altText.value;\n    contextImage._align = contextImage.modal.querySelector('input[name=\"kothingEditor_image_radio\"]:checked').value;\n    contextImage._captionChecked = contextImage.captionCheckEl.checked;\n\n    if (contextImage._resizing) {\n      contextImage._proportionChecked = contextImage.proportion.checked;\n    }\n\n    try {\n      if (this.context.dialog.updateModal) {\n        imagePlugin.update_image.call(this, false, true, false);\n      }\n\n      if (contextImage.imgInputFile && contextImage.imgInputFile.files.length > 0) {\n        this.showLoading();\n        imagePlugin.submitAction.call(this, this.context.image.imgInputFile.files);\n      } else if (contextImage.imgUrlFile && contextImage._v_src._linkValue.length > 0) {\n        this.showLoading();\n        imagePlugin.onRender_imgUrl.call(this);\n      }\n    } catch (error) {\n      this.closeLoading();\n      throw Error('[KothingEditor.image.submit.fail] cause : \"' + error.message + '\"');\n    } finally {\n      this.plugins.dialog.close.call(this);\n    }\n\n    return false;\n  },\n  submitAction: function submitAction(fileList) {\n    if (fileList.length === 0) {\n      return;\n    }\n\n    var fileSize = 0;\n    var files = [];\n\n    for (var i = 0, len = fileList.length; i < len; i++) {\n      if (/image/i.test(fileList[i].type)) {\n        files.push(fileList[i]);\n        fileSize += fileList[i].size;\n      }\n    }\n\n    var limitSize = this.options.imageUploadSizeLimit;\n\n    if (limitSize > 0) {\n      var infoSize = 0;\n      var imagesInfo = this.context.image._infoList;\n\n      for (var _i = 0, _len = imagesInfo.length; _i < _len; _i++) {\n        infoSize += imagesInfo[_i].size * 1;\n      }\n\n      if (fileSize + infoSize > limitSize) {\n        this.closeLoading();\n        var err = \"[KothingEditor.imageUpload.fail] Size of uploadable total images: \" + limitSize / 1000 + \"KB\";\n\n        if (typeof this.functions.onImageUploadError !== \"function\" || this.functions.onImageUploadError(err, {\n          limitSize: limitSize,\n          currentSize: infoSize,\n          uploadSize: fileSize\n        }, this)) {\n          this.functions.noticeOpen(err);\n        }\n\n        return;\n      }\n    }\n\n    var contextImage = this.context.image;\n    contextImage._uploadFileLength = files.length;\n    var anchor = this.plugins.anchor.createAnchor.call(this, contextImage.anchorCtx, true);\n    var info = {\n      anchor: anchor,\n      inputWidth: contextImage.inputX.value,\n      inputHeight: contextImage.inputY.value,\n      align: contextImage._align,\n      isUpdate: this.context.dialog.updateModal,\n      element: contextImage._element\n    };\n\n    if (typeof this.functions.onImageUploadBefore === \"function\") {\n      var result = this.functions.onImageUploadBefore(files, info, this, function (data) {\n        if (data && this._w.Array.isArray(data.result)) {\n          this.plugins.image.register.call(this, info, data);\n        } else {\n          this.plugins.image.upload.call(this, info, data);\n        }\n      }.bind(this));\n\n      if (typeof result === \"undefined\") {\n        return;\n      }\n\n      if (!result) {\n        this.closeLoading();\n        return;\n      }\n\n      if (this._w.Array.isArray(result) && result.length > 0) {\n        files = result;\n      }\n    }\n\n    this.plugins.image.upload.call(this, info, files);\n  },\n  error: function error(message, response) {\n    this.closeLoading();\n\n    if (typeof this.functions.onImageUploadError !== \"function\" || this.functions.onImageUploadError(message, response, this)) {\n      this.functions.noticeOpen(message);\n      throw Error(\"[KothingEditor.plugin.image.error] response: \" + message);\n    }\n  },\n  upload: function upload(info, files) {\n    if (!files) {\n      this.closeLoading();\n      return;\n    }\n\n    if (typeof files === \"string\") {\n      this.plugins.image.error.call(this, files, null);\n      return;\n    }\n\n    var imageUploadUrl = this.options.imageUploadUrl;\n    var filesLen = this.context.dialog.updateModal ? 1 : files.length; // server upload\n\n    if (typeof imageUploadUrl === \"string\" && imageUploadUrl.length > 0) {\n      var formData = new FormData();\n\n      for (var i = 0; i < filesLen; i++) {\n        formData.append(\"file-\" + i, files[i]);\n      }\n\n      this.plugins.fileManager.upload.call(this, imageUploadUrl, this.options.imageUploadHeader, formData, this.plugins.image.callBack_imgUpload.bind(this, info), this.functions.onImageUploadError);\n    } else {\n      // base64\n      this.plugins.image.setup_reader.call(this, files, info.anchor, info.inputWidth, info.inputHeight, info.align, filesLen, info.isUpdate);\n    }\n  },\n  callBack_imgUpload: function callBack_imgUpload(info, xmlHttp) {\n    if (typeof this.functions.imageUploadHandler === \"function\") {\n      this.functions.imageUploadHandler(xmlHttp, info, this);\n    } else {\n      var response = JSON.parse(xmlHttp.responseText);\n\n      if (response.errorMessage) {\n        this.plugins.image.error.call(this, response.errorMessage, response);\n      } else {\n        this.plugins.image.register.call(this, info, response);\n      }\n    }\n  },\n  register: function register(info, response) {\n    var fileList = response.result;\n\n    for (var i = 0, len = fileList.length, file; i < len; i++) {\n      file = {\n        name: fileList[i].name,\n        size: fileList[i].size\n      };\n\n      if (info.isUpdate) {\n        this.plugins.image.update_src.call(this, fileList[i].url, info.element, file);\n        break;\n      } else {\n        this.plugins.image.create_image.call(this, fileList[i].url, info.anchor, info.inputWidth, info.inputHeight, info.align, file);\n      }\n    }\n\n    this.closeLoading();\n  },\n  setup_reader: function setup_reader(files, anchor, width, height, align, filesLen, isUpdate) {\n    var _this = this;\n\n    try {\n      (function () {\n        _this.context.image.base64RenderIndex = filesLen;\n        var wFileReader = _this._w.FileReader;\n        var filesStack = [filesLen];\n        _this.context.image.inputX.value = width;\n        _this.context.image.inputY.value = height;\n\n        for (var i = 0, reader, file; i < filesLen; i++) {\n          reader = new wFileReader();\n          file = files[i];\n\n          reader.onload = function (reader, update, updateElement, file, index) {\n            filesStack[index] = {\n              result: reader.result,\n              file: file\n            };\n\n            if (--this.context.image.base64RenderIndex === 0) {\n              this.plugins.image.onRender_imgBase64.call(this, update, filesStack, updateElement, anchor, width, height, align);\n              this.closeLoading();\n            }\n          }.bind(_this, reader, isUpdate, _this.context.image._element, file, i);\n\n          reader.readAsDataURL(file);\n        }\n      })();\n    } catch (e) {\n      this.closeLoading();\n      throw Error('[KothingEditor.image.setup_reader.fail] cause : \"' + e.message + '\"');\n    }\n  },\n  onRender_imgBase64: function onRender_imgBase64(update, filesStack, updateElement, anchor, width, height, align) {\n    var updateMethod = this.plugins.image.update_src;\n    var createMethod = this.plugins.image.create_image;\n\n    for (var i = 0, len = filesStack.length; i < len; i++) {\n      if (update) {\n        this.context.image._element.setAttribute(\"data-file-name\", filesStack[i].file.name);\n\n        this.context.image._element.setAttribute(\"data-file-size\", filesStack[i].file.size);\n\n        updateMethod.call(this, filesStack[i].result, updateElement, filesStack[i].file);\n      } else {\n        createMethod.call(this, filesStack[i].result, anchor, width, height, align, filesStack[i].file);\n      }\n    }\n  },\n  onRender_imgUrl: function onRender_imgUrl() {\n    var contextImage = this.context.image;\n\n    if (contextImage._v_src._linkValue.length === 0) {\n      return false;\n    }\n\n    try {\n      var file = {\n        name: contextImage._v_src._linkValue.split(\"/\").pop(),\n        size: 0\n      };\n\n      if (this.context.dialog.updateModal) {\n        this.plugins.image.update_src.call(this, contextImage._v_src._linkValue, contextImage._element, file);\n      } else {\n        this.plugins.image.create_image.call(this, contextImage._v_src._linkValue, this.plugins.anchor.createAnchor.call(this, contextImage.anchorCtx, true), contextImage.inputX.value, contextImage.inputY.value, contextImage._align, file);\n      }\n    } catch (e) {\n      throw Error('[KothingEditor.image.URLRendering.fail] cause : \"' + e.message + '\"');\n    } finally {\n      this.closeLoading();\n    }\n  },\n  onRender_link: function onRender_link(imgTag, anchor) {\n    if (anchor) {\n      anchor.setAttribute(\"data-image-link\", \"image\");\n      imgTag.setAttribute(\"data-image-link\", anchor.href);\n      anchor.appendChild(imgTag);\n      return anchor;\n    }\n\n    return imgTag;\n  },\n\n  /**\r\n   * @Override resizing\r\n   * @param {String} xy 'x': width, 'y': height\r\n   * @param {KeyboardEvent} e Event object\r\n   */\n  setInputSize: function setInputSize(xy, e) {\n    if (e && e.keyCode === 32) {\n      e.preventDefault();\n      return;\n    }\n\n    this.plugins.resizing._module_setInputSize.call(this, this.context.image, xy);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setRatio: function setRatio() {\n    this.plugins.resizing._module_setRatio.call(this, this.context.image);\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  checkFileInfo: function checkFileInfo() {\n    var imagePlugin = this.plugins.image;\n    var contextImage = this.context.image;\n\n    var modifyHandler = function (tag) {\n      imagePlugin.onModifyMode.call(this, tag, null);\n      imagePlugin.openModify.call(this, true); // get size\n\n      contextImage.inputX.value = contextImage._origin_w;\n      contextImage.inputY.value = contextImage._origin_h; // get align\n\n      var format = this.util.getFormatElement(tag);\n\n      if (format) {\n        contextImage._align = format.style.textAlign || format.style.float;\n      } // link\n\n\n      var link = this.util.getParentElement(tag, this.util.isAnchor);\n\n      if (link && !contextImage.anchorCtx.linkValue) {\n        contextImage.anchorCtx.linkValue = \" \";\n      }\n\n      imagePlugin.update_image.call(this, true, false, true);\n    }.bind(this);\n\n    this.plugins.fileManager.checkInfo.call(this, \"image\", [\"img\"], this.functions.onImageUpload, modifyHandler, true);\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  resetFileInfo: function resetFileInfo() {\n    this.plugins.fileManager.resetInfo.call(this, \"image\", this.functions.onImageUpload);\n  },\n  create_image: function create_image(src, anchor, width, height, align, file) {\n    var imagePlugin = this.plugins.image;\n    var contextImage = this.context.image;\n    this.context.resizing._resize_plugin = \"image\";\n    var oImg = this.util.createElement(\"IMG\");\n    oImg.src = src;\n    oImg.alt = contextImage._altText;\n    oImg.setAttribute(\"data-rotate\", \"0\");\n    anchor = imagePlugin.onRender_link.call(this, oImg, anchor);\n\n    if (contextImage._resizing) {\n      oImg.setAttribute(\"data-proportion\", contextImage._proportionChecked);\n    }\n\n    var cover = this.plugins.component.set_cover.call(this, anchor);\n    var container = this.plugins.component.set_container.call(this, cover, \"ke-image-container\"); // caption\n\n    if (contextImage._captionChecked) {\n      contextImage._caption = this.plugins.component.create_caption.call(this);\n\n      contextImage._caption.setAttribute(\"contenteditable\", false);\n\n      cover.appendChild(contextImage._caption);\n    }\n\n    contextImage._element = oImg;\n    contextImage._cover = cover;\n    contextImage._container = container; // set size\n\n    imagePlugin.applySize.call(this, width, height); // align\n\n    imagePlugin.setAlign.call(this, align, oImg, cover, container);\n    oImg.onload = imagePlugin._image_create_onload.bind(this, oImg, contextImage.svgDefaultSize, container);\n\n    if (this.insertComponent(container, true, true, true)) {\n      this.plugins.fileManager.setInfo.call(this, \"image\", oImg, this.functions.onImageUpload, file, true);\n    }\n\n    this.context.resizing._resize_plugin = \"\";\n  },\n  _image_create_onload: function _image_create_onload(oImg, svgDefaultSize, container) {\n    // svg exception handling\n    if (oImg.offsetWidth === 0) {\n      this.plugins.image.applySize.call(this, svgDefaultSize, \"\");\n    }\n\n    if (this.options.mediaAutoSelect) {\n      this.selectComponent(oImg, \"image\");\n    } else {\n      var line = this.appendFormatTag(container, null);\n      this.setRange(line, 0, line, 0);\n    }\n  },\n  update_image: function update_image(init, openController, notHistoryPush) {\n    var contextImage = this.context.image;\n    var imageEl = contextImage._element;\n    var cover = contextImage._cover;\n    var container = contextImage._container;\n    var isNewContainer = false;\n\n    if (cover === null) {\n      isNewContainer = true;\n      imageEl = contextImage._element.cloneNode(true);\n      cover = this.plugins.component.set_cover.call(this, imageEl);\n    }\n\n    if (container === null) {\n      cover = cover.cloneNode(true);\n      imageEl = cover.querySelector(\"img\");\n      isNewContainer = true;\n      container = this.plugins.component.set_container.call(this, cover, \"ke-image-container\");\n    } else if (isNewContainer) {\n      container.innerHTML = \"\";\n      container.appendChild(cover);\n      contextImage._cover = cover;\n      contextImage._element = imageEl;\n      isNewContainer = false;\n    } // check size\n\n\n    var changeSize;\n    var x = this.util.isNumber(contextImage.inputX.value) ? contextImage.inputX.value + contextImage.sizeUnit : contextImage.inputX.value;\n    var y = this.util.isNumber(contextImage.inputY.value) ? contextImage.inputY.value + contextImage.sizeUnit : contextImage.inputY.value;\n\n    if (/%$/.test(imageEl.style.width)) {\n      changeSize = x !== container.style.width || y !== container.style.height;\n    } else {\n      changeSize = x !== imageEl.style.width || y !== imageEl.style.height;\n    } // alt\n\n\n    imageEl.alt = contextImage._altText; // caption\n\n    var modifiedCaption = false;\n\n    if (contextImage._captionChecked) {\n      if (!contextImage._caption) {\n        contextImage._caption = this.plugins.component.create_caption.call(this);\n        cover.appendChild(contextImage._caption);\n        modifiedCaption = true;\n      }\n    } else {\n      if (contextImage._caption) {\n        this.util.removeItem(contextImage._caption);\n        contextImage._caption = null;\n        modifiedCaption = true;\n      }\n    } // link\n\n\n    var anchor = this.plugins.anchor.createAnchor.call(this, contextImage.anchorCtx, true);\n\n    if (anchor) {\n      contextImage._linkElement = contextImage._linkElement === anchor ? anchor.cloneNode(false) : anchor;\n      cover.insertBefore(this.plugins.image.onRender_link.call(this, imageEl, contextImage._linkElement), contextImage._caption);\n    } else if (contextImage._linkElement !== null) {\n      var imageElement = imageEl;\n      imageElement.setAttribute(\"data-image-link\", \"\");\n\n      if (cover.contains(contextImage._linkElement)) {\n        var newEl = imageElement.cloneNode(true);\n        cover.removeChild(contextImage._linkElement);\n        cover.insertBefore(newEl, contextImage._caption);\n        imageEl = newEl;\n      }\n    }\n\n    if (isNewContainer) {\n      var existElement = this.util.isRangeFormatElement(contextImage._element.parentNode) || this.util.isWysiwygDiv(contextImage._element.parentNode) ? contextImage._element : /^A$/i.test(contextImage._element.parentNode.nodeName) ? contextImage._element.parentNode : this.util.getFormatElement(contextImage._element) || contextImage._element;\n\n      if (this.util.isFormatElement(existElement) && existElement.childNodes.length > 0) {\n        existElement.parentNode.insertBefore(container, existElement);\n        this.util.removeItem(contextImage._element); // clean format tag\n\n        this.util.removeEmptyNode(existElement, null);\n\n        if (existElement.children.length === 0) {\n          existElement.innerHTML = this.util.htmlRemoveWhiteSpace(existElement.innerHTML);\n        }\n      } else {\n        if (this.util.isFormatElement(existElement.parentNode)) {\n          var formats = existElement.parentNode;\n          formats.parentNode.insertBefore(container, existElement.previousSibling ? formats.nextElementSibling : formats);\n          this.util.removeItem(existElement);\n        } else {\n          existElement.parentNode.replaceChild(container, existElement);\n        }\n      }\n\n      imageEl = container.querySelector(\"img\");\n      contextImage._element = imageEl;\n      contextImage._cover = cover;\n      contextImage._container = container;\n    } // transform\n\n\n    if (modifiedCaption || !contextImage._onlyPercentage && changeSize) {\n      if (!init && (/\\d+/.test(imageEl.style.height) || this.context.resizing._rotateVertical && contextImage._captionChecked)) {\n        if (/%$/.test(contextImage.inputX.value) || /%$/.test(contextImage.inputY.value)) {\n          this.plugins.resizing.resetTransform.call(this, imageEl);\n        } else {\n          this.plugins.resizing.setTransformSize.call(this, imageEl, this.util.getNumber(contextImage.inputX.value, 0), this.util.getNumber(contextImage.inputY.value, 0));\n        }\n      }\n    } // size\n\n\n    if (contextImage._resizing) {\n      imageEl.setAttribute(\"data-proportion\", contextImage._proportionChecked);\n\n      if (changeSize) {\n        this.plugins.image.applySize.call(this);\n      }\n    } // align\n\n\n    this.plugins.image.setAlign.call(this, null, imageEl, null, null); // set imagesInfo\n\n    if (init) {\n      this.plugins.fileManager.setInfo.call(this, \"image\", imageEl, this.functions.onImageUpload, null, true);\n    }\n\n    if (openController) {\n      this.selectComponent(imageEl, \"image\");\n    } // history stack\n\n\n    if (!notHistoryPush) {\n      this.history.push(false);\n    }\n  },\n  update_src: function update_src(src, element, file) {\n    element.src = src;\n\n    this._w.setTimeout(this.plugins.fileManager.setInfo.bind(this, \"image\", element, this.functions.onImageUpload, file, true));\n\n    this.selectComponent(element, \"image\");\n  },\n\n  /**\r\n   * @Required @Override fileManager, resizing\r\n   */\n  onModifyMode: function onModifyMode(element, size) {\n    if (!element) {\n      return;\n    }\n\n    var contextImage = this.context.image;\n    contextImage._linkElement = contextImage.anchorCtx.linkAnchor = /^A$/i.test(element.parentNode.nodeName) ? element.parentNode : null;\n    contextImage._element = element;\n    contextImage._cover = this.util.getParentElement(element, \"FIGURE\");\n    contextImage._container = this.util.getParentElement(element, this.util.isMediaComponent);\n    contextImage._caption = this.util.getChildElement(contextImage._cover, \"FIGCAPTION\");\n    contextImage._align = element.style.float || element.getAttribute(\"data-align\") || \"none\";\n    element.style.float = \"\";\n    this.plugins.anchor.setCtx(contextImage._linkElement, contextImage.anchorCtx);\n\n    if (size) {\n      contextImage._element_w = size.w;\n      contextImage._element_h = size.h;\n      contextImage._element_t = size.t;\n      contextImage._element_l = size.l;\n    }\n\n    var userSize = contextImage._element.getAttribute(\"data-size\") || contextImage._element.getAttribute(\"data-origin\");\n\n    var w, h;\n\n    if (userSize) {\n      userSize = userSize.split(\",\");\n      w = userSize[0];\n      h = userSize[1];\n    } else if (size) {\n      w = size.w;\n      h = size.h;\n    }\n\n    contextImage._origin_w = w || element.style.width || element.width || \"\";\n    contextImage._origin_h = h || element.style.height || element.height || \"\";\n  },\n\n  /**\r\n   * @Required @Override fileManager, resizing\r\n   */\n  openModify: function openModify(notOpen) {\n    var contextImage = this.context.image;\n\n    if (contextImage.imgUrlFile) {\n      contextImage._v_src._linkValue = contextImage.previewSrc.textContent = contextImage.imgUrlFile.value = contextImage._element.src;\n    }\n\n    contextImage._altText = contextImage.altText.value = contextImage._element.alt;\n    contextImage.modal.querySelector('input[name=\"kothingEditor_image_radio\"][value=\"' + contextImage._align + '\"]').checked = true;\n    contextImage._align = contextImage.modal.querySelector('input[name=\"kothingEditor_image_radio\"]:checked').value;\n    contextImage._captionChecked = contextImage.captionCheckEl.checked = !!contextImage._caption;\n\n    if (contextImage._resizing) {\n      this.plugins.resizing._module_setModifyInputSize.call(this, contextImage, this.plugins.image);\n    }\n\n    if (!notOpen) {\n      this.plugins.dialog.open.call(this, \"image\", true);\n    }\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  applySize: function applySize(w, h) {\n    var contextImage = this.context.image;\n\n    if (!w) {\n      w = contextImage.inputX.value || this.options.imageWidth;\n    }\n\n    if (!h) {\n      h = contextImage.inputY.value || this.options.imageHeight;\n    }\n\n    if (contextImage._onlyPercentage && !!w || /%$/.test(w)) {\n      this.plugins.image.setPercentSize.call(this, w, h);\n      return true;\n    } else if ((!w || w === \"auto\") && (!h || h === \"auto\")) {\n      this.plugins.image.setAutoSize.call(this);\n    } else {\n      this.plugins.image.setSize.call(this, w, h, false);\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  sizeRevert: function sizeRevert() {\n    this.plugins.resizing._module_sizeRevert.call(this, this.context.image);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setSize: function setSize(w, h, notResetPercentage, direction) {\n    var contextImage = this.context.image;\n    var onlyW = /^(rw|lw)$/.test(direction);\n    var onlyH = /^(th|bh)$/.test(direction);\n\n    if (!onlyH) {\n      contextImage._element.style.width = this.util.isNumber(w) ? w + contextImage.sizeUnit : w;\n      this.plugins.image.cancelPercentAttr.call(this);\n    }\n\n    if (!onlyW) {\n      contextImage._element.style.height = this.util.isNumber(h) ? h + contextImage.sizeUnit : /%$/.test(h) ? \"\" : h;\n    }\n\n    if (contextImage._align === \"center\") {\n      this.plugins.image.setAlign.call(this, null, null, null, null);\n    }\n\n    if (!notResetPercentage) {\n      contextImage._element.removeAttribute(\"data-percentage\");\n    } // save current size\n\n\n    this.plugins.resizing._module_saveCurrentSize.call(this, contextImage);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setAutoSize: function setAutoSize() {\n    var contextImage = this.context.image;\n    this.plugins.resizing.resetTransform.call(this, contextImage._element);\n    this.plugins.image.cancelPercentAttr.call(this);\n    contextImage._element.style.maxWidth = \"\";\n    contextImage._element.style.width = \"\";\n    contextImage._element.style.height = \"\";\n    contextImage._cover.style.width = \"\";\n    contextImage._cover.style.height = \"\";\n    this.plugins.image.setAlign.call(this, null, null, null, null);\n\n    contextImage._element.setAttribute(\"data-percentage\", \"auto,auto\"); // save current size\n\n\n    this.plugins.resizing._module_saveCurrentSize.call(this, contextImage);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setOriginSize: function setOriginSize() {\n    var contextImage = this.context.image;\n\n    contextImage._element.removeAttribute(\"data-percentage\");\n\n    this.plugins.resizing.resetTransform.call(this, contextImage._element);\n    this.plugins.image.cancelPercentAttr.call(this);\n    var originSize = (contextImage._element.getAttribute(\"data-origin\") || \"\").split(\",\");\n    var w = originSize[0];\n    var h = originSize[1];\n\n    if (originSize) {\n      if (contextImage._onlyPercentage || /%$/.test(w) && (/%$/.test(h) || !/\\d/.test(h))) {\n        this.plugins.image.setPercentSize.call(this, w, h);\n      } else {\n        this.plugins.image.setSize.call(this, w, h);\n      } // save current size\n\n\n      this.plugins.resizing._module_saveCurrentSize.call(this, contextImage);\n    }\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setPercentSize: function setPercentSize(w, h) {\n    var contextImage = this.context.image;\n    h = !!h && !/%$/.test(h) && !this.util.getNumber(h, 0) ? this.util.isNumber(h) ? h + \"%\" : h : this.util.isNumber(h) ? h + contextImage.sizeUnit : h || \"\";\n    var heightPercentage = /%$/.test(h);\n    contextImage._container.style.width = this.util.isNumber(w) ? w + \"%\" : w;\n    contextImage._container.style.height = \"\";\n    contextImage._cover.style.width = \"100%\";\n    contextImage._cover.style.height = !heightPercentage ? \"\" : h;\n    contextImage._element.style.width = \"100%\";\n    contextImage._element.style.height = heightPercentage ? \"\" : h;\n    contextImage._element.style.maxWidth = \"\";\n\n    if (contextImage._align === \"center\") {\n      this.plugins.image.setAlign.call(this, null, null, null, null);\n    }\n\n    contextImage._element.setAttribute(\"data-percentage\", w + \",\" + h);\n\n    this.plugins.resizing.setCaptionPosition.call(this, contextImage._element); // save current size\n\n    this.plugins.resizing._module_saveCurrentSize.call(this, contextImage);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  cancelPercentAttr: function cancelPercentAttr() {\n    var contextImage = this.context.image;\n    contextImage._cover.style.width = \"\";\n    contextImage._cover.style.height = \"\";\n    contextImage._container.style.width = \"\";\n    contextImage._container.style.height = \"\";\n    this.util.removeClass(contextImage._container, this.context.image._floatClassRegExp);\n    this.util.addClass(contextImage._container, \"__ke__float-\" + contextImage._align);\n\n    if (contextImage._align === \"center\") {\n      this.plugins.image.setAlign.call(this, null, null, null, null);\n    }\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setAlign: function setAlign(align, element, cover, container) {\n    var contextImage = this.context.image;\n\n    if (!align) {\n      align = contextImage._align;\n    }\n\n    if (!element) {\n      element = contextImage._element;\n    }\n\n    if (!cover) {\n      cover = contextImage._cover;\n    }\n\n    if (!container) {\n      container = contextImage._container;\n    }\n\n    if (align && align !== \"none\") {\n      cover.style.margin = \"auto\";\n    } else {\n      cover.style.margin = \"0\";\n    }\n\n    if (/%$/.test(element.style.width) && align === \"center\") {\n      container.style.minWidth = \"100%\";\n      cover.style.width = container.style.width;\n    } else {\n      container.style.minWidth = \"\";\n      cover.style.width = this.context.resizing._rotateVertical ? element.style.height || element.offsetHeight : !element.style.width || element.style.width === \"auto\" ? \"\" : element.style.width || \"100%\";\n    }\n\n    if (!this.util.hasClass(container, \"__ke__float-\" + align)) {\n      this.util.removeClass(container, contextImage._floatClassRegExp);\n      this.util.addClass(container, \"__ke__float-\" + align);\n    }\n\n    element.setAttribute(\"data-align\", align);\n  },\n\n  /**\r\n   * @Override dialog\r\n   */\n  init: function init() {\n    var contextImage = this.context.image;\n\n    if (contextImage.imgInputFile) {\n      contextImage.imgInputFile.value = \"\";\n    }\n\n    if (contextImage.imgUrlFile) {\n      contextImage._v_src._linkValue = contextImage.previewSrc.textContent = contextImage.imgUrlFile.value = \"\";\n    }\n\n    if (contextImage.imgInputFile && contextImage.imgUrlFile) {\n      contextImage.imgUrlFile.removeAttribute(\"disabled\");\n      contextImage.previewSrc.style.textDecoration = \"\";\n    }\n\n    contextImage.altText.value = \"\";\n    contextImage.modal.querySelector('input[name=\"kothingEditor_image_radio\"][value=\"none\"]').checked = true;\n    contextImage.captionCheckEl.checked = false;\n    contextImage._element = null;\n    this.plugins.image.openTab.call(this, \"init\");\n\n    if (contextImage._resizing) {\n      contextImage.inputX.value = this.options.imageWidth === contextImage._defaultSizeX ? \"\" : this.options.imageWidth;\n      contextImage.inputY.value = this.options.imageHeight === contextImage._defaultSizeY ? \"\" : this.options.imageHeight;\n      contextImage.proportion.checked = true;\n      contextImage._ratio = false;\n      contextImage._ratioX = 1;\n      contextImage._ratioY = 1;\n    }\n\n    this.plugins.anchor.init.call(this, contextImage.anchorCtx);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"align\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var icons = core.icons;\n    var context = core.context;\n    context.align = {\n      targetButton: targetElement,\n      _alignList: null,\n      currentAlign: \"\",\n      defaultDir: core.options.rtl ? \"right\" : \"left\",\n      icons: {\n        justify: icons.align_justify,\n        left: icons.align_left,\n        right: icons.align_right,\n        center: icons.align_center\n      }\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector(\"ul\");\n    /** add event listeners */\n\n    listUl.addEventListener(\"click\", this.pickup.bind(core));\n    context.align._alignList = listUl.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var lang = core.lang;\n    var icons = core.icons;\n    var listDiv = core.util.createElement(\"DIV\");\n    var leftDir = core.context.align.defaultDir === \"left\";\n    var leftMenu = \"<li>\" + '<button type=\"button\" class=\"ke-btn-list ke-btn-align\" data-command=\"justifyleft\" data-value=\"left\" title=\"' + lang.toolbar.alignLeft + '\">' + '<span class=\"ke-list-icon\">' + icons.align_left + \"</span>\" + lang.toolbar.alignLeft + \"</button>\" + \"</li>\";\n    var rightMenu = \"<li>\" + '<button type=\"button\" class=\"ke-btn-list ke-btn-align\" data-command=\"justifyright\" data-value=\"right\" title=\"' + lang.toolbar.alignRight + '\">' + '<span class=\"ke-list-icon\">' + icons.align_right + \"</span>\" + lang.toolbar.alignRight + \"</button>\" + \"</li>\";\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-align\";\n    listDiv.innerHTML = \"\" + '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + (leftDir ? leftMenu : rightMenu) + \"<li>\" + '<button type=\"button\" class=\"ke-btn-list ke-btn-align\" data-command=\"justifycenter\" data-value=\"center\" title=\"' + lang.toolbar.alignCenter + '\">' + '<span class=\"ke-list-icon\">' + icons.align_center + \"</span>\" + lang.toolbar.alignCenter + \"</button>\" + \"</li>\" + (leftDir ? rightMenu : leftMenu) + \"<li>\" + '<button type=\"button\" class=\"ke-btn-list ke-btn-align\" data-command=\"justifyfull\" data-value=\"justify\" title=\"' + lang.toolbar.alignJustify + '\">' + '<span class=\"ke-list-icon\">' + icons.align_justify + \"</span>\" + lang.toolbar.alignJustify + \"</button>\" + \"</li>\" + \"</ul>\" + \"</div>\";\n    return listDiv;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    var alignContext = this.context.align;\n    var targetButton = alignContext.targetButton;\n    var target = targetButton.firstElementChild;\n\n    if (!element) {\n      this.util.changeElement(target, alignContext.icons[alignContext.defaultDir]);\n      targetButton.removeAttribute(\"data-focus\");\n    } else if (this.util.isFormatElement(element)) {\n      var textAlign = element.style.textAlign;\n\n      if (textAlign) {\n        this.util.changeElement(target, alignContext.icons[textAlign] || alignContext.icons[alignContext.defaultDir]);\n        targetButton.setAttribute(\"data-focus\", textAlign);\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var alignContext = this.context.align;\n    var alignList = alignContext._alignList;\n    var currentAlign = alignContext.targetButton.getAttribute(\"data-focus\") || alignContext.defaultDir;\n\n    if (currentAlign !== alignContext.currentAlign) {\n      for (var i = 0, len = alignList.length; i < len; i++) {\n        if (currentAlign === alignList[i].getAttribute(\"data-value\")) {\n          this.util.addClass(alignList[i], \"active\");\n        } else {\n          this.util.removeClass(alignList[i], \"active\");\n        }\n      }\n\n      alignContext.currentAlign = currentAlign;\n    }\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var value = null;\n\n    while (!value && !/UL/i.test(target.tagName)) {\n      value = target.getAttribute(\"data-value\");\n      target = target.parentNode;\n    }\n\n    if (!value) {\n      return;\n    }\n\n    var defaultDir = this.context.align.defaultDir;\n    var selectedFormsts = this.getSelectedElements();\n\n    for (var i = 0, len = selectedFormsts.length; i < len; i++) {\n      this.util.setStyle(selectedFormsts[i], \"textAlign\", value === defaultDir ? \"\" : value);\n    }\n\n    this.effectNode = null;\n    this.submenuOff();\n    this.focus(); // history stack\n\n    this.history.push(false);\n  }\n};\nexports.default = _default;","import VIcon from './VIcon'\n\nexport { VIcon }\nexport default VIcon\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"blockquote\", {\n  enumerable: true,\n  get: function get() {\n    return _blockquote.default;\n  }\n});\nObject.defineProperty(exports, \"align\", {\n  enumerable: true,\n  get: function get() {\n    return _align.default;\n  }\n});\nObject.defineProperty(exports, \"font\", {\n  enumerable: true,\n  get: function get() {\n    return _font.default;\n  }\n});\nObject.defineProperty(exports, \"fontSize\", {\n  enumerable: true,\n  get: function get() {\n    return _fontSize.default;\n  }\n});\nObject.defineProperty(exports, \"fontColor\", {\n  enumerable: true,\n  get: function get() {\n    return _fontColor.default;\n  }\n});\nObject.defineProperty(exports, \"hiliteColor\", {\n  enumerable: true,\n  get: function get() {\n    return _hiliteColor.default;\n  }\n});\nObject.defineProperty(exports, \"horizontalRule\", {\n  enumerable: true,\n  get: function get() {\n    return _horizontalRule.default;\n  }\n});\nObject.defineProperty(exports, \"list\", {\n  enumerable: true,\n  get: function get() {\n    return _list.default;\n  }\n});\nObject.defineProperty(exports, \"table\", {\n  enumerable: true,\n  get: function get() {\n    return _table.default;\n  }\n});\nObject.defineProperty(exports, \"formatBlock\", {\n  enumerable: true,\n  get: function get() {\n    return _formatBlock.default;\n  }\n});\nObject.defineProperty(exports, \"lineHeight\", {\n  enumerable: true,\n  get: function get() {\n    return _lineHeight.default;\n  }\n});\nObject.defineProperty(exports, \"template\", {\n  enumerable: true,\n  get: function get() {\n    return _template.default;\n  }\n});\nObject.defineProperty(exports, \"paragraphStyle\", {\n  enumerable: true,\n  get: function get() {\n    return _paragraphStyle.default;\n  }\n});\nObject.defineProperty(exports, \"textStyle\", {\n  enumerable: true,\n  get: function get() {\n    return _textStyle.default;\n  }\n});\nObject.defineProperty(exports, \"link\", {\n  enumerable: true,\n  get: function get() {\n    return _link.default;\n  }\n});\nObject.defineProperty(exports, \"image\", {\n  enumerable: true,\n  get: function get() {\n    return _image.default;\n  }\n});\nObject.defineProperty(exports, \"video\", {\n  enumerable: true,\n  get: function get() {\n    return _video.default;\n  }\n});\nObject.defineProperty(exports, \"audio\", {\n  enumerable: true,\n  get: function get() {\n    return _audio.default;\n  }\n});\nObject.defineProperty(exports, \"math\", {\n  enumerable: true,\n  get: function get() {\n    return _math.default;\n  }\n});\nObject.defineProperty(exports, \"imageGallery\", {\n  enumerable: true,\n  get: function get() {\n    return _imageGallery.default;\n  }\n});\nexports.default = void 0;\n\nvar _blockquote = _interopRequireDefault(require(\"./command/blockquote\"));\n\nvar _align = _interopRequireDefault(require(\"./submenu/align\"));\n\nvar _font = _interopRequireDefault(require(\"./submenu/font\"));\n\nvar _fontSize = _interopRequireDefault(require(\"./submenu/fontSize\"));\n\nvar _fontColor = _interopRequireDefault(require(\"./submenu/fontColor\"));\n\nvar _hiliteColor = _interopRequireDefault(require(\"./submenu/hiliteColor\"));\n\nvar _horizontalRule = _interopRequireDefault(require(\"./submenu/horizontalRule\"));\n\nvar _list = _interopRequireDefault(require(\"./submenu/list\"));\n\nvar _table = _interopRequireDefault(require(\"./submenu/table\"));\n\nvar _formatBlock = _interopRequireDefault(require(\"./submenu/formatBlock\"));\n\nvar _lineHeight = _interopRequireDefault(require(\"./submenu/lineHeight\"));\n\nvar _template = _interopRequireDefault(require(\"./submenu/template\"));\n\nvar _paragraphStyle = _interopRequireDefault(require(\"./submenu/paragraphStyle\"));\n\nvar _textStyle = _interopRequireDefault(require(\"./submenu/textStyle\"));\n\nvar _link = _interopRequireDefault(require(\"./dialog/link\"));\n\nvar _image = _interopRequireDefault(require(\"./dialog/image\"));\n\nvar _video = _interopRequireDefault(require(\"./dialog/video\"));\n\nvar _audio = _interopRequireDefault(require(\"./dialog/audio\"));\n\nvar _math = _interopRequireDefault(require(\"./dialog/math\"));\n\nvar _imageGallery = _interopRequireDefault(require(\"./fileBrowser/imageGallery\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n// command\n// submenu\n// dialog\n// file browser\nvar _default = {\n  blockquote: _blockquote.default,\n  align: _align.default,\n  font: _font.default,\n  fontSize: _fontSize.default,\n  fontColor: _fontColor.default,\n  hiliteColor: _hiliteColor.default,\n  horizontalRule: _horizontalRule.default,\n  list: _list.default,\n  table: _table.default,\n  formatBlock: _formatBlock.default,\n  lineHeight: _lineHeight.default,\n  template: _template.default,\n  paragraphStyle: _paragraphStyle.default,\n  textStyle: _textStyle.default,\n  link: _link.default,\n  image: _image.default,\n  video: _video.default,\n  audio: _audio.default,\n  math: _math.default,\n  imageGallery: _imageGallery.default\n};\nexports.default = _default;","import './_grid.sass'\nimport './VGrid.sass'\n\nimport Grid from './grid'\n\nimport mergeData from '../../util/mergeData'\n\n/* @vue/component */\nexport default Grid('container').extend({\n  name: 'v-container',\n  functional: true,\n  props: {\n    id: String,\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    fluid: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  render (h, { props, data, children }) {\n    let classes\n    const { attrs } = data\n    if (attrs) {\n      // reset attrs to extract utility clases like pa-3\n      data.attrs = {}\n      classes = Object.keys(attrs).filter(key => {\n        // TODO: Remove once resolved\n        // https://github.com/vuejs/vue/issues/7841\n        if (key === 'slot') return false\n\n        const value = attrs[key]\n\n        // add back data attributes like data-test=\"foo\" but do not\n        // add them as classes\n        if (key.startsWith('data-')) {\n          data.attrs![key] = value\n          return false\n        }\n\n        return value || typeof value === 'string'\n      })\n    }\n\n    if (props.id) {\n      data.domProps = data.domProps || {}\n      data.domProps.id = props.id\n    }\n\n    return h(\n      props.tag,\n      mergeData(data, {\n        staticClass: 'container',\n        class: Array<any>({\n          'container--fluid': props.fluid,\n        }).concat(classes || []),\n      }),\n      children\n    )\n  },\n})\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _util2 = _interopRequireDefault(require(\"../../lib/util\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\n * Rich Text Editor\n *\n * kothing-ditor.js\n * Copyright Kothing.\n * MIT license.\n */\nvar _default = {\n  name: \"dialog\",\n\n  /**\n   * @description Constructor\n   * @param {Object} core Core object\n   */\n  util: _util2.default,\n  add: function add(core) {\n    var context = core.context;\n    context.dialog = {\n      kind: \"\",\n      updateModal: false,\n      _closeSignal: false\n    };\n    /** dialog */\n\n    var dialog_div = core.util.createElement(\"DIV\");\n    dialog_div.className = \"ke-dialog kothing-editor-common\";\n    var dialog_back = core.util.createElement(\"DIV\");\n    dialog_back.className = \"ke-dialog-back\";\n    dialog_back.style.display = \"none\";\n    var dialog_area = core.util.createElement(\"DIV\");\n    dialog_area.className = \"ke-dialog-inner\";\n    dialog_area.style.display = \"none\";\n    dialog_div.appendChild(dialog_back);\n    dialog_div.appendChild(dialog_area);\n    context.dialog.modalArea = dialog_div;\n    context.dialog.back = dialog_back;\n    context.dialog.modal = dialog_area;\n    /** add event listeners */\n\n    context.dialog.modal.addEventListener(\"mousedown\", this._onMouseDown_dialog.bind(core));\n    context.dialog.modal.addEventListener(\"click\", this._onClick_dialog.bind(core));\n    /** append html */\n\n    context.element.relative.appendChild(dialog_div);\n    /** empty memory */\n\n    dialog_div = null, dialog_back = null, dialog_area = null;\n  },\n\n  /**\n   * @description Event to control the behavior of closing the dialog\n   * @param {MouseEvent} e Event object\n   * @private\n   */\n  _onMouseDown_dialog: function _onMouseDown_dialog(e) {\n    if (/ke-dialog-inner/.test(e.target.className)) {\n      this.context.dialog._closeSignal = true;\n    } else {\n      this.context.dialog._closeSignal = false;\n    }\n  },\n\n  /**\n   * @description Event to close the window when the outside area of the dialog or close button is click\n   * @param {MouseEvent} e Event object\n   * @private\n   */\n  _onClick_dialog: function _onClick_dialog(e) {\n    e.stopPropagation();\n\n    if (/close/.test(e.target.getAttribute(\"data-command\")) || this.context.dialog._closeSignal) {\n      this.plugins.dialog.close.call(this);\n    }\n  },\n\n  /**\n   * @description Open a Dialog plugin\n   * @param {String} kind Dialog plugin name\n   * @param {Boolean} update Whether it will open for update ('image' === this.currentControllerName)\n   */\n  open: function open(kind, update) {\n    if (this.modalForm) {\n      return false;\n    }\n\n    if (this.plugins.dialog._bindClose) {\n      this._d.removeEventListener(\"keydown\", this.plugins.dialog._bindClose);\n\n      this.plugins.dialog._bindClose = null;\n    }\n\n    this.plugins.dialog._bindClose = function (e) {\n      if (!/27/.test(e.keyCode)) {\n        return;\n      }\n\n      this.plugins.dialog.close.call(this);\n    }.bind(this);\n\n    this._d.addEventListener(\"keydown\", this.plugins.dialog._bindClose);\n\n    this.context.dialog.updateModal = update;\n\n    if (this.context.option.popupDisplay === \"full\") {\n      this.context.dialog.modalArea.style.position = \"fixed\";\n    } else {\n      this.context.dialog.modalArea.style.position = \"absolute\";\n    }\n\n    this.context.dialog.kind = kind;\n    this.modalForm = this.context[kind].modal;\n    var focusElement = this.context[kind].focusElement;\n\n    if (typeof this.plugins[kind].on === \"function\") {\n      this.plugins[kind].on.call(this, update);\n    }\n\n    _util2.default.addClass(this.context.dialog.modalArea, \"dialog--open\");\n\n    this.context.dialog.modalArea.style.display = \"block\";\n    this.context.dialog.back.style.display = \"block\";\n    this.context.dialog.modal.style.display = \"block\";\n    this.modalForm.style.display = \"block\";\n\n    if (focusElement) {\n      focusElement.focus();\n    }\n  },\n  _bindClose: null,\n\n  /**\n   * @description Close a Dialog plugin\n   * The plugin's \"init\" method is called.\n   */\n  close: function close() {\n    var _this = this;\n\n    if (this.plugins.dialog._bindClose) {\n      this._d.removeEventListener(\"keydown\", this.plugins.dialog._bindClose);\n\n      this.plugins.dialog._bindClose = null;\n    }\n\n    var contextDialog = this.context.dialog;\n    var kind = this.context.dialog.kind;\n\n    _util2.default.removeClass(contextDialog.modalArea, \"dialog--open\");\n\n    _util2.default.addClass(contextDialog.modalArea, \"dialog--close\");\n\n    setTimeout(function () {\n      _util2.default.removeClass(contextDialog.modalArea, \"dialog--close\");\n\n      contextDialog.back.style.display = \"none\";\n      contextDialog.modalArea.style.display = \"none\";\n      _this.modalForm.style.display = \"none\";\n      contextDialog.updateModal = false;\n      contextDialog.kind = \"\";\n      _this.modalForm = null;\n\n      _this.focus();\n    }, 200);\n\n    if (typeof this.plugins[kind].init === \"function\") {\n      this.plugins[kind].init.call(this);\n    }\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _dialog = _interopRequireDefault(require(\"../modules/dialog\"));\n\nvar _component = _interopRequireDefault(require(\"../modules/component\"));\n\nvar _resizing = _interopRequireDefault(require(\"../modules/resizing\"));\n\nvar _fileManager = _interopRequireDefault(require(\"../modules/fileManager\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _default = {\n  name: \"video\",\n  display: \"dialog\",\n  add: function add(core) {\n    core.addModule([_dialog.default, _component.default, _resizing.default, _fileManager.default]);\n    var options = core.options;\n    var context = core.context;\n    var contextVideo = context.video = {\n      _infoList: [],\n      // @Override fileManager\n      _infoIndex: 0,\n      // @Override fileManager\n      _uploadFileLength: 0,\n      // @Override fileManager\n      focusElement: null,\n      // @Override dialog // This element has focus when the dialog is opened.\n      sizeUnit: options._videoSizeUnit,\n      _align: \"none\",\n      _floatClassRegExp: \"__ke__float\\\\-[a-z]+\",\n      _youtubeQuery: options.youtubeQuery,\n      _videoRatio: options.videoRatio * 100 + \"%\",\n      _defaultRatio: options.videoRatio * 100 + \"%\",\n      _linkValue: \"\",\n      // @require @Override component\n      _element: null,\n      _cover: null,\n      _container: null,\n      // @Override resizing properties\n      inputX: null,\n      inputY: null,\n      _element_w: 1,\n      _element_h: 1,\n      _element_l: 0,\n      _element_t: 0,\n      _defaultSizeX: \"100%\",\n      _defaultSizeY: options.videoRatio * 100 + \"%\",\n      _origin_w: options.videoWidth === \"100%\" ? \"\" : options.videoWidth,\n      _origin_h: options.videoHeight === \"56.25%\" ? \"\" : options.videoHeight,\n      _proportionChecked: true,\n      _resizing: options.videoResizing,\n      _resizeDotHide: !options.videoHeightShow,\n      _rotation: options.videoRotation,\n      _onlyPercentage: options.videoSizeOnlyPercentage,\n      _ratio: false,\n      _ratioX: 1,\n      _ratioY: 1,\n      _captionShow: false\n    };\n    /** video dialog */\n\n    var video_dialog = this.setDialog(core);\n    contextVideo.modal = video_dialog;\n    contextVideo.videoInputFile = video_dialog.querySelector(\"._ke_video_file\");\n    contextVideo.videoUrlFile = video_dialog.querySelector(\".ke-input-url\");\n    contextVideo.focusElement = contextVideo.videoUrlFile || contextVideo.videoInputFile;\n    contextVideo.preview = video_dialog.querySelector(\".ke-link-preview\");\n    /** add event listeners */\n\n    video_dialog.querySelector(\"form\").addEventListener(\"submit\", this.submit.bind(core));\n\n    if (contextVideo.videoInputFile) {\n      video_dialog.querySelector(\".ke-dialog-files-edge-button\").addEventListener(\"click\", this._removeSelectedFiles.bind(contextVideo.videoInputFile, contextVideo.videoUrlFile, contextVideo.preview));\n    }\n\n    if (contextVideo.videoInputFile && contextVideo.videoUrlFile) {\n      contextVideo.videoInputFile.addEventListener(\"change\", this._fileInputChange.bind(contextVideo));\n    }\n\n    if (contextVideo.videoUrlFile) {\n      contextVideo.videoUrlFile.addEventListener(\"input\", this._onLinkPreview.bind(contextVideo.preview, contextVideo, options.linkProtocol));\n    }\n\n    contextVideo.proportion = {};\n    contextVideo.videoRatioOption = {};\n    contextVideo.inputX = {};\n    contextVideo.inputY = {};\n\n    if (options.videoResizing) {\n      contextVideo.proportion = video_dialog.querySelector(\"._ke_video_check_proportion\");\n      contextVideo.videoRatioOption = video_dialog.querySelector(\".ke-video-ratio\");\n      contextVideo.inputX = video_dialog.querySelector(\"._ke_video_size_x\");\n      contextVideo.inputY = video_dialog.querySelector(\"._ke_video_size_y\");\n      contextVideo.inputX.value = options.videoWidth;\n      contextVideo.inputY.value = options.videoHeight;\n      contextVideo.inputX.addEventListener(\"keyup\", this.setInputSize.bind(core, \"x\"));\n      contextVideo.inputY.addEventListener(\"keyup\", this.setInputSize.bind(core, \"y\"));\n      contextVideo.inputX.addEventListener(\"change\", this.setRatio.bind(core));\n      contextVideo.inputY.addEventListener(\"change\", this.setRatio.bind(core));\n      contextVideo.proportion.addEventListener(\"change\", this.setRatio.bind(core));\n      contextVideo.videoRatioOption.addEventListener(\"change\", this.setVideoRatio.bind(core));\n      video_dialog.querySelector(\".ke-dialog-btn-revert\").addEventListener(\"click\", this.sizeRevert.bind(core));\n    }\n    /** append html */\n\n\n    context.dialog.modal.appendChild(video_dialog);\n    /** empty memory */\n\n    video_dialog = null;\n  },\n\n  /** dialog */\n  setDialog: function setDialog(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var dialog = core.util.createElement(\"DIV\");\n    dialog.className = \"ke-dialog-content\";\n    dialog.style.display = \"none\";\n    var html = \"\" + '<form method=\"post\" enctype=\"multipart/form-data\">' + '<div class=\"ke-dialog-header\">' + '<button type=\"button\" data-command=\"close\" class=\"ke-btn ke-dialog-close\" aria-label=\"Close\" title=\"' + lang.dialogBox.close + '\">' + core.icons.cancel + \"</button>\" + '<span class=\"ke-modal-title\">' + lang.dialogBox.videoBox.title + \"</span>\" + \"</div>\" + '<div class=\"ke-dialog-body\">';\n\n    if (option.videoFileInput) {\n      html += \"\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.videoBox.file + \"</label>\" + '<div class=\"ke-dialog-form-files\">' + '<input class=\"ke-input-form _ke_video_file\" type=\"file\" accept=\"' + option.videoAccept + '\"' + (option.videoMultipleFile ? ' multiple=\"multiple\"' : \"\") + \"/>\" + '<button type=\"button\" data-command=\"filesRemove\" class=\"ke-btn ke-dialog-files-edge-button ke-file-remove\" title=\"' + lang.controller.remove + '\">' + core.icons.cancel + \"</button>\" + \"</div>\" + \"</div>\";\n    }\n\n    if (option.videoUrlInput) {\n      html += \"\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.videoBox.url + \"</label>\" + '<input class=\"ke-input-form ke-input-url\" type=\"text\" />' + '<pre class=\"ke-link-preview\"></pre>' + \"</div>\";\n    }\n\n    if (option.videoResizing) {\n      var ratioList = option.videoRatioList || [{\n        name: \"16:9\",\n        value: 0.5625\n      }, {\n        name: \"4:3\",\n        value: 0.75\n      }, {\n        name: \"21:9\",\n        value: 0.4285\n      }];\n      var ratio = option.videoRatio;\n      var onlyPercentage = option.videoSizeOnlyPercentage;\n      var onlyPercentDisplay = onlyPercentage ? ' style=\"display: none !important;\"' : \"\";\n      var heightDisplay = !option.videoHeightShow ? ' style=\"display: none !important;\"' : \"\";\n      var ratioDisplay = !option.videoRatioShow ? ' style=\"display: none !important;\"' : \"\";\n      var onlyWidthDisplay = !onlyPercentage && !option.videoHeightShow && !option.videoRatioShow ? ' style=\"display: none !important;\"' : \"\";\n      html += \"\" + '<div class=\"ke-dialog-form\">' + '<div class=\"ke-dialog-size-text\">' + '<label class=\"size-w\">' + lang.dialogBox.width + \"</label>\" + '<label class=\"ke-dialog-size-x\">&nbsp;</label>' + '<label class=\"size-h\"' + heightDisplay + \">\" + lang.dialogBox.height + \"</label>\" + '<label class=\"size-h\"' + ratioDisplay + \">(\" + lang.dialogBox.ratio + \")</label>\" + \"</div>\" + '<input class=\"ke-input-control _ke_video_size_x\" placeholder=\"100%\"' + (onlyPercentage ? ' type=\"number\" min=\"1\"' : 'type=\"text\"') + (onlyPercentage ? ' max=\"100\"' : \"\") + \"/>\" + '<label class=\"ke-dialog-size-x\"' + onlyWidthDisplay + \">\" + (onlyPercentage ? \"%\" : \"x\") + \"</label>\" + '<input class=\"ke-input-control _ke_video_size_y\" placeholder=\"' + option.videoRatio * 100 + '%\"' + (onlyPercentage ? ' type=\"number\" min=\"1\"' : 'type=\"text\"') + (onlyPercentage ? ' max=\"100\"' : \"\") + heightDisplay + \"/>\" + '<select class=\"ke-input-select ke-video-ratio\" title=\"' + lang.dialogBox.ratio + '\"' + ratioDisplay + \">\";\n\n      if (!heightDisplay) {\n        html += '<option value=\"\"> - </option>';\n      }\n\n      for (var i = 0, len = ratioList.length; i < len; i++) {\n        html += '<option value=\"' + ratioList[i].value + '\"' + (ratio.toString() === ratioList[i].value.toString() ? \" selected\" : \"\") + \">\" + ratioList[i].name + \"</option>\";\n      }\n\n      html += \"</select>\" + '<button type=\"button\" title=\"' + lang.dialogBox.revertButton + '\" class=\"ke-btn ke-dialog-btn-revert\" style=\"float: right;\">' + core.icons.revert + \"</button>\" + \"</div>\" + '<div class=\"ke-dialog-form ke-dialog-form-footer\"' + onlyPercentDisplay + onlyWidthDisplay + \">\" + '<label><input type=\"checkbox\" class=\"ke-dialog-btn-check _ke_video_check_proportion\" checked/>&nbsp;' + lang.dialogBox.proportion + \"</label>\" + \"</div>\";\n    }\n\n    html += \"\" + \"</div>\" + '<div class=\"ke-dialog-footer\">' + \"<div>\" + '<label><input type=\"radio\" name=\"kothingEditor_video_radio\" class=\"ke-dialog-btn-radio\" value=\"none\" checked>' + lang.dialogBox.basic + \"</label>\" + '<label><input type=\"radio\" name=\"kothingEditor_video_radio\" class=\"ke-dialog-btn-radio\" value=\"left\">' + lang.dialogBox.left + \"</label>\" + '<label><input type=\"radio\" name=\"kothingEditor_video_radio\" class=\"ke-dialog-btn-radio\" value=\"center\">' + lang.dialogBox.center + \"</label>\" + '<label><input type=\"radio\" name=\"kothingEditor_video_radio\" class=\"ke-dialog-btn-radio\" value=\"right\">' + lang.dialogBox.right + \"</label>\" + \"</div>\" + '<button type=\"submit\" class=\"ke-btn-primary\" title=\"' + lang.dialogBox.submitButton + '\"><span>' + lang.dialogBox.submitButton + \"</span></button>\" + \"</div>\" + \"</form>\";\n    dialog.innerHTML = html;\n    return dialog;\n  },\n  _fileInputChange: function _fileInputChange() {\n    if (!this.videoInputFile.value) {\n      this.videoUrlFile.removeAttribute(\"disabled\");\n      this.preview.style.textDecoration = \"\";\n    } else {\n      this.videoUrlFile.setAttribute(\"disabled\", true);\n      this.preview.style.textDecoration = \"line-through\";\n    }\n  },\n  _removeSelectedFiles: function _removeSelectedFiles(urlInput, preview) {\n    this.value = \"\";\n\n    if (urlInput) {\n      urlInput.removeAttribute(\"disabled\");\n      preview.style.textDecoration = \"\";\n    }\n  },\n  _onLinkPreview: function _onLinkPreview(context, protocol, e) {\n    var value = e.target.value.trim();\n\n    if (/^<iframe.*\\/iframe>$/.test(value)) {\n      context._linkValue = value;\n      this.textContent = '<IFrame :src=\"..\"></IFrame>';\n    } else {\n      context._linkValue = this.textContent = !value ? \"\" : protocol && value.indexOf(\"://\") === -1 && value.indexOf(\"#\") !== 0 ? protocol + value : value.indexOf(\"://\") === -1 ? \"/\" + value : value;\n    }\n  },\n  _setTagAttrs: function _setTagAttrs(element) {\n    element.setAttribute(\"controls\", true);\n    var attrs = this.options.videoTagAttrs;\n\n    if (!attrs) {\n      return;\n    }\n\n    for (var key in attrs) {\n      if (!this.util.hasOwn(attrs, key)) {\n        continue;\n      }\n\n      element.setAttribute(key, attrs[key]);\n    }\n  },\n  createVideoTag: function createVideoTag() {\n    var videoTag = this.util.createElement(\"VIDEO\");\n\n    this.plugins.video._setTagAttrs.call(this, videoTag);\n\n    return videoTag;\n  },\n  _setIframeAttrs: function _setIframeAttrs(element) {\n    element.frameBorder = \"0\";\n    element.allowFullscreen = true;\n    var attrs = this.options.videoIframeAttrs;\n\n    if (!attrs) {\n      return;\n    }\n\n    for (var key in attrs) {\n      if (!this.util.hasOwn(attrs, key)) {\n        continue;\n      }\n\n      element.setAttribute(key, attrs[key]);\n    }\n  },\n  createIframeTag: function createIframeTag() {\n    var iframeTag = this.util.createElement(\"IFRAME\");\n\n    this.plugins.video._setIframeAttrs.call(this, iframeTag);\n\n    return iframeTag;\n  },\n\n  /**\r\n   * @Override @Required fileManager\r\n   */\n  fileTags: [\"iframe\", \"video\"],\n\n  /**\r\n   * @Override core, resizing, fileManager\r\n   * @description It is called from core.selectComponent.\r\n   * @param {Element} element Target element\r\n   */\n  select: function select(element) {\n    this.plugins.video.onModifyMode.call(this, element, this.plugins.resizing.call_controller_resize.call(this, element, \"video\"));\n  },\n\n  /**\r\n   * @Override fileManager, resizing\r\n   */\n  destroy: function destroy(element) {\n    var frame = element || this.context.video._element;\n    var container = this.context.video._container;\n    var dataIndex = frame.getAttribute(\"data-index\") * 1;\n    var focusEl = container.previousElementSibling || container.nextElementSibling;\n    var emptyDiv = container.parentNode;\n    this.util.removeItem(container);\n    this.plugins.video.init.call(this);\n    this.controllersOff();\n\n    if (emptyDiv !== this.context.element.wysiwyg) {\n      this.util.removeItemAllParents(emptyDiv, function (current) {\n        return current.childNodes.length === 0;\n      }, null);\n    } // focus\n\n\n    this.focusEdge(focusEl); // event\n\n    this.plugins.fileManager.deleteInfo.call(this, \"video\", dataIndex, this.functions.onVideoUpload); // history stack\n\n    this.history.push(false);\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  on: function on(update) {\n    var contextVideo = this.context.video;\n\n    if (!update) {\n      contextVideo.inputX.value = contextVideo._origin_w = this.options.videoWidth === contextVideo._defaultSizeX ? \"\" : this.options.videoWidth;\n      contextVideo.inputY.value = contextVideo._origin_h = this.options.videoHeight === contextVideo._defaultSizeY ? \"\" : this.options.videoHeight;\n      contextVideo.proportion.disabled = true;\n\n      if (contextVideo.videoInputFile && this.options.videoMultipleFile) {\n        contextVideo.videoInputFile.setAttribute(\"multiple\", \"multiple\");\n      }\n    } else {\n      if (contextVideo.videoInputFile && this.options.videoMultipleFile) {\n        contextVideo.videoInputFile.removeAttribute(\"multiple\");\n      }\n    }\n\n    if (contextVideo._resizing) {\n      this.plugins.video.setVideoRatioSelect.call(this, contextVideo._origin_h || contextVideo._defaultRatio);\n    }\n  },\n\n  /**\r\n   * @Required @Override dialog\r\n   */\n  open: function open() {\n    this.plugins.dialog.open.call(this, \"video\", \"video\" === this.currentControllerName);\n  },\n  setVideoRatio: function setVideoRatio(e) {\n    var contextVideo = this.context.video;\n    var value = e.target.options[e.target.selectedIndex].value;\n    contextVideo._defaultSizeY = contextVideo._videoRatio = !value ? contextVideo._defaultSizeY : value * 100 + \"%\";\n    contextVideo.inputY.placeholder = !value ? \"\" : value * 100 + \"%\";\n    contextVideo.inputY.value = \"\";\n  },\n\n  /**\r\n   * @Override resizing\r\n   * @param {String} xy 'x': width, 'y': height\r\n   * @param {KeyboardEvent} e Event object\r\n   */\n  setInputSize: function setInputSize(xy, e) {\n    if (e && e.keyCode === 32) {\n      e.preventDefault();\n      return;\n    }\n\n    var contextVideo = this.context.video;\n\n    this.plugins.resizing._module_setInputSize.call(this, contextVideo, xy);\n\n    if (xy === \"y\") {\n      this.plugins.video.setVideoRatioSelect.call(this, e.target.value || contextVideo._defaultRatio);\n    }\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setRatio: function setRatio() {\n    this.plugins.resizing._module_setRatio.call(this, this.context.video);\n  },\n  submit: function submit(e) {\n    var contextVideo = this.context.video;\n    var videoPlugin = this.plugins.video;\n    e.preventDefault();\n    e.stopPropagation();\n    contextVideo._align = contextVideo.modal.querySelector('input[name=\"kothingEditor_video_radio\"]:checked').value;\n\n    try {\n      if (contextVideo.videoInputFile && contextVideo.videoInputFile.files.length > 0) {\n        this.showLoading();\n        videoPlugin.submitAction.call(this, this.context.video.videoInputFile.files);\n      } else if (contextVideo.videoUrlFile && contextVideo._linkValue.length > 0) {\n        this.showLoading();\n        videoPlugin.setup_url.call(this);\n      }\n    } catch (error) {\n      this.closeLoading();\n      throw Error('[KothingEditor.video.submit.fail] cause : \"' + error.message + '\"');\n    } finally {\n      this.plugins.dialog.close.call(this);\n    }\n\n    return false;\n  },\n  submitAction: function submitAction(fileList) {\n    if (fileList.length === 0) {\n      return;\n    }\n\n    var fileSize = 0;\n    var files = [];\n\n    for (var i = 0, len = fileList.length; i < len; i++) {\n      if (/video/i.test(fileList[i].type)) {\n        files.push(fileList[i]);\n        fileSize += fileList[i].size;\n      }\n    }\n\n    var limitSize = this.options.videoUploadSizeLimit;\n\n    if (limitSize > 0) {\n      var infoSize = 0;\n      var videosInfo = this.context.video._infoList;\n\n      for (var _i = 0, _len = videosInfo.length; _i < _len; _i++) {\n        infoSize += videosInfo[_i].size * 1;\n      }\n\n      if (fileSize + infoSize > limitSize) {\n        this.closeLoading();\n        var err = \"[KothingEditor.videoUpload.fail] Size of uploadable total videos: \" + limitSize / 1000 + \"KB\";\n\n        if (typeof this.functions.onVideoUploadError !== \"function\" || this.functions.onVideoUploadError(err, {\n          limitSize: limitSize,\n          currentSize: infoSize,\n          uploadSize: fileSize\n        }, this)) {\n          this.functions.noticeOpen(err);\n        }\n\n        return;\n      }\n    }\n\n    var contextVideo = this.context.video;\n    contextVideo._uploadFileLength = files.length;\n    var info = {\n      inputWidth: contextVideo.inputX.value,\n      inputHeight: contextVideo.inputY.value,\n      align: contextVideo._align,\n      isUpdate: this.context.dialog.updateModal,\n      element: contextVideo._element\n    };\n\n    if (typeof this.functions.onVideoUploadBefore === \"function\") {\n      var result = this.functions.onVideoUploadBefore(files, info, this, function (data) {\n        if (data && this._w.Array.isArray(data.result)) {\n          this.plugins.video.register.call(this, info, data);\n        } else {\n          this.plugins.video.upload.call(this, info, data);\n        }\n      }.bind(this));\n\n      if (typeof result === \"undefined\") {\n        return;\n      }\n\n      if (!result) {\n        this.closeLoading();\n        return;\n      }\n\n      if (_typeof(result) === \"object\" && result.length > 0) {\n        files = result;\n      }\n    }\n\n    this.plugins.video.upload.call(this, info, files);\n  },\n  error: function error(message, response) {\n    this.closeLoading();\n\n    if (typeof this.functions.onVideoUploadError !== \"function\" || this.functions.onVideoUploadError(message, response, this)) {\n      this.functions.noticeOpen(message);\n      throw Error(\"[KothingEditor.plugin.video.error] response: \" + message);\n    }\n  },\n  upload: function upload(info, files) {\n    if (!files) {\n      this.closeLoading();\n      return;\n    }\n\n    if (typeof files === \"string\") {\n      this.plugins.video.error.call(this, files, null);\n      return;\n    }\n\n    var videoUploadUrl = this.options.videoUploadUrl;\n    var filesLen = this.context.dialog.updateModal ? 1 : files.length; // server upload\n\n    if (typeof videoUploadUrl === \"string\" && videoUploadUrl.length > 0) {\n      var formData = new FormData();\n\n      for (var i = 0; i < filesLen; i++) {\n        formData.append(\"file-\" + i, files[i]);\n      }\n\n      this.plugins.fileManager.upload.call(this, videoUploadUrl, this.options.videoUploadHeader, formData, this.plugins.video.callBack_videoUpload.bind(this, info), this.functions.onVideoUploadError);\n    } else {\n      throw Error('[KothingEditor.videoUpload.fail] cause : There is no \"videoUploadUrl\" option.');\n    }\n  },\n  callBack_videoUpload: function callBack_videoUpload(info, xmlHttp) {\n    if (typeof this.functions.videoUploadHandler === \"function\") {\n      this.functions.videoUploadHandler(xmlHttp, info, this);\n    } else {\n      var response = JSON.parse(xmlHttp.responseText);\n\n      if (response.errorMessage) {\n        this.plugins.video.error.call(this, response.errorMessage, response);\n      } else {\n        this.plugins.video.register.call(this, info, response);\n      }\n    }\n  },\n  register: function register(info, response) {\n    var fileList = response.result;\n    var videoTag = this.plugins.video.createVideoTag.call(this);\n\n    for (var i = 0, len = fileList.length, file; i < len; i++) {\n      file = {\n        name: fileList[i].name,\n        size: fileList[i].size\n      };\n      this.plugins.video.create_video.call(this, info.isUpdate ? info.element : videoTag.cloneNode(false), fileList[i].url, info.inputWidth, info.inputHeight, info.align, file, info.isUpdate);\n    }\n\n    this.closeLoading();\n  },\n  setup_url: function setup_url() {\n    try {\n      var contextVideo = this.context.video;\n      var url = contextVideo._linkValue;\n\n      if (url.length === 0) {\n        return false;\n      }\n      /** iframe source */\n\n\n      if (/^<iframe.*\\/iframe>$/.test(url)) {\n        var oIframe = new this._w.DOMParser().parseFromString(url, \"text/html\").querySelector(\"iframe\");\n        url = oIframe.src;\n\n        if (url.length === 0) {\n          return false;\n        }\n      }\n      /** youtube */\n\n\n      if (/youtu\\.?be/.test(url)) {\n        if (!/^http/.test(url)) {\n          url = \"https://\" + url;\n        }\n\n        url = url.replace(\"watch?v=\", \"\");\n\n        if (!/^\\/\\/.+\\/embed\\//.test(url)) {\n          url = url.replace(url.match(/\\/\\/.+\\//)[0], \"//www.youtube.com/embed/\").replace(\"&\", \"?&\");\n        }\n\n        if (contextVideo._youtubeQuery.length > 0) {\n          if (/\\?/.test(url)) {\n            var splitUrl = url.split(\"?\");\n            url = splitUrl[0] + \"?\" + contextVideo._youtubeQuery + \"&\" + splitUrl[1];\n          } else {\n            url += \"?\" + contextVideo._youtubeQuery;\n          }\n        }\n      } else if (/vimeo\\.com/.test(url)) {\n        if (url.endsWith(\"/\")) {\n          url = url.slice(0, -1);\n        }\n\n        url = \"https://player.vimeo.com/video/\" + url.slice(url.lastIndexOf(\"/\") + 1);\n      }\n\n      this.plugins.video.create_video.call(this, this.plugins.video.createIframeTag.call(this), url, contextVideo.inputX.value, contextVideo.inputY.value, contextVideo._align, null, this.context.dialog.updateModal);\n    } catch (error) {\n      throw Error('[KothingEditor.video.upload.fail] cause : \"' + error.message + '\"');\n    } finally {\n      this.closeLoading();\n    }\n  },\n  create_video: function create_video(oFrame, src, width, height, align, file, isUpdate) {\n    this.context.resizing._resize_plugin = \"video\";\n    var contextVideo = this.context.video;\n    var cover = null;\n    var container = null;\n    var init = false;\n    /** update */\n\n    if (isUpdate) {\n      oFrame = contextVideo._element;\n\n      if (oFrame.src !== src) {\n        init = true;\n        var isYoutube = /youtu\\.?be/.test(src);\n        var isVimeo = /vimeo\\.com/.test(src);\n\n        if ((isYoutube || isVimeo) && !/^iframe$/i.test(oFrame.nodeName)) {\n          var newTag = this.plugins.video.createIframeTag.call(this);\n          newTag.src = src;\n          oFrame.parentNode.replaceChild(newTag, oFrame);\n          contextVideo._element = oFrame = newTag;\n        } else if (!isYoutube && !isVimeo && !/^videoo$/i.test(oFrame.nodeName)) {\n          var _newTag = this.plugins.video.createVideoTag.call(this);\n\n          _newTag.src = src;\n          oFrame.parentNode.replaceChild(_newTag, oFrame);\n          contextVideo._element = oFrame = _newTag;\n        } else {\n          oFrame.src = src;\n        }\n      }\n\n      container = contextVideo._container;\n      cover = this.util.getParentElement(oFrame, \"FIGURE\");\n    } else {\n      /** create */\n      init = true;\n      oFrame.src = src;\n      contextVideo._element = oFrame;\n      cover = this.plugins.component.set_cover.call(this, oFrame);\n      container = this.plugins.component.set_container.call(this, cover, \"ke-video-container\");\n    }\n    /** rendering */\n\n\n    contextVideo._cover = cover;\n    contextVideo._container = container;\n\n    var inputUpdate = this.plugins.resizing._module_getSizeX.call(this, contextVideo) !== (width || contextVideo._defaultSizeX) || this.plugins.resizing._module_getSizeY.call(this, contextVideo) !== (height || contextVideo._videoRatio);\n\n    var changeSize = !isUpdate || inputUpdate;\n\n    if (contextVideo._resizing) {\n      this.context.video._proportionChecked = contextVideo.proportion.checked;\n      oFrame.setAttribute(\"data-proportion\", contextVideo._proportionChecked);\n    } // size\n\n\n    var isPercent = false;\n\n    if (changeSize) {\n      isPercent = this.plugins.video.applySize.call(this);\n    } // align\n\n\n    if (!(isPercent && align === \"center\")) {\n      this.plugins.video.setAlign.call(this, null, oFrame, cover, container);\n    }\n\n    var changed = true;\n\n    if (!isUpdate) {\n      changed = this.insertComponent(container, false, true, !this.options.mediaAutoSelect);\n\n      if (!this.options.mediaAutoSelect) {\n        var line = this.appendFormatTag(container, null);\n        this.setRange(line, 0, line, 0);\n      }\n    } else if (contextVideo._resizing && this.context.resizing._rotateVertical && changeSize) {\n      this.plugins.resizing.setTransformSize.call(this, oFrame, null, null);\n    }\n\n    if (changed) {\n      if (init) {\n        this.plugins.fileManager.setInfo.call(this, \"video\", oFrame, this.functions.onVideoUpload, file, true);\n      }\n\n      if (isUpdate) {\n        this.selectComponent(oFrame, \"video\"); // history stack\n\n        this.history.push(false);\n      }\n    }\n\n    this.context.resizing._resize_plugin = \"\";\n  },\n  _update_videoCover: function _update_videoCover(oFrame) {\n    if (!oFrame) {\n      return;\n    }\n\n    var contextVideo = this.context.video;\n\n    if (/^video$/i.test(oFrame.nodeName)) {\n      this.plugins.video._setTagAttrs.call(this, oFrame);\n    } else {\n      this.plugins.video._setIframeAttrs.call(this, oFrame);\n    }\n\n    var existElement = this.util.getParentElement(oFrame, this.util.isMediaComponent) || this.util.getParentElement(oFrame, function (current) {\n      return this.isWysiwygDiv(current.parentNode);\n    }.bind(this.util));\n    var prevFrame = oFrame;\n    contextVideo._element = oFrame = oFrame.cloneNode(true);\n    var cover = contextVideo._cover = this.plugins.component.set_cover.call(this, oFrame);\n    var container = contextVideo._container = this.plugins.component.set_container.call(this, cover, \"ke-video-container\");\n\n    try {\n      var figcaption = existElement.querySelector(\"figcaption\");\n      var caption = null;\n\n      if (figcaption) {\n        caption = this.util.createElement(\"DIV\");\n        caption.innerHTML = figcaption.innerHTML;\n        this.util.removeItem(figcaption);\n      } // size\n\n\n      var size = (oFrame.getAttribute(\"data-size\") || oFrame.getAttribute(\"data-origin\") || \"\").split(\",\");\n      this.plugins.video.applySize.call(this, size[0] || prevFrame.style.width || prevFrame.width || \"\", size[1] || prevFrame.style.height || prevFrame.height || \"\"); // align\n\n      var format = this.util.getFormatElement(prevFrame);\n\n      if (format) {\n        contextVideo._align = format.style.textAlign || format.style.float;\n      }\n\n      this.plugins.video.setAlign.call(this, null, oFrame, cover, container);\n\n      if (this.util.isFormatElement(existElement) && existElement.childNodes.length > 0) {\n        existElement.parentNode.insertBefore(container, existElement);\n        this.util.removeItem(prevFrame); // clean format tag\n\n        this.util.removeEmptyNode(existElement, null);\n\n        if (existElement.children.length === 0) {\n          existElement.innerHTML = this.util.htmlRemoveWhiteSpace(existElement.innerHTML);\n        }\n      } else {\n        existElement.parentNode.replaceChild(container, existElement);\n      }\n\n      if (caption) {\n        existElement.parentNode.insertBefore(caption, container.nextElementSibling);\n      }\n    } catch (error) {\n      console.warn(\"[KothingEditor.video.error] Maybe the video tag is nested.\", error);\n    }\n\n    this.plugins.fileManager.setInfo.call(this, \"video\", oFrame, this.functions.onVideoUpload, null, true);\n  },\n\n  /**\r\n   * @Required @Override fileManager, resizing\r\n   */\n  onModifyMode: function onModifyMode(element, size) {\n    var contextVideo = this.context.video;\n    contextVideo._element = element;\n    contextVideo._cover = this.util.getParentElement(element, \"FIGURE\");\n    contextVideo._container = this.util.getParentElement(element, this.util.isMediaComponent);\n    contextVideo._align = element.style.float || element.getAttribute(\"data-align\") || \"none\";\n    element.style.float = \"\";\n\n    if (size) {\n      contextVideo._element_w = size.w;\n      contextVideo._element_h = size.h;\n      contextVideo._element_t = size.t;\n      contextVideo._element_l = size.l;\n    }\n\n    var origin = contextVideo._element.getAttribute(\"data-size\") || contextVideo._element.getAttribute(\"data-origin\");\n\n    var w, h;\n\n    if (origin) {\n      origin = origin.split(\",\");\n      w = origin[0];\n      h = origin[1];\n    } else if (size) {\n      w = size.w;\n      h = size.h;\n    }\n\n    contextVideo._origin_w = w || element.style.width || element.width || \"\";\n    contextVideo._origin_h = h || element.style.height || element.height || \"\";\n  },\n\n  /**\r\n   * @Required @Override fileManager, resizing\r\n   */\n  openModify: function openModify(notOpen) {\n    var contextVideo = this.context.video;\n\n    if (contextVideo.videoUrlFile) {\n      contextVideo._linkValue = contextVideo.preview.textContent = contextVideo.videoUrlFile.value = contextVideo._element.src || (contextVideo._element.querySelector(\"source\") || \"\").src || \"\";\n    }\n\n    contextVideo.modal.querySelector('input[name=\"kothingEditor_video_radio\"][value=\"' + contextVideo._align + '\"]').checked = true;\n\n    if (contextVideo._resizing) {\n      this.plugins.resizing._module_setModifyInputSize.call(this, contextVideo, this.plugins.video);\n\n      var y = contextVideo._videoRatio = this.plugins.resizing._module_getSizeY.call(this, contextVideo);\n\n      var ratioSelected = this.plugins.video.setVideoRatioSelect.call(this, y);\n\n      if (!ratioSelected) {\n        contextVideo.inputY.value = contextVideo._onlyPercentage ? this.util.getNumber(y, 2) : y;\n      }\n    }\n\n    if (!notOpen) {\n      this.plugins.dialog.open.call(this, \"video\", true);\n    }\n  },\n  setVideoRatioSelect: function setVideoRatioSelect(value) {\n    var ratioSelected = false;\n    var contextVideo = this.context.video;\n    var ratioOptions = contextVideo.videoRatioOption.options;\n\n    if (/%$/.test(value) || contextVideo._onlyPercentage) {\n      value = this.util.getNumber(value, 2) / 100 + \"\";\n    } else if (!this.util.isNumber(value) || value * 1 >= 1) {\n      value = \"\";\n    }\n\n    contextVideo.inputY.placeholder = \"\";\n\n    for (var i = 0, len = ratioOptions.length; i < len; i++) {\n      if (ratioOptions[i].value === value) {\n        ratioSelected = ratioOptions[i].selected = true;\n        contextVideo.inputY.placeholder = !value ? \"\" : value * 100 + \"%\";\n      } else {\n        ratioOptions[i].selected = false;\n      }\n    }\n\n    return ratioSelected;\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  checkFileInfo: function checkFileInfo() {\n    this.plugins.fileManager.checkInfo.call(this, \"video\", [\"iframe\", \"video\"], this.functions.onVideoUpload, this.plugins.video._update_videoCover.bind(this), true);\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  resetFileInfo: function resetFileInfo() {\n    this.plugins.fileManager.resetInfo.call(this, \"video\", this.functions.onVideoUpload);\n  },\n\n  /**\r\n   * @Override fileManager\r\n   */\n  applySize: function applySize(w, h) {\n    var contextVideo = this.context.video;\n\n    if (!w) {\n      w = contextVideo.inputX.value || this.options.videoWidth;\n    }\n\n    if (!h) {\n      h = contextVideo.inputY.value || this.options.videoHeight;\n    }\n\n    if (contextVideo._onlyPercentage || /%$/.test(w) || !w) {\n      this.plugins.video.setPercentSize.call(this, w || \"100%\", h || (/%$/.test(contextVideo._videoRatio) ? contextVideo._videoRatio : contextVideo._defaultRatio));\n      return true;\n    } else if ((!w || w === \"auto\") && (!h || h === \"auto\")) {\n      this.plugins.video.setAutoSize.call(this);\n    } else {\n      this.plugins.video.setSize.call(this, w, h || contextVideo._videoRatio || contextVideo._defaultRatio, false);\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  sizeRevert: function sizeRevert() {\n    this.plugins.resizing._module_sizeRevert.call(this, this.context.video);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setSize: function setSize(w, h, notResetPercentage, direction) {\n    var contextVideo = this.context.video;\n    var onlyW = /^(rw|lw)$/.test(direction);\n    var onlyH = /^(th|bh)$/.test(direction);\n\n    if (!onlyH) {\n      w = this.util.getNumber(w, 0);\n    }\n\n    if (!onlyW) {\n      h = this.util.isNumber(h) ? h + contextVideo.sizeUnit : !h ? \"\" : h;\n    }\n\n    if (!onlyH) {\n      contextVideo._element.style.width = w ? w + contextVideo.sizeUnit : \"\";\n    }\n\n    if (!onlyW) {\n      contextVideo._cover.style.paddingBottom = contextVideo._cover.style.height = h;\n    }\n\n    if (!onlyH && !/%$/.test(w)) {\n      contextVideo._cover.style.width = \"\";\n      contextVideo._container.style.width = \"\";\n    }\n\n    if (!onlyW && !/%$/.test(h)) {\n      contextVideo._element.style.height = h;\n    } else {\n      contextVideo._element.style.height = \"\";\n    }\n\n    if (!notResetPercentage) {\n      contextVideo._element.removeAttribute(\"data-percentage\");\n    } // save current size\n\n\n    this.plugins.resizing._module_saveCurrentSize.call(this, contextVideo);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setAutoSize: function setAutoSize() {\n    this.plugins.video.setPercentSize.call(this, 100, this.context.video._defaultRatio);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setOriginSize: function setOriginSize(dataSize) {\n    var contextVideo = this.context.video;\n\n    contextVideo._element.removeAttribute(\"data-percentage\");\n\n    this.plugins.resizing.resetTransform.call(this, contextVideo._element);\n    this.plugins.video.cancelPercentAttr.call(this);\n    var originSize = ((dataSize ? contextVideo._element.getAttribute(\"data-size\") : \"\") || contextVideo._element.getAttribute(\"data-origin\") || \"\").split(\",\");\n\n    if (originSize) {\n      var w = originSize[0];\n      var h = originSize[1];\n\n      if (contextVideo._onlyPercentage || /%$/.test(w) && (/%$/.test(h) || !/\\d/.test(h))) {\n        this.plugins.video.setPercentSize.call(this, w, h);\n      } else {\n        this.plugins.video.setSize.call(this, w, h);\n      } // save current size\n\n\n      this.plugins.resizing._module_saveCurrentSize.call(this, contextVideo);\n    }\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setPercentSize: function setPercentSize(w, h) {\n    var contextVideo = this.context.video;\n    h = !!h && !/%$/.test(h) && !this.util.getNumber(h, 0) ? this.util.isNumber(h) ? h + \"%\" : h : this.util.isNumber(h) ? h + contextVideo.sizeUnit : h || contextVideo._defaultRatio;\n    contextVideo._container.style.width = this.util.isNumber(w) ? w + \"%\" : w;\n    contextVideo._container.style.height = \"\";\n    contextVideo._cover.style.width = \"100%\";\n    contextVideo._cover.style.height = h;\n    contextVideo._cover.style.paddingBottom = h;\n    contextVideo._element.style.width = \"100%\";\n    contextVideo._element.style.height = \"100%\";\n    contextVideo._element.style.maxWidth = \"\";\n\n    if (contextVideo._align === \"center\") {\n      this.plugins.video.setAlign.call(this, null, null, null, null);\n    }\n\n    contextVideo._element.setAttribute(\"data-percentage\", w + \",\" + h); // save current size\n\n\n    this.plugins.resizing._module_saveCurrentSize.call(this, contextVideo);\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  cancelPercentAttr: function cancelPercentAttr() {\n    var contextVideo = this.context.video;\n    contextVideo._cover.style.width = \"\";\n    contextVideo._cover.style.height = \"\";\n    contextVideo._cover.style.paddingBottom = \"\";\n    contextVideo._container.style.width = \"\";\n    contextVideo._container.style.height = \"\";\n    this.util.removeClass(contextVideo._container, this.context.video._floatClassRegExp);\n    this.util.addClass(contextVideo._container, \"__ke__float-\" + contextVideo._align);\n\n    if (contextVideo._align === \"center\") {\n      this.plugins.video.setAlign.call(this, null, null, null, null);\n    }\n  },\n\n  /**\r\n   * @Override resizing\r\n   */\n  setAlign: function setAlign(align, element, cover, container) {\n    var contextVideo = this.context.video;\n\n    if (!align) {\n      align = contextVideo._align;\n    }\n\n    if (!element) {\n      element = contextVideo._element;\n    }\n\n    if (!cover) {\n      cover = contextVideo._cover;\n    }\n\n    if (!container) {\n      container = contextVideo._container;\n    }\n\n    if (align && align !== \"none\") {\n      cover.style.margin = \"auto\";\n    } else {\n      cover.style.margin = \"0\";\n    }\n\n    if (/%$/.test(element.style.width) && align === \"center\") {\n      container.style.minWidth = \"100%\";\n      cover.style.width = container.style.width;\n      cover.style.height = container.style.height;\n      cover.style.paddingBottom = !/%$/.test(cover.style.height) ? cover.style.height : this.util.getNumber(this.util.getNumber(cover.style.height, 2) / 100 * this.util.getNumber(cover.style.width, 2), 2) + \"%\";\n    } else {\n      container.style.minWidth = \"\";\n      cover.style.width = this.context.resizing._rotateVertical ? element.style.height || element.offsetHeight : element.style.width || \"100%\";\n      cover.style.paddingBottom = cover.style.height;\n    }\n\n    if (!this.util.hasClass(container, \"__ke__float-\" + align)) {\n      this.util.removeClass(container, contextVideo._floatClassRegExp);\n      this.util.addClass(container, \"__ke__float-\" + align);\n    }\n\n    element.setAttribute(\"data-align\", align);\n  },\n\n  /**\r\n   * @Override dialog\r\n   */\n  init: function init() {\n    var contextVideo = this.context.video;\n\n    if (contextVideo.videoInputFile) {\n      contextVideo.videoInputFile.value = \"\";\n    }\n\n    if (contextVideo.videoUrlFile) {\n      contextVideo._linkValue = contextVideo.preview.textContent = contextVideo.videoUrlFile.value = \"\";\n    }\n\n    if (contextVideo.videoInputFile && contextVideo.videoUrlFile) {\n      contextVideo.videoUrlFile.removeAttribute(\"disabled\");\n      contextVideo.preview.style.textDecoration = \"\";\n    }\n\n    contextVideo._origin_w = this.options.videoWidth;\n    contextVideo._origin_h = this.options.videoHeight;\n    contextVideo.modal.querySelector('input[name=\"kothingEditor_video_radio\"][value=\"none\"]').checked = true;\n\n    if (contextVideo._resizing) {\n      contextVideo.inputX.value = this.options.videoWidth === contextVideo._defaultSizeX ? \"\" : this.options.videoWidth;\n      contextVideo.inputY.value = this.options.videoHeight === contextVideo._defaultSizeY ? \"\" : this.options.videoHeight;\n      contextVideo.proportion.checked = true;\n      contextVideo.proportion.disabled = true;\n      this.plugins.video.setVideoRatioSelect.call(this, contextVideo._defaultRatio);\n    }\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n\n/**\r\n * @description Elements and variables you should have\r\n * @param {Element} element textarea element\r\n * @param {object} cons Toolbar element you created\r\n * @param {JSON|Object} options Inserted options\r\n * @returns {Object} {Elements, variables of the editor, option}\r\n * @private\r\n */\nvar $context = function $context(element, cons, options) {\n  return {\n    element: {\n      originElement: element,\n      topArea: cons.top,\n      relative: cons.relative,\n      toolbar: cons.toolBar,\n      buttonTray: cons.toolBar.querySelector(\".ke-btn-tray\"),\n      menuTray: cons.menuTray,\n      resizingBar: cons.resizingBar,\n      navigation: cons.navigation,\n      charWrapper: cons.charWrapper,\n      charCounter: cons.charCounter,\n      editorArea: cons.editorArea,\n      wysiwygFrame: cons.wysiwygArea,\n      wysiwyg: cons.wysiwygArea,\n      // if (options.iframe) cons.wysiwygArea.contentDocument.body\n      code: cons.codeArea,\n      placeholder: cons.placeholder,\n      loading: cons.loading,\n      lineBreaker: cons.lineBreaker,\n      lineBreaker_t: cons.lineBreaker_t,\n      lineBreaker_b: cons.lineBreaker_b,\n      resizeBackground: cons.resizeBack,\n      stickyDummy: cons.stickyDummy,\n      arrow: cons.arrow\n    },\n    tool: {\n      cover: cons.toolBar.querySelector(\".ke-toolbar-cover\"),\n      bold: cons.toolBar.querySelector(\"._ke_command_bold\"),\n      underline: cons.toolBar.querySelector(\"._ke_command_underline\"),\n      italic: cons.toolBar.querySelector(\"._ke_command_italic\"),\n      strike: cons.toolBar.querySelector(\"._ke_command_strike\"),\n      subscript: cons.toolBar.querySelector(\"._ke_command_subscript\"),\n      superscript: cons.toolBar.querySelector(\"._ke_command_superscript\"),\n      undo: cons.toolBar.querySelector(\"._ke_command_undo\"),\n      redo: cons.toolBar.querySelector(\"._ke_command_redo\"),\n      save: cons.toolBar.querySelector(\"._ke_command_save\"),\n      outdent: cons.toolBar.querySelector(\"._ke_command_outdent\"),\n      indent: cons.toolBar.querySelector(\"._ke_command_indent\"),\n      fullScreen: cons.toolBar.querySelector(\"._ke_command_fullScreen\"),\n      showBlocks: cons.toolBar.querySelector(\"._ke_command_showBlocks\"),\n      codeView: cons.toolBar.querySelector(\"._ke_command_codeView\")\n    },\n    options: options,\n    option: options\n  };\n};\n\nvar _default = $context;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _colorPicker = _interopRequireDefault(require(\"../modules/colorPicker\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"fontColor\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    core.addModule([_colorPicker.default]);\n    var context = core.context;\n    context.fontColor = {\n      previewEl: null,\n      colorInput: null,\n      colorList: null\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    context.fontColor.colorInput = listDiv.querySelector(\"._ke_color_picker_input\");\n    /** add event listeners */\n\n    context.fontColor.colorInput.addEventListener(\"keyup\", this.onChangeInput.bind(core));\n    listDiv.querySelector(\"._ke_color_picker_submit\").addEventListener(\"click\", this.submit.bind(core));\n    listDiv.querySelector(\"._ke_color_picker_remove\").addEventListener(\"click\", this.remove.bind(core));\n    listDiv.addEventListener(\"click\", this.pickup.bind(core));\n    context.fontColor.colorList = listDiv.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var colorArea = core.context.colorPicker.colorListHTML;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer\";\n    listDiv.innerHTML = colorArea;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var contextPicker = this.context.colorPicker;\n    var contextFontColor = this.context.fontColor;\n    contextPicker._colorInput = contextFontColor.colorInput;\n    var color = this.wwComputedStyle.color;\n    contextPicker._defaultColor = color ? this.plugins.colorPicker.isHexColor(color) ? color : this.plugins.colorPicker.rgb2hex(color) : \"#333333\";\n    contextPicker._styleProperty = \"color\";\n    contextPicker._colorList = contextFontColor.colorList;\n    this.plugins.colorPicker.init.call(this, this.getSelectionNode(), null);\n  },\n\n  /**\r\n   * @Override colorPicker\r\n   */\n  onChangeInput: function onChangeInput(e) {\n    this.plugins.colorPicker.setCurrentColor.call(this, e.target.value);\n  },\n  submit: function submit() {\n    this.plugins.fontColor.applyColor.call(this, this.context.colorPicker._currentColor);\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.plugins.fontColor.applyColor.call(this, e.target.getAttribute(\"data-value\"));\n  },\n  remove: function remove() {\n    this.nodeChange(null, [\"color\"], [\"span\"], true);\n    this.submenuOff();\n  },\n  applyColor: function applyColor(color) {\n    if (!color) {\n      return;\n    }\n\n    var newNode = this.util.createElement(\"SPAN\");\n    newNode.style.color = color;\n    this.nodeChange(newNode, [\"color\"], null, null);\n    this.submenuOff();\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"colorPicker\",\n\n  /**\r\n   * @description Constructor\r\n   * @param {Object} core Core object\r\n   */\n  add: function add(core) {\n    var context = core.context;\n    context.colorPicker = {\n      colorListHTML: \"\",\n      _colorInput: \"\",\n      _defaultColor: \"#000\",\n      _styleProperty: \"color\",\n      _currentColor: \"\",\n      _colorList: []\n    };\n    /** set submenu */\n\n    context.colorPicker.colorListHTML = this.createColorList(core, this._makeColorList);\n  },\n\n  /**\r\n   * @description Create color list\r\n   * @param {Object} core Core object\r\n   * @param {Function} makeColor this._makeColorList\r\n   * @returns {String} HTML string\r\n   */\n  createColorList: function createColorList(core, makeColor) {\n    var option = core.options;\n    var lang = core.lang;\n    var colorList = !option.colorList || option.colorList.length === 0 ? [\"#ff0000\", \"#ff5e00\", \"#ffe400\", \"#abf200\", \"#00d8ff\", \"#0055ff\", \"#6600ff\", \"#ff00dd\", \"#000000\", \"#ffd8d8\", \"#fae0d4\", \"#faf4c0\", \"#e4f7ba\", \"#d4f4fa\", \"#d9e5ff\", \"#e8d9ff\", \"#ffd9fa\", \"#f1f1f1\", \"#ffa7a7\", \"#ffc19e\", \"#faed7d\", \"#cef279\", \"#b2ebf4\", \"#b2ccff\", \"#d1b2ff\", \"#ffb2f5\", \"#bdbdbd\", \"#f15f5f\", \"#f29661\", \"#e5d85c\", \"#bce55c\", \"#5cd1e5\", \"#6699ff\", \"#a366ff\", \"#f261df\", \"#8c8c8c\", \"#980000\", \"#993800\", \"#998a00\", \"#6b9900\", \"#008299\", \"#003399\", \"#3d0099\", \"#990085\", \"#353535\", \"#670000\", \"#662500\", \"#665c00\", \"#476600\", \"#005766\", \"#002266\", \"#290066\", \"#660058\", \"#222222\"] : option.colorList;\n    var colorArr = [];\n    var list = '<div class=\"ke-list-inner\">';\n\n    for (var i = 0, len = colorList.length, color; i < len; i++) {\n      color = colorList[i];\n\n      if (!color) {\n        continue;\n      }\n\n      if (typeof color === \"string\") {\n        colorArr.push(color);\n\n        if (i < len - 1) {\n          continue;\n        }\n      }\n\n      if (colorArr.length > 0) {\n        list += '<div class=\"ke-selector-color\">' + makeColor(colorArr) + \"</div>\";\n        colorArr = [];\n      }\n\n      if (_typeof(color) === \"object\") {\n        list += '<div class=\"ke-selector-color\">' + makeColor(color) + \"</div>\";\n      }\n    }\n\n    list += \"\" + '<form class=\"ke-submenu-form-group\">' + '<input type=\"text\" maxlength=\"9\" class=\"_ke_color_picker_input ke-color-input\"/>' + '<button type=\"submit\" class=\"ke-btn-primary _ke_color_picker_submit\" title=\"' + lang.dialogBox.submitButton + '\">' + core.icons.checked + \"</button>\" + '<button type=\"button\" class=\"ke-btn _ke_color_picker_remove\" title=\"' + lang.toolbar.removeFormat + '\">' + core.icons.erase + \"</button>\" + \"</form>\" + \"</div>\";\n    return list;\n  },\n\n  /**\r\n   * @description Internal function used by this.createColorList\r\n   * @param {Array} colorList Color list\r\n   * @private\r\n   */\n  _makeColorList: function _makeColorList(colorList) {\n    var list = \"\";\n    list += '<ul class=\"ke-color-pallet\">';\n\n    for (var i = 0, len = colorList.length, color; i < len; i++) {\n      color = colorList[i];\n\n      if (typeof color === \"string\") {\n        list += \"<li>\" + '<button type=\"button\" data-value=\"' + color + '\" title=\"' + color + '\" style=\"background-color:' + color + ';\"></button>' + \"</li>\";\n      }\n    }\n\n    list += \"</ul>\";\n    return list;\n  },\n\n  /**\r\n   * @description Displays or resets the currently selected color at color list.\r\n   * @param {Node} node Current Selected node\r\n   * @param {String|null} color Color value\r\n   */\n  init: function init(node, color) {\n    var colorPicker = this.plugins.colorPicker;\n    var fillColor = color ? color : colorPicker.getColorInNode.call(this, node) || this.context.colorPicker._defaultColor;\n    fillColor = colorPicker.isHexColor(fillColor) ? fillColor : colorPicker.rgb2hex(fillColor) || fillColor;\n    var colorList = this.context.colorPicker._colorList;\n\n    if (colorList) {\n      for (var i = 0, len = colorList.length; i < len; i++) {\n        if (fillColor.toLowerCase() === colorList[i].getAttribute(\"data-value\").toLowerCase()) {\n          this.util.addClass(colorList[i], \"active\");\n        } else {\n          this.util.removeClass(colorList[i], \"active\");\n        }\n      }\n    }\n\n    colorPicker.setInputText.call(this, colorPicker.colorName2hex.call(this, fillColor));\n  },\n\n  /**\r\n   * @description Store color values\r\n   * @param {String} hexColorStr Hax color value\r\n   */\n  setCurrentColor: function setCurrentColor(hexColorStr) {\n    this.context.colorPicker._currentColor = hexColorStr;\n    this.context.colorPicker._colorInput.style.borderColor = hexColorStr;\n  },\n\n  /**\r\n   * @description Set color at input element\r\n   * @param {String} hexColorStr Hax color value\r\n   */\n  setInputText: function setInputText(hexColorStr) {\n    hexColorStr = /^#/.test(hexColorStr) ? hexColorStr : \"#\" + hexColorStr;\n    this.context.colorPicker._colorInput.value = hexColorStr;\n    this.plugins.colorPicker.setCurrentColor.call(this, hexColorStr);\n  },\n\n  /**\r\n   * @description Gets color value at color property of node\r\n   * @param {Node} node Selected node\r\n   * @returns {String}\r\n   */\n  getColorInNode: function getColorInNode(node) {\n    var findColor = \"\";\n    var styleProperty = this.context.colorPicker._styleProperty;\n\n    while (node && !this.util.isWysiwygDiv(node) && findColor.length === 0) {\n      if (node.nodeType === 1 && node.style[styleProperty]) {\n        findColor = node.style[styleProperty];\n      }\n\n      node = node.parentNode;\n    }\n\n    return findColor;\n  },\n\n  /**\r\n   * @description Function to check hex format color\r\n   * @param {String} str Color value\r\n   */\n  isHexColor: function isHexColor(str) {\n    return /^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(str);\n  },\n\n  /**\r\n   * @description Function to convert hex format to a rgb color\r\n   * @param {String} rgb RGB color format\r\n   * @returns {String}\r\n   */\n  rgb2hex: function rgb2hex(rgb) {\n    var rgbMatch = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n    return rgbMatch && rgbMatch.length === 4 ? \"#\" + (\"0\" + parseInt(rgbMatch[1], 10).toString(16)).slice(-2) + (\"0\" + parseInt(rgbMatch[2], 10).toString(16)).slice(-2) + (\"0\" + parseInt(rgbMatch[3], 10).toString(16)).slice(-2) : \"\";\n  },\n\n  /**\r\n   * @description Converts color values of other formats to hex color values and returns.\r\n   * @param {String} colorName Color value\r\n   * @returns {String}\r\n   */\n  colorName2hex: function colorName2hex(colorName) {\n    if (/^#/.test(colorName)) {\n      return colorName;\n    }\n\n    var temp = this.util.createElement(\"div\");\n    temp.style.display = \"none\";\n    temp.style.color = colorName;\n\n    var colors = this._w.getComputedStyle(this._d.body.appendChild(temp)).color.match(/\\d+/g).map(function (a) {\n      return parseInt(a, 10);\n    });\n\n    this.util.removeItem(temp);\n    return colors.length >= 3 ? \"#\" + ((1 << 24) + (colors[0] << 16) + (colors[1] << 8) + colors[2]).toString(16).substr(1) : false;\n  }\n};\nexports.default = _default;","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderTemplate.vue?vue&type=style&index=0&id=832ebdd8&scoped=true&lang=scss&\"","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"paragraphStyle\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.paragraphStyle = {\n      _classList: null\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    /** add event listeners */\n\n    listDiv.querySelector(\"ul\").addEventListener(\"click\", this.pickUp.bind(core));\n    context.paragraphStyle._classList = listDiv.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-format\";\n    var menuLang = core.lang.menu;\n    var defaultList = {\n      spaced: {\n        name: menuLang.spaced,\n        class: \"__ke__p-spaced\",\n        _class: \"\"\n      },\n      bordered: {\n        name: menuLang.bordered,\n        class: \"__ke__p-bordered\",\n        _class: \"\"\n      },\n      neon: {\n        name: menuLang.neon,\n        class: \"__ke__p-neon\",\n        _class: \"\"\n      }\n    };\n    var paragraphStyles = !option.paragraphStyles || option.paragraphStyles.length === 0 ? [\"spaced\", \"bordered\", \"neon\"] : option.paragraphStyles;\n    var list = '<div class=\"ke-list-inner\"><ul class=\"ke-list-basic\">';\n\n    for (var i = 0, len = paragraphStyles.length, p, name, attrs, _class; i < len; i++) {\n      p = paragraphStyles[i];\n\n      if (typeof p === \"string\") {\n        var defaultStyle = defaultList[p.toLowerCase()];\n\n        if (!defaultStyle) {\n          continue;\n        }\n\n        p = defaultStyle;\n      }\n\n      name = p.name;\n      attrs = p.class ? ' class=\"' + p.class + '\"' : \"\";\n      _class = p._class;\n      list += \"<li>\" + '<button type=\"button\" class=\"ke-btn-list' + (_class ? \" \" + _class : \"\") + '\" data-value=\"' + p.class + '\" title=\"' + name + '\">' + \"<div\" + attrs + \">\" + name + \"</div>\" + \"</button></li>\";\n    }\n\n    list += \"</ul></div>\";\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var paragraphContext = this.context.paragraphStyle;\n    var paragraphList = paragraphContext._classList;\n    var currentFormat = this.util.getFormatElement(this.getSelectionNode());\n\n    for (var i = 0, len = paragraphList.length; i < len; i++) {\n      if (this.util.hasClass(currentFormat, paragraphList[i].getAttribute(\"data-value\"))) {\n        this.util.addClass(paragraphList[i], \"active\");\n      } else {\n        this.util.removeClass(paragraphList[i], \"active\");\n      }\n    }\n  },\n  pickUp: function pickUp(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var value = null;\n\n    while (!/^UL$/i.test(target.tagName)) {\n      value = target.getAttribute(\"data-value\");\n\n      if (value) {\n        break;\n      }\n\n      target = target.parentNode;\n    }\n\n    if (!value) {\n      return;\n    }\n\n    var selectedFormsts = this.getSelectedElements();\n\n    if (selectedFormsts.length === 0) {\n      this.getRange_addLine(this.getRange(), null);\n      selectedFormsts = this.getSelectedElements();\n\n      if (selectedFormsts.length === 0) {\n        return;\n      }\n    } // change format class\n\n\n    var toggleClass = this.util.hasClass(target, \"active\") ? this.util.removeClass.bind(this.util) : this.util.addClass.bind(this.util);\n\n    for (var i = 0, len = selectedFormsts.length; i < len; i++) {\n      toggleClass(selectedFormsts[i], value);\n    }\n\n    this.submenuOff(); // history stack\n\n    this.history.push(false);\n  }\n};\nexports.default = _default;","// Styles\nimport './VChip.sass'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n// Components\nimport { VExpandXTransition } from '../transitions'\nimport VIcon from '../VIcon'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport { factory as GroupableFactory } from '../../mixins/groupable'\nimport Themeable from '../../mixins/themeable'\nimport { factory as ToggleableFactory } from '../../mixins/toggleable'\nimport Routable from '../../mixins/routable'\nimport Sizeable from '../../mixins/sizeable'\n\n// Utilities\nimport { breaking } from '../../util/console'\n\n// Types\nimport { PropValidator, PropType } from 'vue/types/options'\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  Sizeable,\n  Routable,\n  Themeable,\n  GroupableFactory('chipGroup'),\n  ToggleableFactory('inputValue')\n).extend({\n  name: 'v-chip',\n\n  props: {\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    activeClass: {\n      type: String,\n      default (): string | undefined {\n        if (!this.chipGroup) return ''\n\n        return this.chipGroup.activeClass\n      },\n    } as any as PropValidator<string>,\n    close: Boolean,\n    closeIcon: {\n      type: String,\n      default: '$delete',\n    },\n    closeLabel: {\n      type: String,\n      default: '$vuetify.close',\n    },\n    disabled: Boolean,\n    draggable: Boolean,\n    filter: Boolean,\n    filterIcon: {\n      type: String,\n      default: '$complete',\n    },\n    label: Boolean,\n    link: Boolean,\n    outlined: Boolean,\n    pill: Boolean,\n    tag: {\n      type: String,\n      default: 'span',\n    },\n    textColor: String,\n    value: null as any as PropType<any>,\n  },\n\n  data: () => ({\n    proxyClass: 'v-chip--active',\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        'v-chip': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-chip--clickable': this.isClickable,\n        'v-chip--disabled': this.disabled,\n        'v-chip--draggable': this.draggable,\n        'v-chip--label': this.label,\n        'v-chip--link': this.isLink,\n        'v-chip--no-color': !this.color,\n        'v-chip--outlined': this.outlined,\n        'v-chip--pill': this.pill,\n        'v-chip--removable': this.hasClose,\n        ...this.themeClasses,\n        ...this.sizeableClasses,\n        ...this.groupClasses,\n      }\n    },\n    hasClose (): boolean {\n      return Boolean(this.close)\n    },\n    isClickable (): boolean {\n      return Boolean(\n        Routable.options.computed.isClickable.call(this) ||\n        this.chipGroup\n      )\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['outline', 'outlined'],\n      ['selected', 'input-value'],\n      ['value', 'active'],\n      ['@input', '@active.sync'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  methods: {\n    click (e: MouseEvent): void {\n      this.$emit('click', e)\n\n      this.chipGroup && this.toggle()\n    },\n    genFilter (): VNode {\n      const children = []\n\n      if (this.isActive) {\n        children.push(\n          this.$createElement(VIcon, {\n            staticClass: 'v-chip__filter',\n            props: { left: true },\n          }, this.filterIcon)\n        )\n      }\n\n      return this.$createElement(VExpandXTransition, children)\n    },\n    genClose (): VNode {\n      return this.$createElement(VIcon, {\n        staticClass: 'v-chip__close',\n        props: {\n          right: true,\n          size: 18,\n        },\n        attrs: {\n          'aria-label': this.$vuetify.lang.t(this.closeLabel),\n        },\n        on: {\n          click: (e: Event) => {\n            e.stopPropagation()\n            e.preventDefault()\n\n            this.$emit('click:close')\n            this.$emit('update:active', false)\n          },\n        },\n      }, this.closeIcon)\n    },\n    genContent (): VNode {\n      return this.$createElement('span', {\n        staticClass: 'v-chip__content',\n      }, [\n        this.filter && this.genFilter(),\n        this.$slots.default,\n        this.hasClose && this.genClose(),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    const children = [this.genContent()]\n    let { tag, data } = this.generateRouteLink()\n\n    data.attrs = {\n      ...data.attrs,\n      draggable: this.draggable ? 'true' : undefined,\n      tabindex: this.chipGroup && !this.disabled ? 0 : data.attrs!.tabindex,\n    }\n    data.directives!.push({\n      name: 'show',\n      value: this.active,\n    })\n    data = this.setBackgroundColor(this.color, data)\n\n    const color = this.textColor || (this.outlined && this.color)\n\n    return h(tag, this.setTextColor(color, data), children)\n  },\n})\n","module.exports = __webpack_public_path__ + \"img/aaij-print-template-header.8540510a.png\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _selectMenu = _interopRequireDefault(require(\"./selectMenu\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"anchor\",\n  add: function add(core) {\n    core.addModule([_selectMenu.default]);\n    core.context.anchor = {\n      caller: {},\n      forms: this.setDialogForm(core),\n      host: (core._w.location.origin + core._w.location.pathname).replace(/\\/$/, \"\"),\n      callerContext: null\n    };\n  },\n\n  /** dialog */\n  setDialogForm: function setDialogForm(core) {\n    var lang = core.lang;\n    var relList = core.options.linkRel;\n    var defaultRel = (core.options.linkRelDefault.default || \"\").split(\" \");\n    var icons = core.icons;\n    var forms = core.util.createElement(\"DIV\");\n    var html = '<div class=\"ke-dialog-body\">' + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.linkBox.url + \"</label>\" + '<div class=\"ke-dialog-form-files\">' + '<input class=\"ke-input-form ke-input-url\" type=\"text\" placeholder=\"' + (core.options.protocol || \"\") + '\" />' + '<button type=\"button\" class=\"ke-btn ke-dialog-files-edge-button _ke_bookmark_button\" title=\"' + lang.dialogBox.linkBox.bookmark + '\">' + icons.bookmark + \"</button>\" + core.plugins.selectMenu.setForm() + \"</div>\" + '<div class=\"ke-anchor-preview-form\">' + '<span class=\"ke-svg ke-anchor-preview-icon _ke_anchor_bookmark_icon\">' + icons.bookmark + \"</span>\" + '<span class=\"ke-svg ke-anchor-preview-icon _ke_anchor_download_icon\">' + icons.download + \"</span>\" + '<pre class=\"ke-link-preview\"></pre>' + \"</div>\" + \"</div>\" + '<div class=\"ke-dialog-form\">' + \"<label>\" + lang.dialogBox.linkBox.text + '</label><input class=\"ke-input-form _ke_anchor_text\" type=\"text\" />' + \"</div>\" + '<div class=\"ke-dialog-form-footer\">' + '<label><input type=\"checkbox\" class=\"ke-dialog-btn-check _ke_anchor_check\" />&nbsp;' + lang.dialogBox.linkBox.newWindowCheck + \"</label>\" + '<label><input type=\"checkbox\" class=\"ke-dialog-btn-check _ke_anchor_download\" />&nbsp;' + lang.dialogBox.linkBox.downloadLinkCheck + \"</label>\";\n\n    if (relList.length > 0) {\n      html += '<div class=\"ke-anchor-rel\"><button type=\"button\" class=\"ke-btn ke-btn-select ke-anchor-rel-btn\">&lt;rel&gt;</button>' + '<div class=\"ke-anchor-rel-wrapper\"><pre class=\"ke-link-preview ke-anchor-rel-preview\"></pre></div>' + '<div class=\"ke-list-layer\">' + '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic ke-list-checked\">';\n\n      for (var i = 0, len = relList.length, rel; i < len; i++) {\n        rel = relList[i];\n        html += '<li><button type=\"button\" class=\"ke-btn-list' + (defaultRel.indexOf(rel) > -1 ? \" ke-checked\" : \"\") + '\" data-command=\"' + rel + '\" title=\"' + rel + '\"><span class=\"ke-svg\">' + icons.checked + \"</span>\" + rel + \"</button></li>\";\n      }\n\n      html += \"</ul></div></div></div>\";\n    }\n\n    html += \"</div></div>\";\n    forms.innerHTML = html;\n    return forms;\n  },\n  initEvent: function initEvent(pluginName, forms) {\n    var anchorPlugin = this.plugins.anchor;\n    var context = this.context.anchor.caller[pluginName] = {\n      modal: forms,\n      urlInput: null,\n      linkDefaultRel: this.options.linkRelDefault,\n      defaultRel: this.options.linkRelDefault.default || \"\",\n      currentRel: [],\n      linkAnchor: null,\n      linkValue: \"\",\n      _change: false,\n      callerName: pluginName\n    };\n\n    if (typeof context.linkDefaultRel.default === \"string\") {\n      context.linkDefaultRel.default = context.linkDefaultRel.default.trim();\n    }\n\n    if (typeof context.linkDefaultRel.check_new_window === \"string\") {\n      context.linkDefaultRel.check_new_window = context.linkDefaultRel.check_new_window.trim();\n    }\n\n    if (typeof context.linkDefaultRel.check_bookmark === \"string\") {\n      context.linkDefaultRel.check_bookmark = context.linkDefaultRel.check_bookmark.trim();\n    }\n\n    context.urlInput = forms.querySelector(\".ke-input-url\");\n    context.anchorText = forms.querySelector(\"._ke_anchor_text\");\n    context.newWindowCheck = forms.querySelector(\"._ke_anchor_check\");\n    context.downloadCheck = forms.querySelector(\"._ke_anchor_download\");\n    context.download = forms.querySelector(\"._ke_anchor_download_icon\");\n    context.preview = forms.querySelector(\".ke-link-preview\");\n    context.bookmark = forms.querySelector(\"._ke_anchor_bookmark_icon\");\n    context.bookmarkButton = forms.querySelector(\"._ke_bookmark_button\");\n    this.plugins.selectMenu.initEvent.call(this, pluginName, forms);\n    var listContext = this.context.selectMenu.caller[pluginName];\n    /** rel */\n\n    if (this.options.linkRel.length > 0) {\n      context.relButton = forms.querySelector(\".ke-anchor-rel-btn\");\n      context.relList = forms.querySelector(\".ke-list-layer\");\n      context.relPreview = forms.querySelector(\".ke-anchor-rel-preview\");\n      context.relButton.addEventListener(\"click\", anchorPlugin.onClick_relButton.bind(this, context));\n      context.relList.addEventListener(\"click\", anchorPlugin.onClick_relList.bind(this, context));\n    }\n\n    context.newWindowCheck.addEventListener(\"change\", anchorPlugin.onChange_newWindowCheck.bind(this, context));\n    context.downloadCheck.addEventListener(\"change\", anchorPlugin.onChange_downloadCheck.bind(this, context));\n    context.anchorText.addEventListener(\"input\", anchorPlugin.onChangeAnchorText.bind(this, context));\n    context.urlInput.addEventListener(\"input\", anchorPlugin.onChangeUrlInput.bind(this, context));\n    context.urlInput.addEventListener(\"keydown\", anchorPlugin.onKeyDownUrlInput.bind(this, listContext));\n    context.urlInput.addEventListener(\"focus\", anchorPlugin.onFocusUrlInput.bind(this, context, listContext));\n    context.urlInput.addEventListener(\"blur\", anchorPlugin.onBlurUrlInput.bind(this, listContext));\n    context.bookmarkButton.addEventListener(\"click\", anchorPlugin.onClick_bookmarkButton.bind(this, context));\n  },\n  on: function on(contextAnchor, update) {\n    if (!update) {\n      this.plugins.anchor.init.call(this, contextAnchor);\n      contextAnchor.anchorText.value = this.getSelection().toString();\n    } else if (contextAnchor.linkAnchor) {\n      this.context.dialog.updateModal = true;\n      var href = contextAnchor.linkAnchor.href;\n      contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = /#.+$/.test(href) ? href.substr(href.lastIndexOf(\"#\")) : href;\n      contextAnchor.anchorText.value = contextAnchor.linkAnchor.textContent.trim() || contextAnchor.linkAnchor.getAttribute(\"alt\");\n      contextAnchor.newWindowCheck.checked = /_blank/i.test(contextAnchor.linkAnchor.target) ? true : false;\n      contextAnchor.downloadCheck.checked = contextAnchor.linkAnchor.download;\n    }\n\n    this.context.anchor.callerContext = contextAnchor;\n    this.plugins.anchor.setRel.call(this, contextAnchor, update && contextAnchor.linkAnchor ? contextAnchor.linkAnchor.rel : contextAnchor.defaultRel);\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, contextAnchor.linkValue);\n    this.plugins.selectMenu.on.call(this, contextAnchor.callerName, this.plugins.anchor.setHeaderBookmark);\n  },\n  _closeRelMenu: null,\n  toggleRelList: function toggleRelList(contextAnchor, show) {\n    if (!show) {\n      if (this.plugins.anchor._closeRelMenu) {\n        this.plugins.anchor._closeRelMenu();\n      }\n    } else {\n      var target = contextAnchor.relButton;\n      var relList = contextAnchor.relList;\n      this.util.addClass(target, \"active\");\n      relList.style.visibility = \"hidden\";\n      relList.style.display = \"block\";\n\n      if (!this.options.rtl) {\n        relList.style.left = target.offsetLeft + target.offsetWidth + 1 + \"px\";\n      } else {\n        relList.style.left = target.offsetLeft - relList.offsetWidth - 1 + \"px\";\n      }\n\n      relList.style.top = target.offsetTop + target.offsetHeight / 2 - relList.offsetHeight / 2 + \"px\";\n      relList.style.visibility = \"\";\n\n      this.plugins.anchor._closeRelMenu = function (context, target, e) {\n        if (e && (context.relButton.contains(e.target) || context.relList.contains(e.target))) {\n          return;\n        }\n\n        this.util.removeClass(target, \"active\");\n        context.relList.style.display = \"none\";\n        this.modalForm.removeEventListener(\"click\", this.plugins.anchor._closeRelMenu);\n        this.plugins.anchor._closeRelMenu = null;\n      }.bind(this, contextAnchor, target);\n\n      this.modalForm.addEventListener(\"click\", this.plugins.anchor._closeRelMenu);\n    }\n  },\n  onClick_relButton: function onClick_relButton(contextAnchor, e) {\n    this.plugins.anchor.toggleRelList.call(this, contextAnchor, !this.util.hasClass(e.target, \"active\"));\n  },\n  onClick_relList: function onClick_relList(contextAnchor, e) {\n    var target = e.target;\n    var cmd = target.getAttribute(\"data-command\");\n\n    if (!cmd) {\n      return;\n    }\n\n    var current = contextAnchor.currentRel;\n    var checked = this.util.toggleClass(target, \"ke-checked\");\n    var index = current.indexOf(cmd);\n\n    if (checked) {\n      if (index === -1) {\n        current.push(cmd);\n      }\n    } else {\n      if (index > -1) {\n        current.splice(index, 1);\n      }\n    }\n\n    contextAnchor.relPreview.title = contextAnchor.relPreview.textContent = current.join(\" \");\n  },\n  setRel: function setRel(contextAnchor, relAttr) {\n    var relListEl = contextAnchor.relList;\n    var rels = contextAnchor.currentRel = !relAttr ? [] : relAttr.split(\" \");\n\n    if (!relListEl) {\n      return;\n    }\n\n    var checkedRel = relListEl.querySelectorAll(\"button\");\n\n    for (var i = 0, len = checkedRel.length, cmd; i < len; i++) {\n      cmd = checkedRel[i].getAttribute(\"data-command\");\n\n      if (rels.indexOf(cmd) > -1) {\n        this.util.addClass(checkedRel[i], \"ke-checked\");\n      } else {\n        this.util.removeClass(checkedRel[i], \"ke-checked\");\n      }\n    }\n\n    contextAnchor.relPreview.title = contextAnchor.relPreview.textContent = rels.join(\" \");\n  },\n  createHeaderList: function createHeaderList(contextAnchor, contextList, urlValue) {\n    var headers = this.util.getListChildren(this.context.element.wysiwyg, function (current) {\n      return /h[1-6]/i.test(current.nodeName);\n    });\n\n    if (headers.length === 0) {\n      return;\n    }\n\n    var valueRegExp = new this._w.RegExp(\"^\" + urlValue.replace(/^#/, \"\"), \"i\");\n    var list = [];\n    var html = \"\";\n\n    for (var i = 0, len = headers.length, h; i < len; i++) {\n      h = headers[i];\n\n      if (!valueRegExp.test(h.textContent)) {\n        continue;\n      }\n\n      list.push(h);\n      html += '<li class=\"ke-select-item\" data-index=\"' + i + '\">' + h.textContent + \"</li>\";\n    }\n\n    if (list.length === 0) {\n      this.plugins.selectMenu.close.call(this, contextList);\n    } else {\n      this.plugins.selectMenu.createList(contextList, list, html);\n      this.plugins.selectMenu.open.call(this, contextList, this.plugins.anchor._setMenuListPosition.bind(this, contextAnchor));\n    }\n  },\n  _setMenuListPosition: function _setMenuListPosition(contextAnchor, list) {\n    list.style.top = contextAnchor.urlInput.offsetHeight + 1 + \"px\";\n  },\n  onKeyDownUrlInput: function onKeyDownUrlInput(contextList, e) {\n    var keyCode = e.keyCode;\n\n    switch (keyCode) {\n      case 38:\n        // up\n        e.preventDefault();\n        e.stopPropagation();\n        this.plugins.selectMenu.moveItem.call(this, contextList, -1);\n        break;\n\n      case 40:\n        // down\n        e.preventDefault();\n        e.stopPropagation();\n        this.plugins.selectMenu.moveItem.call(this, contextList, 1);\n        break;\n\n      case 13:\n        // enter\n        if (contextList.index > -1) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.plugins.anchor.setHeaderBookmark.call(this, this.plugins.selectMenu.getItem(contextList, null));\n        }\n\n        break;\n    }\n  },\n  setHeaderBookmark: function setHeaderBookmark(header) {\n    var contextAnchor = this.context.anchor.callerContext;\n\n    var id = header.id || \"h_\" + this._w.Math.random().toString().replace(/.+\\./, \"\");\n\n    header.id = id;\n    contextAnchor.urlInput.value = \"#\" + id;\n\n    if (!contextAnchor.anchorText.value.trim() || !contextAnchor._change) {\n      contextAnchor.anchorText.value = header.textContent;\n    }\n\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, contextAnchor.urlInput.value);\n    this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n    this.context.anchor.callerContext.urlInput.focus();\n  },\n  onChangeAnchorText: function onChangeAnchorText(contextAnchor, e) {\n    contextAnchor._change = !!e.target.value.trim();\n  },\n  onChangeUrlInput: function onChangeUrlInput(contextAnchor, e) {\n    var value = e.target.value.trim();\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, value);\n\n    if (/^#/.test(value)) {\n      this.plugins.anchor.createHeaderList.call(this, contextAnchor, this.context.selectMenu.callerContext, value);\n    } else {\n      this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n    }\n  },\n  onFocusUrlInput: function onFocusUrlInput(contextAnchor, contextLink) {\n    var value = contextAnchor.urlInput.value;\n\n    if (/^#/.test(value)) {\n      this.plugins.anchor.createHeaderList.call(this, contextAnchor, contextLink, value);\n    }\n  },\n  onBlurUrlInput: function onBlurUrlInput(contextList) {\n    this.plugins.selectMenu.close.call(this, contextList);\n  },\n  setLinkPreview: function setLinkPreview(context, value) {\n    var preview = context.preview;\n    var protocol = this.options.linkProtocol;\n    var reservedProtocol = /^(mailto:|tel:|sms:|https*:\\/\\/|#)/.test(value);\n    var sameProtocol = !protocol ? false : this._w.RegExp(\"^\" + value.substr(0, protocol.length)).test(protocol);\n    context.linkValue = preview.textContent = !value ? \"\" : protocol && !reservedProtocol && !sameProtocol ? protocol + value : reservedProtocol ? value : /^www\\./.test(value) ? \"http://\" + value : this.context.anchor.host + (/^\\//.test(value) ? \"\" : \"/\") + value;\n\n    if (value.indexOf(\"#\") === 0) {\n      context.bookmark.style.display = \"inline-block\";\n      this.util.addClass(context.bookmarkButton, \"active\");\n    } else {\n      context.bookmark.style.display = \"none\";\n      this.util.removeClass(context.bookmarkButton, \"active\");\n    }\n\n    if (value.indexOf(\"#\") === -1 && context.downloadCheck.checked) {\n      context.download.style.display = \"block\";\n    } else {\n      context.download.style.display = \"none\";\n    }\n  },\n  setCtx: function setCtx(anchor, contextAnchor) {\n    if (!anchor) {\n      return;\n    }\n\n    contextAnchor.linkAnchor = anchor;\n    contextAnchor.linkValue = anchor.href;\n    contextAnchor.currentRel = anchor.rel.split(\" \");\n  },\n  updateAnchor: function updateAnchor(anchor, url, alt, contextAnchor, notText) {\n    // download\n    if (!/^#/.test(url) && contextAnchor.downloadCheck.checked) {\n      anchor.setAttribute(\"download\", alt || url);\n    } else {\n      anchor.removeAttribute(\"download\");\n    } // new window\n\n\n    if (contextAnchor.newWindowCheck.checked) {\n      anchor.target = \"_blank\";\n    } else {\n      anchor.removeAttribute(\"target\");\n    } // rel\n\n\n    var rel = contextAnchor.currentRel.join(\" \");\n\n    if (!rel) {\n      anchor.removeAttribute(\"rel\");\n    } else {\n      anchor.rel = rel;\n    } // est url, alt\n\n\n    anchor.href = url;\n    anchor.setAttribute(\"alt\", alt);\n\n    if (notText) {\n      if (anchor.children.length === 0) {\n        anchor.textContent = \"\";\n      }\n    } else {\n      anchor.textContent = alt;\n    }\n  },\n  createAnchor: function createAnchor(contextAnchor, notText) {\n    if (contextAnchor.linkValue.length === 0) {\n      return null;\n    }\n\n    var url = contextAnchor.linkValue;\n    var anchor = contextAnchor.anchorText;\n    var anchorText = anchor.value.length === 0 ? url : anchor.value;\n    var oA = contextAnchor.linkAnchor || this.util.createElement(\"A\");\n    this.plugins.anchor.updateAnchor(oA, url, anchorText, contextAnchor, notText);\n    contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = contextAnchor.anchorText.value = \"\";\n    return oA;\n  },\n  onClick_bookmarkButton: function onClick_bookmarkButton(contextAnchor) {\n    var url = contextAnchor.urlInput.value;\n\n    if (/^#/.test(url)) {\n      url = url.substr(1);\n      contextAnchor.bookmark.style.display = \"none\";\n      this.util.removeClass(contextAnchor.bookmarkButton, \"active\");\n      this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);\n    } else {\n      url = \"#\" + url;\n      contextAnchor.bookmark.style.display = \"block\";\n      this.util.addClass(contextAnchor.bookmarkButton, \"active\");\n      contextAnchor.downloadCheck.checked = false;\n      contextAnchor.download.style.display = \"none\";\n      this.plugins.anchor.createHeaderList.call(this, contextAnchor, this.context.selectMenu.callerContext, url);\n    }\n\n    contextAnchor.urlInput.value = url;\n    this.plugins.anchor.setLinkPreview.call(this, contextAnchor, url);\n    contextAnchor.urlInput.focus();\n  },\n  onChange_newWindowCheck: function onChange_newWindowCheck(contextAnchor, e) {\n    if (typeof contextAnchor.linkDefaultRel.check_new_window !== \"string\") {\n      return;\n    }\n\n    if (e.target.checked) {\n      this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relMerge.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_new_window));\n    } else {\n      this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relDelete.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_new_window));\n    }\n  },\n  onChange_downloadCheck: function onChange_downloadCheck(contextAnchor, e) {\n    if (e.target.checked) {\n      contextAnchor.download.style.display = \"block\";\n      contextAnchor.bookmark.style.display = \"none\";\n      this.util.removeClass(contextAnchor.bookmarkButton, \"active\");\n      contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = contextAnchor.urlInput.value.replace(/^#+/, \"\");\n\n      if (typeof contextAnchor.linkDefaultRel.check_bookmark === \"string\") {\n        this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relMerge.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_bookmark));\n      }\n    } else {\n      contextAnchor.download.style.display = \"none\";\n\n      if (typeof contextAnchor.linkDefaultRel.check_bookmark === \"string\") {\n        this.plugins.anchor.setRel.call(this, contextAnchor, this.plugins.anchor._relDelete.call(this, contextAnchor, contextAnchor.linkDefaultRel.check_bookmark));\n      }\n    }\n  },\n  _relMerge: function _relMerge(contextAnchor, relAttr) {\n    var current = contextAnchor.currentRel;\n\n    if (!relAttr) {\n      return current.join(\" \");\n    }\n\n    if (/^only:/.test(relAttr)) {\n      relAttr = relAttr.replace(/^only:/, \"\").trim();\n      contextAnchor.currentRel = relAttr.split(\" \");\n      return relAttr;\n    }\n\n    var rels = relAttr.split(\" \");\n\n    for (var i = 0, len = rels.length, index; i < len; i++) {\n      index = current.indexOf(rels[i]);\n\n      if (index === -1) {\n        current.push(rels[i]);\n      }\n    }\n\n    return current.join(\" \");\n  },\n  _relDelete: function _relDelete(contextAnchor, relAttr) {\n    if (!relAttr) {\n      return contextAnchor.currentRel.join(\" \");\n    }\n\n    if (/^only:/.test(relAttr)) {\n      relAttr = relAttr.replace(/^only:/, \"\").trim();\n    }\n\n    var rels = contextAnchor.currentRel.join(\" \").replace(this._w.RegExp(relAttr + \"\\\\s*\"), \"\");\n    contextAnchor.currentRel = rels.split(\" \");\n    return rels;\n  },\n  init: function init(contextAnchor) {\n    contextAnchor.linkAnchor = null;\n    contextAnchor.linkValue = contextAnchor.preview.textContent = contextAnchor.urlInput.value = \"\";\n    contextAnchor.anchorText.value = \"\";\n    contextAnchor.newWindowCheck.checked = false;\n    contextAnchor.downloadCheck.checked = false;\n    contextAnchor._change = false;\n    this.plugins.anchor.setRel.call(this, contextAnchor, contextAnchor.defaultRel);\n\n    if (contextAnchor.relList) {\n      this.plugins.anchor.toggleRelList.call(this, contextAnchor, false);\n    }\n\n    this.context.anchor.callerContext = null;\n    this.plugins.selectMenu.init.call(this, this.context.selectMenu.callerContext);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _colorPicker = _interopRequireDefault(require(\"../modules/colorPicker\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"hiliteColor\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    core.addModule([_colorPicker.default]);\n    var context = core.context;\n    context.hiliteColor = {\n      previewEl: null,\n      colorInput: null,\n      colorList: null\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    context.hiliteColor.colorInput = listDiv.querySelector(\"._ke_color_picker_input\");\n    /** add event listeners */\n\n    context.hiliteColor.colorInput.addEventListener(\"keyup\", this.onChangeInput.bind(core));\n    listDiv.querySelector(\"._ke_color_picker_submit\").addEventListener(\"click\", this.submit.bind(core));\n    listDiv.querySelector(\"._ke_color_picker_remove\").addEventListener(\"click\", this.remove.bind(core));\n    listDiv.addEventListener(\"click\", this.pickup.bind(core));\n    context.hiliteColor.colorList = listDiv.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var colorArea = core.context.colorPicker.colorListHTML;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer\";\n    listDiv.innerHTML = colorArea;\n    return listDiv;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var contextPicker = this.context.colorPicker;\n    var contextHiliteColor = this.context.hiliteColor;\n    contextPicker._colorInput = contextHiliteColor.colorInput;\n    var color = this.wwComputedStyle.backgroundColor;\n    contextPicker._defaultColor = color ? this.plugins.colorPicker.isHexColor(color) ? color : this.plugins.colorPicker.rgb2hex(color) : \"#ffffff\";\n    contextPicker._styleProperty = \"backgroundColor\";\n    contextPicker._colorList = contextHiliteColor.colorList;\n    this.plugins.colorPicker.init.call(this, this.getSelectionNode(), null);\n  },\n\n  /**\r\n   * @Override colorPicker\r\n   */\n  onChangeInput: function onChangeInput(e) {\n    this.plugins.colorPicker.setCurrentColor.call(this, e.target.value);\n  },\n  submit: function submit() {\n    this.plugins.hiliteColor.applyColor.call(this, this.context.colorPicker._currentColor);\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.plugins.hiliteColor.applyColor.call(this, e.target.getAttribute(\"data-value\"));\n  },\n  remove: function remove() {\n    this.nodeChange(null, [\"background-color\"], [\"span\"], true);\n    this.submenuOff();\n  },\n  applyColor: function applyColor(color) {\n    if (!color) {\n      return;\n    }\n\n    var newNode = this.util.createElement(\"SPAN\");\n    newNode.style.backgroundColor = color;\n    this.nodeChange(newNode, [\"background-color\"], null, null);\n    this.submenuOff();\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"horizontalRule\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    core.context.horizontalRule = {\n      currentHR: null\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    /** add event listeners */\n\n    listDiv.querySelector(\"ul\").addEventListener(\"click\", this.horizontalRulePick.bind(core));\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var lang = core.lang;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer ke-list-line\";\n    listDiv.innerHTML = \"\" + '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + \"<li>\" + '<button type=\"button\" class=\"ke-btn-list btn_line\" data-command=\"horizontalRule\" data-value=\"solid\" title=\"' + lang.toolbar.hr_solid + '\">' + '<hr style=\"border-width: 1px 0 0; border-style: solid none none; border-color: black; border-image: initial; height: 1px;\" />' + \"</button>\" + \"</li>\" + \"<li>\" + '<button type=\"button\" class=\"ke-btn-list btn_line\" data-command=\"horizontalRule\" data-value=\"dotted\" title=\"' + lang.toolbar.hr_dotted + '\">' + '<hr style=\"border-width: 1px 0 0; border-style: dotted none none; border-color: black; border-image: initial; height: 1px;\" />' + \"</button>\" + \"</li>\" + \"<li>\" + '<button type=\"button\" class=\"ke-btn-list btn_line\" data-command=\"horizontalRule\" data-value=\"dashed\" title=\"' + lang.toolbar.hr_dashed + '\">' + '<hr style=\"border-width: 1px 0 0; border-style: dashed none none; border-color: black; border-image: initial; height: 1px;\" />' + \"</button>\" + \"</li>\" + \"</ul>\" + \"</div>\";\n    return listDiv;\n  },\n  active: function active(element) {\n    if (!element) {\n      if (this.util.hasClass(this.context.horizontalRule.currentHR, \"on\")) {\n        this.controllersOff();\n      }\n    } else if (/HR/i.test(element.nodeName)) {\n      this.context.horizontalRule.currentHR = element;\n\n      if (!this.util.hasClass(element, \"on\")) {\n        this.util.addClass(element, \"on\");\n        this.controllersOn(\"hr\", this.util.removeClass.bind(this.util, element, \"on\"));\n      }\n\n      return true;\n    }\n\n    return false;\n  },\n  appendHr: function appendHr(className) {\n    var oHr = this.util.createElement(\"HR\");\n    oHr.className = className;\n    this.focus();\n    return this.insertComponent(oHr, false, true, false);\n  },\n  horizontalRulePick: function horizontalRulePick(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var value = null;\n\n    while (!value && !/UL/i.test(target.tagName)) {\n      value = target.getAttribute(\"data-value\");\n      target = target.parentNode;\n    }\n\n    if (!value) {\n      return;\n    }\n\n    var oNode = this.plugins.horizontalRule.appendHr.call(this, \"__ke__\" + value);\n\n    if (oNode) {\n      this.setRange(oNode, 0, oNode, 0);\n      this.submenuOff();\n    }\n  }\n};\nexports.default = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n(function (global, factory) {\n  if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error(\"KothingEditor_MODULES a window with a document\");\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== \"undefined\" ? window : void 0, function (window, noGlobal) {\n  var fileBrowser = {\n    name: \"fileBrowser\",\n    _xmlHttp: null,\n    loading: null,\n\n    /**\r\n     * @description Constructor\r\n     * @param {Object} core Core object\r\n     */\n    add: function add(core) {\n      var context = core.context;\n      context.fileBrowser = {\n        _closeSignal: false,\n        area: null,\n        header: null,\n        tagArea: null,\n        body: null,\n        list: null,\n        tagElements: null,\n        items: [],\n        selectedTags: [],\n        selectorHandler: null,\n        contextPlugin: \"\",\n        columnSize: 4\n      };\n      /** fileBrowser */\n\n      var browser_div = core.util.createElement(\"DIV\");\n      browser_div.className = \"ke-file-browser kothing-editor-common\";\n      var back = core.util.createElement(\"DIV\");\n      back.className = \"ke-file-browser-back\";\n      var content = core.util.createElement(\"DIV\");\n      content.className = \"ke-file-browser-inner\";\n      content.innerHTML = this.set_browser(core);\n      browser_div.appendChild(back);\n      browser_div.appendChild(content);\n      this.loading = browser_div.querySelector(\".ke-loading-box\");\n      context.fileBrowser.area = browser_div;\n      context.fileBrowser.header = content.querySelector(\".ke-file-browser-header\");\n      context.fileBrowser.titleArea = content.querySelector(\".ke-file-browser-title\");\n      context.fileBrowser.tagArea = content.querySelector(\".ke-file-browser-tags\");\n      context.fileBrowser.body = content.querySelector(\".ke-file-browser-body\");\n      context.fileBrowser.list = content.querySelector(\".ke-file-browser-list\");\n      /** add event listeners */\n\n      context.fileBrowser.tagArea.addEventListener(\"click\", this.onClickTag.bind(core));\n      context.fileBrowser.list.addEventListener(\"click\", this.onClickFile.bind(core));\n      content.addEventListener(\"mousedown\", this._onMouseDown_browser.bind(core));\n      content.addEventListener(\"click\", this._onClick_browser.bind(core));\n      /** append html */\n\n      context.element.relative.appendChild(browser_div);\n      /** empty memory */\n\n      browser_div = null, back = null, content = null;\n    },\n    set_browser: function set_browser(core) {\n      var lang = core.lang;\n      return '<div class=\"ke-file-browser-content\">' + '<div class=\"ke-file-browser-header\">' + '<button type=\"button\" data-command=\"close\" class=\"ke-btn ke-file-browser-close\" class=\"close\" aria-label=\"Close\" title=\"' + lang.dialogBox.close + '\">' + core.icons.cancel + \"</button>\" + '<span class=\"ke-file-browser-title\"></span>' + '<div class=\"ke-file-browser-tags\"></div>' + \"</div>\" + '<div class=\"ke-file-browser-body\">' + '<div class=\"ke-loading-box kothing-editor-common\"><div class=\"ke-loading-effect\"></div></div>' + '<div class=\"ke-file-browser-list\"></div>' + \"</div>\" + \"</div>\";\n    },\n\n    /**\r\n     * @description Event to control the behavior of closing the browser\r\n     * @param {MouseEvent} e Event object\r\n     * @private\r\n     */\n    _onMouseDown_browser: function _onMouseDown_browser(e) {\n      if (/ke-file-browser-inner/.test(e.target.className)) {\n        this.context.fileBrowser._closeSignal = true;\n      } else {\n        this.context.fileBrowser._closeSignal = false;\n      }\n    },\n\n    /**\r\n     * @description Event to close the window when the outside area of the browser or close button is click\r\n     * @param {MouseEvent} e Event object\r\n     * @private\r\n     */\n    _onClick_browser: function _onClick_browser(e) {\n      e.stopPropagation();\n\n      if (/close/.test(e.target.getAttribute(\"data-command\")) || this.context.fileBrowser._closeSignal) {\n        this.plugins.fileBrowser.close.call(this);\n      }\n    },\n\n    /**\r\n     * @description Open a file browser plugin\r\n     * @param {String} pluginName Plugin name using the file browser\r\n     * @param {Function|null} selectorHandler When the function comes as an argument value, it substitutes \"context.selectorHandler\".\r\n     */\n    open: function open(pluginName, selectorHandler) {\n      if (this.plugins.fileBrowser._bindClose) {\n        this._d.removeEventListener(\"keydown\", this.plugins.fileBrowser._bindClose);\n\n        this.plugins.fileBrowser._bindClose = null;\n      }\n\n      this.plugins.fileBrowser._bindClose = function (e) {\n        if (!/27/.test(e.keyCode)) {\n          return;\n        }\n\n        this.plugins.fileBrowser.close.call(this);\n      }.bind(this);\n\n      this._d.addEventListener(\"keydown\", this.plugins.fileBrowser._bindClose);\n\n      var fileBrowserContext = this.context.fileBrowser;\n      fileBrowserContext.contextPlugin = pluginName;\n      fileBrowserContext.selectorHandler = selectorHandler;\n      var pluginContext = this.context[pluginName];\n      var listClassName = pluginContext.listClass;\n\n      if (!this.util.hasClass(fileBrowserContext.list, listClassName)) {\n        fileBrowserContext.list.className = \"ke-file-browser-list \" + listClassName;\n      }\n\n      if (this.options.popupDisplay === \"full\") {\n        fileBrowserContext.area.style.position = \"fixed\";\n      } else {\n        fileBrowserContext.area.style.position = \"absolute\";\n      }\n\n      fileBrowserContext.titleArea.textContent = pluginContext.title;\n      fileBrowserContext.area.style.display = \"block\";\n\n      this.plugins.fileBrowser._drawFileList.call(this, this.context[pluginName].url, this.context[pluginName].header);\n    },\n    _bindClose: null,\n\n    /**\r\n     * @description Close a fileBrowser plugin\r\n     * The plugin's \"init\" method is called.\r\n     */\n    close: function close() {\n      var fileBrowserPlugin = this.plugins.fileBrowser;\n\n      if (fileBrowserPlugin._xmlHttp) {\n        fileBrowserPlugin._xmlHttp.abort();\n      }\n\n      if (fileBrowserPlugin._bindClose) {\n        this._d.removeEventListener(\"keydown\", fileBrowserPlugin._bindClose);\n\n        fileBrowserPlugin._bindClose = null;\n      }\n\n      var fileBrowserContext = this.context.fileBrowser;\n      fileBrowserContext.area.style.display = \"none\";\n      fileBrowserContext.selectorHandler = null;\n      fileBrowserContext.selectedTags = [];\n      fileBrowserContext.items = [];\n      fileBrowserContext.list.innerHTML = fileBrowserContext.tagArea.innerHTML = fileBrowserContext.titleArea.textContent = \"\";\n\n      if (typeof this.plugins[fileBrowserContext.contextPlugin].init === \"function\") {\n        this.plugins[fileBrowserContext.contextPlugin].init.call(this);\n      }\n\n      fileBrowserContext.contextPlugin = \"\";\n    },\n\n    /**\r\n     * @description Show file browser loading box\r\n     */\n    showBrowserLoading: function showBrowserLoading() {\n      this.loading.style.display = \"block\";\n    },\n\n    /**\r\n     * @description Close file browser loading box\r\n     */\n    closeBrowserLoading: function closeBrowserLoading() {\n      this.loading.style.display = \"none\";\n    },\n    _drawFileList: function _drawFileList(url, browserHeader) {\n      var fileBrowserPlugin = this.plugins.fileBrowser;\n      var xmlHttp = fileBrowserPlugin._xmlHttp = this.util.getXMLHttpRequest();\n      xmlHttp.onreadystatechange = fileBrowserPlugin._callBackGet.bind(this, xmlHttp);\n      xmlHttp.open(\"get\", url, true);\n\n      if (browserHeader !== null && _typeof(browserHeader) === \"object\" && this._w.Object.keys(browserHeader).length > 0) {\n        for (var key in browserHeader) {\n          xmlHttp.setRequestHeader(key, browserHeader[key]);\n        }\n      }\n\n      xmlHttp.send(null);\n      this.plugins.fileBrowser.showBrowserLoading();\n    },\n    _callBackGet: function _callBackGet(xmlHttp) {\n      if (xmlHttp.readyState === 4) {\n        this.plugins.fileBrowser._xmlHttp = null;\n\n        if (xmlHttp.status === 200) {\n          try {\n            this.plugins.fileBrowser._drawListItem.call(this, JSON.parse(xmlHttp.responseText).result, true);\n          } catch (e) {\n            throw Error('[KothingEditor.fileBrowser.drawList.fail] cause : \"' + e.message + '\"');\n          } finally {\n            this.plugins.fileBrowser.closeBrowserLoading();\n            this.context.fileBrowser.body.style.maxHeight = this._w.innerHeight - this.context.fileBrowser.header.offsetHeight - 50 + \"px\";\n          }\n        } else {\n          // exception\n          this.plugins.fileBrowser.closeBrowserLoading();\n\n          if (xmlHttp.status !== 0) {\n            var res = !xmlHttp.responseText ? xmlHttp : JSON.parse(xmlHttp.responseText);\n            var err = \"[KothingEditor.fileBrowser.get.serverException] status: \" + xmlHttp.status + \", response: \" + (res.errorMessage || xmlHttp.responseText);\n            throw Error(err);\n          }\n        }\n      }\n    },\n    _drawListItem: function _drawListItem(items, update) {\n      var fileBrowserContext = this.context.fileBrowser;\n      var pluginContext = this.context[fileBrowserContext.contextPlugin];\n      var _tags = [];\n      var len = items.length;\n      var columnSize = pluginContext.columnSize || fileBrowserContext.columnSize;\n      var splitSize = columnSize <= 1 ? 1 : Math.round(len / columnSize) || 1;\n      var drawItemHandler = pluginContext.itemTemplateHandler;\n      var tagsHTML = \"\";\n      var listHTML = '<div class=\"ke-file-item-column\">';\n      var columns = 1;\n\n      for (var i = 0, item, tags; i < len; i++) {\n        item = items[i];\n        tags = !item.tag ? [] : typeof item.tag === \"string\" ? item.tag.split(\",\") : item.tag;\n        tags = item.tag = tags.map(function (v) {\n          return v.trim();\n        });\n        listHTML += drawItemHandler(item);\n\n        if ((i + 1) % splitSize === 0 && columns < columnSize && i + 1 < len) {\n          columns++;\n          listHTML += '</div><div class=\"ke-file-item-column\">';\n        }\n\n        if (update && tags.length > 0) {\n          for (var t = 0, tLen = tags.length, tag; t < tLen; t++) {\n            tag = tags[t];\n\n            if (tag && _tags.indexOf(tag) === -1) {\n              _tags.push(tag);\n\n              tagsHTML += '<a title=\"' + tag + '\">' + tag + \"</a>\";\n            }\n          }\n        }\n      }\n\n      listHTML += \"</div>\";\n      fileBrowserContext.list.innerHTML = listHTML;\n\n      if (update) {\n        fileBrowserContext.items = items;\n        fileBrowserContext.tagArea.innerHTML = tagsHTML;\n        fileBrowserContext.tagElements = fileBrowserContext.tagArea.querySelectorAll(\"A\");\n      }\n    },\n    onClickTag: function onClickTag(e) {\n      var target = e.target;\n\n      if (!this.util.isAnchor(target)) {\n        return;\n      }\n\n      var tagName = target.textContent;\n      var fileBrowserPlugin = this.plugins.fileBrowser;\n      var fileBrowserContext = this.context.fileBrowser;\n      var selectTag = fileBrowserContext.tagArea.querySelector('a[title=\"' + tagName + '\"]');\n      var selectedTags = fileBrowserContext.selectedTags;\n      var sTagIndex = selectedTags.indexOf(tagName);\n\n      if (sTagIndex > -1) {\n        selectedTags.splice(sTagIndex, 1);\n        this.util.removeClass(selectTag, \"on\");\n      } else {\n        selectedTags.push(tagName);\n        this.util.addClass(selectTag, \"on\");\n      }\n\n      fileBrowserPlugin._drawListItem.call(this, selectedTags.length === 0 ? fileBrowserContext.items : fileBrowserContext.items.filter(function (item) {\n        return item.tag.some(function (tag) {\n          return selectedTags.indexOf(tag) > -1;\n        });\n      }), false);\n    },\n    onClickFile: function onClickFile(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var fileBrowserContext = this.context.fileBrowser;\n      var listEl = fileBrowserContext.list;\n      var target = e.target;\n      var command = null;\n\n      if (target === listEl) {\n        return;\n      }\n\n      while (listEl !== target.parentNode) {\n        command = target.getAttribute(\"data-command\");\n\n        if (command) {\n          break;\n        }\n\n        target = target.parentNode;\n      }\n\n      if (!command) {\n        return;\n      }\n\n      var handler = fileBrowserContext.selectorHandler || this.context[fileBrowserContext.contextPlugin].selectorHandler;\n      this.plugins.fileBrowser.close.call(this);\n      handler(target);\n    }\n  };\n\n  if (_typeof(noGlobal) === (typeof undefined === \"undefined\" ? \"undefined\" : _typeof(undefined))) {\n    if (!window.KothingEditor_MODULES) {\n      Object.defineProperty(window, \"KothingEditor_MODULES\", {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.KothingEditor_MODULES, \"fileBrowser\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: fileBrowser\n    });\n  }\n\n  return fileBrowser;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"blockquote\",\n  display: \"command\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.blockquote = {\n      targetButton: targetElement,\n      tag: core.util.createElement(\"BLOCKQUOTE\")\n    };\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    if (!element) {\n      this.util.removeClass(this.context.blockquote.targetButton, \"active\");\n    } else if (/blockquote/i.test(element.nodeName)) {\n      this.util.addClass(this.context.blockquote.targetButton, \"active\");\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  action: function action() {\n    var currentBlockquote = this.util.getParentElement(this.getSelectionNode(), \"blockquote\");\n\n    if (currentBlockquote) {\n      this.detachRangeFormatElement(currentBlockquote, null, null, false, false);\n    } else {\n      this.applyRangeFormatElement(this.context.blockquote.tag.cloneNode(false));\n    }\n  }\n};\nexports.default = _default;","// Types\nimport Vue, { VNode } from 'vue'\n\nexport default function VGrid (name: string) {\n  /* @vue/component */\n  return Vue.extend({\n    name: `v-${name}`,\n\n    functional: true,\n\n    props: {\n      id: String,\n      tag: {\n        type: String,\n        default: 'div',\n      },\n    },\n\n    render (h, { props, data, children }): VNode {\n      data.staticClass = (`${name} ${data.staticClass || ''}`).trim()\n\n      const { attrs } = data\n      if (attrs) {\n        // reset attrs to extract utility clases like pa-3\n        data.attrs = {}\n        const classes = Object.keys(attrs).filter(key => {\n          // TODO: Remove once resolved\n          // https://github.com/vuejs/vue/issues/7841\n          if (key === 'slot') return false\n\n          const value = attrs[key]\n\n          // add back data attributes like data-test=\"foo\" but do not\n          // add them as classes\n          if (key.startsWith('data-')) {\n            data.attrs![key] = value\n            return false\n          }\n\n          return value || typeof value === 'string'\n        })\n\n        if (classes.length) data.staticClass += ` ${classes.join(' ')}`\n      }\n\n      if (props.id) {\n        data.domProps = data.domProps || {}\n        data.domProps.id = props.id\n      }\n\n      return h(props.tag, data, children)\n    },\n  })\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n\n/**\r\n * @description utility function\r\n */\nvar util = {\n  _d: null,\n  _w: null,\n  isIE: null,\n  isIE_Edge: null,\n  isOSX_IOS: null,\n  _propertiesInit: function _propertiesInit() {\n    if (this._d) return;\n    this._d = document;\n    this._w = window;\n    this.isIE = navigator.userAgent.indexOf(\"Trident\") > -1;\n    this.isIE_Edge = navigator.userAgent.indexOf(\"Trident\") > -1 || navigator.appVersion.indexOf(\"Edge\") > -1;\n    this.isOSX_IOS = /(Mac|iPhone|iPod|iPad)/.test(navigator.platform);\n  },\n  _allowedEmptyNodeList: \".ke-component, pre, blockquote, hr, li, table, img, iframe, video, audio, canvas\",\n\n  /**\r\n   * @description HTML Reserved Word Converter.\r\n   * @param {String} contents\r\n   * @returns {String} HTML string\r\n   * @private\r\n   */\n  _HTMLConvertor: function _HTMLConvertor(contents) {\n    var ec = {\n      \"&\": \"&amp;\",\n      \"\\xA0\": \"&nbsp;\",\n      \"'\": \"&apos;\",\n      '\"': \"&quot;\",\n      \"<\": \"&lt;\",\n      \">\": \"&gt;\"\n    };\n    return contents.replace(/&|\\u00A0|'|\"|<|>/g, function (m) {\n      return typeof ec[m] === \"string\" ? ec[m] : m;\n    });\n  },\n\n  /**\r\n   * @description Unicode Character 'ZERO WIDTH SPACE' (\\u200B)\r\n   */\n  zeroWidthSpace: String.fromCharCode(8203),\n\n  /**\r\n   * @description Regular expression to find 'zero width space' (/\\u200B/g)\r\n   */\n  zeroWidthRegExp: new RegExp(String.fromCharCode(8203), \"g\"),\n\n  /**\r\n   * @description Regular expression to find only 'zero width space' (/^\\u200B+$/)\r\n   */\n  onlyZeroWidthRegExp: new RegExp(\"^\" + String.fromCharCode(8203) + \"+$\"),\n\n  /**\r\n   * @description A method that checks If the text is blank or to see if it contains 'ZERO WIDTH SPACE' or empty (util.zeroWidthSpace)\r\n   * @param {String|Node} text String value or Node\r\n   * @returns {Boolean}\r\n   */\n  onlyZeroWidthSpace: function onlyZeroWidthSpace(text) {\n    if (typeof text !== \"string\") text = text.textContent;\n    return text === \"\" || this.onlyZeroWidthRegExp.test(text);\n  },\n\n  /**\r\n   * @description Gets XMLHttpRequest object\r\n   * @returns {XMLHttpRequest|ActiveXObject}\r\n   */\n  getXMLHttpRequest: function getXMLHttpRequest() {\n    /** IE */\n    if (this._w.ActiveXObject) {\n      try {\n        return new ActiveXObject(\"Msxml2.XMLHTTP\");\n      } catch (e) {\n        try {\n          return new ActiveXObject(\"Microsoft.XMLHTTP\");\n        } catch (e1) {\n          return null;\n        }\n      }\n    } else if (this._w.XMLHttpRequest) {\n      /** netscape */\n      return new XMLHttpRequest();\n    } else {\n      /** fail */\n      return null;\n    }\n  },\n\n  /**\r\n   * @description Create Element node\r\n   * @param {String} elementName Element name\r\n   * @returns {Element}\r\n   */\n  createElement: function createElement(elementName) {\n    return this._d.createElement(elementName);\n  },\n\n  /**\r\n   * @description Create text node\r\n   * @param {String} text text contents\r\n   * @returns {Node}\r\n   */\n  createTextNode: function createTextNode(text) {\n    return this._d.createTextNode(text || \"\");\n  },\n\n  /**\r\n   * @description The editor checks tags by string.\r\n   * If there is \"<\" or \">\" in the attribute of tag, HTML is broken when checking the tag.\r\n   * When using an attribute with \"<\" or \">\", use \"HTMLEncoder\" to save. (ex: math(katex))\r\n   * @param {String} contents HTML or Text string\r\n   * @returns {String}\r\n   */\n  HTMLEncoder: function HTMLEncoder(contents) {\n    var ec = {\n      \"<\": \"$lt;\",\n      \">\": \"$gt;\"\n    };\n    return contents.replace(/<|>/g, function (m) {\n      return typeof ec[m] === \"string\" ? ec[m] : m;\n    });\n  },\n\n  /**\r\n   * @description The editor checks tags by string.\r\n   * If there is \"<\" or \">\" in the attribute of tag, HTML is broken when checking the tag.\r\n   * Decoder of data stored as \"HTMLEncoder\" (ex: math(katex))\r\n   * @param {String} contents HTML or Text string\r\n   * @returns {String}\r\n   */\n  HTMLDecoder: function HTMLDecoder(contents) {\n    var ec = {\n      \"$lt;\": \"<\",\n      \"$gt;\": \">\"\n    };\n    return contents.replace(/\\$lt;|\\$gt;/g, function (m) {\n      return typeof ec[m] === \"string\" ? ec[m] : m;\n    });\n  },\n\n  /**\r\n   * @description This method run Object.prototype.hasOwnProperty.call(obj, key)\r\n   * @param {Object} obj Object\r\n   * @param {String} key obj.key\r\n   * @returns {Boolean}\r\n   */\n  hasOwn: function hasOwn(obj, key) {\n    return this._hasOwn.call(obj, key);\n  },\n  _hasOwn: Object.prototype.hasOwnProperty,\n\n  /**\r\n   * @deprecated\r\n   * @description Get the the tag path of the arguments value\r\n   * If not found, return the first found value\r\n   * @param {Array} nameArray File name array\r\n   * @param {String} extension js, css\r\n   * @returns {String}\r\n   */\n  getIncludePath: function getIncludePath(nameArray, extension) {\n    var path = \"\";\n    var pathList = [];\n    var tagName = extension === \"js\" ? \"script\" : \"link\";\n    var src = extension === \"js\" ? \"src\" : \"href\";\n    var fileName = \"(?:\";\n\n    for (var i = 0, len = nameArray.length; i < len; i++) {\n      fileName += nameArray[i] + (i < len - 1 ? \"|\" : \")\");\n    }\n\n    var regExp = new this._w.RegExp(\"(^|.*[\\\\/])\" + fileName + \"(\\\\.[^\\\\/]+)?.\" + extension + \"(?:\\\\?.*|;.*)?$\", \"i\");\n    var extRegExp = new this._w.RegExp(\".+\\\\.\" + extension + \"(?:\\\\?.*|;.*)?$\", \"i\");\n\n    for (var c = this._d.getElementsByTagName(tagName), _i = 0; _i < c.length; _i++) {\n      if (extRegExp.test(c[_i][src])) {\n        pathList.push(c[_i]);\n      }\n    }\n\n    for (var _i2 = 0; _i2 < pathList.length; _i2++) {\n      var editorTag = pathList[_i2][src].match(regExp);\n\n      if (editorTag) {\n        path = editorTag[0];\n        break;\n      }\n    }\n\n    if (path === \"\") path = pathList.length > 0 ? pathList[0][src] : \"\";\n    -1 === path.indexOf(\":/\") && \"//\" !== path.slice(0, 2) && (path = 0 === path.indexOf(\"/\") ? location.href.match(/^.*?:\\/\\/[^\\/]*/)[0] + path : location.href.match(/^[^\\?]*\\/(?:)/)[0] + path);\n    if (!path) throw \"[KothingEditor.util.getIncludePath.fail] The KothingEditor installation path could not be automatically detected. (name: +\" + name + \", extension: \" + extension + \")\";\n    return path;\n  },\n\n  /**\r\n   * @deprecated\r\n   * @description Returns the CSS text that has been applied to the current page.\r\n   * @param {Document|null} doc To get the CSS text of an document(core._wd). If null get the current document.\r\n   * @returns {String} Styles string\r\n   */\n  getPageStyle: function getPageStyle(doc) {\n    var cssText = \"\";\n    var sheets = (doc || this._d).styleSheets;\n\n    for (var i = 0, len = sheets.length, rules; i < len; i++) {\n      try {\n        rules = sheets[i].cssRules;\n      } catch (e) {\n        continue;\n      }\n\n      if (rules) {\n        for (var c = 0, cLen = rules.length; c < cLen; c++) {\n          cssText += rules[c].cssText;\n        }\n      }\n    }\n\n    return cssText;\n  },\n\n  /**\r\n   * @description Get the argument iframe's document object\r\n   * @param {Element} iframe Iframe element (context.element.wysiwygFrame)\r\n   * @returns {Document}\r\n   */\n  getIframeDocument: function getIframeDocument(iframe) {\n    var wDocument = iframe.contentWindow || iframe.contentDocument;\n    if (wDocument.document) wDocument = wDocument.document;\n    return wDocument;\n  },\n\n  /**\r\n   * @description Get attributes of argument element to string ('class=\"---\" name=\"---\" ')\r\n   * @param {Element} element Element object\r\n   * @param {Array|null} exceptAttrs Array of attribute names to exclude from the result\r\n   * @returns {String}\r\n   */\n  getAttributesToString: function getAttributesToString(element, exceptAttrs) {\n    if (!element.attributes) return \"\";\n    var attrs = element.attributes;\n    var attrString = \"\";\n\n    for (var i = 0, len = attrs.length; i < len; i++) {\n      if (exceptAttrs && exceptAttrs.indexOf(attrs[i].name) > -1) continue;\n      attrString += attrs[i].name + '=\"' + attrs[i].value + '\" ';\n    }\n\n    return attrString;\n  },\n\n  /**\r\n   * @descriptionGets Get the length in bytes of a string.\r\n   * referencing code: \"https://github.com/shaan1974/myrdin/blob/master/expressions/string.js#L11\"\r\n   * @param {String} text String text\r\n   * @returns {Number}\r\n   */\n  getByteLength: function getByteLength(text) {\n    if (!text || !text.toString) return 0;\n    text = text.toString();\n    var encoder = this._w.encodeURIComponent;\n    var cr, cl;\n\n    if (this.isIE_Edge) {\n      cl = this._w.unescape(encoder(text)).length;\n      cr = 0;\n\n      if (encoder(text).match(/(%0A|%0D)/gi) !== null) {\n        cr = encoder(text).match(/(%0A|%0D)/gi).length;\n      }\n\n      return cl + cr;\n    } else {\n      cl = new this._w.TextEncoder(\"utf-8\").encode(text).length;\n      cr = 0;\n\n      if (encoder(text).match(/(%0A|%0D)/gi) !== null) {\n        cr = encoder(text).match(/(%0A|%0D)/gi).length;\n      }\n\n      return cl + cr;\n    }\n  },\n\n  /**\r\n   * @description It is judged whether it is the edit region top div element or iframe's body tag.\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isWysiwygDiv: function isWysiwygDiv(element) {\n    return element && element.nodeType === 1 && (this.hasClass(element, \"ke-wrapper-wysiwyg\") || /^BODY$/i.test(element.nodeName));\n  },\n\n  /**\r\n   * @description It is judged whether it is the contenteditable property is false.\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isNonEditable: function isNonEditable(element) {\n    return element && element.nodeType === 1 && element.getAttribute(\"contenteditable\") === \"false\";\n  },\n\n  /**\r\n   * @description It is judged whether it is a node related to the text style.\r\n   * (strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code)\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isTextStyleElement: function isTextStyleElement(element) {\n    return element && element.nodeType !== 3 && /^(strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code)$/i.test(element.nodeName);\n  },\n\n  /**\r\n   * @description It is judged whether it is the format element (P, DIV, H[1-6], PRE, LI | class=\"__ke__format__replace_xxx\")\r\n   * Format element also contain \"free format Element\"\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isFormatElement: function isFormatElement(element) {\n    return element && element.nodeType === 1 && (/^(P|DIV|H[1-6]|PRE|LI|TH|TD)$/i.test(element.nodeName) || this.hasClass(element, \"(\\\\s|^)__ke__format__replace_.+(\\\\s|$)|(\\\\s|^)__ke__format__free_.+(\\\\s|$)\")) && !this.isComponent(element) && !this.isWysiwygDiv(element);\n  },\n\n  /**\r\n   * @description It is judged whether it is the range format element. (BLOCKQUOTE, OL, UL, FIGCAPTION, TABLE, THEAD, TBODY, TR, TH, TD | class=\"__ke__format__range_xxx\")\r\n   * Range format element is wrap the \"format element\" and \"component\"\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isRangeFormatElement: function isRangeFormatElement(element) {\n    return element && element.nodeType === 1 && (/^(BLOCKQUOTE|OL|UL|FIGCAPTION|TABLE|THEAD|TBODY|TR|TH|TD)$/i.test(element.nodeName) || this.hasClass(element, \"(\\\\s|^)__ke__format__range_.+(\\\\s|$)\"));\n  },\n\n  /**\r\n   * @description It is judged whether it is the closure range format element. (TH, TD | class=\"__ke__format__range__closure_xxx\")\r\n   * Closure range format elements is included in the range format element.\r\n   *  - Closure range format element is wrap the \"format element\" and \"component\"\r\n   *  You cannot exit this format with the Enter key or Backspace key.\r\n   *  Use it only in special cases. ([ex] format of table cells)\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isClosureRangeFormatElement: function isClosureRangeFormatElement(element) {\n    return element && element.nodeType === 1 && (/^(TH|TD)$/i.test(element.nodeName) || this.hasClass(element, \"(\\\\s|^)__ke__format__range__closure_.+(\\\\s|$)\"));\n  },\n\n  /**\r\n   * @description It is judged whether it is the free format element. (PRE | class=\"__ke__format__free_xxx\")\r\n   * Free format elements is included in the format element.\r\n   * Free format elements's line break is \"BR\" tag.\r\n   *  Entering the Enter key in the space on the last line ends \"Free Format\" and appends \"Format\".\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isFreeFormatElement: function isFreeFormatElement(element) {\n    return element && element.nodeType === 1 && (/^PRE$/i.test(element.nodeName) || this.hasClass(element, \"(\\\\s|^)__ke__format__free_.+(\\\\s|$)\")) && !this.isComponent(element) && !this.isWysiwygDiv(element);\n  },\n\n  /**\r\n   * @description It is judged whether it is the closure free format element. (class=\"__ke__format__free__closure_xxx\")\r\n   * Closure free format elements is included in the free format element.\r\n   *  - Closure free format elements's line break is \"BR\" tag.\r\n   *  You cannot exit this format with the Enter key or Backspace key.\r\n   *  Use it only in special cases. ([ex] format of table cells)\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isClosureFreeFormatElement: function isClosureFreeFormatElement(element) {\n    return element && element.nodeType === 1 && this.hasClass(element, \"(\\\\s|^)__ke__format__free__closure_.+(\\\\s|$)\");\n  },\n\n  /**\r\n   * @description It is judged whether it is the component[img, iframe, video, audio, table] cover(class=\"ke-component\") and table, hr\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isComponent: function isComponent(element) {\n    return element && (/ke-component/.test(element.className) || /^(TABLE|HR)$/.test(element.nodeName));\n  },\n\n  /**\r\n   * @description Checks for \"__ke__uneditable\" in the class list.\r\n   * Components with class \"__ke__uneditable\" cannot be modified.\r\n   * @param {Element} element The element to check\r\n   * @returns {Boolean}\r\n   */\n  isUneditableComponent: function isUneditableComponent(element) {\n    return element && this.hasClass(element, \"__ke__uneditable\");\n  },\n\n  /**\r\n   * @description It is judged whether it is the component [img, iframe] cover(class=\"ke-component\")\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isMediaComponent: function isMediaComponent(element) {\n    return element && /ke-component/.test(element.className);\n  },\n\n  /**\r\n   * @description It is judged whether it is the not checking node. (class=\"katex\", \"__ke__tag\")\r\n   * @param {Node} element The node to check\r\n   * @returns {Boolean}\r\n   */\n  isNotCheckingNode: function isNotCheckingNode(element) {\n    return element && /katex|__ke__tag/.test(element.className);\n  },\n\n  /**\r\n   * @description If a parent node that contains an argument node finds a format node (util.isFormatElement), it returns that node.\r\n   * @param {Node} element Reference node.\r\n   * @param {Function|null} validation Additional validation function.\r\n   * @returns {Element|null}\r\n   */\n  getFormatElement: function getFormatElement(element, validation) {\n    if (!element) return null;\n\n    if (!validation) {\n      validation = function validation() {\n        return true;\n      };\n    }\n\n    while (element) {\n      if (this.isWysiwygDiv(element)) return null;\n      if (this.isRangeFormatElement(element)) element.firstElementChild;\n      if (this.isFormatElement(element) && validation(element)) return element;\n      element = element.parentNode;\n    }\n\n    return null;\n  },\n\n  /**\r\n   * @description If a parent node that contains an argument node finds a format node (util.isRangeFormatElement), it returns that node.\r\n   * @param {Node} element Reference node.\r\n   * @param {Function|null} validation Additional validation function.\r\n   * @returns {Element|null}\r\n   */\n  getRangeFormatElement: function getRangeFormatElement(element, validation) {\n    if (!element) return null;\n\n    if (!validation) {\n      validation = function validation() {\n        return true;\n      };\n    }\n\n    while (element) {\n      if (this.isWysiwygDiv(element)) return null;\n      if (this.isRangeFormatElement(element) && !/^(THEAD|TBODY|TR)$/i.test(element.nodeName) && validation(element)) return element;\n      element = element.parentNode;\n    }\n\n    return null;\n  },\n\n  /**\r\n   * @description If a parent node that contains an argument node finds a free format node (util.isFreeFormatElement), it returns that node.\r\n   * @param {Node} element Reference node.\r\n   * @param {Function|null} validation Additional validation function.\r\n   * @returns {Element|null}\r\n   */\n  getFreeFormatElement: function getFreeFormatElement(element, validation) {\n    if (!element) return null;\n\n    if (!validation) {\n      validation = function validation() {\n        return true;\n      };\n    }\n\n    while (element) {\n      if (this.isWysiwygDiv(element)) return null;\n      if (this.isFreeFormatElement(element) && validation(element)) return element;\n      element = element.parentNode;\n    }\n\n    return null;\n  },\n\n  /**\r\n   * @description If a parent node that contains an argument node finds a closure free format node (util.isClosureFreeFormatElement), it returns that node.\r\n   * @param {Node} element Reference node.\r\n   * @param {Function|null} validation Additional validation function.\r\n   * @returns {Element|null}\r\n   */\n  getClosureFreeFormatElement: function getClosureFreeFormatElement(element, validation) {\n    if (!element) return null;\n\n    if (!validation) {\n      validation = function validation() {\n        return true;\n      };\n    }\n\n    while (element) {\n      if (this.isWysiwygDiv(element)) return null;\n      if (this.isClosureFreeFormatElement(element) && validation(element)) return element;\n      element = element.parentNode;\n    }\n\n    return null;\n  },\n\n  /**\r\n   * @description Add style and className of copyEl to originEl\r\n   * @param {Element} originEl Origin element\r\n   * @param {Element} copyEl Element to copy\r\n   */\n  copyTagAttributes: function copyTagAttributes(originEl, copyEl) {\n    if (copyEl.style.cssText) {\n      originEl.style.cssText += copyEl.style.cssText;\n    }\n\n    var classes = copyEl.classList;\n\n    for (var i = 0, len = classes.length; i < len; i++) {\n      this.addClass(originEl, classes[i]);\n    }\n\n    if (!originEl.style.cssText) originEl.removeAttribute(\"style\");\n    if (!originEl.className.trim()) originEl.removeAttribute(\"class\");\n  },\n\n  /**\r\n   * @description Copy and apply attributes of format tag that should be maintained. (style, class) Ignore \"__ke__format__\" class\r\n   * @param {Element} originEl Origin element\r\n   * @param {Element} copyEl Element to copy\r\n   */\n  copyFormatAttributes: function copyFormatAttributes(originEl, copyEl) {\n    copyEl = copyEl.cloneNode(false);\n    copyEl.className = copyEl.className.replace(/(\\s|^)__ke__format__[^\\s]+/g, \"\");\n    this.copyTagAttributes(originEl, copyEl);\n  },\n\n  /**\r\n   * @description Get the item from the array that matches the condition.\r\n   * @param {Array|HTMLCollection|NodeList} array Array to get item\r\n   * @param {Function|null} validation Conditional function\r\n   * @param {Boolean} multi If true, returns all items that meet the criteria otherwise, returns an empty array.\r\n   * If false, returns only one item that meet the criteria otherwise return null.\r\n   * @returns {Array|Node|null}\r\n   */\n  getArrayItem: function getArrayItem(array, validation, multi) {\n    if (!array || array.length === 0) return null;\n\n    validation = validation || function () {\n      return true;\n    };\n\n    var arr = [];\n\n    for (var i = 0, len = array.length, a; i < len; i++) {\n      a = array[i];\n\n      if (validation(a)) {\n        if (!multi) return a;else arr.push(a);\n      }\n    }\n\n    return !multi ? null : arr;\n  },\n\n  /**\r\n   * @description Get the index of the argument value in the element array\r\n   * @param {Array|HTMLCollection|NodeList} array element array\r\n   * @param {Node} element The element to find index\r\n   * @returns {Number}\r\n   */\n  getArrayIndex: function getArrayIndex(array, element) {\n    var idx = -1;\n\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === element) {\n        idx = i;\n        break;\n      }\n    }\n\n    return idx;\n  },\n\n  /**\r\n   * @description Get the next index of the argument value in the element array\r\n   * @param {Array|HTMLCollection|NodeList} array element array\r\n   * @param {Node} item The element to find index\r\n   * @returns {Number}\r\n   */\n  nextIdx: function nextIdx(array, item) {\n    var idx = this.getArrayIndex(array, item);\n    if (idx === -1) return -1;\n    return idx + 1;\n  },\n\n  /**\r\n   * @description Get the previous index of the argument value in the element array\r\n   * @param {Array|HTMLCollection|NodeList} array Element array\r\n   * @param {Node} item The element to find index\r\n   * @returns {Number}\r\n   */\n  prevIdx: function prevIdx(array, item) {\n    var idx = this.getArrayIndex(array, item);\n    if (idx === -1) return -1;\n    return idx - 1;\n  },\n\n  /**\r\n   * @description Returns the index compared to other sibling nodes.\r\n   * @param {Node} node The Node to find index\r\n   * @returns {Number}\r\n   */\n  getPositionIndex: function getPositionIndex(node) {\n    var idx = 0;\n\n    while (node = node.previousSibling) {\n      idx += 1;\n    }\n\n    return idx;\n  },\n\n  /**\r\n   * @description Returns the position of the \"node\" in the \"parentNode\" in a numerical array.\r\n   * ex) <p><span>aa</span><span>bb</span></p> : getNodePath(node: \"bb\", parentNode: \"<P>\") -> [1, 0]\r\n   * @param {Node} node The Node to find position path\r\n   * @param {Node|null} parentNode Parent node. If null, wysiwyg div area\r\n   * @param {Object|null} _newOffsets If you send an object of the form \"{s: 0, e: 0}\", the text nodes that are attached together are merged into one, centered on the \"node\" argument.\r\n   * \"_newOffsets.s\" stores the length of the combined characters after \"node\" and \"_newOffsets.e\" stores the length of the combined characters before \"node\".\r\n   * Do not use unless absolutely necessary.\r\n   * @returns {Array}\r\n   */\n  getNodePath: function getNodePath(node, parentNode, _newOffsets) {\n    var path = [];\n    var finds = true;\n    this.getParentElement(node, function (el) {\n      if (el === parentNode) finds = false;\n\n      if (finds && !this.isWysiwygDiv(el)) {\n        // merge text nodes\n        if (_newOffsets && el.nodeType === 3) {\n          var temp = null,\n              tempText = null;\n          _newOffsets.s = _newOffsets.e = 0;\n          var previous = el.previousSibling;\n\n          while (previous && previous.nodeType === 3) {\n            tempText = previous.textContent.replace(this.zeroWidthRegExp, \"\");\n            _newOffsets.s += tempText.length;\n            el.textContent = tempText + el.textContent;\n            temp = previous;\n            previous = previous.previousSibling;\n            this.removeItem(temp);\n          }\n\n          var next = el.nextSibling;\n\n          while (next && next.nodeType === 3) {\n            tempText = next.textContent.replace(this.zeroWidthRegExp, \"\");\n            _newOffsets.e += tempText.length;\n            el.textContent += tempText;\n            temp = next;\n            next = next.nextSibling;\n            this.removeItem(temp);\n          }\n        } // index push\n\n\n        path.push(el);\n      }\n\n      return false;\n    }.bind(this));\n    return path.map(this.getPositionIndex).reverse();\n  },\n\n  /**\r\n   * @description Returns the node in the location of the path array obtained from \"util.getNodePath\".\r\n   * @param {Array} offsets Position array, array obtained from \"util.getNodePath\"\r\n   * @param {Node} parentNode Base parent element\r\n   * @returns {Node}\r\n   */\n  getNodeFromPath: function getNodeFromPath(offsets, parentNode) {\n    var current = parentNode;\n    var nodes;\n\n    for (var i = 0, len = offsets.length; i < len; i++) {\n      nodes = current.childNodes;\n      if (nodes.length === 0) break;\n\n      if (nodes.length <= offsets[i]) {\n        current = nodes[nodes.length - 1];\n      } else {\n        current = nodes[offsets[i]];\n      }\n    }\n\n    return current;\n  },\n\n  /**\r\n   * @description Compares the style and class for equal values.\r\n   * Returns true if both are text nodes.\r\n   * @param {Node} a Node to compare\r\n   * @param {Node} b Node to compare\r\n   * @returns {Boolean}\r\n   */\n  isSameAttributes: function isSameAttributes(a, b) {\n    if (a.nodeType === 3 && b.nodeType === 3) return true;\n    if (a.nodeType === 3 || b.nodeType === 3) return false;\n    var style_a = a.style;\n    var style_b = b.style;\n    var compStyle = 0;\n\n    for (var i = 0, len = style_a.length; i < len; i++) {\n      if (style_a[style_a[i]] === style_b[style_a[i]]) compStyle++;\n    }\n\n    var class_a = a.classList;\n    var class_b = b.classList;\n    var reg = this._w.RegExp;\n    var compClass = 0;\n\n    for (var _i3 = 0, _len = class_a.length; _i3 < _len; _i3++) {\n      if (reg(\"(s|^)\" + class_a[_i3] + \"(s|$)\").test(class_b.value)) compClass++;\n    }\n\n    return compStyle === style_b.length && compStyle === style_a.length && compClass === class_b.length && compClass === class_a.length;\n  },\n\n  /**\r\n   * @description Check the line element(util.isFormatElement) is empty.\r\n   * @param {Element} element Format element node\r\n   * @returns {Boolean}\r\n   */\n  isEmptyLine: function isEmptyLine(element) {\n    return !element || !element.parentNode || !element.querySelector(\"IMG, IFRAME, AUDIO, VIDEO, CANVAS, TABLE\") && this.onlyZeroWidthSpace(element.textContent);\n  },\n\n  /**\r\n   * @description Check the node is a list (ol, ul)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isList: function isList(node) {\n    return node && /^(OL|UL)$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Check the node is a list cell (li)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isListCell: function isListCell(node) {\n    return node && /^LI$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Check the node is a table (table, thead, tbody, tr, th, td)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isTable: function isTable(node) {\n    return node && /^(TABLE|THEAD|TBODY|TR|TH|TD)$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Check the node is a table cell (td, th)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isCell: function isCell(node) {\n    return node && /^(TD|TH)$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Check the node is a break node (BR)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isBreak: function isBreak(node) {\n    return node && /^BR$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Check the node is a anchor node (A)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isAnchor: function isAnchor(node) {\n    return node && /^A$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Check the node is a media node (img, iframe, audio, video, canvas)\r\n   * @param {Node|String} node The element or element name to check\r\n   * @returns {Boolean}\r\n   */\n  isMedia: function isMedia(node) {\n    return node && /^(IMG|IFRAME|AUDIO|VIDEO|CANVAS)$/i.test(typeof node === \"string\" ? node : node.nodeName);\n  },\n\n  /**\r\n   * @description Checks for numeric (with decimal point).\r\n   * @param {String|Number} text Text string or number\r\n   * @returns {Boolean}\r\n   */\n  isNumber: function isNumber(text) {\n    return !!text && /^-?\\d+(\\.\\d+)?$/.test(text + \"\");\n  },\n\n  /**\r\n   * @description Get a number.\r\n   * @param {String|Number} text Text string or number\r\n   * @param {Number} maxDec Maximum number of decimal places (-1 : Infinity)\r\n   * @returns {Number}\r\n   */\n  getNumber: function getNumber(text, maxDec) {\n    if (!text) return 0;\n    var number = (text + \"\").match(/-?\\d+(\\.\\d+)?/);\n    if (!number || !number[0]) return 0;\n    number = number[0];\n    return maxDec < 0 ? number * 1 : maxDec === 0 ? this._w.Math.round(number * 1) : (number * 1).toFixed(maxDec) * 1;\n  },\n\n  /**\r\n   * @description Get all \"children\" of the argument value element (Without text nodes)\r\n   * @param {Element} element element to get child node\r\n   * @param {Function|null} validation Conditional function\r\n   * @returns {Array}\r\n   */\n  getListChildren: function getListChildren(element, validation) {\n    var children = [];\n    if (!element || !element.children || element.children.length === 0) return children;\n\n    validation = validation || function () {\n      return true;\n    };\n\n    (function recursionFunc(current) {\n      if (element !== current && validation(current)) {\n        children.push(current);\n      }\n\n      if (!!current.children) {\n        for (var i = 0, len = current.children.length; i < len; i++) {\n          recursionFunc(current.children[i]);\n        }\n      }\n    })(element);\n\n    return children;\n  },\n\n  /**\r\n   * @description Get all \"childNodes\" of the argument value element (Include text nodes)\r\n   * @param {Node} element element to get child node\r\n   * @param {Function|null} validation Conditional function\r\n   * @returns {Array}\r\n   */\n  getListChildNodes: function getListChildNodes(element, validation) {\n    var children = [];\n    if (!element || element.childNodes.length === 0) return children;\n\n    validation = validation || function () {\n      return true;\n    };\n\n    (function recursionFunc(current) {\n      if (element !== current && validation(current)) {\n        children.push(current);\n      }\n\n      for (var i = 0, len = current.childNodes.length; i < len; i++) {\n        recursionFunc(current.childNodes[i]);\n      }\n    })(element);\n\n    return children;\n  },\n\n  /**\r\n   * @description Returns the number of parents nodes.\r\n   * \"0\" when the parent node is the WYSIWYG area.\r\n   * \"-1\" when the element argument is the WYSIWYG area.\r\n   * @param {Node} element The element to check\r\n   * @returns {Number}\r\n   */\n  getElementDepth: function getElementDepth(element) {\n    if (!element || this.isWysiwygDiv(element)) return -1;\n    var depth = 0;\n    element = element.parentNode;\n\n    while (element && !this.isWysiwygDiv(element)) {\n      depth += 1;\n      element = element.parentNode;\n    }\n\n    return depth;\n  },\n\n  /**\r\n   * @description Compares two elements to find a common ancestor, and returns the order of the two elements.\r\n   * @param {Node} a Node to compare.\r\n   * @param {Node} b Node to compare.\r\n   * @returns {Object} { ancesstor, a, b, result: (a > b ? 1 : a < b ? -1 : 0) };\r\n   */\n  compareElements: function compareElements(a, b) {\n    var aNode = a,\n        bNode = b;\n\n    while (aNode && bNode && aNode.parentNode !== bNode.parentNode) {\n      aNode = aNode.parentNode;\n      bNode = bNode.parentNode;\n    }\n\n    if (!aNode || !bNode) return {\n      ancestor: null,\n      a: a,\n      b: b,\n      result: 0\n    };\n    var children = aNode.parentNode.childNodes;\n    var aIndex = this.getArrayIndex(children, aNode);\n    var bIndex = this.getArrayIndex(children, bNode);\n    return {\n      ancestor: aNode.parentNode,\n      a: aNode,\n      b: bNode,\n      result: aIndex > bIndex ? 1 : aIndex < bIndex ? -1 : 0\n    };\n  },\n\n  /**\r\n   * @description Get the parent element of the argument value.\r\n   * A tag that satisfies the query condition is imported.\r\n   * Returns null if not found.\r\n   * @param {Node} element Reference element\r\n   * @param {String|Function} query Query String (nodeName, .className, #ID, :name) or validation function.\r\n   * Not use it like jquery.\r\n   * Only one condition can be entered at a time.\r\n   * @returns {Element|null}\r\n   */\n  getParentElement: function getParentElement(element, query) {\n    var check;\n\n    if (typeof query === \"function\") {\n      check = query;\n    } else {\n      var attr;\n\n      if (/^\\./.test(query)) {\n        attr = \"className\";\n        query = query.split(\".\")[1];\n      } else if (/^#/.test(query)) {\n        attr = \"id\";\n        query = \"^\" + query.split(\"#\")[1] + \"$\";\n      } else if (/^:/.test(query)) {\n        attr = \"name\";\n        query = \"^\" + query.split(\":\")[1] + \"$\";\n      } else {\n        attr = \"nodeName\";\n        query = \"^\" + query + \"$\";\n      }\n\n      var regExp = new this._w.RegExp(query, \"i\");\n\n      check = function check(el) {\n        return regExp.test(el[attr]);\n      };\n    }\n\n    while (element && !check(element)) {\n      if (this.isWysiwygDiv(element)) {\n        return null;\n      }\n\n      element = element.parentNode;\n    }\n\n    return element;\n  },\n\n  /**\r\n   * @description Get the child element of the argument value.\r\n   * A tag that satisfies the query condition is imported.\r\n   * Returns null if not found.\r\n   * @param {Node} element Reference element\r\n   * @param {String|Function} query Query String (nodeName, .className, #ID, :name) or validation function.\r\n   * @param {Boolean} last If true returns the last node among the found child nodes. (default: first node)\r\n   * Not use it like jquery.\r\n   * Only one condition can be entered at a time.\r\n   * @returns {Element|null}\r\n   */\n  getChildElement: function getChildElement(element, query, last) {\n    var check;\n\n    if (typeof query === \"function\") {\n      check = query;\n    } else {\n      var attr;\n\n      if (/^\\./.test(query)) {\n        attr = \"className\";\n        query = query.split(\".\")[1];\n      } else if (/^#/.test(query)) {\n        attr = \"id\";\n        query = \"^\" + query.split(\"#\")[1] + \"$\";\n      } else if (/^:/.test(query)) {\n        attr = \"name\";\n        query = \"^\" + query.split(\":\")[1] + \"$\";\n      } else {\n        attr = \"nodeName\";\n        query = \"^\" + (query === \"text\" ? \"#\" + query : query) + \"$\";\n      }\n\n      var regExp = new this._w.RegExp(query, \"i\");\n\n      check = function check(el) {\n        return regExp.test(el[attr]);\n      };\n    }\n\n    var childList = this.getListChildNodes(element, function (current) {\n      return check(current);\n    });\n    return childList[last ? childList.length - 1 : 0];\n  },\n\n  /**\r\n   * @description 1. The first node of all the child nodes of the \"first\" element is returned.\r\n   * 2. The last node of all the child nodes of the \"last\" element is returned.\r\n   * 3. When there is no \"last\" element, the first and last nodes of all the children of the \"first\" element are returned.\r\n   * { sc: \"first\", ec: \"last\" }\r\n   * @param {Node} first First element\r\n   * @param {Node|null} last Last element\r\n   * @returns {Object}\r\n   */\n  getEdgeChildNodes: function getEdgeChildNodes(first, last) {\n    if (!first) return;\n    if (!last) last = first;\n\n    while (first && first.nodeType === 1 && first.childNodes.length > 0 && !this.isBreak(first)) {\n      first = first.firstChild;\n    }\n\n    while (last && last.nodeType === 1 && last.childNodes.length > 0 && !this.isBreak(last)) {\n      last = last.lastChild;\n    }\n\n    return {\n      sc: first,\n      ec: last || first\n    };\n  },\n\n  /**\r\n   * @description Returns the position of the left and top of argument. {left:0, top:0}\r\n   * @param {Node} element Target node\r\n   * @param {Element|null} wysiwygFrame When use iframe option, iframe object should be sent (context.element.wysiwygFrame)\r\n   * @returns {Object}\r\n   */\n  getOffset: function getOffset(element, wysiwygFrame) {\n    var offsetLeft = 0;\n    var offsetTop = 0;\n    var offsetElement = element.nodeType === 3 ? element.parentElement : element;\n    var wysiwyg = this.getParentElement(element, this.isWysiwygDiv.bind(this));\n\n    while (offsetElement && !this.hasClass(offsetElement, \"ke-container\") && offsetElement !== wysiwyg) {\n      offsetLeft += offsetElement.offsetLeft;\n      offsetTop += offsetElement.offsetTop;\n      offsetElement = offsetElement.offsetParent;\n    }\n\n    var iframe = wysiwygFrame && /iframe/i.test(wysiwygFrame.nodeName);\n    return {\n      left: offsetLeft + (iframe ? wysiwygFrame.parentElement.offsetLeft : 0),\n      top: offsetTop - (wysiwyg ? wysiwyg.scrollTop : 0) + (iframe ? wysiwygFrame.parentElement.offsetTop : 0)\n    };\n  },\n\n  /**\r\n   * @description It compares the start and end indexes of \"a\" and \"b\" and returns the number of overlapping indexes in the range.\r\n   * ex) 1, 5, 4, 6 => \"2\" (4 ~ 5)\r\n   * @param {Number} aStart Start index of \"a\"\r\n   * @param {Number} aEnd End index of \"a\"\r\n   * @param {Number} bStart Start index of \"b\"\r\n   * @param {Number} bEnd Start index of \"b\"\r\n   * @returns {Number}\r\n   */\n  getOverlapRangeAtIndex: function getOverlapRangeAtIndex(aStart, aEnd, bStart, bEnd) {\n    if (aStart <= bEnd ? aEnd < bStart : aEnd > bStart) return 0;\n    var overlap = (aStart > bStart ? aStart : bStart) - (aEnd < bEnd ? aEnd : bEnd);\n    return (overlap < 0 ? overlap * -1 : overlap) + 1;\n  },\n\n  /**\r\n   * @description Set the text content value of the argument value element\r\n   * @param {Node} element Element to replace text content\r\n   * @param {String} txt Text to be applied\r\n   */\n  changeTxt: function changeTxt(element, txt) {\n    if (!element || !txt) return;\n    element.textContent = txt;\n  },\n\n  /**\r\n   * @description Replace element\r\n   * @param {Element} element Target element\r\n   * @param {String|Element} newElement String or element of the new element to apply\r\n   */\n  changeElement: function changeElement(element, newElement) {\n    if (typeof newElement === \"string\") {\n      if (element.outerHTML) {\n        element.outerHTML = newElement;\n      } else {\n        var doc = this.createElement(\"DIV\");\n        doc.innerHTML = newElement;\n        newElement = doc.firstChild;\n        element.parentNode.replaceChild(newElement, element);\n      }\n    } else if (newElement.nodeType === 1) {\n      element.parentNode.replaceChild(newElement, element);\n    }\n  },\n\n  /**\r\n   * @description Set style, if all styles are deleted, the style properties are deleted.\r\n   * @param {Element} element Element to set style\r\n   * @param {String} styleName Style attribute name (marginLeft, textAlign...)\r\n   * @param {String|Number} value Style value\r\n   */\n  setStyle: function setStyle(element, styleName, value) {\n    element.style[styleName] = value;\n\n    if (!value && !element.style.cssText) {\n      element.removeAttribute(\"style\");\n    }\n  },\n\n  /**\r\n   * @description Determine whether any of the matched elements are assigned the given class\r\n   * @param {Element} element Elements to search class name\r\n   * @param {String} className Class name to search for\r\n   * @returns {Boolean}\r\n   */\n  hasClass: function hasClass(element, className) {\n    if (!element) return;\n    return new this._w.RegExp(className).test(element.className);\n  },\n\n  /**\r\n   * @description Append the className value of the argument value element\r\n   * @param {Element} element Elements to add class name\r\n   * @param {String} className Class name to be add\r\n   */\n  addClass: function addClass(element, className) {\n    if (!element) return;\n    var check = new this._w.RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    if (check.test(element.className)) return;\n    element.className += (element.className.length > 0 ? \" \" : \"\") + className;\n  },\n\n  /**\r\n   * @description Delete the className value of the argument value element\r\n   * @param {Element} element Elements to remove class name\r\n   * @param {String} className Class name to be remove\r\n   */\n  removeClass: function removeClass(element, className) {\n    if (!element) return;\n    var check = new this._w.RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    element.className = element.className.replace(check, \" \").trim();\n    if (!element.className.trim()) element.removeAttribute(\"class\");\n  },\n\n  /**\r\n   * @description Argument value If there is no class name, insert it and delete the class name if it exists\r\n   * @param {Element} element Elements to replace class name\r\n   * @param {String} className Class name to be change\r\n   * @returns {Boolean|undefined}\r\n   */\n  toggleClass: function toggleClass(element, className) {\n    if (!element) return;\n    var result = false;\n    var check = new this._w.RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n\n    if (check.test(element.className)) {\n      element.className = element.className.replace(check, \" \").trim();\n    } else {\n      element.className += \" \" + className;\n      result = true;\n    }\n\n    if (!element.className.trim()) element.removeAttribute(\"class\");\n    return result;\n  },\n\n  /**\r\n   * @description In the predefined code view mode, the buttons except the executable button are changed to the 'disabled' state.\r\n   * core.codeViewDisabledButtons (An array of buttons whose class name is not \"ke-code-view-enabled\")\r\n   * core.resizingDisabledButtons (An array of buttons whose class name is not \"ke-resizing-enabled\")\r\n   * @param {Boolean} disabled Disabled value\r\n   * @param {Array|HTMLCollection|NodeList} toolbarItem Button array\r\n   */\n  setDisabledButtons: function setDisabledButtons(disabled, toolbarItem) {\n    for (var i = 0, len = toolbarItem.length; i < len; i++) {\n      toolbarItem[i].disabled = disabled;\n    }\n  },\n\n  /**\r\n   * @description Delete argumenu value element\r\n   * @param {Node} item Node to be remove\r\n   */\n  removeItem: function removeItem(item) {\n    if (!item) return;\n    if (typeof item.remove === \"function\") item.remove();else if (item.parentNode) item.parentNode.removeChild(item);\n  },\n\n  /**\r\n   * @description Delete all parent nodes that match the condition.\r\n   * Returns an {sc: previousSibling, ec: nextSibling}(the deleted node reference) or null.\r\n   * @param {Node} item Node to be remove\r\n   * @param {Function|null} validation Validation function. default(Deleted if it only have breakLine and blanks)\r\n   * @param {Element|null} stopParent Stop when the parent node reaches stopParent\r\n   * @returns {Object|null} {sc: previousSibling, ec: nextSibling}\r\n   */\n  removeItemAllParents: function removeItemAllParents(item, validation, stopParent) {\n    if (!item) return null;\n    var cc = null;\n\n    if (!validation) {\n      validation = function (current) {\n        if (current === stopParent || this.isComponent(current)) return false;\n        var text = current.textContent.trim();\n        return text.length === 0 || /^(\\n|\\u200B)+$/.test(text);\n      }.bind(this);\n    }\n\n    (function recursionFunc(element) {\n      if (!util.isWysiwygDiv(element)) {\n        var parent = element.parentNode;\n\n        if (parent && validation(element)) {\n          cc = {\n            sc: element.previousElementSibling,\n            ec: element.nextElementSibling\n          };\n          util.removeItem(element);\n          recursionFunc(parent);\n        }\n      }\n    })(item);\n\n    return cc;\n  },\n\n  /**\r\n   * @description Detach Nested all nested lists under the \"baseNode\".\r\n   * Returns a list with nested removed.\r\n   * @param {Node} baseNode Element on which to base.\r\n   * @param {Boolean} all If true, it also detach all nested lists of a returned list.\r\n   * @returns {Element}\r\n   */\n  detachNestedList: function detachNestedList(baseNode, all) {\n    var rNode = this._deleteNestedList(baseNode);\n\n    var rangeElement, cNodes;\n\n    if (rNode) {\n      rangeElement = rNode.cloneNode(false);\n      cNodes = rNode.childNodes;\n      var index = this.getPositionIndex(baseNode);\n\n      while (cNodes[index]) {\n        rangeElement.appendChild(cNodes[index]);\n      }\n    } else {\n      rangeElement = baseNode;\n    }\n\n    var rChildren;\n\n    if (!all) {\n      var depth = this.getElementDepth(baseNode) + 2;\n      rChildren = this.getListChildren(baseNode, function (current) {\n        return this.isListCell(current) && !current.previousElementSibling && this.getElementDepth(current) === depth;\n      }.bind(this));\n    } else {\n      rChildren = this.getListChildren(rangeElement, function (current) {\n        return this.isListCell(current) && !current.previousElementSibling;\n      }.bind(this));\n    }\n\n    for (var i = 0, len = rChildren.length; i < len; i++) {\n      this._deleteNestedList(rChildren[i]);\n    }\n\n    if (rNode) {\n      rNode.parentNode.insertBefore(rangeElement, rNode.nextSibling);\n      if (cNodes && cNodes.length === 0) this.removeItem(rNode);\n    }\n\n    return rangeElement === baseNode ? rangeElement.parentNode : rangeElement;\n  },\n\n  /**\r\n   * @description Sub function of util.detachNestedList method.\r\n   * @private\r\n   */\n  _deleteNestedList: function _deleteNestedList(baseNode) {\n    var baseParent = baseNode.parentNode;\n    var sibling = baseParent;\n    var parent = sibling.parentNode;\n    var liSibling, liParent, child, index, c;\n\n    while (this.isListCell(parent)) {\n      index = this.getPositionIndex(baseNode);\n      liSibling = parent.nextElementSibling;\n      liParent = parent.parentNode;\n      child = sibling;\n\n      while (child) {\n        sibling = sibling.nextSibling;\n\n        if (this.isList(child)) {\n          c = child.childNodes;\n\n          while (c[index]) {\n            liParent.insertBefore(c[index], liSibling);\n          }\n\n          if (c.length === 0) this.removeItem(child);\n        } else {\n          liParent.appendChild(child);\n        }\n\n        child = sibling;\n      }\n\n      sibling = liParent;\n      parent = liParent.parentNode;\n    }\n\n    if (baseParent.children.length === 0) this.removeItem(baseParent);\n    return liParent;\n  },\n\n  /**\r\n   * @description Split all tags based on \"baseNode\"\r\n   * Returns the last element of the splited tag.\r\n   * @param {Node} baseNode Element or text node on which to base\r\n   * @param {Number|null} offset Text offset of \"baseNode\" (Only valid when \"baseNode\" is a text node)\r\n   * @param {Number} depth The nesting depth of the element being split. (default: 0)\r\n   * @returns {Element}\r\n   */\n  splitElement: function splitElement(baseNode, offset, depth) {\n    var bp = baseNode.parentNode;\n    var index = 0,\n        newEl,\n        children,\n        temp;\n    var next = true;\n    if (!depth || depth < 0) depth = 0;\n\n    if (baseNode.nodeType === 3) {\n      index = this.getPositionIndex(baseNode);\n\n      if (offset >= 0) {\n        baseNode.splitText(offset);\n        var after = this.getNodeFromPath([index + 1], bp);\n        if (this.onlyZeroWidthSpace(after)) after.data = this.zeroWidthSpace;\n      }\n    } else if (baseNode.nodeType === 1) {\n      if (!baseNode.previousSibling) {\n        if (this.getElementDepth(baseNode) === depth) next = false;\n      } else {\n        baseNode = baseNode.previousSibling;\n      }\n    }\n\n    var depthEl = baseNode;\n\n    while (this.getElementDepth(depthEl) > depth) {\n      index = this.getPositionIndex(depthEl) + 1;\n      depthEl = depthEl.parentNode;\n      temp = newEl;\n      newEl = depthEl.cloneNode(false);\n      children = depthEl.childNodes;\n\n      if (temp) {\n        if (this.isListCell(newEl) && this.isList(temp) && temp.firstElementChild) {\n          newEl.innerHTML = temp.firstElementChild.innerHTML;\n          util.removeItem(temp.firstElementChild);\n          if (temp.children.length > 0) newEl.appendChild(temp);\n        } else {\n          newEl.appendChild(temp);\n        }\n      }\n\n      while (children[index]) {\n        newEl.appendChild(children[index]);\n      }\n    }\n\n    if (depthEl.childNodes.length <= 1 && (!depthEl.firstChild || depthEl.firstChild.textContent.length === 0)) depthEl.innerHTML = \"<br>\";\n    var pElement = depthEl.parentNode;\n    if (next) depthEl = depthEl.nextSibling;\n    if (!newEl) return depthEl;\n    this.mergeSameTags(newEl, null, false);\n    this.mergeNestedTags(newEl, function (current) {\n      return this.isList(current);\n    }.bind(this));\n    if (newEl.childNodes.length > 0) pElement.insertBefore(newEl, depthEl);else newEl = depthEl;\n    if (bp.childNodes.length === 0) this.removeItem(bp);\n    return newEl;\n  },\n\n  /**\r\n   * @description Use with \"npdePath (util.getNodePath)\" to merge the same attributes and tags if they are present and modify the nodepath.\r\n   * If \"offset\" has been changed, it will return as much \"offset\" as it has been modified.\r\n   * An array containing change offsets is returned in the order of the \"nodePathArray\" array.\r\n   * @param {Element} element Element\r\n   * @param {Array|null} nodePathArray Array of NodePath object ([util.getNodePath(), ..])\r\n   * @param {Boolean} onlyText If true, non-text nodes(!util._isIgnoreNodeChange) like 'span', 'strong'.. are ignored.\r\n   * @returns {Array} [offset, ..]\r\n   */\n  mergeSameTags: function mergeSameTags(element, nodePathArray, onlyText) {\n    var inst = this;\n    var nodePathLen = nodePathArray ? nodePathArray.length : 0;\n    var offsets = null;\n\n    if (nodePathLen) {\n      offsets = this._w.Array.apply(null, new this._w.Array(nodePathLen)).map(this._w.Number.prototype.valueOf, 0);\n    }\n\n    (function recursionFunc(current, depth, depthIndex) {\n      var children = current.childNodes;\n\n      for (var i = 0, len = children.length, child, next; i < len; i++) {\n        child = children[i];\n        next = children[i + 1];\n        if (!child) break;\n\n        if (onlyText && inst._isIgnoreNodeChange(child) || !onlyText && (inst.isTable(child) || inst.isListCell(child) || inst.isFormatElement(child) && !inst.isFreeFormatElement(child))) {\n          if (inst.isTable(child) || inst.isListCell(child)) {\n            recursionFunc(child, depth + 1, i);\n          }\n\n          continue;\n        }\n\n        if (len === 1 && current.nodeName === child.nodeName && current.parentNode) {\n          // update nodePath\n          if (nodePathLen) {\n            var path = void 0,\n                c = void 0,\n                p = void 0,\n                cDepth = void 0,\n                spliceDepth = void 0;\n\n            for (var n = 0; n < nodePathLen; n++) {\n              path = nodePathArray[n];\n\n              if (path && path[depth] === i) {\n                c = child, p = current, cDepth = depth, spliceDepth = true;\n\n                while (cDepth >= 0) {\n                  if (inst.getArrayIndex(p.childNodes, c) !== path[cDepth]) {\n                    spliceDepth = false;\n                    break;\n                  }\n\n                  c = child.parentNode;\n                  p = c.parentNode;\n                  cDepth--;\n                }\n\n                if (spliceDepth) {\n                  path.splice(depth, 1);\n                  path[depth] = i;\n                }\n              }\n            }\n          } // merge tag\n\n\n          inst.copyTagAttributes(child, current);\n          current.parentNode.insertBefore(child, current);\n          inst.removeItem(current);\n        }\n\n        if (!next) {\n          if (child.nodeType === 1) recursionFunc(child, depth + 1, i);\n          break;\n        }\n\n        if (child.nodeName === next.nodeName && inst.isSameAttributes(child, next) && child.href === next.href) {\n          var childs = child.childNodes;\n          var childLength = 0;\n\n          for (var _n = 0, nLen = childs.length; _n < nLen; _n++) {\n            if (childs[_n].textContent.length > 0) childLength++;\n          }\n\n          var l = child.lastChild;\n          var r = next.firstChild;\n          var addOffset = 0;\n\n          if (l && r) {\n            var textOffset = l.nodeType === 3 && r.nodeType === 3;\n            addOffset = l.textContent.length;\n            var tempL = l.previousSibling;\n\n            while (tempL && tempL.nodeType === 3) {\n              addOffset += tempL.textContent.length;\n              tempL = tempL.previousSibling;\n            }\n\n            if (childLength > 0 && l.nodeType === 3 && r.nodeType === 3 && (l.textContent.length > 0 || r.textContent.length > 0)) childLength--;\n\n            if (nodePathLen) {\n              var _path = null;\n\n              for (var _n2 = 0; _n2 < nodePathLen; _n2++) {\n                _path = nodePathArray[_n2];\n\n                if (_path && _path[depth] > i) {\n                  if (depth > 0 && _path[depth - 1] !== depthIndex) continue;\n                  _path[depth] -= 1;\n\n                  if (_path[depth + 1] >= 0 && _path[depth] === i) {\n                    _path[depth + 1] += childLength;\n\n                    if (textOffset) {\n                      if (l && l.nodeType === 3 && r && r.nodeType === 3) {\n                        offsets[_n2] += addOffset;\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n\n          if (child.nodeType === 3) {\n            addOffset = child.textContent.length;\n            child.textContent += next.textContent;\n\n            if (nodePathLen) {\n              var _path2 = null;\n\n              for (var _n3 = 0; _n3 < nodePathLen; _n3++) {\n                _path2 = nodePathArray[_n3];\n\n                if (_path2 && _path2[depth] > i) {\n                  if (depth > 0 && _path2[depth - 1] !== depthIndex) continue;\n                  _path2[depth] -= 1;\n\n                  if (_path2[depth + 1] >= 0 && _path2[depth] === i) {\n                    _path2[depth + 1] += childLength;\n                    offsets[_n3] += addOffset;\n                  }\n                }\n              }\n            }\n          } else {\n            child.innerHTML += next.innerHTML;\n          }\n\n          inst.removeItem(next);\n          i--;\n        } else if (child.nodeType === 1) {\n          recursionFunc(child, depth + 1, i);\n        }\n      }\n    })(element, 0, 0);\n\n    return offsets;\n  },\n\n  /**\r\n   * @description Remove nested tags without other child nodes.\r\n   * @param {Element} element Element object\r\n   * @param {Function|String|null} validation Validation function / String(\"tag1|tag2..\") / If null, all tags are applicable.\r\n   */\n  mergeNestedTags: function mergeNestedTags(element, validation) {\n    if (typeof validation === \"string\") {\n      validation = function (current) {\n        return this.test(current.tagName);\n      }.bind(new this._w.RegExp(\"^(\" + (validation ? validation : \".+\") + \")$\", \"i\"));\n    } else if (typeof validation !== \"function\") {\n      validation = function validation() {\n        return true;\n      };\n    }\n\n    (function recursionFunc(current) {\n      var children = current.children;\n\n      if (children.length === 1 && children[0].nodeName === current.nodeName && validation(current)) {\n        var temp = children[0];\n        children = temp.children;\n\n        while (children[0]) {\n          current.appendChild(children[0]);\n        }\n\n        current.removeChild(temp);\n      }\n\n      for (var i = 0, len = current.children.length; i < len; i++) {\n        recursionFunc(current.children[i]);\n      }\n    })(element);\n  },\n\n  /**\r\n   * @description Delete a empty child node of argument element\r\n   * @param {Element} element Element node\r\n   * @param {Node|null} notRemoveNode Do not remove node\r\n   */\n  removeEmptyNode: function removeEmptyNode(element, notRemoveNode) {\n    var inst = this;\n\n    if (notRemoveNode) {\n      notRemoveNode = inst.getParentElement(notRemoveNode, function (current) {\n        return element === current.parentElement;\n      });\n    }\n\n    (function recursionFunc(current) {\n      if (inst._notTextNode(current) || current === notRemoveNode || inst.isNonEditable(current)) return 0;\n\n      if (current !== element && inst.onlyZeroWidthSpace(current.textContent) && (!current.firstChild || !inst.isBreak(current.firstChild)) && !current.querySelector(inst._allowedEmptyNodeList)) {\n        if (current.parentNode) {\n          current.parentNode.removeChild(current);\n          return -1;\n        }\n      } else {\n        var children = current.children;\n\n        for (var i = 0, len = children.length, r = 0; i < len; i++) {\n          if (!children[i + r] || inst.isComponent(children[i + r])) continue;\n          r += recursionFunc(children[i + r]);\n        }\n      }\n\n      return 0;\n    })(element);\n\n    if (element.childNodes.length === 0) element.innerHTML = \"<br>\";\n  },\n\n  /**\r\n   * @description Remove whitespace between tags in HTML string.\r\n   * @param {String} html HTML string\r\n   * @returns {String}\r\n   */\n  htmlRemoveWhiteSpace: function htmlRemoveWhiteSpace(html) {\n    if (!html) return \"\";\n    return html.trim().replace(/<\\/?(?!strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code)[^>^<]+>\\s+(?=<)/gi, function (m) {\n      return m.trim();\n    });\n  },\n\n  /**\r\n   * @description Sort a element array by depth of element.\r\n   * @param {Array} array Array object\r\n   * @param {Boolean} des true: descending order / false: ascending order\r\n   */\n  sortByDepth: function sortByDepth(array, des) {\n    var t = !des ? -1 : 1;\n    var f = t * -1;\n    array.sort(function (a, b) {\n      if (!this.isListCell(a) || !this.isListCell(b)) return 0;\n      a = this.getElementDepth(a);\n      b = this.getElementDepth(b);\n      return a > b ? t : a < b ? f : 0;\n    }.bind(this));\n  },\n\n  /**\r\n   * @description Nodes that need to be added without modification when changing text nodes\r\n   * @param {Node} element Element to check\r\n   * @returns {Boolean}\r\n   * @private\r\n   */\n  _isIgnoreNodeChange: function _isIgnoreNodeChange(element) {\n    return element && element.nodeType !== 3 && (this.isNonEditable(element) || !this.isTextStyleElement(element));\n  },\n\n  /**\r\n   * @description Nodes that must remain undetached when changing text nodes (A, Label, Code, Span:font-size)\r\n   * @param {Node|String} element Element to check\r\n   * @returns {Boolean}\r\n   * @private\r\n   */\n  _isMaintainedNode: function _isMaintainedNode(element) {\n    return element && element.nodeType !== 3 && /^(a|label|code)$/i.test(typeof element === \"string\" ? element : element.nodeName);\n  },\n\n  /**\r\n   * @description Node with font-size style\r\n   * @param {Node} element Element to check\r\n   * @returns {Boolean}\r\n   * @private\r\n   */\n  _isSizeNode: function _isSizeNode(element) {\n    return element && element.nodeType !== 3 && this.isTextStyleElement(element) && !!element.style.fontSize;\n  },\n\n  /**\r\n   * @description Nodes without text\r\n   * @param {Node} element Element to check\r\n   * @returns {Boolean}\r\n   * @private\r\n   */\n  _notTextNode: function _notTextNode(element) {\n    return element && element.nodeType !== 3 && (this.isComponent(element) || /^(br|input|select|canvas|img|iframe|audio|video)$/i.test(typeof element === \"string\" ? element : element.nodeName));\n  },\n\n  /**\r\n   * @description Check disallowed tags\r\n   * @param {Node} element Element to check\r\n   * @returns {Boolean}\r\n   * @private\r\n   */\n  _disallowedTags: function _disallowedTags(element) {\n    return /^(meta|script|link|style|[a-z]+\\:[a-z]+)$/i.test(element.nodeName);\n  },\n\n  /**\r\n   * @description Create whitelist RegExp object.\r\n   * Return RegExp format: new RegExp(\"<\\\\/?\\\\b(?!\" + list + \")\\\\b[^>^<]*+>\", \"gi\")\r\n   * @param {String} list Tags list (\"br|p|div|pre...\")\r\n   * @returns {RegExp}\r\n   */\n  createTagsWhitelist: function createTagsWhitelist(list) {\n    return new RegExp(\"<\\\\/?\\\\b(?!\\\\b\" + list.replace(/\\|/g, \"\\\\b|\\\\b\") + \"\\\\b)[^>]*>\", \"gi\");\n  },\n\n  /**\r\n   * @description Fix tags that do not fit the editor format.\r\n   * @param {Element} documentFragment Document fragment \"DOCUMENT_FRAGMENT_NODE\" (nodeType === 11)\r\n   * @param {RegExp} htmlCheckWhitelistRegExp Editor tags whitelist (core._htmlCheckWhitelistRegExp)\r\n   * @private\r\n   */\n  _consistencyCheckOfHTML: function _consistencyCheckOfHTML(documentFragment, htmlCheckWhitelistRegExp) {\n    /**\r\n     * It is can use \".children(util.getListChildren)\" to exclude text nodes, but \"documentFragment.children\" is not supported in IE.\r\n     * So check the node type and exclude the text no (current.nodeType !== 1)\r\n     */\n    var removeTags = [],\n        emptyTags = [],\n        wrongList = [],\n        withoutFormatCells = []; // wrong position\n\n    var wrongTags = this.getListChildNodes(documentFragment, function (current) {\n      if (current.nodeType !== 1) return false; // white list\n\n      if (!htmlCheckWhitelistRegExp.test(current.nodeName) && current.childNodes.length === 0 && this.isNotCheckingNode(current)) {\n        removeTags.push(current);\n        return false;\n      }\n\n      var nrtag = !this.getParentElement(current, this.isNotCheckingNode); // empty tags\n\n      if (!this.isTable(current) && !this.isListCell(current) && (this.isFormatElement(current) || this.isRangeFormatElement(current) || this.isTextStyleElement(current)) && current.childNodes.length === 0 && nrtag) {\n        emptyTags.push(current);\n        return false;\n      } // wrong list\n\n\n      if (this.isList(current.parentNode) && !this.isList(current) && !this.isListCell(current)) {\n        wrongList.push(current);\n        return false;\n      } // table cells\n\n\n      if (this.isCell(current)) {\n        var fel = current.firstElementChild;\n\n        if (!this.isFormatElement(fel) && !this.isRangeFormatElement(fel) && !this.isComponent(fel)) {\n          withoutFormatCells.push(current);\n          return false;\n        }\n      }\n\n      var result = current.parentNode !== documentFragment && (this.isFormatElement(current) || this.isComponent(current) || this.isList(current)) && !this.isRangeFormatElement(current.parentNode) && !this.isListCell(current.parentNode) && !this.getParentElement(current, this.isComponent) && nrtag;\n      return result;\n    }.bind(this));\n\n    for (var i = 0, len = removeTags.length; i < len; i++) {\n      this.removeItem(removeTags[i]);\n    }\n\n    var checkTags = [];\n\n    for (var _i4 = 0, _len2 = wrongTags.length, t, p; _i4 < _len2; _i4++) {\n      t = wrongTags[_i4];\n      p = t.parentNode;\n      if (!p || !p.parentNode) continue;\n      p.parentNode.insertBefore(t, p);\n      checkTags.push(p);\n    }\n\n    for (var _i5 = 0, _len3 = checkTags.length, _t; _i5 < _len3; _i5++) {\n      _t = checkTags[_i5];\n\n      if (this.onlyZeroWidthSpace(_t.textContent.trim())) {\n        this.removeItem(_t);\n      }\n    }\n\n    for (var _i6 = 0, _len4 = emptyTags.length; _i6 < _len4; _i6++) {\n      this.removeItem(emptyTags[_i6]);\n    }\n\n    for (var _i7 = 0, _len5 = wrongList.length, _t2, tp, children, _p; _i7 < _len5; _i7++) {\n      _t2 = wrongList[_i7];\n      tp = this.createElement(\"LI\");\n      children = _t2.childNodes;\n\n      while (children[0]) {\n        tp.appendChild(children[0]);\n      }\n\n      _p = _t2.parentNode;\n      if (!_p) continue;\n\n      _p.insertBefore(tp, _t2);\n\n      this.removeItem(_t2);\n    }\n\n    for (var _i8 = 0, _len6 = withoutFormatCells.length, _t3, f; _i8 < _len6; _i8++) {\n      _t3 = withoutFormatCells[_i8];\n      f = this.createElement(\"DIV\");\n      f.innerHTML = _t3.textContent.trim().length === 0 && _t3.children.length === 0 ? \"<br>\" : _t3.innerHTML;\n      _t3.innerHTML = f.outerHTML;\n    }\n  },\n  _setDefaultOptionStyle: function _setDefaultOptionStyle(options, defaultStyle) {\n    var optionStyle = \"\";\n    if (options.height) optionStyle += \"height:\" + options.height + \";\";\n    if (options.minHeight) optionStyle += \"min-height:\" + options.minHeight + \";\";\n    if (options.maxHeight) optionStyle += \"max-height:\" + options.maxHeight + \";\";\n    if (options.position) optionStyle += \"position:\" + options.position + \";\";\n    if (options.width) optionStyle += \"width:\" + options.width + \";\";\n    if (options.minWidth) optionStyle += \"min-width:\" + options.minWidth + \";\";\n    if (options.maxWidth) optionStyle += \"max-width:\" + options.maxWidth + \";\";\n    var top = \"\",\n        frame = \"\",\n        editor = \"\";\n    defaultStyle = optionStyle + defaultStyle;\n    var styleArr = defaultStyle.split(\";\");\n\n    for (var i = 0, len = styleArr.length, s; i < len; i++) {\n      s = styleArr[i].trim();\n      if (!s) continue;\n\n      if (/^(min-|max-)?width\\s*:/.test(s) || /^(z-index|position)\\s*:/.test(s)) {\n        top += s + \";\";\n        continue;\n      }\n\n      if (/^(min-|max-)?height\\s*:/.test(s)) {\n        if (/^height/.test(s) && s.split(\":\")[1].trim() === \"auto\") {\n          options.height = \"auto\";\n        }\n\n        frame += s + \";\";\n        continue;\n      }\n\n      editor += s + \";\";\n    }\n\n    return {\n      top: top,\n      frame: frame,\n      editor: editor\n    };\n  },\n  _setIframeDocument: function _setIframeDocument(frame, options) {\n    frame.setAttribute(\"scrolling\", \"auto\");\n    frame.contentDocument.head.innerHTML = \"\" + '<meta charset=\"utf-8\" />' + '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">' + this._setIframeCssTags(options);\n    frame.contentDocument.body.className = options._editableClass;\n    frame.contentDocument.body.setAttribute(\"contenteditable\", true);\n  },\n  _setIframeCssTags: function _setIframeCssTags(options) {\n    var linkNames = options.iframeCSSFileName;\n    var wRegExp = this._w.RegExp;\n    var tagString = \"\";\n\n    for (var f = 0, len = linkNames.length, path; f < len; f++) {\n      path = [];\n\n      if (/(^https?:\\/\\/)|(^data:text\\/css,)/.test(linkNames[f])) {\n        path.push(linkNames[f]);\n      } else {\n        var CSSFileName = new wRegExp(\"(^|.*[\\\\/])\" + linkNames[f] + \"(\\\\..+)?\\\\.css(?:\\\\?.*|;.*)?$\", \"i\");\n\n        for (var c = document.getElementsByTagName(\"link\"), i = 0, _len7 = c.length, styleTag; i < _len7; i++) {\n          styleTag = c[i].href.match(CSSFileName);\n          if (styleTag) path.push(styleTag[0]);\n        }\n      }\n\n      if (!path || path.length === 0) throw '[KothingEditor.constructor.iframe.fail] The KothingEditor CSS files installation path could not be automatically detected. Please set the option property \"iframeCSSFileName\" before creating editor instances.';\n\n      for (var _i9 = 0, _len8 = path.length; _i9 < _len8; _i9++) {\n        tagString += '<link href=\"' + path[_i9] + '\" rel=\"stylesheet\">';\n      }\n    }\n\n    return tagString + (options.height === \"auto\" ? \"<style>\\n/** Iframe height auto */\\nbody{height: min-content; overflow: hidden;}\\n</style>\" : \"\");\n  }\n};\nvar _default = util;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"selectMenu\",\n  add: function add(core) {\n    core.context.selectMenu = {\n      caller: {},\n      callerContext: null\n    };\n  },\n  setForm: function setForm() {\n    return '<div class=\"ke-select-list\"></div>';\n  },\n  createList: function createList(listContext, items, html) {\n    listContext.form.innerHTML = \"<ul>\" + html + \"</ul>\";\n    listContext.items = items;\n    listContext.menus = listContext.form.querySelectorAll(\"li\");\n  },\n  initEvent: function initEvent(pluginName, forms) {\n    var form = forms.querySelector(\".ke-select-list\");\n    var context = this.context.selectMenu.caller[pluginName] = {\n      form: form,\n      items: [],\n      menus: [],\n      index: -1,\n      item: null,\n      clickMethod: null,\n      callerName: pluginName\n    };\n    form.addEventListener(\"mousedown\", this.plugins.selectMenu.onMousedown_list);\n    form.addEventListener(\"mousemove\", this.plugins.selectMenu.onMouseMove_list.bind(this, context));\n    form.addEventListener(\"click\", this.plugins.selectMenu.onClick_list.bind(this, context));\n  },\n  onMousedown_list: function onMousedown_list(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  },\n  onMouseMove_list: function onMouseMove_list(context, e) {\n    this.util.addClass(context.form, \"__ke_select-menu-mouse-move\");\n    var index = e.target.getAttribute(\"data-index\");\n\n    if (!index) {\n      return;\n    }\n\n    context.index = index * 1;\n  },\n  onClick_list: function onClick_list(context, e) {\n    var index = e.target.getAttribute(\"data-index\");\n\n    if (!index) {\n      return;\n    }\n\n    context.clickMethod.call(this, context.items[index]);\n  },\n  moveItem: function moveItem(listContext, num) {\n    this.util.removeClass(listContext.form, \"__ke_select-menu-mouse-move\");\n    num = listContext.index + num;\n    var menus = listContext.menus;\n    var len = menus.length;\n    var selectIndex = listContext.index = num >= len ? 0 : num < 0 ? len - 1 : num;\n\n    for (var i = 0; i < len; i++) {\n      if (i === selectIndex) {\n        this.util.addClass(menus[i], \"active\");\n      } else {\n        this.util.removeClass(menus[i], \"active\");\n      }\n    }\n\n    listContext.item = listContext.items[selectIndex];\n  },\n  getItem: function getItem(listContext, index) {\n    index = !index || index < 0 ? listContext.index : index;\n    return listContext.items[index];\n  },\n  on: function on(callerName, clickMethod) {\n    var listContext = this.context.selectMenu.caller[callerName];\n    this.context.selectMenu.callerContext = listContext;\n    listContext.clickMethod = clickMethod;\n    listContext.callerName = callerName;\n  },\n  open: function open(listContext, positionHandler) {\n    var form = listContext.form;\n    form.style.visibility = \"hidden\";\n    form.style.display = \"block\";\n    positionHandler(form);\n    form.style.visibility = \"\";\n  },\n  close: function close(listContext) {\n    listContext.form.style.display = \"none\";\n    listContext.items = [];\n    listContext.menus = [];\n    listContext.index = -1;\n    listContext.item = null;\n  },\n  init: function init(listContext) {\n    if (!listContext) {\n      return;\n    }\n\n    listContext.items = [];\n    listContext.menus = [];\n    listContext.index = -1;\n    listContext.item = null;\n    listContext.callerName = \"\";\n    this.context.selectMenu.callerContext = null;\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  name: \"list\",\n  display: \"submenu\",\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.list = {\n      targetButton: targetElement,\n      _list: null,\n      currentList: \"\",\n      icons: {\n        bullets: core.icons.list_bullets,\n        number: core.icons.list_number\n      }\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector(\"ul\");\n    /** add event listeners */\n\n    listUl.addEventListener(\"click\", this.pickup.bind(core));\n    context.list._list = listUl.querySelectorAll(\"li button\");\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var lang = core.lang;\n    var listDiv = core.util.createElement(\"DIV\");\n    listDiv.className = \"ke-submenu ke-list-layer\";\n    listDiv.innerHTML = \"\" + '<div class=\"ke-list-inner\">' + '<ul class=\"ke-list-basic\">' + '<li><button type=\"button\" class=\"ke-btn-list ke-tooltip\" data-command=\"OL\" title=\"' + lang.toolbar.orderList + '\">' + core.icons.list_number + \"</button></li>\" + '<li><button type=\"button\" class=\"ke-btn-list ke-tooltip\" data-command=\"UL\" title=\"' + lang.toolbar.unorderList + '\">' + core.icons.list_bullets + \"</button></li>\" + \"</ul>\" + \"</div>\";\n    return listDiv;\n  },\n\n  /**\r\n   * @Override core\r\n   */\n  active: function active(element) {\n    var button = this.context.list.targetButton;\n    var icon = button.firstElementChild;\n    var util = this.util;\n\n    if (!element) {\n      button.removeAttribute(\"data-focus\");\n      util.changeElement(icon, this.context.list.icons.number);\n      util.removeClass(button, \"active\");\n    } else if (util.isList(element)) {\n      var nodeName = element.nodeName;\n      button.setAttribute(\"data-focus\", nodeName);\n      util.addClass(button, \"active\");\n\n      if (/UL/i.test(nodeName)) {\n        util.changeElement(icon, this.context.list.icons.bullets);\n      } else {\n        util.changeElement(icon, this.context.list.icons.number);\n      }\n\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n   * @Override submenu\r\n   */\n  on: function on() {\n    var listContext = this.context.list;\n    var list = listContext._list;\n    var currentList = listContext.targetButton.getAttribute(\"data-focus\") || \"\";\n\n    if (currentList !== listContext.currentList) {\n      for (var i = 0, len = list.length; i < len; i++) {\n        if (currentList === list[i].getAttribute(\"data-command\")) {\n          this.util.addClass(list[i], \"active\");\n        } else {\n          this.util.removeClass(list[i], \"active\");\n        }\n      }\n\n      listContext.currentList = currentList;\n    }\n  },\n  editList: function editList(command, selectedCells, detach) {\n    var range = this.getRange();\n    var selectedFormats = !selectedCells ? this.getSelectedElementsAndComponents(false) : selectedCells;\n\n    if (selectedFormats.length === 0) {\n      if (selectedCells) {\n        return;\n      }\n\n      range = this.getRange_addLine(range, null);\n      selectedFormats = this.getSelectedElementsAndComponents(false);\n\n      if (selectedFormats.length === 0) {\n        return;\n      }\n    }\n\n    var util = this.util;\n    util.sortByDepth(selectedFormats, true); // merge\n\n    var firstSel = selectedFormats[0];\n    var lastSel = selectedFormats[selectedFormats.length - 1];\n    var topEl = (util.isListCell(firstSel) || util.isComponent(firstSel)) && !firstSel.previousElementSibling ? firstSel.parentNode.previousElementSibling : firstSel.previousElementSibling;\n    var bottomEl = (util.isListCell(lastSel) || util.isComponent(lastSel)) && !lastSel.nextElementSibling ? lastSel.parentNode.nextElementSibling : lastSel.nextElementSibling;\n    var originRange = {\n      sc: range.startContainer,\n      so: range.startOffset,\n      ec: range.endContainer,\n      eo: range.endOffset\n    };\n    var isRemove = true;\n\n    var _loop = function _loop(i, len) {\n      if (!util.isList(util.getRangeFormatElement(selectedFormats[i], function (current) {\n        return this.getRangeFormatElement(current) && current !== selectedFormats[i];\n      }.bind(util)))) {\n        isRemove = false;\n        return \"break\";\n      }\n    };\n\n    for (var i = 0, len = selectedFormats.length; i < len; i++) {\n      var _ret = _loop(i, len);\n\n      if (_ret === \"break\") break;\n    }\n\n    if (isRemove && (!topEl || firstSel.tagName !== topEl.tagName || command !== topEl.tagName.toUpperCase()) && (!bottomEl || lastSel.tagName !== bottomEl.tagName || command !== bottomEl.tagName.toUpperCase())) {\n      if (detach) {\n        for (var _i = 0, _len = selectedFormats.length; _i < _len; _i++) {\n          for (var j = _i - 1; j >= 0; j--) {\n            if (selectedFormats[j].contains(selectedFormats[_i])) {\n              selectedFormats.splice(_i, 1);\n              _i--;\n              _len--;\n              break;\n            }\n          }\n        }\n      }\n\n      var currentFormat = util.getRangeFormatElement(firstSel);\n      var cancel = currentFormat && currentFormat.tagName === command;\n      var rangeArr, tempList;\n\n      var passComponent = function (current) {\n        return !this.isComponent(current);\n      }.bind(util);\n\n      if (!cancel) {\n        tempList = util.createElement(command);\n      }\n\n      for (var _i2 = 0, _len2 = selectedFormats.length, r, o; _i2 < _len2; _i2++) {\n        o = util.getRangeFormatElement(selectedFormats[_i2], passComponent);\n\n        if (!o || !util.isList(o)) {\n          continue;\n        }\n\n        if (!r) {\n          r = o;\n          rangeArr = {\n            r: r,\n            f: [util.getParentElement(selectedFormats[_i2], \"LI\")]\n          };\n        } else {\n          if (r !== o) {\n            if (detach && util.isListCell(o.parentNode)) {\n              this.plugins.list._detachNested.call(this, rangeArr.f);\n            } else {\n              this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, tempList, false, true);\n            }\n\n            o = selectedFormats[_i2].parentNode;\n\n            if (!cancel) {\n              tempList = util.createElement(command);\n            }\n\n            r = o;\n            rangeArr = {\n              r: r,\n              f: [util.getParentElement(selectedFormats[_i2], \"LI\")]\n            };\n          } else {\n            rangeArr.f.push(util.getParentElement(selectedFormats[_i2], \"LI\"));\n          }\n        }\n\n        if (_i2 === _len2 - 1) {\n          if (detach && util.isListCell(o.parentNode)) {\n            this.plugins.list._detachNested.call(this, rangeArr.f);\n          } else {\n            this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, tempList, false, true);\n          }\n        }\n      }\n    } else {\n      var topElParent = topEl ? topEl.parentNode : topEl;\n      var bottomElParent = bottomEl ? bottomEl.parentNode : bottomEl;\n      topEl = topElParent && !util.isWysiwygDiv(topElParent) && topElParent.nodeName === command ? topElParent : topEl;\n      bottomEl = bottomElParent && !util.isWysiwygDiv(bottomElParent) && bottomElParent.nodeName === command ? bottomElParent : bottomEl;\n      var mergeTop = topEl && topEl.tagName === command;\n      var mergeBottom = bottomEl && bottomEl.tagName === command;\n      var list = mergeTop ? topEl : util.createElement(command);\n      var firstList = null; // let lastList = null;\n\n      var topNumber = null; // let bottomNumber = null;\n\n      var _passComponent = function (current) {\n        return !this.isComponent(current) && !this.isList(current);\n      }.bind(util);\n\n      for (var _i3 = 0, _len3 = selectedFormats.length, newCell, fTag, isCell, next, originParent, nextParent, parentTag, siblingTag, rangeTag; _i3 < _len3; _i3++) {\n        fTag = selectedFormats[_i3];\n\n        if (fTag.childNodes.length === 0 && !util._isIgnoreNodeChange(fTag)) {\n          util.removeItem(fTag);\n          continue;\n        }\n\n        next = selectedFormats[_i3 + 1];\n        originParent = fTag.parentNode;\n        nextParent = next ? next.parentNode : null;\n        isCell = util.isListCell(fTag);\n        rangeTag = util.isRangeFormatElement(originParent) ? originParent : null;\n        parentTag = isCell && !util.isWysiwygDiv(originParent) ? originParent.parentNode : originParent;\n        siblingTag = isCell && !util.isWysiwygDiv(originParent) ? !next || util.isListCell(parentTag) ? originParent : originParent.nextSibling : fTag.nextSibling;\n        newCell = util.createElement(\"LI\");\n        util.copyFormatAttributes(newCell, fTag);\n\n        if (util.isComponent(fTag)) {\n          var isHR = /^HR$/i.test(fTag.nodeName);\n\n          if (!isHR) {\n            newCell.innerHTML = \"<br>\";\n          }\n\n          newCell.innerHTML += fTag.outerHTML;\n\n          if (isHR) {\n            newCell.innerHTML += \"<br>\";\n          }\n        } else {\n          var fChildren = fTag.childNodes;\n\n          while (fChildren[0]) {\n            newCell.appendChild(fChildren[0]);\n          }\n        }\n\n        list.appendChild(newCell); // if (!next) {\n        //   lastList = list;\n        // }\n\n        if (!next || parentTag !== nextParent || util.isRangeFormatElement(siblingTag)) {\n          if (!firstList) {\n            firstList = list;\n          }\n\n          if ((!mergeTop || !next || parentTag !== nextParent) && !(next && util.isList(nextParent) && nextParent === originParent)) {\n            if (list.parentNode !== parentTag) {\n              parentTag.insertBefore(list, siblingTag);\n            }\n          }\n        }\n\n        util.removeItem(fTag);\n\n        if (mergeTop && topNumber === null) {\n          topNumber = list.children.length - 1;\n        }\n\n        if (next && (util.getRangeFormatElement(nextParent, _passComponent) !== util.getRangeFormatElement(originParent, _passComponent) || util.isList(nextParent) && util.isList(originParent) && util.getElementDepth(nextParent) !== util.getElementDepth(originParent))) {\n          list = util.createElement(command);\n        }\n\n        if (rangeTag && rangeTag.children.length === 0) {\n          util.removeItem(rangeTag);\n        }\n      }\n\n      if (topNumber) {\n        firstList = firstList.children[topNumber];\n      }\n\n      if (mergeBottom) {\n        // bottomNumber = list.children.length - 1;\n        list.innerHTML += bottomEl.innerHTML; // lastList = list.children[bottomNumber];\n\n        util.removeItem(bottomEl);\n      }\n    }\n\n    this.effectNode = null;\n    return originRange;\n  },\n  _detachNested: function _detachNested(cells) {\n    var first = cells[0];\n    var last = cells[cells.length - 1];\n    var next = last.nextElementSibling;\n    var originList = first.parentNode;\n    var sibling = originList.parentNode.nextElementSibling;\n    var parentNode = originList.parentNode.parentNode;\n\n    for (var c = 0, cLen = cells.length; c < cLen; c++) {\n      parentNode.insertBefore(cells[c], sibling);\n    }\n\n    if (next && originList.children.length > 0) {\n      var newList = originList.cloneNode(false);\n      var children = originList.childNodes;\n      var index = this.util.getPositionIndex(next);\n\n      while (children[index]) {\n        newList.appendChild(children[index]);\n      }\n\n      last.appendChild(newList);\n    }\n\n    if (originList.children.length === 0) {\n      this.util.removeItem(originList);\n    }\n\n    this.util.mergeSameTags(parentNode);\n    var edge = this.util.getEdgeChildNodes(first, last);\n    return {\n      cc: first.parentNode,\n      sc: edge.sc,\n      ec: edge.ec\n    };\n  },\n  editInsideList: function editInsideList(remove, selectedCells) {\n    selectedCells = !selectedCells ? this.getSelectedElements().filter(function (el) {\n      return this.isListCell(el);\n    }.bind(this.util)) : selectedCells;\n    var cellsLen = selectedCells.length;\n\n    if (cellsLen === 0 || !remove && !this.util.isListCell(selectedCells[0].previousElementSibling) && !this.util.isListCell(selectedCells[cellsLen - 1].nextElementSibling)) {\n      return {\n        sc: selectedCells[0],\n        so: 0,\n        ec: selectedCells[cellsLen - 1],\n        eo: 1\n      };\n    }\n\n    var originList = selectedCells[0].parentNode;\n    var lastCell = selectedCells[cellsLen - 1];\n    var range = null;\n\n    if (remove) {\n      if (originList !== lastCell.parentNode && this.util.isList(lastCell.parentNode.parentNode) && lastCell.nextElementSibling) {\n        lastCell = lastCell.nextElementSibling;\n\n        while (lastCell) {\n          selectedCells.push(lastCell);\n          lastCell = lastCell.nextElementSibling;\n        }\n      }\n\n      range = this.plugins.list.editList.call(this, originList.nodeName.toUpperCase(), selectedCells, true);\n    } else {\n      var innerList = this.util.createElement(originList.nodeName);\n      var prev = selectedCells[0].previousElementSibling;\n      var next = lastCell.nextElementSibling;\n      var nodePath = {\n        s: null,\n        e: null,\n        sl: originList,\n        el: originList\n      };\n\n      for (var i = 0, len = cellsLen, c; i < len; i++) {\n        c = selectedCells[i];\n\n        if (c.parentNode !== originList) {\n          this.plugins.list._insiedList.call(this, originList, innerList, prev, next, nodePath);\n\n          originList = c.parentNode;\n          innerList = this.util.createElement(originList.nodeName);\n        }\n\n        prev = c.previousElementSibling;\n        next = c.nextElementSibling;\n        innerList.appendChild(c);\n      }\n\n      this.plugins.list._insiedList.call(this, originList, innerList, prev, next, nodePath);\n\n      var sc = this.util.getNodeFromPath(nodePath.s, nodePath.sl);\n      var ec = this.util.getNodeFromPath(nodePath.e, nodePath.el);\n      range = {\n        sc: sc,\n        so: 0,\n        ec: ec,\n        eo: ec.textContent.length\n      };\n    }\n\n    return range;\n  },\n  _insiedList: function _insiedList(originList, innerList, prev, next, nodePath) {\n    var insertPrev = false;\n\n    if (prev && innerList.tagName === prev.tagName) {\n      var children = innerList.children;\n\n      while (children[0]) {\n        prev.appendChild(children[0]);\n      }\n\n      innerList = prev;\n      insertPrev = true;\n    }\n\n    if (next && innerList.tagName === next.tagName) {\n      var _children = next.children;\n\n      while (_children[0]) {\n        innerList.appendChild(_children[0]);\n      }\n\n      var temp = next.nextElementSibling;\n      next.parentNode.removeChild(next);\n      next = temp;\n    }\n\n    if (!insertPrev) {\n      if (this.util.isListCell(prev)) {\n        originList = prev;\n        next = null;\n      }\n\n      originList.insertBefore(innerList, next);\n\n      if (!nodePath.s) {\n        nodePath.s = this.util.getNodePath(innerList.firstElementChild.firstChild, originList, null);\n        nodePath.sl = originList;\n      }\n\n      var slPath = originList.contains(nodePath.sl) ? this.util.getNodePath(nodePath.sl, originList) : null;\n      nodePath.e = this.util.getNodePath(innerList.lastElementChild.firstChild, originList, null);\n      nodePath.el = originList;\n      this.util.mergeSameTags(originList, [nodePath.s, nodePath.e, slPath], false);\n      this.util.mergeNestedTags(originList);\n\n      if (slPath) {\n        nodePath.sl = this.util.getNodeFromPath(slPath, originList);\n      }\n    }\n\n    return innerList;\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var command = \"\";\n\n    while (!command && !/^UL$/i.test(target.tagName)) {\n      command = target.getAttribute(\"data-command\");\n      target = target.parentNode;\n    }\n\n    if (!command) {\n      return;\n    }\n\n    var range = this.plugins.list.editList.call(this, command, null, false);\n\n    if (range) {\n      this.setRange(range.sc, range.so, range.ec, range.eo);\n    }\n\n    this.submenuOff(); // history stack\n\n    this.history.push(false);\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\r\n * Rich Text Editor\r\n *\r\n * kothing-ditor.js\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\nvar _default = {\n  redo: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2-29.4-29.4-52.5-63.6-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5c-16.1 38.1-39.2 72.3-68.6 101.7-9.3 9.3-19.1 18-29.3 26L668.2 724c-4.1-5.3-12.5-3.5-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 0.8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z\" /></svg>',\n  undo: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-0.3 13 6.3 12.9l167-0.8c5.2 0 9-4.9 7.7-9.9L369.8 727c-1.6-6.5-10-8.3-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26-29.4-29.4-52.5-63.6-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5c-16.1 38.1-39.2 72.3-68.6 101.7-7.5 7.5-15.3 14.5-23.4 21.2-3.4 2.8-3.9 7.7-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z\" /></svg>',\n  bold: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M697.8 481.4c33.6-35 54.2-82.3 54.2-134.3v-10.2C752 229.3 663.9 142 555.3 142H259.4c-15.1 0-27.4 12.3-27.4 27.4v679.1c0 16.3 13.2 29.5 29.5 29.5h318.7c117 0 211.8-94.2 211.8-210.5v-11c0-73-37.4-137.3-94.2-175.1zM328 238h224.7c57.1 0 103.3 44.4 103.3 99.3v9.5c0 54.8-46.3 99.3-103.3 99.3H328V238z m366.6 429.4c0 62.9-51.7 113.9-115.5 113.9H328V542.7h251.1c63.8 0 115.5 51 115.5 113.9v10.8z\" /></svg>',\n  underline: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M824 804H200c-4.4 0-8 3.4-8 7.6v60.8c0 4.2 3.6 7.6 8 7.6h624c4.4 0 8-3.4 8-7.6v-60.8c0-4.2-3.6-7.6-8-7.6zM512 728c69.4 0 134.6-27.1 183.8-76.2C745 602.7 772 537.4 772 468V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 97-79 176-176 176s-176-79-176-176V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 69.4 27.1 134.6 76.2 183.8C377.3 701 442.6 728 512 728z\" /></svg>',\n  italic: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M798 160H366c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h181.2l-156 544H229c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8H474.4l156-544H798c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z\" /></svg>',\n  strike: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M952 474H569.9c-10-2-20.5-4-31.6-6-15.9-2.9-22.2-4.1-30.8-5.8-51.3-10-82.2-20-106.8-34.2-35.1-20.5-52.2-48.3-52.2-85.1 0-37 15.2-67.7 44-89 28.4-21 68.8-32.1 116.8-32.1 54.8 0 97.1 14.4 125.8 42.8 14.6 14.4 25.3 32.1 31.8 52.6 1.3 4.1 2.8 10 4.3 17.8 0.9 4.8 5.2 8.2 9.9 8.2h72.8c5.6 0 10.1-4.6 10.1-10.1v-1c-0.7-6.8-1.3-12.1-2-16-7.3-43.5-28-81.7-59.7-110.3-44.4-40.5-109.7-61.8-188.7-61.8-72.3 0-137.4 18.1-183.3 50.9-25.6 18.4-45.4 41.2-58.6 67.7-13.5 27.1-20.3 58.4-20.3 92.9 0 29.5 5.7 54.5 17.3 76.5 8.3 15.7 19.6 29.5 34.1 42H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h433.2c2.1 0.4 3.9 0.8 5.9 1.2 30.9 6.2 49.5 10.4 66.6 15.2 23 6.5 40.6 13.3 55.2 21.5 35.8 20.2 53.3 49.2 53.3 89 0 35.3-15.5 66.8-43.6 88.8-30.5 23.9-75.6 36.4-130.5 36.4-43.7 0-80.7-8.5-110.2-25-29.1-16.3-49.1-39.8-59.7-69.5-0.8-2.2-1.7-5.2-2.7-9-1.2-4.4-5.3-7.5-9.7-7.5h-79.7c-5.6 0-10.1 4.6-10.1 10.1v1c0.2 2.3 0.4 4.2 0.6 5.7 6.5 48.8 30.3 88.8 70.7 118.8 47.1 34.8 113.4 53.2 191.8 53.2 84.2 0 154.8-19.8 204.2-57.3 25-18.9 44.2-42.2 57.1-69 13-27.1 19.7-57.9 19.7-91.5 0-31.8-5.8-58.4-17.8-81.4-5.8-11.2-13.1-21.5-21.8-30.8H952c4.4 0 8-3.6 8-8v-60c0-4.3-3.6-7.9-8-7.9z\" /></svg>',\n  subscript: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M359.936 529.8688l195.4816-195.5328a40.96 40.96 0 1 1 57.9584 57.9584L417.792 587.776l195.5328 195.4816a40.96 40.96 0 1 1-57.9584 57.9584L359.936 645.632l-195.4816 195.584a40.96 40.96 0 1 1-57.9584-57.9584L302.08 587.776 106.496 392.2944A40.96 40.96 0 1 1 164.4544 334.336l195.4816 195.584z m417.1264 400.8448h130.5088c13.0048 0 22.8864 2.56 29.696 7.7824a25.088 25.088 0 0 1 10.2912 21.1456 27.648 27.648 0 0 1-8.1408 20.1216c-5.376 5.5296-13.6192 8.2944-24.576 8.2944h-184.0128c-12.544 0-22.272-3.3792-29.2864-10.0864a31.7952 31.7952 0 0 1-10.496-23.7056c0-5.8368 2.2528-13.568 6.7584-23.1936a82.944 82.944 0 0 1 14.7456-22.7328c22.1696-22.3232 42.1888-41.472 60.0064-57.4464 17.8176-15.9744 30.5664-26.4704 38.2464-31.488 13.6704-9.3696 25.088-18.8416 34.1504-28.3136 9.0624-9.472 15.9744-19.2 20.736-29.184 4.7616-9.9328 7.1168-19.6608 7.1168-29.184a51.6096 51.6096 0 0 0-28.3648-46.9504 61.2864 61.2864 0 0 0-28.672-6.8096c-21.8112 0-38.9632 9.3184-51.456 27.9552a119.3984 119.3984 0 0 0-8.3968 19.968 82.3808 82.3808 0 0 1-13.2096 24.9856c-4.9152 5.8368-12.1344 8.704-21.6576 8.704a28.5696 28.5696 0 0 1-20.736-7.9872 29.0816 29.0816 0 0 1-8.2432-21.8624c0-11.1616 2.56-22.8352 7.7312-34.9696 5.1712-12.1856 12.9024-23.1936 23.1424-33.0752s23.2448-17.8688 39.0144-23.9104a153.4976 153.4976 0 0 1 55.3472-9.1136c25.4976 0 47.2576 3.8912 65.2288 11.6736a98.0992 98.0992 0 0 1 51.4048 52.8384 101.5808 101.5808 0 0 1-7.9872 91.8528c-10.24 16.384-20.736 29.2864-31.3856 38.6048-10.6496 9.3184-28.5696 23.9616-53.6576 43.8784-25.088 19.968-42.2912 35.3792-51.6096 46.3872a138.3936 138.3936 0 0 0-12.288 15.8208z\"></path></svg>',\n  superscript: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M802.6624 444.3136h130.5088c13.0048 0 22.8864 2.56 29.696 7.7824a25.088 25.088 0 0 1 10.2912 21.1456 27.648 27.648 0 0 1-8.1408 20.1216c-5.376 5.5296-13.6192 8.2944-24.576 8.2944h-184.0128c-12.544 0-22.272-3.3792-29.2864-10.0864a31.7952 31.7952 0 0 1-10.496-23.7056c0-5.8368 2.2528-13.568 6.7584-23.1936a82.944 82.944 0 0 1 14.7456-22.7328c22.1696-22.3232 42.1888-41.472 60.0064-57.4464 17.8176-15.9744 30.5664-26.4704 38.2464-31.488 13.6704-9.3696 25.088-18.8416 34.1504-28.3136 9.0624-9.472 15.9744-19.2 20.736-29.184 4.7616-9.9328 7.1168-19.6608 7.1168-29.184a51.6096 51.6096 0 0 0-28.3648-46.9504 61.2864 61.2864 0 0 0-28.672-6.8096c-21.8112 0-38.9632 9.3184-51.456 27.9552a119.3984 119.3984 0 0 0-8.3968 19.968 82.3808 82.3808 0 0 1-13.2096 24.9856c-4.9152 5.8368-12.1344 8.704-21.6576 8.704a28.5696 28.5696 0 0 1-20.736-7.9872 29.0816 29.0816 0 0 1-8.2432-21.8624c0-11.1616 2.56-22.8352 7.7312-34.9696 5.1712-12.1856 12.9024-23.1936 23.1424-33.0752s23.2448-17.8688 39.0144-23.9104a153.4976 153.4976 0 0 1 55.3472-9.1136c25.4976 0 47.2576 3.8912 65.2288 11.6736a98.0992 98.0992 0 0 1 51.4048 52.8384 101.5808 101.5808 0 0 1-7.9872 91.8528c-10.24 16.384-20.736 29.2864-31.3856 38.6048-10.6496 9.3184-28.5696 23.9616-53.6576 43.8784-25.088 19.968-42.2912 35.3792-51.6096 46.3872a138.3936 138.3936 0 0 0-12.288 15.8208zM359.936 529.8688l195.4816-195.5328a40.96 40.96 0 1 1 57.9584 57.9584L417.792 587.776l195.5328 195.4816a40.96 40.96 0 1 1-57.9584 57.9584L359.936 645.632l-195.4816 195.584a40.96 40.96 0 1 1-57.9584-57.9584L302.08 587.776 106.496 392.2944A40.96 40.96 0 1 1 164.4544 334.336l195.4816 195.584z\"></path></svg>',\n  erase: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M651.229 199.033c-6.769-6.77-17.845-6.77-24.615 0L74.612 751.036c-6.769 6.768-6.769 17.845 0 24.614l107.36 107.361c6.77 6.769 20.14 12.307 29.713 12.307H555.62c9.572 0 22.944-5.538 29.712-12.307l362.63-362.628c6.77-6.769 6.77-17.845 0-24.615L651.23 199.033zM551.187 817.522c-6.769 6.768-20.14 12.307-29.712 12.307H255.194c-9.573 0-22.944-5.539-29.712-12.307l-50.61-50.61c-6.769-6.769-6.769-17.845 0-24.615l202.36-202.361c6.77-6.768 17.846-6.768 24.616 0l201.155 201.156c6.769 6.768 6.769 17.845 0 24.614l-51.816 51.816z\" /></svg>',\n  indent: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519c4.5-3.5 4.5-10.3 0-13.9L142.4 381.9c-5.8-4.6-14.4-0.5-14.4 6.9v246.3c0 7.4 8.5 11.6 14.4 7z\" /></svg>',\n  outdent: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4 0.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1c-4.5 3.5-4.5 10.3 0 13.8z\" /></svg>',\n  expansion: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM920 664h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z\" /></svg>',\n  reduction: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zM342 88h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zM920 664H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM920 280H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z\" /></svg>',\n  code_view: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M438.4 849.1l222.7-646.7c0.2-0.5 0.3-1.1 0.4-1.6L438.4 849.1zM661.2 168.7h-67.5c-3.4 0-6.5 2.2-7.6 5.4L354.7 846c-0.3 0.8-0.4 1.7-0.4 2.6 0 4.4 3.6 8 8 8h67.8c3.4 0 6.5-2.2 7.6-5.4l0.7-2.1 223.1-648.3 7.4-21.4c0.3-0.8 0.4-1.7 0.4-2.6-0.1-4.5-3.6-8.1-8.1-8.1zM954.6 502.1c-0.8-1-1.7-1.9-2.7-2.7l-219-171.3c-3.5-2.7-8.5-2.1-11.2 1.4-1.1 1.4-1.7 3.1-1.7 4.9v81.3c0 2.5 1.1 4.8 3.1 6.3l115 90-115 90c-1.9 1.5-3.1 3.8-3.1 6.3v81.3c0 4.4 3.6 8 8 8 1.8 0 3.5-0.6 4.9-1.7l219-171.3c6.9-5.4 8.2-15.5 2.7-22.5zM291.1 328.1l-219 171.3c-1 0.8-1.9 1.7-2.7 2.7-5.4 7-4.2 17 2.7 22.5l219 171.3c1.4 1.1 3.1 1.7 4.9 1.7 4.4 0 8-3.6 8-8v-81.3c0-2.5-1.1-4.8-3.1-6.3l-115-90 115-90c1.9-1.5 3.1-3.8 3.1-6.3v-81.3c0-1.8-0.6-3.5-1.7-4.9-2.7-3.5-7.7-4.1-11.2-1.4z\" /></svg>',\n  preview: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M646.656 284.672c0-19.968-19.456-35.84-43.52-35.84H243.712c-24.064 0-43.52 15.872-43.52 35.84 0 19.968 19.456 35.84 43.52 35.84h358.912c24.576 0 43.52-15.36 44.032-35.84zM404.48 466.432c0-19.968-19.456-35.84-43.52-35.84H243.712c-24.064 0-43.52 15.872-43.52 35.84 0 19.968 19.456 35.84 43.52 35.84h117.248c24.576 0 43.52-15.36 43.52-35.84zM318.976 641.536H243.712c-24.064 0-43.52 15.872-43.52 35.84 0 19.968 19.456 35.84 43.52 35.84h74.752c24.576 0 43.52-15.872 43.52-35.84 0.512-19.968-18.944-35.84-43.008-35.84zM942.08 908.288l-112.64-111.616c48.128-47.104 78.336-112.128 78.336-184.32 0-142.336-116.736-258.048-260.096-258.048-143.36 0-260.096 115.712-260.096 258.048S504.32 870.4 647.68 870.4c37.376 0 72.704-8.192 104.448-22.016L877.568 972.8c9.216 8.704 20.48 12.8 32.256 12.8 11.776 0 23.04-4.096 31.744-12.8a46.592 46.592 0 0 0 0.512-64.512z m-294.4-117.248c-99.328 0-180.224-80.384-180.224-178.688s80.896-178.688 180.224-178.688 180.224 80.384 180.224 178.688-80.896 178.688-180.224 178.688zM140.288 812.544V141.824c0-17.408 14.336-31.744 31.744-31.744h539.136c17.408 0 31.744 14.336 31.744 31.744V353.28h71.68V141.824c0-56.832-46.08-103.424-103.424-103.424H172.032c-56.832 0-103.424 46.08-103.424 103.424v670.72c0 56.832 46.08 103.424 103.424 103.424h335.36v-71.68H172.032c-17.408 0-31.744-14.336-31.744-31.744z\"></path></svg>',\n  print: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zM852 332H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180z m304 664H360V568h304v276z m200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z\" /></svg>',\n  template: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M410.055 157.468h198.201c22.983 0 42.325-22.983 42.325-49.607s-19.342-49.607-43.463-49.607h-196.95c-24.234 0-43.576 22.983-43.576 49.607s19.342 49.607 43.463 49.607z m310.727 484.125H295.253c-15.701 0-29.013 13.312-29.013 29.013s13.312 29.014 29.013 29.014H721.92c15.701 0 29.013-13.312 29.013-29.014-1.137-16.839-14.45-29.013-30.15-29.013z m0-170.667H295.253c-15.701 0-29.013 13.312-29.013 29.014s13.312 29.013 29.013 29.013H721.92c15.701 0 29.013-13.312 29.013-29.013-1.137-16.84-14.45-29.014-30.15-29.014zM266.24 342.7c0 15.701 13.312 29.013 29.013 29.013H721.92c15.701 0 29.013-13.312 29.013-29.013s-13.312-29.014-29.013-29.014H295.253c-15.701-0.113-29.013 13.199-29.013 29.014zM821.02 86.016h-56.775c-15.701 0-33.905 9.671-33.905 25.372s18.09 31.517 33.905 31.517h56.775c33.792 0 56.776 22.983 56.776 56.889v654.79c0 33.907-22.984 56.89-56.776 56.89H209.465c-33.906 0-71.339-22.983-71.339-56.89v-654.79c0-33.906 22.983-56.89 56.775-56.89h71.339c15.701 0 21.732-15.7 21.732-31.516s-6.03-25.372-21.732-25.372h-71.339c-79.758 0-113.664 49.607-113.664 115.03v647.622c0 70.201 42.326 119.808 119.695 119.808H814.99c77.37 0 119.694-41.187 119.694-119.808V201.045c0-65.422-39.936-115.029-113.664-115.029z\"></path></svg>',\n  line_height: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M657.067 136.533H76.8c-4.693 0-8.533 3.84-8.533 8.534V281.6c0 4.693 3.84 8.533 8.533 8.533h59.733c4.694 0 8.534-3.84 8.534-8.533v-68.267h179.2v597.334h-98.134c-4.693 0-8.533 3.84-8.533 8.533v59.733c0 4.694 3.84 8.534 8.533 8.534h281.6c4.694 0 8.534-3.84 8.534-8.534V819.2c0-4.693-3.84-8.533-8.534-8.533H409.6V213.333h179.2V281.6c0 4.693 3.84 8.533 8.533 8.533h59.734c4.693 0 8.533-3.84 8.533-8.533V145.067c0-4.694-3.84-8.534-8.533-8.534z m290.986 582.4h-69.12V305.067h69.12c6.4 0 10.027-7.467 6.08-12.48L846.613 156.48c-3.093-3.947-9.066-3.947-12.053 0L727.04 292.587c-3.947 5.013-0.427 12.48 6.08 12.48h69.013v413.866h-69.12c-6.4 0-10.026 7.467-6.08 12.48l107.52 136c3.094 3.947 9.067 3.947 12.054 0l107.52-136c4.053-5.013 0.426-12.48-5.974-12.48z\" /></svg>',\n  paragraph_style: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M512 256v640h-85.333333v-213.333333a256 256 0 1 1 0-512h426.666666v85.333333h-128v640h-85.333333V256h-128z m-85.333333 0a170.666667 170.666667 0 1 0 0 341.333333V256z\"></path></svg>',\n  text_style: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M890.592 729.19V296.255a115.329 115.329 0 1 0-140.099-163.93H268.452A115.257 115.257 0 1 0 135.213 298.42v428.602A115.293 115.293 0 1 0 270.98 888.426h476.987A115.293 115.293 0 1 0 890.592 729.19z m-39.719-590.727a49.468 49.468 0 1 1-49.467 49.468 49.324 49.324 0 0 1 49.467-49.468zM117.881 187.93a49.468 49.468 0 1 1 49.468 49.468 49.54 49.54 0 0 1-49.468-49.468z m49.468 698.69a49.468 49.468 0 1 1 49.468-49.469 49.324 49.324 0 0 1-49.468 49.468z m569.423-64.634h-454.96a115.834 115.834 0 0 0-80.882-94.964V298.06a114.896 114.896 0 0 0 80.882-99.297h454.6a115.076 115.076 0 0 0 87.742 101.464v424.99a114.787 114.787 0 0 0-87.382 96.77z m114.101 64.633a49.468 49.468 0 1 1 49.468-49.468 49.324 49.324 0 0 1-49.468 49.468zM539.262 283.256a4.983 4.983 0 0 1-1.084-1.444 33.544 33.544 0 0 0-17.332-21.665 32.822 32.822 0 0 0-44.051 15.526L274.95 695.61a32.822 32.822 0 0 0 15.526 44.052 33.725 33.725 0 0 0 14.444 3.25 33.292 33.292 0 0 0 29.97-18.777l64.272-133.6h211.592a10.58 10.58 0 0 0 3.25-0.721l67.883 141.543a33.292 33.292 0 0 0 29.97 18.776 34.953 34.953 0 0 0 14.443-3.25 32.93 32.93 0 0 0 15.526-44.051zM430.576 524.818l75.466-157.43 75.466 157.43z\" /></svg>',\n  save: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z\" /></svg>',\n  blockquote: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 475.082 475.081\"><g><path d=\"M164.45,219.27h-63.954c-7.614,0-14.087-2.664-19.417-7.994c-5.327-5.33-7.994-11.801-7.994-19.417v-9.132c0-20.177,7.139-37.401,21.416-51.678c14.276-14.272,31.503-21.411,51.678-21.411h18.271c4.948,0,9.229-1.809,12.847-5.424c3.616-3.617,5.424-7.898,5.424-12.847V54.819c0-4.948-1.809-9.233-5.424-12.85c-3.617-3.612-7.898-5.424-12.847-5.424h-18.271c-19.797,0-38.684,3.858-56.673,11.563c-17.987,7.71-33.545,18.132-46.68,31.267c-13.134,13.129-23.553,28.688-31.262,46.677C3.855,144.039,0,162.931,0,182.726v200.991c0,15.235,5.327,28.171,15.986,38.834c10.66,10.657,23.606,15.985,38.832,15.985h109.639c15.225,0,28.167-5.328,38.828-15.985c10.657-10.663,15.987-23.599,15.987-38.834V274.088c0-15.232-5.33-28.168-15.994-38.832C192.622,224.6,179.675,219.27,164.45,219.27z\"/><path d=\"M459.103,235.256c-10.656-10.656-23.599-15.986-38.828-15.986h-63.953c-7.61,0-14.089-2.664-19.41-7.994c-5.332-5.33-7.994-11.801-7.994-19.417v-9.132c0-20.177,7.139-37.401,21.409-51.678c14.271-14.272,31.497-21.411,51.682-21.411h18.267c4.949,0,9.233-1.809,12.848-5.424c3.613-3.617,5.428-7.898,5.428-12.847V54.819c0-4.948-1.814-9.233-5.428-12.85c-3.614-3.612-7.898-5.424-12.848-5.424h-18.267c-19.808,0-38.691,3.858-56.685,11.563c-17.984,7.71-33.537,18.132-46.672,31.267c-13.135,13.129-23.559,28.688-31.265,46.677c-7.707,17.987-11.567,36.879-11.567,56.674v200.991c0,15.235,5.332,28.171,15.988,38.834c10.657,10.657,23.6,15.985,38.828,15.985h109.633c15.229,0,28.171-5.328,38.827-15.985c10.664-10.663,15.985-23.599,15.985-38.834V274.088C475.082,258.855,469.76,245.92,459.103,235.256z\"/></g></svg>',\n  arrow_down: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 15.73 8.67\"><g><path d=\"M18.79,7.52a.8.8,0,0,1,.56-.23.82.82,0,0,1,.79.79.8.8,0,0,1-.23.56l-7.07,7.07a.79.79,0,0,1-.57.25.77.77,0,0,1-.57-.25h0L4.64,8.65a.8.8,0,0,1-.23-.57.82.82,0,0,1,.79-.79.8.8,0,0,1,.56.23L12.28,14l3.26-3.26,3.25-3.26Z\" transform=\"translate(-4.41 -7.29)\"/></g></svg>',\n  align_justify: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M163.84 204.8h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24V215.04c0-5.632 4.608-10.24 10.24-10.24z m0 585.728h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24v-59.392c0-5.632 4.608-10.24 10.24-10.24z m0-390.5024h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24v-59.392c0-5.632 4.608-10.24 10.24-10.24z m0 195.2768h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24v-59.392c0-5.632 4.608-10.24 10.24-10.24z\"></path></svg>',\n  align_left: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" /></svg>',\n  align_right: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" /></svg>',\n  align_center: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" /></svg>',\n  font: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M170.464 313.527l-25.094 0 3.812-177.812 717.765 0 3.812 177.812-23.453 0c-8.359-48.719-19.812-83.906-34.359-105.547-14.547-21.625-30.188-34.906-46.906-39.812s-45.266-7.359-85.625-7.359L561.526 160.809l0 521.953c0 57.812 1.359 95.812 4.078 114s10.094 31.641 22.094 40.359 34.531 13.078 67.625 13.078l36 0 0 25.094L322.636 875.293l0-25.094 38.172 0c31.625 0 53.531-4 65.719-12s20-20.453 23.453-37.359 5.188-56.266 5.188-118.078L455.168 160.808 345.542 160.808c-47.641 0-79.641 2.281-96 6.812-16.375 4.547-31.734 18.281-46.094 41.188S178.089 266.621 170.464 313.527z\"></path></svg>',\n  font_size: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z\"></path></svg>',\n  font_color: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zM253.7 736h85c4.2 0 8-2.7 9.3-6.8l53.7-166h219.2l53.2 166c1.3 4 5 6.8 9.3 6.8h89.1c1.1 0 2.2-0.2 3.2-0.5 5.1-1.8 7.8-7.3 6-12.4L573.6 118.6c-1.4-3.9-5.1-6.6-9.2-6.6H462.1c-4.2 0-7.9 2.6-9.2 6.6L244.5 723.1c-0.4 1-0.5 2.1-0.5 3.2-0.1 5.3 4.3 9.7 9.7 9.7z m255.9-516.1h4.1l83.8 263.8H424.9l84.7-263.8z\" /></svg>',\n  format_block: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M725.333333 469.333333V170.666667h85.333334v725.333333h-85.333334v-341.333333H298.666667v341.333333H213.333333V170.666667h85.333334v298.666666z\"></path></svg>',\n  highlight_color: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zM389.3 700.2c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-0.6-0.6-1.3-1.2-2-1.7l-78.2-78.2c-3.5-3.5-9.3-3.5-12.8 0l-48 48c-3.5 3.5-3.5 9.3 0 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256z m12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z\" /></svg>',\n  list_bullets: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM912 476H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM912 760H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM160 228m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0ZM160 512m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0ZM160 796m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z\" /></svg>',\n  list_number: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M978.285714 795.428571H310.857143c-5.028571 0-9.142857 4.114286-9.142857 9.142858v64c0 5.028571 4.114286 9.142857 9.142857 9.142857h667.428571c5.028571 0 9.142857-4.114286 9.142857-9.142857v-64c0-5.028571-4.114286-9.142857-9.142857-9.142858z m0-649.142857H310.857143c-5.028571 0-9.142857 4.114286-9.142857 9.142857v64c0 5.028571 4.114286 9.142857 9.142857 9.142858h667.428571c5.028571 0 9.142857-4.114286 9.142857-9.142858v-64c0-5.028571-4.114286-9.142857-9.142857-9.142857z m0 324.571429H310.857143c-5.028571 0-9.142857 4.114286-9.142857 9.142857v64c0 5.028571 4.114286 9.142857 9.142857 9.142857h667.428571c5.028571 0 9.142857-4.114286 9.142857-9.142857v-64c0-5.028571-4.114286-9.142857-9.142857-9.142857zM173.714286 740.571429H41.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571428v38.857143c0 2.514286 2.057143 4.571429 4.571428 4.571429h82.742857v23.428571h-40.8c-2.514286 0-4.571429 2.057143-4.571428 4.571429v38.857142c0 2.514286 2.057143 4.571429 4.571428 4.571429h40.8V884.571429H41.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571428v38.857143c0 2.514286 2.057143 4.571429 4.571428 4.571429h132.571429c2.514286 0 4.571429-2.057143 4.571428-4.571429V745.142857c0-2.514286-2.057143-4.571429-4.571428-4.571428zM41.142857 141.714286h43.428572v137.142857c0 2.514286 2.057143 4.571429 4.571428 4.571428h45.714286c2.514286 0 4.571429-2.057143 4.571428-4.571428V100.571429c0-5.028571-4.114286-9.142857-9.142857-9.142858h-89.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571429v41.142857c0 2.514286 2.057143 4.571429 4.571428 4.571429z m132.571429 274.285714H41.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571429v41.142857c0 2.514286 2.057143 4.571429 4.571428 4.571428h78.171429l-80.342857 88.8a9.485714 9.485714 0 0 0-2.4 6.171429V603.428571c0 2.514286 2.057143 4.571429 4.571428 4.571429h132.571429c2.514286 0 4.571429-2.057143 4.571428-4.571429v-41.142857c0-2.514286-2.057143-4.571429-4.571428-4.571428h-78.171429l80.342857-88.8a9.485714 9.485714 0 0 0 2.4-6.171429V420.571429c0-2.514286-2.057143-4.571429-4.571428-4.571429z\" /></svg>',\n  table: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M513.7 120.1h385.5c44.3 0 59.5 15 59.5 59 0 221.1 0 442.3-0.1 663.4 0 44.6-14.8 59.6-58.8 59.6-259.2 0.1-518.5 0.1-777.7 0-41 0-57.1-15.7-57.1-56.8-0.2-223.4-0.2-446.8 0-670.1 0-39.6 16.2-55 56.5-55.1 130.7-0.1 261.4 0 392.2 0zM345.3 693.2h-222v150.7h222V693.2z m277 151.6V693.9H401.5v150.9h220.8z m55.9-1.2h222.2V693.5H678.2v150.1zM123.6 490.9v149.4h221V490.9h-221zM678 642.3c72.4 0 142.3 0.2 212.2-0.5 3.8 0 10.7-6.6 10.7-10.3 0.7-46.7 0.5-93.3 0.5-139.8H677.9c0.1 50.4 0.1 98.7 0.1 150.6z m-277.5-1.8h222.1V491.6H400.5v148.9z m-55.7-200.9V289.4H121.9c0 46.8-0.5 91.5 0.6 136.1 0.1 4.8 9.2 13.4 14.2 13.5 68.6 0.9 137.3 0.6 208.1 0.6z m56.3-2.1h221V288.8h-221v148.7z m498.8 0.7V288.7H678.5v149.5h221.4z\"></path></svg>',\n  horizontal_rule: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 15.74 2.24\"><g><path d=\"M20.15,12.75V10.51H4.41v2.24H20.15Z\" transform=\"translate(-4.41 -10.51)\"/></g></svg>',\n  show_blocks: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M848 160.7c8.7 0 16 7.3 16 16v140c0 8.7-7.3 16-16 16H179.5c-8.7 0-16-7.3-16-16v-140c0-8.7 7.3-16 16-16H848m0-64H179.5c-44 0-80 36-80 80v140c0 44 36 80 80 80H848c44 0 80-36 80-80v-140c0-44-36-80-80-80zM344.9 516.1c8.7 0 16 7.3 16 16V846c0 8.7-7.3 16-16 16H179.5c-8.7 0-16-7.3-16-16V532.1c0-8.7 7.3-16 16-16h165.4m0-64H179.5c-44 0-80 36-80 80V846c0 44 36 80 80 80h165.4c44 0 80-36 80-80V532.1c0-44-36-80-80-80zM848 516.1c8.7 0 16 7.3 16 16V846c0 8.7-7.3 16-16 16H596.1c-8.7 0-16-7.3-16-16V532.1c0-8.7 7.3-16 16-16H848m0-64H596.1c-44 0-80 36-80 80V846c0 44 36 80 80 80H848c44 0 80-36 80-80V532.1c0-44-36-80-80-80z\"></path></svg>',\n  cancel: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 15.74 15.74\"><g><path d=\"M14.15,11.63l5.61,5.61a1.29,1.29,0,0,1,.38.93,1.27,1.27,0,0,1-.4.93,1.25,1.25,0,0,1-.92.4,1.31,1.31,0,0,1-.94-.4l-5.61-5.61L6.67,19.1a1.31,1.31,0,0,1-.94.4,1.24,1.24,0,0,1-.92-.4,1.27,1.27,0,0,1-.4-.93,1.33,1.33,0,0,1,.38-.93l5.61-5.63L4.79,6a1.26,1.26,0,0,1-.38-.93,1.22,1.22,0,0,1,.4-.92,1.28,1.28,0,0,1,.92-.39,1.38,1.38,0,0,1,.94.38l5.61,5.61,5.61-5.61a1.33,1.33,0,0,1,.94-.38,1.26,1.26,0,0,1,.92.39,1.24,1.24,0,0,1,.4.92,1.29,1.29,0,0,1-.39.93L17,8.81l-2.8,2.82Z\" transform=\"translate(-4.41 -3.76)\"/></g></svg>',\n  image: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z\" /></svg>',\n  audio: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168z m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z\" /></svg>',\n  video: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560z m176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z\" /></svg>',\n  link: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z\" /></svg>',\n  unlink: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.74 15.72\"><g><path d=\"M13.05,13.63a.24.24,0,0,1,.15.22L13.42,16a.19.19,0,0,1-.08.18l-2.12,2.14a4.08,4.08,0,0,1-1.29.85A4,4,0,0,1,4.71,17a3.92,3.92,0,0,1-.3-1.52A4,4,0,0,1,4.71,14a3.91,3.91,0,0,1,.87-1.3L7.7,10.56a.25.25,0,0,1,.2-.06l2.17.22a.21.21,0,0,1,.19.15.24.24,0,0,1,0,.25L7.12,14.23a1.81,1.81,0,0,0,0,2.58,1.78,1.78,0,0,0,1.29.52,1.74,1.74,0,0,0,1.28-.52L12.8,13.7a.24.24,0,0,1,.25-.07ZM19,4.92a4,4,0,0,1,0,5.66L16.86,12.7a.25.25,0,0,1-.17.08l-2.2-.23a.21.21,0,0,1-.19-.15.22.22,0,0,1,0-.25L17.44,9a1.81,1.81,0,0,0,0-2.58,1.78,1.78,0,0,0-1.29-.52,1.74,1.74,0,0,0-1.28.52L11.76,9.57a.21.21,0,0,1-.25,0,.24.24,0,0,1-.16-.21l-.22-2.17a.19.19,0,0,1,.08-.18l2.12-2.14a4.08,4.08,0,0,1,1.29-.85,4.05,4.05,0,0,1,3.06,0,3.85,3.85,0,0,1,1.3.85ZM5.84,9.82a.25.25,0,0,1-.18-.08.19.19,0,0,1-.07-.19l.11-.77a.2.2,0,0,1,.11-.17.24.24,0,0,1,.2,0l2.5.72a.25.25,0,0,1,.15.27.22.22,0,0,1-.23.21l-2.59,0Zm4.12-2-.73-2.5a.27.27,0,0,1,0-.2A.21.21,0,0,1,9.41,5L10.19,5a.25.25,0,0,1,.19,0,.23.23,0,0,1,.08.18l-.05,2.61a.2.2,0,0,1-.19.23h0A.22.22,0,0,1,10,7.85Zm8.76,5.58a.25.25,0,0,1,.18.08.23.23,0,0,1,.06.2l-.11.77a.25.25,0,0,1-.11.17.21.21,0,0,1-.12,0l-.08,0L16,14a.25.25,0,0,1-.15-.27.22.22,0,0,1,.22-.21l1.29,0,1.33,0Zm-4.12,2,.74,2.51a.28.28,0,0,1,0,.2.23.23,0,0,1-.18.11l-.8.11a.23.23,0,0,1-.17-.07.25.25,0,0,1-.08-.18l0-2.61a.22.22,0,0,1,.22-.22.21.21,0,0,1,.26.15Z\" transform=\"translate(-4.41 -3.77)\"/></g></svg>',\n  math: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 1024 1024\"><path d=\"M643.015111 128c9.557333 0 18.773333 3.811556 25.486222 10.581333l0.398223 0.398223 88.974222 91.989333a36.010667 36.010667 0 0 1-51.313778 50.460444l-0.455111-0.398222-78.392889-81.009778H167.025778l196.835555 293.432889a36.010667 36.010667 0 0 1 0.227556 39.822222l-0.284445 0.455112-196.892444 290.247111h460.8l78.392889-81.009778a36.010667 36.010667 0 0 1 50.517333-1.251556l0.398222 0.398223c14.165333 13.653333 14.677333 36.181333 1.251556 50.460444l-0.398222 0.455111-88.974222 91.989333a36.010667 36.010667 0 0 1-25.372445 10.979556H98.986667a36.010667 36.010667 0 0 1-30.264889-55.466667l0.512-0.739555 221.297778-326.428445-220.899556-329.329777a36.010667 36.010667 0 0 1 29.013333-56.035556h544.369778z m306.460445 262.542222c13.880889 13.937778 14.051556 36.408889 0.398222 50.517334L878.876444 512l70.542223 70.542222a36.010667 36.010667 0 0 1-50.460445 51.313778l-0.398222-0.398222-70.542222-70.599111-70.542222 70.599111a36.010667 36.010667 0 0 1-51.370667-50.517334L777.102222 512l-70.542222-70.542222a36.010667 36.010667 0 0 1 50.460444-51.313778l70.940445 70.940444 70.542222-70.542222a36.010667 36.010667 0 0 1 50.972445 0z\"></path></svg>',\n  table_header: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.75 15.74\"><g><path d=\"M17,19.5v-.78H15.5v.78H17Zm-3,0v-.78H12.5v.78H14Zm-3,0v-.78H9.53v.78H11Zm-3,0v-.78H6.53v.78H8Zm10.55,0a1.73,1.73,0,0,0,.85-.35,1.67,1.67,0,0,0,.56-.76l-.71-.31a1.21,1.21,0,0,1-.35.4,1.34,1.34,0,0,1-.53.23l.08.38c.06.24.09.38.1.41Zm-13.7-.63.55-.55A.77.77,0,0,1,5.25,18a1.31,1.31,0,0,1-.06-.38v-.38H4.41v.38a2,2,0,0,0,.12.68,1.6,1.6,0,0,0,.35.57Zm15.27-2.12V15.26h-.78v1.49h.78Zm-15-1V14.23H4.41v1.49h.78Zm15-2V12.26h-.78v1.49h.78Zm-15-1V11.22H4.41v1.51h.78Zm15-2V9.26h-.78v1.51h.78Zm-15-1V8.17H4.41V9.74h.78Zm15-2V6.28h-.78V7.77h.78Zm-15-1.11V5.33L4.48,5.1a.77.77,0,0,0-.07.27,2.72,2.72,0,0,0,0,.28v1h.79ZM19.21,5l.63-.4A1.62,1.62,0,0,0,19.16,4a1.94,1.94,0,0,0-.91-.22v.78a1.31,1.31,0,0,1,.56.12.88.88,0,0,1,.4.36ZM6,4.54H7.78V3.76H6a.82.82,0,0,0-.28.06l.12.35c.07.21.1.33.11.36Zm10.8,0V3.76H15.28v.78h1.49Zm-3,0V3.76H12.28v.78h1.49Zm-3,0V3.76H9.28v.78h1.51ZM6,10.84h12.6V6.91H6Z\" transform=\"translate(-4.4 -3.76)\"/></g></svg>',\n  merge_cell: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.76 15.74\"><g><path d=\"M18.92,13.5h1.23v4.15A1.84,1.84,0,0,1,18.3,19.5H14V18.27H18.3a.6.6,0,0,0,.44-.18.59.59,0,0,0,.18-.44V13.5ZM18.3,3.76a1.84,1.84,0,0,1,1.85,1.85V9.82H18.92V5.6a.6.6,0,0,0-.18-.44A.59.59,0,0,0,18.3,5H14V3.76H18.3Zm1.85,8.51H15.6L17.26,14l-.86.86-3.14-3.17L16.4,8.51l.86.86L15.62,11h4.54v1.24Zm-13.9,6h4.27V19.5H6.25A1.84,1.84,0,0,1,4.4,17.65V13.5H5.63v4.15a.61.61,0,0,0,.62.62Zm0-14.51h4.27V5H6.25a.6.6,0,0,0-.44.18.57.57,0,0,0-.17.43V9.81H4.41V5.6A1.83,1.83,0,0,1,6.25,3.76Zm5,7.9L8.15,14.83,7.3,14,9,12.27H4.41V11H8.94L7.3,9.38,7.73,9l.43-.43Z\" transform=\"translate(-4.4 -3.76)\"/></g></svg>',\n  split_cell: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.75 15.74\"><g><path d=\"M10.37,12.25H6.74L8.4,13.94l-.87.86L4.41,11.63,7.53,8.5l.87.86L6.74,11h3.62v1.23Zm9.78-.61L17,14.81,16.13,14l1.66-1.69H14.16V11h3.63L16.13,9.37l.43-.43A5.24,5.24,0,0,1,17,8.51ZM18.9,8.22V5.61a.57.57,0,0,0-.18-.43A.65.65,0,0,0,18.29,5H12.88V18.28h5.41a.7.7,0,0,0,.44-.18.57.57,0,0,0,.18-.43V15h1.23v2.64a1.84,1.84,0,0,1-1.85,1.83h-12A1.84,1.84,0,0,1,4.94,19a1.81,1.81,0,0,1-.54-1.29V15H5.63v2.64a.57.57,0,0,0,.18.43.67.67,0,0,0,.44.18h5.41V5H6.25a.7.7,0,0,0-.44.18.56.56,0,0,0-.17.43V8.22H4.41V5.61A1.8,1.8,0,0,1,5,4.31a1.91,1.91,0,0,1,1.31-.55h12a1.89,1.89,0,0,1,1.31.55,1.8,1.8,0,0,1,.54,1.3V8.23H18.9Z\" transform=\"translate(-4.4 -3.76)\"/></g></svg>',\n  caption: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.74 13.79\"><g><path d=\"M4.41,18.52H20.15v-2H4.41ZM20,4.73H18.07V6h.65v.65H20V4.73ZM17,6V4.73H14.55V6H17ZM13.49,6V4.73H11V6h2.47ZM10,6V4.73H7.5V6H10ZM5.79,6h.65V4.73H4.5V6.67H5.8V6ZM4.5,11.34H5.79V8.48H4.5ZM6.44,13.8H5.79v-.65H4.5v1.94H6.44ZM17,15.09V13.8H14.55v1.29H17Zm-3.52,0V13.8H11v1.29h2.47Zm-3.53,0V13.8H7.5v1.29H10ZM20,13.16H18.72v.65h-.65V15.1H20Zm-1.29-1.82H20V8.48h-1.3v2.86Z\" transform=\"translate(-4.41 -4.73)\"/></g></svg>',\n  edit: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.74 15.73\"><g><path d=\"M7.51,5.68h6l1.52-1.57H6.94a2.4,2.4,0,0,0-1.79.82A2.8,2.8,0,0,0,4.41,6.8V17a2.55,2.55,0,0,0,.75,1.8A2.48,2.48,0,0,0,7,19.5H17.22a2.57,2.57,0,0,0,1.83-.74,2.52,2.52,0,0,0,.77-1.8V8.83l-1.58,1.54v6a1.54,1.54,0,0,1-1.53,1.53H7.51A1.54,1.54,0,0,1,6,16.41V7.21A1.52,1.52,0,0,1,7.51,5.68Zm5.63,7.47h0L10.7,10.74l-1,3.38,1.71-.48,1.7-.49Zm.34-.34h0l5.36-5.32L16.4,5.08,11,10.4l1.23,1.21,1.21,1.2ZM19.93,6.4a.82.82,0,0,0,.22-.48A.54.54,0,0,0,20,5.47L18.45,4A.67.67,0,0,0,18,3.77a.7.7,0,0,0-.48.21l-.74.72,2.44,2.43.37-.37.35-.36Z\" transform=\"translate(-4.41 -3.77)\"/></g></svg>',\n  delete: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.73 15.74\"><g><path d=\"M19.16,6.71a.94.94,0,0,0,.69-.28.91.91,0,0,0,.29-.68A1,1,0,0,0,19.85,5a.93.93,0,0,0-.69-.3H14.24A.94.94,0,0,0,14,4.06a.92.92,0,0,0-.7-.3h-2a1,1,0,0,0-.7.3.93.93,0,0,0-.28.68H5.39A.92.92,0,0,0,4.7,5a1,1,0,0,0-.29.71.91.91,0,0,0,.29.68,1,1,0,0,0,.69.28H19.16Zm-12.79,1a1,1,0,0,0-.7.3.94.94,0,0,0-.28.69v8.85A1.88,1.88,0,0,0,6,18.93a1.9,1.9,0,0,0,1.39.57H17.2a1.87,1.87,0,0,0,1.39-.58,1.91,1.91,0,0,0,.58-1.39V8.68A1,1,0,0,0,18.88,8a.89.89,0,0,0-.7-.29,1,1,0,0,0-.69.29.92.92,0,0,0-.29.68v7.87a1,1,0,0,1-1,1H8.34a.94.94,0,0,1-.69-.28,1,1,0,0,1-.29-.71V8.68a1,1,0,0,0-1-1Z\" transform=\"translate(-4.41 -3.76)\"/></g></svg>',\n  modify: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.7 15.74\"><g><path d=\"M19.79,15.23a.66.66,0,0,1,.3.38.59.59,0,0,1-.07.48l-.8,1.38a.66.66,0,0,1-.38.3.59.59,0,0,1-.48-.07l-.68-.38a4.55,4.55,0,0,1-1.34.77v.78a.64.64,0,0,1-.18.45.61.61,0,0,1-.45.18h-1.6a.6.6,0,0,1-.44-.18.66.66,0,0,1-.19-.45v-.78a4.36,4.36,0,0,1-1.32-.77l-.69.38a.58.58,0,0,1-.48.07.66.66,0,0,1-.38-.3l-.38-.66h.83a1.77,1.77,0,0,0,1.23-.52,1.72,1.72,0,0,0,.51-1.23v-.18a3,3,0,0,0,.49-.28l.15.09a1.83,1.83,0,0,0,.88.23A1.75,1.75,0,0,0,15.84,14l.88-1.52a1.7,1.7,0,0,0,.17-1.32,1.66,1.66,0,0,0-.3-.61,1.84,1.84,0,0,0-.51-.45l-.15-.09,0-.29,0-.28.15-.09a1,1,0,0,0,.26-.18l0,.06v.78a4.34,4.34,0,0,1,1.34.77l.68-.38a.68.68,0,0,1,.48-.06.64.64,0,0,1,.38.29l.8,1.38a.58.58,0,0,1,.07.48.63.63,0,0,1-.3.38l-.68.4a3.84,3.84,0,0,1,.08.76,4.13,4.13,0,0,1-.08.78l.34.18.32.2ZM10.17,7.86a1.9,1.9,0,0,1,1.35,3.23,1.85,1.85,0,0,1-1.35.55A1.9,1.9,0,0,1,8.83,8.41a1.92,1.92,0,0,1,1.34-.55Zm1.58,7.2a.73.73,0,0,1-.21.49.66.66,0,0,1-.48.2H9.29a.68.68,0,0,1-.69-.69V14.2a4.75,4.75,0,0,1-1.48-.86l-.75.45a.73.73,0,0,1-.7,0,.63.63,0,0,1-.25-.26L4.54,12a.67.67,0,0,1-.08-.53.71.71,0,0,1,.32-.42l.75-.43a4.8,4.8,0,0,1-.08-.85,4.71,4.71,0,0,1,.08-.85l-.74-.44a.71.71,0,0,1-.32-.42.65.65,0,0,1,.07-.54L5.42,6a.66.66,0,0,1,.42-.32l.18,0a.73.73,0,0,1,.35.09l.75.43A4.68,4.68,0,0,1,8.6,5.33V4.45a.68.68,0,0,1,.69-.69h1.77a.64.64,0,0,1,.48.2.73.73,0,0,1,.21.49v.88a4.75,4.75,0,0,1,1.48.85L14,5.75a.67.67,0,0,1,.34-.09l.18,0a.71.71,0,0,1,.42.32l.89,1.54a.67.67,0,0,1,.06.52.73.73,0,0,1-.32.43l-.75.42a4.8,4.8,0,0,1,.08.85,4.71,4.71,0,0,1-.08.85l.75.43a.66.66,0,0,1,.32.42.73.73,0,0,1-.06.54l-.89,1.52a.69.69,0,0,1-.25.26.7.7,0,0,1-.35.09.64.64,0,0,1-.34-.09l-.75-.45a4.87,4.87,0,0,1-1.48.86v.87ZM7.23,9.75a3,3,0,0,0,.86,2.08,2.94,2.94,0,1,0,4.16-4.16,3,3,0,0,0-2.08-.85A2.94,2.94,0,0,0,7.23,9.75Z\" transform=\"translate(-4.44 -3.76)\"/></g></svg>',\n  revert: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.76 14.69\"><g><path d=\"M18.26,15V12.3l1.89-2V15a2.58,2.58,0,0,1-.24,1c-.2.58-.75.92-1.65,1H7.56v2L4.41,15.63,7.56,13v2h10.7ZM6.3,8.28V11L4.41,13V8.28a2.58,2.58,0,0,1,.24-1c.2-.58.75-.92,1.65-1H17v-2l3.15,3.34L17,10.3v-2H6.3Z\" transform=\"translate(-4.4 -4.28)\"/></g></svg>',\n  auto_size: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.74 15.74\"><g><path d=\"M6.71,17.19,6.89,16l1.21-.15A6,6,0,0,1,6.81,13.9a5.78,5.78,0,0,1-.45-2.27A6,6,0,0,1,8.1,7.45a5.83,5.83,0,0,1,4.17-1.73l1-1-1-1A7.89,7.89,0,0,0,5,14.64a7.73,7.73,0,0,0,1.71,2.55Zm5.57,2.31h0A7.86,7.86,0,0,0,17.85,6.07L17.67,7.3l-1.21.15a5.9,5.9,0,0,1,1.29,1.92,5.81,5.81,0,0,1,.45,2.26,5.91,5.91,0,0,1-5.9,5.9l-1,1,.49.49.47.5Z\" transform=\"translate(-4.41 -3.76)\"/></g></svg>',\n  insert_row_below: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.8 15.8\"><g><path d=\"M15.7,1.3c-0.1-0.1-0.1-0.2-0.2-0.2L15.3,1H0.4L0.3,1.1c0,0-0.1,0.1-0.1,0.1c0,0-0.1,0.1-0.1,0.1L0,1.4v7.7l0.1,0.1c0,0.1,0.1,0.1,0.2,0.2l0.1,0.1h2.3V9.3l0.1-0.5L3,8.5l0.1-0.2c-0.1,0-0.2,0-0.3,0H1.2v-6h13.3v6h-1.6c-0.1,0-0.2,0-0.3,0l0.1,0.2l0.2,0.4C12.9,9,13,9.2,13,9.3v0.1h2.3l0.2-0.1c0.1,0,0.1-0.1,0.2-0.2l0.1-0.1V1.4L15.7,1.3z\"/><path d=\"M10.5,7.5C9.9,7.1,9.3,6.8,8.6,6.7c-0.2,0-0.5-0.1-0.7,0c-0.2,0-0.5,0-0.7,0C6.6,6.7,6.1,6.9,5.6,7.3C5.2,7.6,4.7,8,4.4,8.4C4.3,8.6,4.2,8.8,4.2,8.9C4.1,9.1,4,9.3,3.9,9.4C3.9,9.6,3.8,9.7,3.8,9.9c0,0.2-0.1,0.3-0.1,0.5v-0.1c-0.1,0.8,0.1,1.6,0.5,2.4c0.4,0.7,1,1.3,1.7,1.7c0.3,0.2,0.6,0.3,0.9,0.3c0.3,0.1,0.7,0.1,1,0.1c0.3,0,0.7,0,1-0.1c0.3-0.1,0.6-0.2,0.9-0.3c0.5-0.3,0.9-0.6,1.3-1c0.3-0.4,0.6-0.8,0.8-1.3c0.1-0.4,0.2-0.9,0.2-1.4c0-0.5-0.1-1-0.3-1.4C11.5,8.6,11.1,8,10.5,7.5z M10.1,11.3H8.5v1.6H8H7.9H7.3v0v-0.1v-1.4H5.7v-0.4v-0.2v-0.6h0h1.5V8.5h1.2v1.6h1.6V11.3z\"/></g></svg>',\n  insert_row_above: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.8 15.8\"><g><path d=\"M0.1,14.5c0.1,0.1,0.1,0.2,0.2,0.2l0.1,0.1h14.9l0.1-0.1c0,0,0.1-0.1,0.1-0.1c0,0,0.1-0.1,0.1-0.1l0.1-0.1V6.7l-0.1-0.1c0-0.1-0.1-0.1-0.2-0.2l-0.1-0.1h-2.3v0.1l-0.1,0.5l-0.2,0.4l-0.1,0.2c0.1,0,0.2,0,0.3,0h1.6v6H1.3v-6h1.6c0.1,0,0.2,0,0.3,0L3.1,7.3L2.9,6.9C2.8,6.8,2.8,6.6,2.7,6.5V6.3H0.4L0.3,6.4c-0.1,0-0.1,0.1-0.2,0.2L0,6.7v7.7L0.1,14.5z\"/><path d=\"M5.3,8.3c0.6,0.5,1.2,0.8,1.9,0.9c0.2,0,0.5,0.1,0.7,0c0.2,0,0.5,0,0.7,0c0.6-0.1,1.1-0.3,1.6-0.6c0.5-0.3,0.9-0.7,1.2-1.2c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.4,0.2-0.5c0.1-0.1,0.1-0.3,0.1-0.4C12,5.8,12,5.6,12,5.4v0.1c0.1-0.8-0.1-1.6-0.5-2.4c-0.4-0.7-1-1.3-1.7-1.7C9.5,1.3,9.2,1.2,8.9,1.1C8.5,1,8.2,1,7.9,1c-0.3,0-0.7,0-1,0.1C6.6,1.2,6.3,1.3,6,1.4C5.5,1.7,5.1,2,4.7,2.4C4.4,2.8,4.1,3.3,3.9,3.8C3.8,4.2,3.7,4.7,3.7,5.2c0,0.5,0.1,1,0.3,1.4C4.3,7.2,4.7,7.8,5.3,8.3z M5.7,4.5h1.6V2.9h0.5h0.1h0.6v0v0.1v1.4H10v0.4v0.2v0.6h0H8.5v1.6H7.3V5.7H5.7V4.5z\"/></g></svg>',\n  insert_column_left: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.8 15.8\"><g><path d=\"M14.5,15.7c0.1-0.1,0.2-0.1,0.2-0.2l0.1-0.1V0.4l-0.1-0.1c0,0-0.1-0.1-0.1-0.1c0,0-0.1-0.1-0.1-0.1L14.4,0H6.7L6.6,0.1c-0.1,0-0.1,0.1-0.2,0.2L6.3,0.4v2.3h0.1l0.5,0.1L7.3,3l0.2,0.1c0-0.1,0-0.2,0-0.3V1.2h6v13.3h-6v-1.6c0-0.1,0-0.2,0-0.3l-0.2,0.1l-0.4,0.2C6.7,12.9,6.6,13,6.4,13H6.3v2.3l0.1,0.2c0,0.1,0.1,0.1,0.2,0.2l0.1,0.1h7.7L14.5,15.7z\"/><path d=\"M8.3,10.5C8.7,10,9,9.3,9.1,8.6c0-0.2,0.1-0.5,0-0.7c0-0.2,0-0.5,0-0.7C9,6.7,8.8,6.1,8.5,5.7C8.2,5.2,7.8,4.8,7.3,4.5C7.2,4.4,7,4.3,6.9,4.2C6.7,4.1,6.5,4,6.4,4C6.2,3.9,6.1,3.9,5.9,3.8c-0.2,0-0.3-0.1-0.5-0.1h0.1C4.7,3.7,3.8,3.9,3.1,4.3C2.4,4.7,1.8,5.3,1.4,6C1.3,6.3,1.2,6.6,1.1,6.9C1,7.2,1,7.6,1,7.9c0,0.3,0,0.7,0.1,1c0.1,0.3,0.2,0.6,0.3,0.9c0.3,0.5,0.6,0.9,1,1.3c0.4,0.3,0.8,0.6,1.3,0.8C4.2,12,4.7,12.1,5.1,12c0.5,0,1-0.1,1.4-0.3C7.2,11.5,7.8,11.1,8.3,10.5zM4.5,10.1V8.5H2.9V8V7.9V7.3h0H3h1.4V5.7h0.4h0.2h0.6v0v1.5h1.6v1.2H5.7v1.6H4.5z\"/></g></svg>',\n  insert_column_right: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.8 15.8\"><g><path d=\"M1.3,0.1C1.2,0.2,1.1,0.2,1.1,0.3L1,0.4v14.9l0.1,0.1c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0.1,0.1,0.1l0.1,0.1h7.7l0.1-0.1c0.1,0,0.1-0.1,0.2-0.2l0.1-0.1v-2.3H9.3l-0.5-0.1l-0.4-0.2l-0.2-0.1c0,0.1,0,0.2,0,0.3v1.6h-6V1.3h6v1.6c0,0.1,0,0.2,0,0.3l0.2-0.1l0.4-0.2C9,2.9,9.2,2.8,9.3,2.8h0.1V0.5L9.4,0.3c0-0.1-0.1-0.1-0.2-0.2L9.1,0H1.4L1.3,0.1z\"/><path d=\"M7.5,5.3C7,5.8,6.7,6.5,6.6,7.2c0,0.2-0.1,0.5,0,0.7c0,0.2,0,0.5,0,0.7c0.1,0.6,0.3,1.1,0.6,1.6c0.3,0.5,0.7,0.9,1.2,1.2c0.2,0.1,0.3,0.2,0.5,0.3c0.2,0.1,0.4,0.2,0.5,0.2c0.1,0.1,0.3,0.1,0.4,0.1c0.2,0,0.3,0.1,0.5,0.1h-0.1c0.8,0.1,1.6-0.1,2.4-0.5c0.7-0.4,1.3-1,1.7-1.7c0.2-0.3,0.3-0.6,0.3-0.9c0.1-0.3,0.1-0.7,0.1-1c0-0.3,0-0.7-0.1-1c-0.1-0.3-0.2-0.6-0.3-0.9c-0.3-0.5-0.6-0.9-1-1.3C13,4.4,12.5,4.2,12,4c-0.4-0.1-0.9-0.2-1.4-0.2c-0.5,0-1,0.1-1.4,0.2C8.5,4.3,7.9,4.7,7.5,5.3z M11.3,5.7v1.6h1.6v0.5v0.1v0.6h0h-0.1h-1.4v1.6h-0.4h-0.2h-0.6v0V8.5H8.5V7.3h1.6V5.7H11.3z\"/></g></svg>',\n  delete_row: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.75 13.83\"><g><path d=\"M4.7,18.46l.12.08H19.73l.12-.08a.58.58,0,0,0,.22-.22l.08-.12,0-7.69-.08-.11a.77.77,0,0,0-.18-.18l-.11-.08-2.31,0-.08.28-.1.29a1.58,1.58,0,0,1-.12.29l-.14.34s0,0,.18,0H18.9v6H5.64v-6H7.35c.14,0,.2,0,.18,0l-.14-.34a2.85,2.85,0,0,1-.12-.29l-.1-.29-.07-.27-2.31,0-.11.08a.77.77,0,0,0-.18.18l-.08.11,0,7.69.08.12a.47.47,0,0,0,.09.12l.13.09ZM12.11,13a4,4,0,0,0,1.46-.21,4.51,4.51,0,0,0,1.31-.71A4,4,0,0,0,16.26,10a4.32,4.32,0,0,0-.08-2.54,4.34,4.34,0,0,0-1-1.52,4.15,4.15,0,0,0-1.54-1,4.34,4.34,0,0,0-1.35-.22A4.07,4.07,0,0,0,11,4.93,3.94,3.94,0,0,0,9.24,6.07,3.92,3.92,0,0,0,8.15,8.88a3.91,3.91,0,0,0,.12.95A4.16,4.16,0,0,0,12.11,13Zm2.35-4.14v.58H10.09V8.27h4.37v.58Z\" transform=\"translate(-4.4 -4.71)\"/></g></svg>',\n  delete_column: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 13.81 15.74\"><g><path d=\"M5.66,19.42l.12.08,7.69,0,.11-.08a.77.77,0,0,0,.18-.18l.08-.11,0-2.32-.15,0-.45-.15-.42-.18-.17-.07a1,1,0,0,0,0,.27v1.63h-6V5h6V6.62a.9.9,0,0,0,0,.26l.17-.07.42-.17a3.91,3.91,0,0,1,.45-.15l.15,0,0-2.32L13.75,4a.77.77,0,0,0-.18-.18l-.11-.08H5.79l-.13.07a.63.63,0,0,0-.21.22l-.08.12V19.08l.08.12a.47.47,0,0,0,.09.12.35.35,0,0,0,.12.1Zm9-3.67a4.16,4.16,0,0,0,2.36-.51,4.08,4.08,0,0,0,1.67-1.72,4,4,0,0,0,.35-.91,3.79,3.79,0,0,0,.1-1,4.71,4.71,0,0,0-.11-1,5,5,0,0,0-.3-.87,4.25,4.25,0,0,0-1-1.25,4.49,4.49,0,0,0-1.34-.81A4.26,4.26,0,0,0,15,7.48a3.88,3.88,0,0,0-1.41.25A4.32,4.32,0,0,0,11.86,9,4,4,0,0,0,11,10.94a4.4,4.4,0,0,0-.05.68,4.5,4.5,0,0,0,.05.68,3.93,3.93,0,0,0,.61,1.57,4.22,4.22,0,0,0,1.18,1.2,4.59,4.59,0,0,0,.48.27c.2.1.37.17.5.22a2.44,2.44,0,0,0,.45.12,4.61,4.61,0,0,0,.5.07Zm2.54-4.12v.58H12.87V11h4.37v.59Z\" transform=\"translate(-5.37 -3.76)\"/></g></svg>',\n  fixed_column_width: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 24 24\"><path d=\"M6,5H18A1,1 0 0,1 19,6A1,1 0 0,1 18,7H6A1,1 0 0,1 5,6A1,1 0 0,1 6,5M21,2V4H3V2H21M15,8H17V22H15V8M7,8H9V22H7V8M11,8H13V22H11V8Z\" /></svg>',\n  rotate_left: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.8 15.8\"><g><path d=\"M0.5,10.2c0,0.1,0,0.2,0,0.3v0.2l0,0c0.1,0.3,0.3,0.6,0.4,0.9l0,0C1,11.8,1.3,12,1.5,11.9h0.1h0.2h0.1c0.1-0.1,0.3-0.3,0.4-0.5v-0.2c0-0.1,0-0.2-0.1-0.3l0,0c-0.2-0.2-0.3-0.4-0.3-0.7l0,0C1.8,10,1.7,9.9,1.5,9.8c-0.1,0-0.2,0-0.3,0H0.9C0.7,9.9,0.6,10,0.5,10.2L0.5,10.2z\"/><path d=\"M2.2,11.5L2.2,11.5L2.2,11.5z\"/><path d=\"M5.9,3.6L5.9,3.6L5.9,3.6z\"/><path d=\"M0.1,7.9c0,0.3,0,0.6,0,0.9l0,0l0,0l0,0l0,0c0,0.2,0.1,0.3,0.2,0.4l0,0c0.2,0.1,0.3,0.2,0.5,0.2l0,0l0,0c0.2,0,0.4-0.1,0.5-0.3l0,0c0-0.1,0.1-0.3,0.1-0.4V8.6l0,0c0-0.2,0-0.5,0-0.7l0,0c0-0.2-0.1-0.4-0.2-0.5C1.1,7.3,0.9,7.2,0.7,7.2S0.3,7.3,0.2,7.4C0.1,7.5,0,7.7,0.1,7.9z\"/><path d=\"M1.9,12.7L1.9,12.7c0,0.2,0,0.4,0.2,0.5l0,0l0.2,0.3l0,0c0.2,0.1,0.3,0.2,0.5,0.4l0,0l0,0l0,0l0,0C2.9,14,3,14.1,3.2,14.1s0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.3,0.2-0.5v-0.1c0-0.2-0.1-0.4-0.2-0.5l0,0l-0.4-0.4l-0.2-0.2l0,0C3,12.1,2.8,12,2.6,12l0,0c-0.2,0-0.4,0.1-0.5,0.2l0,0C2,12.3,1.9,12.5,1.9,12.7z\"/><path d=\"M6.6,15c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,0.2,0.2,0.4,0.3l0,0c0.3,0,0.5,0,0.7,0h0.3l0,0c0.2,0,0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.3,0.2-0.5l0,0l0,0c0-0.2-0.1-0.4-0.2-0.5l0,0c-0.1-0.1-0.3-0.2-0.5-0.2l0,0H7.9c-0.1,0-0.3,0-0.5,0l0,0H7.3c-0.2-0.1-0.3,0-0.5,0.1l0,0C6.7,14.6,6.6,14.8,6.6,15L6.6,15L6.6,15L6.6,15z\"/><path d=\"M4.2,7.4C4,7.5,4,7.7,4,7.9c0,0.2,0,0.4,0.2,0.5l0,0l3.2,3.2l0,0c0.1,0.1,0.3,0.2,0.5,0.2s0.3-0.1,0.5-0.2l0,0l3.2-3.2l0,0c0.1-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.4-0.2-0.5l0,0C11.5,7.3,11,6.7,10,5.8l0,0L8.4,4.2l0,0C8.3,4.1,8.1,4,7.9,4S7.5,4.1,7.4,4.2L4.2,7.4L4.2,7.4z M6.8,9L5.7,7.9l2.2-2.2l2.3,2.2l-2.3,2.2C7.7,9.9,7.3,9.5,6.8,9L6.8,9z\"/><path d=\"M4.1,14.1C4,14.2,4,14.3,4,14.4v0.2l0,0c0.1,0.1,0.2,0.3,0.4,0.4l0,0c0.3,0.1,0.6,0.2,0.9,0.4h0.1h0.1l0,0c0.2,0,0.3-0.1,0.5-0.1l0,0c0.2-0.1,0.3-0.3,0.3-0.4l0,0l0,0l0,0l0,0v-0.2c0-0.1-0.1-0.2-0.1-0.3l0,0C6.1,14.2,6,14.1,5.8,14l0,0c-0.3-0.1-0.5-0.2-0.8-0.2l0,0c-0.1-0.1-0.2-0.1-0.3-0.1H4.5C4.3,13.7,4.2,13.9,4.1,14.1z\"/><path d=\"M9.3,14.4c0,0.1-0.1,0.3,0,0.4V15l0,0c0,0.1,0.1,0.3,0.5,0.4c0.1,0.1,0.3,0.1,0.4,0.1l0,0h0.1l0,0c0.3-0.1,0.6-0.2,0.9-0.3l0,0c0.1-0.1,0.2-0.2,0.3-0.4l0.1-0.3c0-0.1-0.1-0.2-0.1-0.3l0,0c-0.1-0.2-0.2-0.3-0.4-0.4l0,0h-0.3c-0.1,0-0.2,0-0.3,0l0,0c-0.2,0.1-0.5,0.2-0.8,0.3l0,0C9.5,14.1,9.4,14.2,9.3,14.4L9.3,14.4z\"/><path d=\"M11.4,14.7L11.4,14.7L11.4,14.7z\"/><path d=\"M9.5,15.3L9.5,15.3L9.5,15.3z\"/><path d=\"M15.9,7.9c0-1-0.2-2-0.6-3l0,0c-0.4-1-1-1.9-1.7-2.6C12.8,1.6,12,1,11,0.6l0,0C10.1,0.2,9,0,8,0C7.3,0,6.5,0.1,5.8,0.3l0,0C5.2,0.5,4.6,0.8,4,1.1L3.1,0.2l0,0C2.9,0.1,2.8,0,2.6,0H2.4l0,0C2.2,0,2,0.2,1.9,0.4l0,0L0.1,4.9l0,0C0,5,0,5.1,0,5.2c0,0.2,0.1,0.4,0.2,0.5l0,0c0.2,0.1,0.3,0.2,0.5,0.2h0.1H1l0,0l4.7-1.8l0,0C5.9,4,6.1,3.8,6.1,3.6V3.4C6.1,3.2,6,3,5.9,2.9l0,0L5.1,2.1c0.4-0.2,0.8-0.4,1.3-0.5c0.5-0.1,1.1-0.2,1.7-0.2c0.9,0,1.7,0.2,2.5,0.5l0,0c0.8,0.3,1.5,0.8,2.1,1.4c0.6,0.6,1.1,1.3,1.4,2.1l0,0c0.3,0.8,0.5,1.6,0.5,2.5s-0.2,1.7-0.5,2.5l0,0c-0.3,0.8-0.8,1.5-1.4,2.1c-0.2,0.2-0.4,0.3-0.6,0.5l0,0c-0.2,0.1-0.3,0.3-0.3,0.5v0.1c0,0.1,0,0.3,0.1,0.4l0,0c0.1,0.2,0.3,0.3,0.5,0.3l0,0c0.1,0,0.3-0.1,0.4-0.2l0,0l0,0l0,0l0,0c0.2-0.2,0.5-0.4,0.7-0.6l0,0l0,0l0,0l0,0c0.7-0.8,1.3-1.6,1.7-2.6C15.6,10,15.8,9,15.9,7.9z M1.9,4C2,3.8,2.1,3.5,2.3,3.1l0,0L2.7,2l1.2,1.2L1.9,4z\"/><path d=\"M6.8,15.5L6.8,15.5L6.8,15.5z\"/></g></svg>',\n  rotate_right: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.8 15.8\"><g><path d=\"M9.9,15.3L9.9,15.3L9.9,15.3z\"/><path d=\"M6.9,15.1L6.9,15.1c0,0.1,0.1,0.3,0.2,0.4l0,0c0.1,0.2,0.3,0.3,0.5,0.3l0,0h0.3c0.2,0,0.4,0,0.7,0l0,0c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.2,0.2-0.4V15c0-0.2-0.1-0.4-0.2-0.4c-0.2-0.1-0.3-0.2-0.5-0.2H8.4l0,0c-0.1,0-0.3,0-0.5,0H7.6l0,0c-0.2,0-0.4,0.1-0.5,0.2C7,14.7,6.9,14.9,6.9,15.1z\"/><path d=\"M6.5,14.4L6.5,14.4L6.5,14.4z\"/><path d=\"M5.8,5.8L5.8,5.8c-1,0.9-1.5,1.5-1.7,1.6l0,0C4,7.5,4,7.7,4,7.9c0,0.2,0,0.4,0.2,0.5l0,0l3.2,3.2l0,0c0.2,0.1,0.3,0.2,0.5,0.2s0.4-0.1,0.5-0.2l0,0l3.2-3.2l0,0c0.1-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.4-0.2-0.5l0,0L8.4,4.2C8.3,4.1,8.1,4,7.9,4C7.7,4,7.5,4.1,7.4,4.2l0,0L5.8,5.8z M5.6,7.9l2.3-2.2l2.2,2.2L9,9l0,0l0,0l0,0l0,0c-0.5,0.6-0.9,0.9-1.1,1.1L5.6,7.9z\"/><path d=\"M9,15.5L9,15.5L9,15.5z\"/><path d=\"M9.6,14.7v0.2l0,0l0,0l0,0l0,0c0.1,0.2,0.1,0.3,0.3,0.3c0.1,0.1,0.3,0.1,0.4,0.1l0,0h0.1h0.1c0.3-0.1,0.6-0.3,0.9-0.4l0,0c0.1-0.1,0.2-0.2,0.3-0.4l0,0v-0.2c0-0.1,0-0.2-0.1-0.3c-0.1-0.2-0.2-0.3-0.4-0.4H11c-0.1,0-0.2,0.1-0.3,0.1l0,0c-0.2,0.1-0.4,0.2-0.7,0.3l0,0l0,0c-0.1,0.1-0.3,0.2-0.4,0.4C9.6,14.5,9.6,14.6,9.6,14.7z\"/><path d=\"M9,14.5L9,14.5L9,14.5z\"/><path d=\"M9.6,14.4L9.6,14.4L9.6,14.4z\"/><path d=\"M11.7,14L11.7,14L11.7,14z\"/><path d=\"M15.6,7.4L15.6,7.4L15.6,7.4z\"/><path d=\"M15,9.4c0.2,0,0.4,0,0.6-0.2l0,0c0.1-0.1,0.2-0.2,0.2-0.4l0,0l0,0l0,0l0,0c0-0.3,0-0.6,0-0.9c0-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.3-0.2-0.5-0.2s-0.4,0.1-0.5,0.2c-0.1,0.1-0.2,0.3-0.2,0.5l0,0c0,0.2,0,0.4,0,0.7l0,0v0.1c0,0.1,0,0.3,0.1,0.4l0,0C14.6,9.3,14.8,9.4,15,9.4L15,9.4L15,9.4z\"/><path d=\"M14,12h0.1h0.2h0.1c0.2,0,0.5-0.2,0.6-0.4l0,0c0.2-0.3,0.3-0.6,0.4-0.9l0,0v-0.2c0-0.1-0.1-0.2-0.1-0.3c-0.1-0.2-0.2-0.3-0.4-0.4h-0.3c-0.1,0-0.2,0-0.3,0C14.2,9.9,14,10,14,10.3l0,0c-0.1,0.2-0.2,0.5-0.3,0.7l0,0c-0.1,0.1-0.1,0.2-0.1,0.3v0.2l0,0l0,0C13.6,11.6,13.8,11.8,14,12z\"/><path d=\"M14.6,7.4L14.6,7.4L14.6,7.4z\"/><path d=\"M4.4,14.2c-0.1,0.1-0.1,0.2-0.1,0.3l0.1,0.2c0,0.2,0.2,0.3,0.3,0.4l0,0c0.3,0.1,0.6,0.3,1.1,0.4l0,0h0.1l0,0c0.1,0,0.2-0.1,0.4-0.2c0.1,0,0.2-0.2,0.3-0.3l0,0v-0.2c0-0.1-0.1-0.3-0.2-0.4c-0.1-0.1-0.2-0.2-0.4-0.3l0,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-0.1,0-0.2,0-0.3,0H4.7l0,0C4.6,13.9,4.4,14,4.4,14.2L4.4,14.2z\"/><path d=\"M11.9,13.3c0,0.2,0.1,0.4,0.2,0.6c0.1,0.1,0.3,0.2,0.5,0.2s0.4-0.1,0.5-0.2l0,0l0,0l0,0l0,0c0.1-0.1,0.3-0.3,0.4-0.4l0,0l0.2-0.3l0,0c0.1-0.2,0.2-0.3,0.2-0.5l0,0c0-0.2-0.1-0.4-0.2-0.5l0,0c-0.1-0.1-0.3-0.2-0.5-0.2l0,0c-0.2,0-0.4,0.1-0.5,0.2l0,0l-0.2,0.2l-0.4,0.4l0,0C12,13,11.9,13.1,11.9,13.3L11.9,13.3z\"/><path d=\"M12.1,13.8L12.1,13.8L12.1,13.8z\"/><path d=\"M11.9,13.3L11.9,13.3L11.9,13.3z\"/><path d=\"M15.9,5.2c0-0.1-0.1-0.2-0.1-0.3l0,0L14,0.4l0,0C13.9,0.2,13.7,0,13.5,0l0,0l0,0h-0.2c-0.2,0-0.4,0.1-0.5,0.2l0,0l-0.9,0.9c-0.5-0.3-1.1-0.6-1.8-0.8l0,0C9.4,0.1,8.7,0,7.9,0c-1,0-2,0.2-3,0.6S3,1.6,2.3,2.3C1.6,3.1,1,3.9,0.6,4.9l0,0C0.2,5.8,0,6.8,0,7.9c0,1,0.2,2,0.6,3s0.9,1.8,1.7,2.6l0,0l0,0l0,0l0,0c0.2,0.2,0.5,0.4,0.7,0.6l0,0l0,0l0,0l0,0c0.2,0.1,0.3,0.2,0.5,0.2l0,0c0.2,0,0.4-0.1,0.6-0.3l0,0c0.1-0.1,0.1-0.3,0.1-0.4v-0.1l0,0C4.1,13.3,4,13.1,3.9,13l0,0c-0.2-0.1-0.4-0.3-0.6-0.5c-0.6-0.6-1.1-1.3-1.4-2.1l0,0C1.6,9.6,1.4,8.8,1.4,7.9s0.2-1.7,0.5-2.5l0,0c0.3-0.8,0.8-1.5,1.4-2.1c0.6-0.6,1.3-1.1,2.1-1.4l0,0C6.2,1.6,7,1.4,7.9,1.4c0.6,0,1.1,0.1,1.7,0.2c0.5,0.1,0.9,0.3,1.3,0.5l-0.8,0.8l0,0C10,3.1,9.9,3.2,9.9,3.4v0.2l0,0l0,0c0,0.2,0.2,0.4,0.4,0.5l0,0l4.5,1.8l0,0H15h0.1c0.2,0,0.4-0.1,0.5-0.2l0,0C15.7,5.6,15.8,5.4,15.9,5.2z M11.8,3.2L13,2l0.4,1.1l0,0c0.2,0.4,0.3,0.7,0.4,0.9L11.8,3.2z\"/></g></svg>',\n  mirror_horizontal: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 14.75 15.74\"><g><path d=\"M13.75,3.76l5.9,15.74h-5.9V3.76ZM4.9,19.5,10.8,3.76V19.5H4.9Z\" transform=\"translate(-4.9 -3.76)\"/></g></svg>',\n  mirror_vertical: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.74 14.75\"><g><path d=\"M20.15,13.1,4.41,19V13.1H20.15ZM4.41,4.25l15.74,5.9H4.41V4.25Z\" transform=\"translate(-4.41 -4.25)\"/></g></svg>',\n  checked: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.75 12.1\"><g><path d=\"M4.59,12.23l.12.18L9.43,17.5a.58.58,0,0,0,.84,0L20,7.45h0a.58.58,0,0,0,0-.84l-.85-.85a.58.58,0,0,0-.84,0H18.2l-8.12,8.41a.29.29,0,0,1-.42,0l-3.4-3.63a.58.58,0,0,0-.84,0l-.85.85a.6.6,0,0,0-.14.21.51.51,0,0,0,0,.44c.05.06.1.13.16.19Z\" transform=\"translate(-4.38 -5.58)\"/></g></svg>',\n  line_break: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 24 24\"><path d=\"M19,6a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H7.41l1.3-1.29A1,1,0,0,0,7.29,9.29l-3,3a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l3,3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L7.41,14H17a3,3,0,0,0,3-3V7A1,1,0,0,0,19,6Z\"/></svg>',\n  image_gallery: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"30 30 150 150\"><g><path d=\"M152.775,120.548V51.651c0-12.271-9.984-22.254-22.254-22.254H43.727c-12.271,0-22.254,9.983-22.254,22.254v68.896c0,12.27,9.983,22.254,22.254,22.254h86.795C142.791,142.802,152.775,132.817,152.775,120.548z M36.394,51.651c0-4.042,3.291-7.333,7.333-7.333h86.795c4.042,0,7.332,3.291,7.332,7.333v23.917l-14.938-17.767c-1.41-1.678-3.487-2.649-5.68-2.658h-0.029c-2.184,0-4.255,0.954-5.674,2.613L76.709,98.519l-9.096-9.398c-1.427-1.474-3.392-2.291-5.448-2.273c-2.052,0.025-4.004,0.893-5.396,2.4L36.394,111.32V51.651z M41.684,127.585l20.697-22.416l9.312,9.622c1.461,1.511,3.489,2.334,5.592,2.27c2.101-0.066,4.075-1.013,5.44-2.612l34.436-40.308l20.693,24.613v21.794c0,4.042-3.29,7.332-7.332,7.332H43.727C43.018,127.88,42.334,127.775,41.684,127.585z M182.616,152.5V75.657c0-4.12-3.34-7.46-7.461-7.46c-4.119,0-7.46,3.34-7.46,7.46V152.5c0,4.112-3.347,7.46-7.461,7.46h-94c-4.119,0-7.46,3.339-7.46,7.459c0,4.123,3.341,7.462,7.46,7.462h94C172.576,174.881,182.616,164.841,182.616,152.5z\"/></g></svg>',\n  bookmark: '<svg viewBox=\"0 0 24 24\"><path d=\"M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z\" /></svg>',\n  download: '<svg viewBox=\"0 0 24 24\"><path d=\"M2 12H4V17H20V12H22V17C22 18.11 21.11 19 20 19H4C2.9 19 2 18.11 2 17V12M12 15L17.55 9.54L16.13 8.13L13 11.25V2H11V11.25L7.88 8.13L6.46 9.55L12 15Z\" /></svg>',\n  // More icons\n  more_text: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"10 10 180 180\"><g><path d=\"M49.711,142.188h49.027c2.328,0.002,4.394,1.492,5.129,3.699l9.742,29.252c0.363,1.092,1.385,1.828,2.537,1.83l15.883,0.01c0.859,0,1.667-0.412,2.17-1.109s0.641-1.594,0.37-2.41l-16.625-50.045L86.503,28.953c-0.36-1.097-1.383-1.839-2.537-1.842H64.532c-1.153-0.001-2.178,0.736-2.542,1.831L13.847,173.457c-0.271,0.816-0.135,1.713,0.369,2.412c0.503,0.697,1.311,1.109,2.171,1.109h15.872c1.151,0,2.173-0.736,2.537-1.828l9.793-29.287C45.325,143.66,47.39,142.18,49.711,142.188L49.711,142.188z M53.493,119.098l15.607-46.9c0.744-2.196,2.806-3.674,5.125-3.674s4.381,1.478,5.125,3.674l15.607,46.904c0.537,1.621,0.263,3.402-0.736,4.789c-1.018,1.408-2.649,2.24-4.386,2.24H58.615c-1.736,0-3.368-0.832-4.386-2.24C53.23,122.504,52.956,120.721,53.493,119.098L53.493,119.098z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.633,190.465,66.178,190.465,63.32L190.465,63.32z M190.465,101.994c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.887,1.026,5.352,3.056,7.395c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.994L190.465,101.994z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z\"/></g></svg>',\n  more_paragraph: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"10 10 180 180\"><g><path d=\"M128.39,28.499H63.493c-25.558,0-46.354,20.796-46.354,46.354c0,25.559,20.796,46.353,46.354,46.353h9.271v55.625h18.542V47.04h9.271V176.83h18.543V47.04h9.271V28.499z M72.764,102.664h-9.271c-15.337,0-27.813-12.475-27.813-27.812c0-15.336,12.476-27.813,27.813-27.813h9.271V102.664z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.633,190.465,66.178,190.465,63.32L190.465,63.32z M190.465,101.994c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.887,1.026,5.352,3.056,7.395c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.994L190.465,101.994z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z\"/></g></svg>',\n  more_plus: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"35 30 140 140\"><g><path d=\"M137.215,102.045c0,3.498-2.835,6.332-6.333,6.332H24.549c-3.498,0-6.334-2.834-6.334-6.332l0,0c0-3.498,2.836-6.333,6.334-6.333h106.333C134.38,95.711,137.215,98.547,137.215,102.045L137.215,102.045z M77.715,161.545c-3.498,0-6.333-2.836-6.333-6.334V48.878c0-3.498,2.836-6.333,6.333-6.333l0,0c3.498,0,6.334,2.835,6.334,6.333v106.333C84.049,158.709,81.213,161.545,77.715,161.545L77.715,161.545z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.632,190.465,66.177,190.465,63.32L190.465,63.32z M190.465,101.993c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.888,1.026,5.353,3.056,7.396c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.993L190.465,101.993z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z\"/></g></svg>',\n  more_horizontal: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.76 3.58\"><g><path d=\"M4.64,10.73a1.84,1.84,0,0,1,.65-.65,1.76,1.76,0,0,1,1.79,0A1.79,1.79,0,0,1,8,11.63a1.84,1.84,0,0,1-.25.9,1.69,1.69,0,0,1-.65.65,1.8,1.8,0,0,1-2.69-1.55A2.08,2.08,0,0,1,4.64,10.73Zm6.09,0a1.84,1.84,0,0,1,.65-.65,1.78,1.78,0,0,1,2.67,1.55,1.73,1.73,0,0,1-.24.9,1.84,1.84,0,0,1-.65.65,1.76,1.76,0,0,1-1.79,0,1.79,1.79,0,0,1-.64-2.44Zm6.08,0a1.69,1.69,0,0,1,.65-.65,1.76,1.76,0,0,1,1.79,0,1.79,1.79,0,0,1,.9,1.54,1.73,1.73,0,0,1-.24.9,1.84,1.84,0,0,1-.65.65,1.8,1.8,0,0,1-2.69-1.55A2,2,0,0,1,16.81,10.73Z\" transform=\"translate(-4.39 -9.84)\"/></g></svg>',\n  more_vertical: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 3.94 15.75\"><g><path d=\"M12.28,7.69a1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39,1.92,1.92,0,0,1,.58-1.39,2,2,0,0,1,1.39-.58,1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39,1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58Zm0,2a1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39A1.92,1.92,0,0,1,13.67,13a2,2,0,0,1-1.39.58A1.92,1.92,0,0,1,10.89,13a2,2,0,0,1-.58-1.39,2,2,0,0,1,2-2Zm0,5.9a1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39,1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58,1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39,1.92,1.92,0,0,1,.58-1.39,1.94,1.94,0,0,1,1.39-.58Z\" transform=\"translate(-10.31 -3.75)\"/></g></svg>',\n  // Not currently used\n  attachment: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 8.38 15.68\"><g><path d=\"M15.23,6h1v9.78a3.88,3.88,0,0,1-1.31,2.45,4,4,0,0,1-6.57-2.45V7A3,3,0,0,1,9.2,4.89a3,3,0,0,1,5,2.09v8.31a1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58,1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39V8h1v7.32a1,1,0,0,0,.29.69,1,1,0,0,0,.69.28A.9.9,0,0,0,13,16a1,1,0,0,0,.29-.69V7a1.92,1.92,0,0,0-.58-1.39A2,2,0,0,0,11.27,5a1.92,1.92,0,0,0-1.39.58A2,2,0,0,0,9.33,7v8.31a3,3,0,1,0,5.9,0V6Z\" transform=\"translate(-8.08 -3.78)\"/></g></svg>',\n  map: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 11.7 15.62\"><g><path d=\"M12.05,12.42a2.93,2.93,0,1,1,2.07-5A2.88,2.88,0,0,1,15,9.49a3,3,0,0,1-.86,2.07,2.89,2.89,0,0,1-2.07.86Zm0-5.36a2.43,2.43,0,0,0-1.72,4.16,2.48,2.48,0,0,0,1.72.72,2.44,2.44,0,0,0,0-4.88Zm0-3.3A5.84,5.84,0,0,1,17.9,9.62a9.94,9.94,0,0,1-1.73,5A33.59,33.59,0,0,1,12.84,19a1.52,1.52,0,0,1-.23.2,1,1,0,0,1-.55.2h0a1,1,0,0,1-.55-.2,1.52,1.52,0,0,1-.23-.2,33.59,33.59,0,0,1-3.33-4.32,9.93,9.93,0,0,1-1.72-5,5.84,5.84,0,0,1,5.85-5.86ZM12,18.34l.08.05.06-.06a35.58,35.58,0,0,0,3.06-3.93,9.35,9.35,0,0,0,1.74-4.77,4.88,4.88,0,0,0-4.88-4.88A4.79,4.79,0,0,0,8.6,6.17,4.84,4.84,0,0,0,7.17,9.62,9.29,9.29,0,0,0,8.91,14.4,36,36,0,0,0,12,18.34Z\" transform=\"translate(-6.2 -3.76)\"/></g></svg>',\n  magic_stick: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 15.73 15.75\"><g><path d=\"M19.86,19.21a1,1,0,0,0,.28-.68,1,1,0,0,0-.28-.7L13,10.93a1,1,0,0,0-.7-.28,1,1,0,0,0-.68,1.65l6.9,6.9a1,1,0,0,0,.69.29.93.93,0,0,0,.69-.28ZM9.19,8.55a3,3,0,0,0,1.68,0,14.12,14.12,0,0,0,1.41-.32A11.26,11.26,0,0,0,10.8,7.06c-.56-.36-.86-.56-.91-.58S10,5.91,10,5.11s0-1.26-.15-1.37a4.35,4.35,0,0,0-1.19.71c-.53.4-.81.62-.87.68a9,9,0,0,0-2-.6,6.84,6.84,0,0,0-.76-.09s0,.27.08.77a8.6,8.6,0,0,0,.61,2q-.09.09-.69.87a3.59,3.59,0,0,0-.68,1.17c.12.17.57.23,1.36.15S7,9.26,7.15,9.23s.21.36.57.91a10.49,10.49,0,0,0,1.14,1.48c0-.1.14-.57.31-1.4a3,3,0,0,0,0-1.67Z\" transform=\"translate(-4.41 -3.74)\"/></g></svg>',\n  empty_file: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox =\"0 0 12.78 15.75\"><g><path d=\"M14.73,3.76,18.67,7.7v9.84a2,2,0,0,1-2,2H7.84a1.89,1.89,0,0,1-1.38-.58,2,2,0,0,1-.57-1.39V5.73a1.93,1.93,0,0,1,.57-1.38,2,2,0,0,1,1.38-.58h6.62l.26,0v0Zm2.95,4.92h-2a1.93,1.93,0,0,1-1.38-.57,2,2,0,0,1-.58-1.4V6.17c0-.36,0-.84,0-1.43H7.85a1,1,0,0,0-.7.29,1,1,0,0,0-.29.7V17.54a1,1,0,0,0,.29.69,1,1,0,0,0,.69.29h8.85a1,1,0,0,0,.71-.29.92.92,0,0,0,.28-.69Zm0-1L14.73,4.74v2A1,1,0,0,0,15,7.4a1,1,0,0,0,.69.29Z\" transform=\"translate(-5.89 -3.76)\"/></g></svg>'\n};\nexports.default = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\r\n * KothingEditor\r\n *\r\n * The WYSIWYG Rich Text Editor\r\n * Copyright Kothing.\r\n * MIT license.\r\n */\n(function (global, factory) {\n  if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\" && _typeof(module.exports) === \"object\") {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error(\"KothingEditor_LANG a window with a document\");\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== \"undefined\" ? window : void 0, function (window, noGlobal) {\n  var lang = {\n    code: \"en\",\n    toolbar: {\n      default: \"Default\",\n      save: \"Save\",\n      font: \"Font\",\n      formats: \"Formats\",\n      fontSize: \"Size\",\n      bold: \"Bold\",\n      underline: \"Underline\",\n      italic: \"Italic\",\n      strike: \"Strike\",\n      subscript: \"Subscript\",\n      superscript: \"Superscript\",\n      removeFormat: \"Remove Format\",\n      fontColor: \"Font Color\",\n      hiliteColor: \"Highlight Color\",\n      indent: \"Indent\",\n      outdent: \"Outdent\",\n      align: \"Align\",\n      alignLeft: \"Align left\",\n      alignRight: \"Align right\",\n      alignCenter: \"Align center\",\n      alignJustify: \"Align justify\",\n      list: \"List\",\n      orderList: \"Ordered list\",\n      unorderList: \"Unordered list\",\n      horizontalRule: \"Horizontal line\",\n      hr_solid: \"Solid\",\n      hr_dotted: \"Dotted\",\n      hr_dashed: \"Dashed\",\n      table: \"Table\",\n      link: \"Link\",\n      math: \"Math\",\n      image: \"Image\",\n      video: \"Video\",\n      audio: \"Audio\",\n      fullScreen: \"Full screen\",\n      showBlocks: \"Show blocks\",\n      codeView: \"Code view\",\n      undo: \"Undo\",\n      redo: \"Redo\",\n      preview: \"Preview\",\n      print: \"print\",\n      tag_p: \"Paragraph\",\n      tag_div: \"Normal (DIV)\",\n      tag_h: \"Header\",\n      tag_blockquote: \"Quote\",\n      tag_pre: \"Code\",\n      template: \"Template\",\n      lineHeight: \"Line height\",\n      paragraphStyle: \"Paragraph style\",\n      textStyle: \"Text style\",\n      imageGallery: \"Image gallery\",\n      mention: \"Mention\"\n    },\n    dialogBox: {\n      linkBox: {\n        title: \"Insert Link\",\n        url: \"URL to link\",\n        text: \"Text to display\",\n        newWindowCheck: \"Open in new window\",\n        downloadLinkCheck: \"Download link\",\n        bookmark: \"Bookmark\"\n      },\n      mathBox: {\n        title: \"Math\",\n        inputLabel: \"Mathematical Notation\",\n        fontSizeLabel: \"Font Size\",\n        previewLabel: \"Preview\"\n      },\n      imageBox: {\n        title: \"Insert image\",\n        file: \"Select from files\",\n        url: \"Image URL\",\n        altText: \"Alternative text\"\n      },\n      videoBox: {\n        title: \"Insert Video\",\n        file: \"Select from files\",\n        url: \"Media embed URL, YouTube/Vimeo\"\n      },\n      audioBox: {\n        title: \"Insert Audio\",\n        file: \"Select from files\",\n        url: \"Audio URL\"\n      },\n      browser: {\n        tags: \"Tags\",\n        search: \"Search\"\n      },\n      caption: \"Insert description\",\n      close: \"Close\",\n      submitButton: \"Submit\",\n      revertButton: \"Revert\",\n      proportion: \"Constrain proportions\",\n      basic: \"Basic\",\n      left: \"Left\",\n      right: \"Right\",\n      center: \"Center\",\n      width: \"Width\",\n      height: \"Height\",\n      size: \"Size\",\n      ratio: \"Ratio\"\n    },\n    controller: {\n      edit: \"Edit\",\n      unlink: \"Unlink\",\n      remove: \"Remove\",\n      insertRowAbove: \"Insert row above\",\n      insertRowBelow: \"Insert row below\",\n      deleteRow: \"Delete row\",\n      insertColumnBefore: \"Insert column before\",\n      insertColumnAfter: \"Insert column after\",\n      deleteColumn: \"Delete column\",\n      fixedColumnWidth: \"Fixed column width\",\n      resize100: \"Resize 100%\",\n      resize75: \"Resize 75%\",\n      resize50: \"Resize 50%\",\n      resize25: \"Resize 25%\",\n      autoSize: \"Auto size\",\n      mirrorHorizontal: \"Mirror, Horizontal\",\n      mirrorVertical: \"Mirror, Vertical\",\n      rotateLeft: \"Rotate left\",\n      rotateRight: \"Rotate right\",\n      maxSize: \"Max size\",\n      minSize: \"Min size\",\n      tableHeader: \"Table header\",\n      mergeCells: \"Merge cells\",\n      splitCells: \"Split Cells\",\n      HorizontalSplit: \"Horizontal split\",\n      VerticalSplit: \"Vertical split\"\n    },\n    menu: {\n      spaced: \"Spaced\",\n      bordered: \"Bordered\",\n      neon: \"Neon\",\n      translucent: \"Translucent\",\n      shadow: \"Shadow\",\n      code: \"Code\"\n    }\n  };\n\n  if (_typeof(noGlobal) === (typeof undefined === \"undefined\" ? \"undefined\" : _typeof(undefined))) {\n    if (!window.KothingEditor_LANG) {\n      Object.defineProperty(window, \"KothingEditor_LANG\", {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.KothingEditor_LANG, \"en\", {\n      enumerable: true,\n      writable: true,\n      configurable: true,\n      value: lang\n    });\n  }\n\n  return lang;\n});"],"sourceRoot":""}